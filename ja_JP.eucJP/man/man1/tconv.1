.\" @(#) mytinfo tconv.1 3.2 92/02/01 public domain, By Ross Ridge
.\" jpman %Id: tconv.1,v 1.3 1997/09/21 06:56:54 konuma Stab %
.\" %Id: tconv.1,v 1.5.2.1 1997/08/14 06:37:58 charnier Exp %
.\"
.Dd February 1, 1992
.Dt TCONV 1
.Os
.Sh 名称
.Nm tconv
.Nd termcap, terminfo ソースと terminfo バイナリを相互変換する
.Sh 書式
.Nm tconv
.Op Fl b
.Op Fl c Op Fl OUGd
.Op Fl i
.Op Fl B Op Fl D Ar dir
.Op Fl I
.Op Fl k
.Op Fl V
.Op Fl t Ar term
.Op Ar file
.Nm tic
.Op Ar file
.Nm captoinfo
.Op Fl t Ar term
.Op Fl OUGdk
.Op Ar file
.Sh 解説
.Nm tconv
は、termcap、terminfo ソースと
.Em tinfo
ライブラリが使用する terminfo バイナリ
の 3 つの端末記述を互いに変換します。
このプログラムは
System V の
.Xr captoinfo 1
および
.Xr tic 1
と同じ機能を提供します。
また、System V の
.Xr infocmp 1
の機能の 1 つと同じく、terminfo バイナリから terminfo ソース
リスティングを出力するのに使うこともできます。
.Pp
翻訳オプション
.Bl -tag -width indent
.It Fl c
termcap から変換します。
.It Fl i
terminfo ソースから変換します。
.It Fl b
terminfo バイナリから変換します。
.It Fl B
terminfo バイナリに変換します。
.It Fl I
terminfo ソースに変換します。
.El
.Pp
ファイルを指定する場合、
.Fl c
または
.Fl i
オプションのどちらか一方と、翻訳されるファイルの完全な名前
を指定する必要があります。
ファイル名を指定しなかった場合、入力オプションは単に、
翻訳されるべき端末がある、要求された型の記述がありそうな場所を
検索するのを制限するだけに用いられます。
(すなわち、
.Fl c
オプション指定時には
.Ev TERMCAP
環境変数と
.Pa /usr/share/misc/termcap
を、
.Fl i
オプション指定時には
.Ev TERMINFO
環境変数と
.Pa /usr/lib/terminfo
を検索します。) それ以外の時は
.Nm
は全ての利用可能なデータベースを検索します。
もし、
.Fl I
と
.Fl B
のどちらのオプションも指定していない場合は、
.Fl I
オプションを指定したものと仮定します。
.Fl B
オプションを指定した場合、コンパイル結果の出力は terminfo データベースに
出力され、指定していない場合は標準出力に出力されます。
.Pp
terminfo バイナリから terminfo バイナリへの翻訳はできません。
terminfo ソースから terminfo ソースへの翻訳は可能ですが、
.Em use=
フィールドで参照している記述が、出力される端末記述に展開されるような場合を
除いては、ほとんどの場合あまり役に立ちません。
.Pp
.Nm
は標準 termcap の全てのパラメータ化された文字列を terminfo フォーマットに
翻訳できるはずですが、GNU の %a コードを使った複雑な文字列は難しすぎて
翻訳できません。
もし、
.Nm
が、termcap 文字列が 既に terminfoフォーマットに翻訳されていると見なした場合
(%p コードが文字列に含まれている場合)、
それを翻訳しようと試みることはありません。
パラメータを持たない文字列型機能記述は翻訳されません。
.Pp
Termcap オプション
以下のオプションは、termcap エントリを翻訳するとき
(
.Fl c
オプションを指定したとき) に利用可能です。
.Bl -tag -width indent
.It Fl d
欠けている機能記述を、一切デフォルトで補いません。
.It Fl O
時代遅れの termcap 機能記述を含めます。
.It Fl G
GNU の機能記述を含めます。
.It Fl U
UW の機能記述を含めます。
.El
.Pp
その他のオプション
.Bl -tag -width indent
.It Fl k
ファイルを翻訳する時にコメントを保存します。
.It Fl V
バージョン情報を表示して終了します。
.It Fl D Ar dir
terminfo バイナリを置くディレクトリ。
.It Fl t Ar term
翻訳の対象となる端末の名前。
.El
.Pp
もし
.Fl t
オプションで端末名を指定しなかった場合、翻訳の対象となる端末名は環境変数
.Ev TERM
から取られます。
.Sh 関連ファイル
.Bl -tag -width /usr/lib/terminfo/terminfo.src -compact
.It Pa /usr/lib/terminfo
terminfo バイナリを読み書きするデフォルトの場所。
.It Pa /usr/lib/terminfo/terminfo.src
terminfo ソースファイルのデフォルトのファイル名。
.It Pa /etc/termcap
termcap データベースのデフォルトのファイル名。
.El
.Sh 関連項目
.Xr curses 3 ,
.Xr termcap 3 ,
.Xr term 5 ,
.Xr termcap 5 ,
.Xr terminfo 5 .
.Sh 診断
ファイルを翻訳しているときの警告メッセージの行番号は
エントリ内の警告の原因となった行ではなく、そのエントリの最後の行の番号です。
.Sh バグ
もっと多くの警告を出力できるはずです。
.Nm
は termcap を翻訳できません。
生成されたバイナリはキャンセルされた機能記述をキャンセルされた
物とマークしたうえで含めていますが、これは
System V Release 2.0 の terminfo と非互換です。
