.\" %FreeBSD: src/usr.bin/ncplogin/ncplogin.1,v 1.4 2000/03/06 09:45:30 sheldonh Exp %
.Dd Sep 15, 1999
.\" jpman %Id: ncplogin.1,v 1.3 2000/04/19 02:38:14 horikawa Stab %
.Dt NCPLOGIN 1
.Os FreeBSD 4.0
.Sh 名称
.Nm ncplogin
.Nd NetWare サーバへの持続的なコネクションを生成する
.Sh 書式
.Nm ncplogin
.Op Fl S Ar server Fl U Ar user
.Op Fl A Ar host
.Op Fl B
.Op Fl C
.Op Fl D
.Op Fl I Ar level
.Op Fl M Ar mode
.Op Fl N
.\" hm, which is right way to do this ?
.Op Fl O Ar owner Op :group
.Op Fl O Ar :group
|
.Op Fl R Ar retrycount
.Op Fl T Ar tree
.Op Fl W Ar timeout
.Ar /server:user
.Sh 解説
NetWare サーバへのコネクションは、
.Xr mount_nwfs 8
とは独立に、作成および使用可能です。
.\" revision 1.5 からは independently of mount_nwfs(8) になっている
.\" horikawa@jp.FreeBSD.org 2000/04/11
コネクションはどのユーザ
にも作成することができます。それぞれのユーザは複数のコネクションを持つ
ことができますが、NetWare サーバ : NetWare ユーザの組は一意である必要
があります。
.Pp
.Nm ncplogin
コマンドは NetWare サーバとの持続的なコネクションを作成します。持続的な
コネクションは、それを使用するアプリケーションがなくなっても残ります。
これによってユーザは ncp* プログラムをファイルサーバやユーザ名を指定せずに
使用することができるようになります。コネクションは
.Xr ncplogout 1 
コマンドによって解除されます。
.Pp
このマニュアルで解説している大文字のオプションは他の ncp* プログラムと共通で、
.Ar connection options
として参照されます。
.Fl U
及び
.Fl S
オプションは、
.Ar /server:user
という書式と排他的に作用します。
.Pp
オプションは以下の通りです。
.Bl -tag -width indent
.It Fl S Ar server
接続する NetWare サーバ名を指定します。これは IPX サーバにのみ有効です。
ネイティブ IP サーバについては
.Fl A
オプションを参照してください。
.It Fl U Ar user
ログイン手続きで使用するユーザ名を指定します。
.It Fl A Ar host
.Ar host
パラメータで指定した NetWare 5.x サーバへの接続に UDP プロトコルを用います。
.It Fl C
パスワードを大文字に変換しません。
.It Fl D
コネクションをプライマリとしてマークします。既に作成されているコネクションに
変更を加えることができます。
.Nm
プログラムだけがこのオプションを理解します。
.It Fl I Ar signature_level
.Ar signature_level 
を使用しようとします。
.Bd -literal -offset indent
値      意味
0	署名を禁止します。
1	サーバが要求すれば署名を許可します。
2	サーバに署名を要求しますが、署名なしでも動作することを許可します。
3	署名を要求します。
.Ed
パケットヘッダへの署名だけが実装されていることに注意してください。
.It Fl M Ar mode
ファイルと同じようにコネクションもユーザ間で共有されます。その際に、
.Ar mode
引数のビットがファイルのパーミッションのようにふるまいます。
.Bd -literal -offset indent
マスク  意味
4	READ    - コネクションを見ることができます。
2	WRITE   - コネクションを閉じたり、変更することができます。
1	EXECUTE - ユーザはリクエストを実行することができます。
.Ed
デフォルトではコネクションはモード 0700 で作成され、
所有者のみがそれを任意に使用することができます。
コネクションを共有したい場合に、たとえばグループとの共有で
あれば 0750 のように値を指定することができます。これは同一グループから NCP
リクエストを行なうことはできるが、接続を解除することはできないということです。
ユーザが使用するサーバを明確に指定しなかった場合、ncp* プログラムは次の手順
で適切なコネクションを探します。
.Pp
1. ユーザが所有しているコネクションを探します。
それが複数あればどれがプライマリであるかを探します。プライマリフラグは
.Fl D
オプションで制御できます。
.Pp
2. 見つからなかった場合は、最初の共有コネクションが使用されます。
.It Fl N
パスワードを要求しません。
.Nm
を読み込むと ~/.nwfsrc ファイルから設定の追加とパスワードが読み込まれます。
もし指定されたサーバとユーザの組合せのパスワードが存在しなければ、
.Nm
はそれを要求するプロンプトを表示します。
.It Fl O
ファイルと同じように、コネクションも
.Ar owner
と
.Ar group
の属性を持っています。新しく作成されたコネクションでは
.Ar owner
パラメータに作成者のユーザ ID が、
.Ar group
パラメータに作成者のプライマリグループが使用されます。
これはこのオプションによって変更することができます。
.Ar owner
を変更できるのはスーパユーザだけです。
.It Fl P
接続を持続的なものとしてマークします。
.Nm
は常に持続的なコネクションを作成します。このオプションは他の ncp* プログラム
で使用可能です。
.It Fl R Ar retry_count
接続をあきらめる前の再試行回数を指定します。既定値は 10 です。

注意: コネクションが 'BAD' とマークされたあとは、リクエスト毎にそれを回復
しようと試みます。このプロセスは NCP コネクションだけを回復しようとしますが、
オープンされているファイルを再オープンしようとはしません。
.It Fl W Ar timeout
サーバへのリクエスト時のタイムアウト時間を秒単位で指定します。
既定値は 5 秒です。
.It Ar /server:user
この文法は単純な操作のために提供されており、
.Fl S
及び
.Fl U
オプションと排他的に作用します。
.El
.Sh 関連ファイル
.Bl -tag -width /var/log/wtmp -compact
.It Pa ~/.nwfsrc
はコネクションやその他の情報に関して静的なパラメータを保持します。詳細は
.Pa /usr/share/examples/nwclient/dot.nwfsrc
を参照してください。

.Sh 注
低レベルの接続管理は ncp.ko モジュールで実現されます。
IPX プロトコルに関してはさらに IPXrouted プログラムを読み込む必要があります。

.Sh バグ
若干あるかもしれません。

.Sh 作者
.An Boris Popov Aq bp@butya.kz ,
.Aq rbp@chat.ru
