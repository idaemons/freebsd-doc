.\" ++Copyright++ 1993
.\" -
.\" Copyright (c) 1993
.\"    The Regents of the University of California.  All rights reserved.
.\" 
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\" 	This product includes software developed by the University of
.\" 	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\" 
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\" -
.\" Portions Copyright (c) 1993 by Digital Equipment Corporation.
.\" 
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies, and that
.\" the name of Digital Equipment Corporation not be used in advertising or
.\" publicity pertaining to distribution of the document or software without
.\" specific, written prior permission.
.\" 
.\" THE SOFTWARE IS PROVIDED "AS IS" AND DIGITAL EQUIPMENT CORP. DISCLAIMS ALL
.\" WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS.   IN NO EVENT SHALL DIGITAL EQUIPMENT
.\" CORPORATION BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
.\" DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
.\" PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
.\" ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS
.\" SOFTWARE.
.\" -
.\" --Copyright--
.\" %Id: host.1,v 8.1 1994/12/15 06:24:10 vixie Exp %
.\" jpman %Id: host.1,v 1.3 1997/08/20 12:10:27 horikawa Stab %
.TH HOST 1
.SH 名称
host \- ドメインサーバを使ってホスト名の検索を行なう
.SH 書式
host [-l] [-v] [-w] [-r] [-d] [-t querytype] [-a] host [ server ] 
.SH 解説 
.I host
はインターネットホストに関する情報の検索を行ないます。情報は世界中に広
がった相互に接続されたサーバ群から得ます。デフォルトではホスト名と
インターネットアドレス間の変換のみを行ないます。-t や -a オプションととも
に使うと、そのホストに関するドメインサーバによって保守されている情報の
全てを使うことができます。
.PP
引数にはホスト名かホスト番号のいずれかを指定できます。本プログラムはま
ず引数を数字として解釈を試みます。それがうまく行かなければ、ホスト名と
して扱います。ホスト番号は 128.6.4.194 のようにドットによって区切られ
た 4 つの 10 進数からなります。
ホスト名は topaz.rutgers.edu のようにドットで区切られた複数の名前から
なります。
名前がドットで終っていなければ、ローカルドメインが自動的に末尾に付け加
えられます。たとえば Rutgers のユーザは "host topaz" というように使う
ことができ、これは実際には "topaz.rutgers.edu" が検索されます。
これがうまく行かなければ、名前は変更されずに (この例では "topaz" とし
て) 試みられます。このやりかたはメールやその他のネットワークユーティリティ
でも使うことができます。
実際に末尾に付け加えられる接尾子は "hostname" コールの結果から得られる
ものの最初のドット以降となります。(ホスト名の検索のカスタマイズ方法に
ついては下記を参照してください。)
.PP
最初の引数は検索を行なうホスト名となります。これが数字の場合、"逆引き" 
が実行されます。すなわちドメインシステムは数字を名前に変換するための別
のデータベース群を参照します。
.PP
2 番目の引数は省略可能です。ここでは問い合わせを行なうサーバを指定する
ことができます。この引数が指定されなければ、デフォルトのサーバ (通常は
ローカルマシン) が使われます。
.PP
名前が指定された場合、3 つの異なった種類の結果が出力されます。
以下はそれらの例です。
.br
   % host sun4
.br
   sun4.rutgers.edu is a nickname for ATHOS.RUTGERS.EDU
.br
   ATHOS.RUTGERS.EDU has address 128.6.5.46
.br
   ATHOS.RUTGERS.EDU has address 128.6.4.4
.br
   ATHOS.RUTGERS.EDU mail is handled by ARAMIS.RUTGERS.EDU
.br
ここでユーザはコマンド "host sun4" を入力しています。最初の行は名前 
"sun4.rutgers.edu" は実際にはニックネームであることを示しています。
正式なホスト名は "ATHOS.RUTGERS.EDU' です。続く 2 行ではアドレスが表示
されています。もし複数のネットワークインターフェイスをもつシステムであ
れば、その各々は別のアドレスを持ちます。最後の行では ATHOS.RUTGERS.EDU
は自分に対するメールは受け取らないことを示しています。このホスト宛ての
メールは ARAMIS.RUTGERS.EDU によって取り込まれます。いくつかのシステム
ではそのメールを扱うシステムが複数存在することがあり、その場合はこの行
のような情報がさらに出力されます。技術的にはメールを受け取ることのでき
る全てのシステムがこのようなエントリを持つと考えられます。もしシステム
がそのメールを自分自身で受け取る場合、"XXX mail is handled by XXX" の
ように、そのシステム自身について言及したエントリがあるはずです。しかし、
メールを自分で受け取る多くのシステムではわざわざその事実について言及し
ていません。もしあるシステムに "mail is handled by" のエントリがあるの
にアドレスがなければ、それは本当はインターネットの構成員ではないが、
ネットワーク上のあるシステムがメールをそこに転送してくることを示しています。
Usenet や Bitnet やその他の多くのネットワーク上のシステムではこの種の
エントリを持っています。
.PP
ホスト名の前に指定できるオプションは沢山あります。これらのオプションの
ほとんどはドメインデータベースを保守しているスタッフにのみ意味のあるも
のです。
.PP
オプション -w を指定すると、host は応答があるまで永遠に待ち続けます。通
常は 1 分程でタイムアウトになります。
.PP
オプション -v を指定すると、"verbose" 形式で表示されます。これは正式な
ドメインマスタのファイル形式となります。この形式については "named" の 
man ページに文書化されています。このオプションがなくても出力の形式は一
般的な意味ではこの正式な形式に準拠したものとなりますが、通常のユーザに
とって分かりやすいものにされます。-v が指定されなければ、"a"、"mx"、
"cname" の各レコードはそれぞれ"has address"、"mail is handled by"、
"is a nickname for" と出力され、TTL とクラスフィールドは表示されません。 
.PP
オプション -r を指定すると、再帰的な問い合わせを行ないません。これは
ネームサーバがそのサーバ自身のデータベースに所持しているデータのみを返すこ
とを意味します。サーバは他のサーバに情報の問い合わせを行ないません。
.PP
オプション -d を指定すると、デバッグモードとなります。ネットワーク
トランザクションが詳細に表示されます。
.PP
オプション -t によって特定のタイプの情報の検索を指定することができます。
引数は "named" の man ページにおいて定義されています。現在サポートされ
ているタイプには a、ns、md、mf、cname、soa、mb、mg、mr、null、wks、ptr、
hinfo、minfo、mx、uinfo とワイルドカード (これは "any" か "*" として指
定されます) があります。タイプは小文字で指定しなければなりません。
デフォルトでは最初に "a" が検索され、次に "mx" が検索されます。ただし、
"verbose" オプションが指定されていると、デフォルトでは "a" のみの検索
を行ないます。
.PP
オプション -a ("all" の意) は "-v -t any" と同じです。
.PP
オプション -l を指定すると完全なドメインのリストを表示します。例えば
.br
   host -l rutgers.edu
.br
を実行すると、rutgers.edu ドメインの全てのホストのリストを表示します。
-t オプションを使うことによって表示する情報にフィルタをかけることがで
きます。デフォルトでは PTR と NS レコードを含んだアドレス情報が表示さ
れます。
.br
   host -l -v -t any rutgers.edu
.br
のコマンドでは rutgers.edu の完全なゾーンデータを正式なマスタファイル
の形式でダウンロードします。(しかし不思議な理由により SOA レコードは 2 
回リストされます。) ノート : -l フラグは完全なゾーン転送を行なった後、
要求した情報をフィルタリングするように実装されています。このコマンドは
絶対に必要な時に限って使うべきです。
.SH ホスト名検索のカスタマイズ
一般にユーザによって指定された名前にドットが含まれていなければ、
デフォルトのドメインがその末尾に付け加えられます。このドメインは
/etc/resolv.conf において定義することができますが、通常はローカルの
ホスト名の最初のドット以降を取ることによって求められます。ユーザは環境変数
.I LOCALDOMAIN
を使って異なるデフォルトドメインを指定することによって、これを
オーバーライドすることができます。さらに、ユーザはホスト名の独自の略称を使うこ
ともできます。略称は 1 つの略称につき 1 行からなるファイルにおいて指定
します。各行には略称、スペース、そして完全なホスト名が含まれます。この
ファイルは環境変数
.I HOSTALIASES
にてファイル名を指定します。
.SH 関連項目
named (8)
.SH バグ
ローカルドメインに含まれない名前を入力すると予期できない影響が起こり得
ます。名前がドットで終っていない限り、ローカルドメイン名が全ての名前の
末尾に付加されることをいつも心に留めておいてください。
ローカルドメインの補完に失敗した時のみ、名前は変更されずに使用されます。
.PP
-l オプションでは要求されたドメインにおいてリストされている最初の
ネームサーバにのみ問い合わせを行ないます。もしこのサーバが死んでいれば、
サーバをマニュアルで指定しなければなりません。たとえば foo.edu のリストを
得るには、"host -t ns foo.edu" と指定して foo.edu の全てのネームサーバ
のリストを得てから、動作するものが見つかるまでリストにある全ての
ネームサーバについて "host -l foo.edu xxx" (ここで xxx はネームサーバ) を試
みれば良いでしょう。
