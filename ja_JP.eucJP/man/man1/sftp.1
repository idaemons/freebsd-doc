.\" $OpenBSD: sftp.1,v 1.17 2001/04/22 13:32:27 markus Exp $
.\"
.\" Copyright (c) 2001 Damien Miller.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" %FreeBSD%
.\" $FreeBSD$
.Dd February 4, 2001
.Dt SFTP 1
.Os
.Sh 名称
.Nm sftp
.Nd 安全なファイル転送プログラム
.Sh 書式
.Nm sftp
.Op Fl vC
.Op Fl b Ar バッチファイル
.Op Fl o Ar sshオプション
.Op Ar ホスト名
.Nm sftp
.Op [\fIユーザ\fR@]\fIホスト名\fR[:\fIファイル\fR [\fIファイル\fR]]
.Nm sftp
.Op [\fIユーザ\fR@]\fIホスト名\fR[:\fIディレクトリ\fR[\fI/\fR]] 
.Sh 解説
.Nm
は
.Xr ftp 1
に似た対話的なファイル転送プログラムです。
すべての操作は
.Xr ssh 1
によって暗号化された
通信路を経由して行われます。
.Nm
では公開鍵認証や圧縮機能など、ssh の機能の多くを利用できます。
.Nm
は指定された
.Ar ホスト名
に接続してログインしたあと、対話的なコマンドモードに入ります。
.Pp
2番目の書式では、
対話的でない (訳注: ユーザがパスフレーズ等を入力する必要のない) 認証が
使われている場合は自動的にファイルを取得します。
そうでない場合は対話的な認証ののちにファイルを取得します。
.Pp
3番目の書式は、指定されたリモートディレクトリから sftp 
クライアントを開始します。
.Pp
オプションは以下のとおりです:
.Bl -tag -width Ds
.It Fl b Ar バッチファイル
バッチモードに入り、
.Em 標準入力
のかわりに指定された
.Ar バッチファイル
からコマンド列を読み込みます。
これにはユーザが介入する余地がないので、このモードは
対話的でない (訳注: ユーザがパスフレーズ等を入力する必要のない) 認証と
組み合わせて使うべきでしょう。
.Nm
は以下のどれかのコマンドが失敗すると中断します:
.Ic get , put , rename , ln , rm , mkdir , chdir , lchdir , lmkdir
.It Fl C
圧縮機能を使用可能にします (ssh の
.Fl C
フラグを利用します)
.It Fl o Ar sshオプション
.Xr ssh 1
に直接渡されるオプションを指定します。
.It Fl v
ログに残すレベルを変更します。このオプションは ssh にも渡されます。
.El
.Sh 対話的コマンド
対話的コマンドモードでは、
.Xr ftp 1
に似たコマンドが使えます。これらのコマンドは
大文字でも小文字でも受けつけられ、空白文字を含むパス名は
クォートで囲むことができます。
.Bl -tag -width Ds
.It Ic cd Ar パス名
リモート側のカレントディレクトリを
.Ar パス名
に変更します。
.It Ic lcd Ar パス名
ローカル側のカレントディレクトリを
.Ar パス名
に変更します。
.It Ic chgrp Ar グループID Ar パス名
.Ar パス名
で指定されたファイルのグループを
.Ar グループID
に変更します。
.Ar グループID
は数値表現である必要があります。
.It Ic chmod Ar モード Ar パス名
.Ar パス名
で指定されたファイルのパーミッションを
.Ar モード
に変更します。
.It Ic chown Ar ユーザID Ar パス名
.Ar パス名
で指定されたファイルの所有者を
.Ar ユーザID
に変更します。
.Ar ユーザID
は数値表現である必要があります。
.It Ic exit
sftp を終了します。
.It Xo Ic get
.Op Ar フラグ
.Ar リモートパス名
.Op Ar ローカルパス名
.Xc
.Ar リモートパス名
のファイルを取得し、ローカルマシン上に置きます。
(訳注: ディレクトリを再帰的にまるごと get することはできません。)
ローカルパス名が指定されていない場合、これは
リモートマシン上でのファイル名と同じになります。
.Fl P
フラグが指定されると、そのファイルの全パーミッションおよび
アクセス時間もコピーされます。
.It Ic help
ヘルプを表示します。
.It Ic lls Op Ar lsオプション Op Ar パス名
ローカルマシン上の
.Ar パス名
のディレクトリ一覧を表示します。
.Ar パス名
の指定がなければ、カレントディレクトリの一覧を表示します。
.It Ic lmkdir Ar パス名
ローカルマシン上に
.Ar パス名
で指定されたディレクトリを作成します。
.It Ic ln Ar 古いパス名 Ar 新しいパス名
.Ar 新しいパス名
から
.Ar 古いパス名
へのシンボリックリンクを作成します。
.It Ic lpwd
ローカルマシン上のカレントディレクトリ
(ワーキングディレクトリ) 
を表示します。
.It Ic ls Op Ar パス名
リモートマシン上の
.Ar パス名
のディレクトリ一覧を表示します。
.Ar パス名
の指定がなければ、カレントディレクトリの一覧を表示します。
.It Ic lumask Ar umask
ローカルマシン上の umask を
.Ar umask 
に設定します。
.It Ic mkdir Ar パス名
リモートマシン上に
.Ar パス名
で指定されたディレクトリを作成します。
.It Xo Ic put
.Op Ar フラグ
.Ar ローカルパス名
.Op Ar リモートパス名
.Xc
.Ar ローカルパス名
のファイルをリモートマシン上にアップロードします。
(訳注: ディレクトリを再帰的にまるごと get することはできません。)
リモートパス名が指定されていない場合、これは
ローカルマシン上でのファイル名と同じになります。
.Fl P
フラグが指定されると、そのファイルの全パーミッションおよび
アクセス時間もコピーされます。
.It Ic pwd
リモートマシン上のカレントディレクトリ
(ワーキングディレクトリ) 
を表示します。
.It Ic quit
sftp を終了します。
.It Ic rename Ar 古いパス名 Ar 新しいパス名
リモートマシン上の
.Ar 古いパス名
で表されたファイルを
.Ar 新しいパス名
に変更します。
(訳注: ファイルやディレクトリを移動させることはできません。)
.It Ic rmdir Ar パス名
リモートマシン上の
.Ar パス名
で指定されるディレクトリを削除します。
(訳注: ファイルが含まれているディレクトリを削除することはできません。)
.It Ic rm Ar パス名
リモートマシン上の
.Ar パス名
で指定されるファイルを削除します。
.It Ic symlink Ar 古いパス名 Ar 新しいパス名
.Ar 新しいパス名
から
.Ar 古いパス名
へのシンボリックリンクを作成します。
.It Ic ! Ar コマンド
ローカルマシン上のシェルで、
.Ar コマンド
を実行します。
.It Ic !
ローカルマシン上のシェルに入ります。
.It Ic ?
help と同じです。
.El
.Sh 作者
Damien Miller <djm@mindrot.org>
.Sh 日本語訳
新山 祐介 (euske@cl.cs.titech.ac.jp) 2001/5/24
.Pp
当マニュアルページは氏のご好意により
.Fx
日本語マニュアルに収録させていただいています。
翻訳についてのご意見、ご指摘がありましたら新山氏
<euske@cl.cs.titech.ac.jp>、および
.Fx
jpman プロジェクト <man-jp@jp.FreeBSD.org> までお送りください。
.Sh 関連項目
.Xr scp 1 ,
.Xr ssh 1 ,
.Xr ssh-add 1 ,
.Xr ssh-keygen 1 ,
.Xr sftp-server 8 ,
.Xr sshd 8
.Rs
.%A T. Ylonen
.%A S. Lehtinen
.%T "SSH File Transfer Protocol"
.%N draft-ietf-secsh-filexfer-00.txt
.%D January 2001
.%O work in progress material
.Re
