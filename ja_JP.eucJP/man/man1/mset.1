.\" Copyright (c) 1986, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)mset.1	8.1 (Berkeley) 6/6/93
.\" jpman %Id: mset.1,v 1.3 1997/07/21 16:27:24 horikawa Stab %
.\"	%Id: mset.1,v 1.2 1993/08/01 07:27:43 mycroft Exp %
.\"
.Dd June 6, 1993
.Dt MSET 1
.Os BSD 4.3
.Sh 名称
.Nm mset
.Nd ASCII キーボードにおいて IBM 3270 のキー配置情報を得る
.Sh 書式
.Nm
.Op Fl picky
.Op Fl shell
.Op Ar keyboardname
.Sh 解説
.Nm
は
.Tn ASCII キーボードに
.Tn IBM
3270 端末の特殊機能をマッピングするための情報を得ます。
通常、このマッピング情報は
.Pa /user/share/misc/map3270
に存在しています(参照
.Xr map3270  5
) 。
このコマンドが捜し出す情報は
.Xr tn3270
コマンドで使用されます(参照
.Xr tn3270  1
) 。
.Pp
.Xr tn3270
を起動する度に毎回
.Pa map3270
を探索する事を避けるため、
デフォルトの
.Nm
コマンドの出力を使って、
プロセス環境中にマッピング情報を格納することができます。
この様にするためには、あなたの
.Pa .login
ファイル中に以下のコマンドを記述して下さい。
.Bd -literal -offset indent
set noglob; setenv MAP3270 "\(gamset\(ga"; unset noglob
.Ed
.Pp
もし
.Ar keyboardname
引数が指定されなければ、
.Nm
コマンドは、
環境変数
.Ev KEYBD
を調べ、ユーザの使っているキーボードの名前を決定しようとします。
もし環境変数
.Ev KEYBD
が設定されていない場合は、
.Nm
コマンドは、キーボードの名前として、環境変数
.Ev TERM
で定義されるユーザの端末タイプを使用します。
通常、
.Nm
コマンドは、
該当する端末タイプのキーボードマッピング情報を見つけようと
マップファイル
.Xr map3270 5
を使用します。しかし、環境変数
.Ev MAP3270
が定義されており、指定されたキーボード用のエントリが含まれていれば、そ
の定義を使用します。
環境変数
.Ev MAP3270
の値がスラッシュ(`/')で始まっていれば、その値を代わりのマッピングファ
イルのフルパス名として仮定し、そのマッピングファイルを最初に検索します。
環境変数中か、代わりのマップファイルの中か、標準のマップファイルの中か、
いずれの中にも、キーボード用のマッピング情報が見つからない場合には、
.Ar unknown
という名前を使ってキーボード用のエントリを検索します。もし検索出来ない
場合には、デフォルトのマッピング情報を使用します。
.Pp
.Nm
コマンドの引数は以下のとおりです。
.Pp
.Bl -tag -width Fl
.It Fl picky
色々な
.Pa map3270
ファイルのエントリ (ユーザが使用するキーボードエントリや、そのエントリ
の前にあるすべてのエントリ) を処理する際、
.Nm
コマンドは、通常、エントリ中に未知の機能があっても文句を言いません。(例えば、
.Dq PFX1
)。
.Fl picky
引数を指定すると、未知のエントリについて警告を発します。
.It Fl shell
.Nm
を起動する度に毎回
.Pa map3270
を探索しなくても良いようにプロセス環境中にマッピング情報を格納しようとした時、
.Pa map3270
ファイルのエントリが、シェルの環境変数の長さ制限 1024 バイトを越
える場合には格納できません。
.Fl shell
引数を指定すると、
.Ev MAP3270  ,
.Ev MAP3270A ,
等の環境変数を設定するためのシェルコマンドを生成し、シェルの環境
変数の長さ制限内に収まるようエントリを分割します。これらの環境変数を設
定するために、あなたの
.Pa .login
ファイル中に以下のコマンドを記述して下さい。
.Bd -literal -offset indent
mset -shell > tmp ; source tmp ; /bin/rm tmp
.Ed
.It Ar keyboardname
ユーザのキーボードに合う
.Pa map3270
ファイルのエントリを検索する際、
.Nm
コマンドは、環境変数
.Ev KEYBD
や
.Ev TERM
から得られるキーボード名を決定する代わりに
.Ar keyboardname
を使用します。
.Sh 関連ファイル
.Bl -tag -width /usr/share/misc/map3270 -compact
.It Pa /usr/share/misc/map3270
既知のキーボード用のマッピングデータ
.El
.Sh 関連項目
.Xr tn3270 1 ,
.Xr map3270 5
.Sh 歴史
.Nm
コマンドは
.Bx 4.3
で登場しました。
