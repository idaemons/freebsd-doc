.TH DNSQUERY 1 "10 March 1990"
.\" jpman %Id: dnsquery.1,v 1.3 1997/08/20 12:21:56 horikawa Stab %
.UC 6
.SH 名称
dnsquery \- リゾルバを用いて DNS に問い合わせる
.SH 書式
.B dnsquery
[-n
.I nameserver]
[-t
.I type]
[-c
.I class]
[-r 
.I retry] 
[-p 
.I retry period] 
[-d] [-s] [-v] host
.SH 解説
.IR dnsquery
プログラムは、BIND リゾルバのライブラリ呼び出しによって
ネームサーバとやりとりする一般的なインタフェースです。
本プログラムはオペコード QUERY によるネームサーバ問い合わせを
サポートしています。
本プログラムは、nstest, nsquery, nslookup のようなプログラムを
置き換えるあるいは補うものとして作成されました。
.IR host
と
.IR ns
以外の引数は大文字小文字を区別しません。
.SH オプション
.TP 1i
.B \-n
問い合わせに用いるネームサーバ。
ネームサーバ指定は、w.x.y.z 形式のインターネットアドレス表記でも、
ドメインネーム表記でも構いません。
(デフォルト: /etc/resolv.conf の指定)
.TP 1i
.B \-t
関心あるリソースレコード型。型には以下のものがあります:
.RS 1.5i
.TP 1i
A
アドレス
.PD 0
.TP 1i
NS
ネームサーバ
.TP 1i
CNAME
正式名
.TP 1i
PTR	
ドメインネームポインタ
.TP 1i
SOA	
Start of Authority
.TP 1i
WKS	
よく知られたサービス(well-known service)
.TP 1i
HINFO
ホスト情報
.TP 1i
MINFO
メールボックス情報
.TP 1i
MX	
メール交換(mail exchange)
.TP 1i
RP	
responsible person
.TP 1i
MG	
メールグループメンバ
.TP 1i
AFSDB	
DCE または AFS サーバ
.TP 1i
ANY	
ワイルドカード
.RE
.PD
.IP
大文字小文字どちらでも使用できます。(デフォルト: ANY)
.TP 1i
.B \-c
関心あるリソースレコードのクラス。クラスには以下のものがあります:
.RS 2i
.TP 1i
IN	
インターネット
.PD 0
.TP 1i
HS	
Hesiod
.TP 1i
CHAOS
Chaos
.TP 1i
ANY	
ワイルドカード
.RE
.PD
.IP
大文字小文字どちらでも使用できます。(デフォルト: IN)
.TP 1i
.B \-r
ネームサーバが応答しない場合のリトライ回数。(デフォルト: 4)
.TP 1i
.B \-p
タイムアウト時間(秒)。 (デフォルト: RES_TIMEOUT)
.\" 以下の 2行は前後のつながり不明。英語版の段階で欠落あり?? (jpman 酒井)
.\" .IR options
.\" field.  (default:  any answer)
.\" -a オプション削除時のゴミだと思います(horikawa@jp.freebsd.org)
.TP 1i
.B \-d
デバッグ機能を有効にする。リゾルバの
.IR options
フィールドの RES_DEBUG ビットをセットします。(デフォルト: デバッグ機能オフ)
.TP 1i
.B \-s
パケットではなく
.IR ストリーム
を用います。つまり、ネームサーバとの接続に UDP データグラムではなく、
TCP ストリームを用います。リゾルバの
.IR options
フィールドの RES_USEVC ビットをセットします。(デフォルト: UDP)
.TP 1i
.B \-v
オプション 's' と同じ意味です。
.TP 1i
.B host
関心あるホスト名(あるいはドメイン名)。
.SH 関連ファイル
/etc/resolv.conf 	デフォルトのネームサーバと検索リスト
.br
<arpa/nameser.h> 	利用できる RR タイプとクラスの一覧
.br
<resolv.h>		リゾルバのフラグ一覧
.SH 関連項目
nslookup(8), nstest(1), nsquery(1), 
named(8), resolver(5)
.SH 診断
リゾルバが問い合わせの回答に失敗し、デバッグ機能が有効になっていない場合、
.IR dnsquery
は単に以下のようなメッセージを表示します:
.TP 1i
Query failed (rc = 1) : Unknown host
.LP
リターンコードの値は h_errno から得ます。
.SH バグ
IN 以外のクラスを問い合わせると面白い結果が得られることがあります。
というのは、ネームサーバは普通、クラス IN のリソースレコードとして
ルートネームサーバのリストだけしか持っていないからです。
.PP
本コマンドは、inet_addr() を呼び出して `-n' オプションが
正しいインターネットアドレスかどうかを判断します。
残念ながら、inet_addr() は一部の(正しくない)アドレス(例えば 1.2.3.4.5)に
対してセグメンテーションフォールトを起こすことがあるようです。
.SH 作者
Bryan Beecher
