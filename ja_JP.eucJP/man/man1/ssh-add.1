.\"  -*- nroff -*-
.\"
.\" Author: Tatu Ylonen <ylo@cs.hut.fi>
.\" Copyright (c) 1995 Tatu Ylonen <ylo@cs.hut.fi>, Espoo, Finland
.\"                    All rights reserved
.\"
.\" As far as I am concerned, the code I have written for this software
.\" can be used freely for any purpose.  Any derived versions of this
.\" software must be clearly marked as such, and if the derived work is
.\" incompatible with the protocol description in the RFC file, it must be
.\" called by a name other than "ssh" or "Secure Shell".
.\"
.\"
.\" Copyright (c) 1999,2000 Markus Friedl. All rights reserved.
.\" Copyright (c) 1999 Aaron Campbell. All rights reserved.
.\" Copyright (c) 1999 Theo de Raadt. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" %FreeBSD%
.\" jpman %Id%
.\"
.Dd September 25, 1999
.Dt SSH-ADD 1
.Os
.Sh 名前
.Nm ssh-add
.Nd 認証エージェントに RSA あるいは DSA 秘密鍵を追加する
.Sh 書式
.Nm ssh-add
.Op Fl lLdD
.Op Ar
.Sh 説明
.Nm
は認証エージェントである
.Xr ssh-agent 1 .
に、 RSA あるいは DSA の identity (秘密鍵) を追加します。
引数なしで実行された場合、これは
.Pa $HOME/.ssh/identity
ファイルを追加します。コマンドラインから別の
ファイル名を与えることもできます。パスフレーズが必要な場合、
.Nm
はユーザにそれを尋ねます。このパスフレーズはユーザの端末から読み込まれます。
.Pp
.Nm
がうまく動くためには、認証エージェントが走っていて、
しかもそれが現在のプロセスの先祖になっていなければいけません。
.Pp
オプションは以下のとおりです:
.Bl -tag -width Ds
.It Fl l
現在、エージェントによって保持されているすべての identity の
指紋 (fingerprint) を一覧表示します。
.It Fl L
現在、エージェントによって保持されているすべての identity の
公開鍵の情報を一覧表示します。
.It Fl d
エージェントから identity を追加でなく取り除きます。
.It Fl D
エージェントからすべての identity を取り除きます。
.El
.Sh ファイル
.Bl -tag -width Ds
.It Pa $HOME/.ssh/identity
そのユーザのRSA 認証用 identity (秘密鍵) が入っています。この
ファイルは本人以外の誰にも読まれてはいけません。他人から
読めるようになっていると、
.Nm
はこのファイルを無視します。
鍵を作成するときにパスフレーズが指定されることもあります。
パスフレーズはこのファイルの秘密な部分を暗号化するのに使われます。
このファイルは、
.Nm
に他のファイル名をなにも指定しなかった
ときに使われるデフォルトのファイルとなります。
.It Pa $HOME/.ssh/id_dsa
そのユーザの DSA 認証用の identity (秘密鍵) が入っています。
.El
.Sh 環境変数
.Bl -tag -width Ds
.It Ev "DISPLAY", "SSH_ASKPASS"
.Nm
は端末で走っている場合、パスフレーズが必要になると
その端末からパスフレーズを読み込みます。
.Nm
が自分の端末を持ってはいないときでも、
.Ev DISPLAY
と
.Ev SSH_ASKPASS
が設定されているとこれは
.Ev SSH_ASKPASS
で指定されたプログラムを立ち上げ、パスフレーズを読むための
X11 ウインドウを開きます。これは特に
.Nm
を
.Pa .Xsession
などのスクリプトから走らせるときに有効です。
(機種によっては、これがうまく動作するためには入力を
.Pa /dev/null
にリダイレクトしておく必要があるかもしれません)
.El
.Sh 作者
Tatu Ylonen <ylo@cs.hut.fi>
.Pp
OpenSSH
は オリジナルの (フリー) ssh 1.2.12 から派生したものです。
しかしバグがとり除かれ、より新しい機能が追加されています。
1.2.12 がリリースされるとすぐに、オリジナルの ssh は
だんだんと制限されたライセンスになっていきました。
このバージョンの OpenSSH は…
.Bl -bullet
.It
何らかの制限的事項 (つまり特許など。
.Xr ssl 8 
を参照)
がついているコンポーネントはすべて、ソースコードから直接削除されて
います。かわりにライセンスあるいは特許つきのコンポーネントは、
外部ライブラリから取り込まれます。
.It
SSH プロトコル 1.5 と 2 をサポートするようにアップデートされました。
.It
.Xr kerberos 8
認証とチケットパスの追加サポートが含まれています。
.It
.Xr skey 1
を用いた、使い捨てパスワード (one-time password)
認証をサポートしています。
.El
.Sh 日本語訳
新山 祐介 (euske@cl.cs.titech.ac.jp) 2000/11/23
.Pp
当マニュアルページは氏のご好意により
.Fx
日本語マニュアルに収録させていただいています。
翻訳についてのご意見、ご指摘がありましたら新山氏
<euske@cl.cs.titech.ac.jp>、および
.Fx
jpman プロジェクト <man-jp@jp.FreeBSD.org> までお送りください。
.Sh 関連項目
.Xr ssh 1 ,
.Xr ssh-agent 1 ,
.Xr ssh-keygen 1 ,
.Xr sshd 8 ,
.Xr ssl 8
