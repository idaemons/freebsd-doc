.\" Copyright (c) 1981, 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)mt.1	8.1 (Berkeley) 6/6/93
.\" jpman %Id: mt.1,v 1.3 1997/06/16 09:29:17 taku Stab %
.\"
.Dd June 6, 1993
.Dt MT 1
.Os BSD 4
.Sh 名称
.Nm mt
.Nd 磁気テープ操作プログラム
.Sh 書式
.Nm
.Op Fl f Ar tapename
.Ar command
.Op Ar count
.Sh 解説
.Nm
は、
磁気テープドライブへコマンドを与えるのに使われます。
通常、
.Nm
は要求された操作を一度だけ行います。
操作によっては
.Ar count
で指定した回数だけ繰り返し実行できます。
なお、
.Ar tapename
は生の( ブロック型でない )テープデバイスを指していなければなりません。
.Pp
使用可能なコマンドは下記のようになっています。
コマンドの指定にあたって、
一意に特定するのに必要なだけの文字数は与える必要があります。
.Bl -tag -width "eof, weof"
.It Cm weof
テープの現在位置に
.Ar count
個のファイル終端マークを書き込みます。
.It Cm fsf
ファイル
.Ar count
個分早送りします。
.It Cm fsr
レコード
.Ar count
個分早送りします。
.It Cm bsf
ファイル
.Ar count
個分巻き戻します。
.It Cm bsr
レコード
.Ar count
個分巻き戻します。
.It Cm rewind
テープを巻き戻します( カウントは無視 )。
.It Cm offline , rewoffl
テープを巻き戻して、
テープユニットをオフライン状態にします( カウントは無視 )。
.It Cm erase
テープを消去します( カウントは無視 )。
.It Cm retension
テープのたるみを取ります( 一度最後まで早送りして、
また巻き戻します。カウントは無視 )。
.It Cm status
テープユニットの状態情報を出力します。
.It Cm blocksize
テープユニットに対してブロックサイズを指定します。
零は可変長ブロックを意味します。
.It Cm density
テープユニットに対して密度を指定します。
密度の符号化方式については、
下記を参照して下さい。
密度の値は、
.Dq リファレンス
欄に応じた数字と文字列のどちらでも与えることができます。
もし文字列が略記されていたら、
表に書かれてある順番で調べていき、
最初に合致した項目が使われます。
与えられた文字列と正しい密度名称を調べた結果が正確に合致しないのであれば、
与えられた文字列がどう解釈されたかについて、
通知メッセージが出力されます。
.It Cm eom
記録されたメディアの終端まで早送りします( カウントは無視 )。
.It Cm eod
データの終端まで早送りします。
.Cm eom
と同じです。
.It Cm comp
圧縮モードを指定します。
(カーネル内の関連部分がまだ正しく動作するとの報告を受けていません。)
.El
.Pp
テープ名が与えられていないくて、かつ環境変数
.Ev TAPE
が存在しない場合、
.Nm
はデバイス
.Pa /dev/nrst0
を使用します。
.Pp
.Nm
は、操作が成功したならば 0 の終了値を、
コマンドが認識不能の場合には 1 を、
また操作が失敗したならば 2 を返します。
.Pp
それぞれ密度の符号化方式は次の通りです。
.Pp
.Dl 0x0	デバイスの既定値
.Dl 0xE	ECMA 用予約値
.Bd -literal -offset indent
値   トラック 密度(bpi) 略称 タイプ リファレンス  注釈
0x1     9        800    NRZI   R    X3.22-1983    2
0x2     9       1600    PE     R    X3.39-1986    2
0x3     9       6250    GCR    R    X3.54-1986    2
0x5    4/9      8000    GCR    C    X3.136-1986   1
0x6     9       3200    PE     R    X3.157-1987   2
0x7     4       6400    IMFM   C    X3.116-1986   1
0x8     4       8000    GCR    CS   X3.158-1986   1
0x9    18      37871    GCR    C    X3B5/87-099   2
0xA    22       6667    MFM    C    X3B5/86-199   1
0xB     4       1600    PE     C    X3.56-1986    1
0xC    24      12690    GCR    C    HI-TC1        1,5
0xD    24      25380    GCR    C    HI-TC2        1,5
0xF    15      10000    GCR    C    QIC-120       1,5
0x10   18      10000    GCR    C    QIC-150       1,5
0x11   26      16000    GCR    C    QIC-320(525?) 1,5
0x12   30      51667    RLL    C    QIC-1350      1,5
0x13    1      61000    DDS    CS   X3B5/88-185A  4
0x14    1      43245    RLL    CS   X3.202-1991   4
0x15    1      45434    RLL    CS   ECMA TC17     4
0x16   48      10000    MFM    C    X3.193-1990   1
0x17   48      42500    MFM    C    X3B5/91-174   1
.Ed

符号化の意味:
.Bd -literal -offset indent
NRZI	非ゼロ復帰 IBM 記録方式
	(Non Return to Zero, change on ones)
GCR	グループ符号記録
	(Group Code Recording)
PE	位相符号化
	(Phase Encoded)
IMFM	反転修正周波数変調
	(Inverted Modified Frequency Modulation)
MFM	修正周波数変調
	(Modified Frequency Modulation)
DDS	DAT データ記憶装置
	(Dat Data Storage)
RLL	ランレングス符号化
	(Run Length Encoding)
.Ed

.\" 上記(訳注)は、略号の解説には訳文とその原文とを併記しておくことが
.\" 理解の助けになるものと判断し、追加しました。
.\" 2.2.2-RELEASE 対象
.\" By taku@tail.net (June 16, 1997)

タイプの意味:
.Bd -literal -offset indent
R	リールトゥリール
C	カートリッジ
CS	カセット
.Ed

注釈の意味:
.Bd -literal -offset indent
1	シリアル記録
2	パラレル記録
3	QIC-11 として知られる古い形式
4	ヘリカルスキャン
5	ANSI 標準ではなく工業標準
.Ed

.Sh 環境変数
次の環境変数が存在すれば、
.Nm
に利用されます。
.Bl -tag -width Fl
.It Ev TAPE
引数
.Ar tapename
が与えられていない時、
.Nm
は
.Ev TAPE
環境変数を調べます。
.Sh ファイル
.Bl -tag -width /dev/*rst[0-9]*xx -compact
.It Pa /dev/*rwt*
QIC-02/QIC-36 磁気テープインタフェース
.It Pa /dev/*rst[0-9]*
SCSI 磁気テープインタフェース
.El
.Sh 関連項目
.Xr dd 1 ,
.Xr ioctl 2 ,
.Xr mtio 4 ,
.Xr st 4 ,
.Xr wt 4 ,
.Xr environ 7
.Sh 歴史
.Nm
コマンドは
.Bx 4.3
で登場しました。
.Pp
.Xr st 4
ドライバに関する拡張部分は
.Xr st 1
コマンドとは別のものとして 386BSD 0.1 で登場し、
.Nm
コマンドに
.Fx 2.1
で含められました。
.Pp
.Cm weof
と同義のコマンドであった
.Cm eof
コマンドは
.Fx 2.1
で破棄されました。
なぜなら、非常に危険なコマンド
.Cm eom
との混乱があったためです。
