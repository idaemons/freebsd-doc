<!--
     The FreeBSD Documentation Project
     The FreeBSD Japanese Documentation Project

     Original revision: 1.10
     $FreeBSD$
-->

<chapter id="l10n">
  <title>ローカル化</title>

  <sect1 id="russian">
    <title>ロシア語 (KOI8-R encoding)</title>

    <para><emphasis>Contributed by &a.ache;<!-- <br> -->
	1 May 1997</emphasis>.</para>

    <para><emphasis>訳: &a.motoyuki;.
	<!-- <br> -->18 June 1997.</emphasis></para>

    <para>KOI8-R encoding についてのさらに詳しいことは,  <ulink
	URL="http://www.nagual.pp.ru/~ache/koi8.html">KOI8-R
	References (Russian Net Character Set)</ulink>
      をご覧ください.</para>

    <sect2 id="russian-console">
      <title>コンソールのセットアップ</title>

      <procedure>
	<step>
	  <para>マウスカーソルのために用いられている文字コードを
	    KOI8-R 擬似グラフィックの範囲外に動かすために,
	    カーネルのコンフィグレーションファイルに
	    以下の行を付け加えます.</para>

	  <programlisting>
options          "SC_MOUSE_CHAR=0x03"</programlisting>
	</step>

	<step>
	  <para><filename>/etc/rc.conf</filename>
	    でのロシア語コンソールの
	    エントリーは以下のようになります.</para>

	  <programlisting>
keymap=ru.koi8-r
keychange="61 ^[[K"
scrnmap=koi8-r2cp866
font8x16=cp866b-8x16
font8x14=cp866-8x14
font8x8=cp866-8x8</programlisting>

	  <note>
	    <para>^[ は
	      <filename>/etc/rc.conf</filename>,
	      に ^[ の文字列ではなく本当の
	      ESC キャラクターを入れることを意味します.</para>
	  </note>

	  <para>これは, KOI8-R キーボードで, KOI8-R encoding
	    の代替スクリーンフォントを 疑似グラフィックに割り当て,
	    <literal>灰色のデリート</literal> キーを
	      &man.termcap.5; の FreeBSD
	    コンソールのロシア語エントリーに一致するように再配置する,
	    ということです.</para>

	  <para>RUS/LAT スイッチは <literal>CapsLock</literal>
	    に割り当てられます. 元の CapsLock の機能は
	    <literal>Shift+CapsLock</literal> で使えます.  CapsLock の
	    LED は CapsLock のモードではなく RUS
	    モードを示します.</para>
	</step>

	<step>
	  <para><filename>/etc/ttys</filename> の中の
	    <literal>ttyv?</literal> の各エントリの
	    ターミナルのタイプを <literal>cons25</literal> から
	    <literal>cons25r</literal> に変更します,
	    つまり各エントリは以下のようになります</para>

	  <programlisting>
ttyv0	"/usr/libexec/getty Pc"		cons25r	on  secure</programlisting>
	</step>
      </procedure>
    </sect2>

    <sect2 id="russian-locale">
      <title>Locale のセットアップ</title>

      <para><anchor id="russian-env"> Locale
	のセットアップには二つの環境変数を使います:</para>

      <itemizedlist>
	<listitem>
	  <para><envar>LANG</envar>
	    は POSIX &man.setlocale.3; ファミリの関数に;</para>
	</listitem>

	<listitem>
	  <para><envar>MM_CHARSET</envar> はアプリケーションの MIME
	    キャラクタセットに使われます.</para>
	</listitem>
      </itemizedlist>

      <para>一番良い方法は &man.passwd.5; エントリの login class
	の場所で
	<filename>/etc/login.conf</filename> の
	<literal>russian</literal> ユーザの login class
	を使うことです.
	詳しくは &man.login.conf.5; を参照してください.</para>

      <sect3 id="russian-class">
	<title>Login Class の設定方法</title>

	<para>まず最初に <filename>/etc/login.conf</filename> に
	  <literal>russian</literal> login class がある
	  ことを確認してください,
	  このエントリは以下のようになります:</para>

	<programlisting>
russian:Russian Users Accounts:\
	:charset=KOI8-R:\
	:lang=ru_RU.KOI8-R:\
	:tc=default:</programlisting>

	<sect4>
	  <title>&man.vipw.8; ではどうするのか</title>

	  <para>新しいユーザを追加するのに &man.vipw.8;
	    を使うのであれば,
	    <filename>/etc/master.passwd</filename>
	    のエントリは以下のようになります:</para>

	  <programlisting>
user:password:1111:11:russian:0:0:User Name:/home/user:/bin/csh</programlisting>
	</sect4>

	<sect4>
	  <title>&man.adduser.8; ではどうするのか</title>

	  <para>&man.adduser.8; を使って新しいユーザを追加するには:</para>

	  <itemizedlist>
	    <listitem>
	      <programlisting>
defaultclass = russian</programlisting>

	      <para>を <filename>/etc/adduser.conf</filename>
		にセットする. (この場合, 全ての非ロシア語ユーザに
		<literal>default</literal> class を入力しなけ
		ればなりません);</para>
	    </listitem>

	    <listitem>
	      <para>もう一つの方法は &man.adduser.8; の

		<screen><prompt>Enter login class:</prompt> default []:</screen>

		という表示に <literal>russian</literal>
		と答えるものです;</para>
	    </listitem>

	    <listitem>
	      <para>また, ロシア語ユーザを追加する際に:

		<screen>&prompt.root; <userinput>adduser -class russian</userinput></screen>

		とする方法もあります.</para>
	    </listitem>
	  </itemizedlist>
	</sect4>

	<sect4>
	  <title>&man.pw.8; ではどうするのか</title>

	  <para>&man.pw.8; を使って新しいユーザを追加するには,
	    次のようにします:</para>

	  <screen>&prompt.root; <userinput>pw useradd user_name -L russian</userinput></screen>
	</sect4>
      </sect3>

      <sect3>
	<title>シェルのスタートアップファイルでの設定方法</title>

	<para>何らかの理由で
	  <link linkend="russian-class">login class の設定方法</link>
	  を使いたくない場合は, この
	  <link linkend="russian-env">二つの環境変数</link>
	  をシェルのスタートアップファイルに設定します:</para>

	<itemizedlist>
	  <listitem>
	    <para><filename>/etc/profile</filename>:</para>

	    <programlisting>
LANG=ru_RU.KOI8-R; export LANG
MM_CHARSET=KOI8-R; export MM_CHARSET</programlisting>
	  </listitem>

	  <listitem>
	    <para><filename>/etc/csh.login</filename>:</para>

	    <programlisting>
setenv LANG ru_RU.KOI8-R
setenv MM_CHARSET KOI8-R</programlisting>
	  </listitem>
	</itemizedlist>

	<para>もう一つの方法は, これらを以下のファイルに
	  設定することです.</para>

	<itemizedlist>
	  <listitem>
	    <para><filename>/usr/share/skel/dot.profile</filename>:</para>

	    <para>(上の <filename>/etc/profile</filename> と同様にします);
	    </para>
	  </listitem>

	  <listitem>
	    <para><filename>/usr/share/skel/dot.login</filename>:</para>

	    <para>(上の <filename>/etc/csh.login</filename> と同様にします).
	    </para>
	  </listitem>
	</itemizedlist>
      </sect3>
    </sect2>

    <sect2 id="russian-printer">
      <title>プリンターのセットアップ</title>

      <para>ロシア語の文字を内蔵したプリンターのほとんどは CP866
	というハードウェアコードページを塔載しているため, KOI8-R →
	CP866 の変換用に特別な出力フィルターが必要となります.
	そのようなフィルターは,
	<filename>/usr/libexec/lpr/ru/koi2alt</filename>
	としてデフォルトでインストールされていますので,
	<filename>/etc/printcap</filename>
	のロシア語プリンター用のエントリーは次のようになります.</para>

      <programlisting>
lp|Russian local line printer:\
	:sh:of=/usr/libexec/lpr/ru/koi2alt:\
	:lp=/dev/lpt0:sd=/var/spool/output/lpd:lf=/var/log/lpd-errs:</programlisting>

      <para><filename>/etc/printcap</filename> ファイルの詳細については
	  &man.printcap.5;
	を参照して下さい.</para>
    </sect2>

    <sect2 id="russian-msdosfs">
      <title>MSDOS ファイルシステムとロシア語のファイル名</title>

      <para>MSDOS ファイルシステムにおいてロシア語のファイル名を
	サポートするには, 次の
	  &man.fstab.5; エントリーの例を参考にしてください.</para>

      <programlisting>
/dev/sd0s1        /dos/c   msdos   rw,-W=koi2dos,-L=ru_RU.KOI8-R 0 0</programlisting>

      <para><option>-W</option> と <option>-L</option>
	というオプションに関する詳細は
	&man.mount.msdos.8; をご覧ください.</para>
    </sect2>

    <sect2 id="russian-xwindow">
      <title>X Window System のセットアップ</title>

      <para>以下の順序で設定します:</para>

      <procedure>
	<step>
	  <para>まず最初に <link linkend="russian-locale">X 以外の
	      locale のセットアップ</link> の通りに行います.</para>

	  <note>
	    <para><anchor id="russian-note"> ロシア語の KOI8-R locale
	      は XFree86 の古いリリース (3.3 より前)
	      では動かないかもしれません.
	      <filename>/usr/ports/x11/XFree86</filename> の XFree86
	      の port には XFree86 の最近のほとんどの
	      バージョンが入っています. したがってこの port から
	      XFree86 をインストール したのならきちんと動くでしょう.
	      最新の FreeBSD ディストリビューションに付属する XFree86
	      のバージョンも動くはず です (XFree86 のバージョンが 3.3
	      より前でないことを確認して下さい).</para>
	  </note>
	</step>

	<step>
	  <para><filename>/usr/ports/russian/X.language</filename>
	    ディレクトリに行き, ここで

	    <screen>&prompt.root; <userinput>make all install</userinput></screen>

	    とします. このポートは最新バージョンの KOI8-R
	    フォントをインストールします.
	    XFree86 3.3 には既にいくつかの KOI8-R
	    フォントが含まれていますが, こちらの
	    フォントのほうがより釣り合いがとれています.</para>

	  <para><filename>/etc/XF86Config</filename> の
	    <literal>"Files"</literal> セクションに以下の行が
	    他のどんな <literal>FontPath</literal>
	    エントリよりも前にあることを確認します:</para>

	  <programlisting>
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/misc"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/75dpi"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/100dpi"</programlisting>

	  <para>高解像度のビデオモードを使っている場合は, 75 dpi と
	    100 dpi の行を入れ替えます.</para>
	</step>

	<step>
	  <para>ロシア語キーボードを有効にするには

	    <programlisting>
XkbKeymap   "xfree86(ru)"</programlisting>

	    を <filename>/etc/XF86Config</filename> の
	    <literal>"Keyboard"</literal> セクションに追加します,
	    また <literal>XkbDisable</literal> が無効に
	    (コメントアウト) されていることをここで
	    確認します.</para>

	  <para>RUS/LAT スイッチは
	    <literal>CapsLock</literal>に割り当てられます. 元の
	    CapsLock の機能は <literal>Shift+CapsLock</literal>
	    で使えます (LAT モード内でのみ).</para>

	  <note>
	    <para>ロシア語 XKB キーボードは XFree86
	      の古いバージョンでは動かないかもしれません, 詳しくは
	      <link linkend="russian-note">locale note</link>
	      を参照してください. ロシア語 XKB
	      キーボードはローカル化されていないアプリケーション
	      でも動かない かもしれません,
	      最低限のローカル化されたアプリケーションでは
	      そのプログラムの 初期に <literal>XtSetLanguageProc(NULL,
		NULL, NULL); </literal> 関数を呼ばなければ
	      なりません.</para>
	  </note>
	</step>
      </procedure>
    </sect2>
  </sect1>

  <sect1 id="german">
    <title>ドイツ語(ISO 8859-1)</title>

    <para>Slaven Rezic
      <email>eserte@cs.tu-berlin.de</email>
      が FreeBSD上でウムラウトを使う方法についての
      チュートリアルを書きました.
      チュートリアルはドイツ語で書かれていて,
      <ulink URL="http://www.de.FreeBSD.org/de/umlaute/">
	http://www.de.FreeBSD.org/de/umlaute/</ulink>
      でご覧になれます.</para>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../handbook.sgml" "part" "chapter")
     End:
-->
