.\"
.\" Copyright (c) 1996, 1997, 1998 Shigio Yamaguchi. All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Shigio Yamaguchi.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\" jpman %Id: gctags.1,v 1.3 1997/08/31 14:13:32 horikawa Stab %
.\"
.\" gctags.1 修正時には ctags.1 も同様に修正して下さい。
.\" Aug 31 1997 <horikawa@jp.freebsd.org>
.Dd Aug 19, 1998
.Dt GCTAGS 1
.Os BSD 4
.Sh 名称
.Nm gctags
.Nd gtags 用のクロスリファレンスを表示する
.Sh 書式
.Nm gctags
.Op Fl b
.Op Fl e
.Op Fl n
.Op Fl r
.Op Fl s
.Op Fl w
.Ar file ...
.Sh 解説
.Nm
は、指定された C,
.Tn YACC ,
.Tn JAVA
そしてアセンブリのソースから、
.Xr gtags 1
コマンド用のタグファイルを作成します。
出力の各行はオブジェクトの名前、出現する行番号、定義されているファイル、
行のイメージを含み、
各々は空白で区切られています。
オプション -x を付けると、
.Xr ctags 1
の出力と同じになります。
.Nm
に与えられるオプションによりますが、オブジェクトは
関数定義、関数参照、他のシンボルから
構成されます。
本コマンドが、GLOBAL ソースコードタグシステムのデフォルトのパーザです。
.Bl -tag -width Ds
.It Fl b
1 桁目に '{' が出てきたときに、強制的にレベル 1 ブロックの開始と判断します
(C 言語のみ)。
.It Fl e
1 桁目に '}' が出てきたときに、強制的にレベル 1 ブロックの終りと判断します
(C 言語のみ)。
.It Fl n
タグの出力を抑止します。
.Fl w
オプションと共に使用する場合に有用です。
.It Fl r
関数定義ではなく関数参照の位置を提供します。
カレントディレクトリに GTAGS ファイルが必要となります
(C 言語と Java 言語のみ)。
デフォルトでは、関数の定義の位置を見付けます。
.It Fl s
関数以外のシンボルを収集します。デフォルトでは、関数の定義の位置を見付けます。
.It Fl w
警告メッセージを表示します。
.El
.Pp
.Fl r
および
.Fl s
のオプションは、互いに優先し合います。
最後に指定したものが、使用する方法を決定します。
.Pp
.Nm \&.c
や
.Nm \&.h
で終わる名前のファイルは、 C 言語のソースファイルとみなされ、
C の形式の関数・マクロ定義が検索されます。
.Nm \&.y
で終わる名前のファイルは、
.Tn YACC
のソースファイルとみなされます。
.Nm \&.java
で終るファイル名のファイルは Java 言語ファイルとみなされます。
.Nm \&.s
か
.Nm \&.S
で終るファイル名のファイルはアセンブリ言語ファイルとみなされます。
その他のファイルは、C 形式の定義が検索されます。
.Pp
yacc のファイルには特殊なタグがあります。
.Ar yyparse
は yacc ファイルの第 2 セクションの始まりを示します。
.Sh 診断
.Nm
はエラーが発生すると非 0 を返し、それ以外では 0 を返します。
同じ名前のオブジェクトが複数出てきてもエラーとはみなされません。
.Sh 関連項目
.Xr btreeop 1 ,
.Xr ex 1 ,
.Xr global 1 ,
.Xr gtags 1 ,
.Xr htags 1 ,
.Xr vi 1 .
.Sh バグ
.Pp
.Nm
はきちんと整形された入力に頼っています。
また、ソースファイルに文法的な間違いがあると
簡単に混乱してしまいます。
.Pp
アセンブリ言語サポートは完璧からは程遠く、
ソースファイルから ENTRY() と ALTENTRY() を取り出すだけです。
FreeBSD と Linux のカーネルソースでどうにか大丈夫なだけでしょう。
.Sh 作者
Shigio Yamaguchi (shigio@wafu.netgate.net)
.Sh 歴史
.Nm
コマンドは FreeBSD 2.2.2 で登場しました。
