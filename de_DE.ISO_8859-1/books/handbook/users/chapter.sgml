<!--
     The FreeBSD Documentation Project
     The FreeBSD German Documentation Project

     Original Revision 1.4

     $FreeBSD$
     $FreeBSDde: de-docproj/books/handbook/users/chapter.sgml,v 1.2 2001/03/23 07:28:36 robert Exp $
-->

<chapter id="users">
  <title>Benutzer und grundlegende Account-Verwaltung</title>
  
  <sect1 id="users-synopsis">
    <title>&Uuml;bersicht</title>
    
    <para><emphasis>Beigesteuert von &a.nbm; im Februar 2000. &Uuml;bersetzt
      von &a.de.robert; im Juli 2000.</emphasis></para>
    
    <para>Jeder Zugriff auf das System geschieht &uuml;ber Accounts und alle
      Prozesse werden von Benutzern gestartet, also sind Benutzer- und
      Account-Verwaltung von wesentlicher Bedeutung in FreeBSD-Systemen.</para>

    <para>Es gibt drei Haupttypen von Accounts: Der
      <link linkend="users-superuser">Superuser</link>,
      <link linkend="users-system">Systembenutzer</link> und
      <link linkend="users-user">Benutzer-Accounts</link>.  Der
      Superuser-Account, normalerweise <username>root</username> genannt, wird
      benutzt, um das System ohne Beschr&auml;nkungen auf Privilegien zu
      verwalten.  Systembenutzer starten Dienste.  Abschliessend werden
      Benutzer-Accounts von echten Menschen genutzt, die sich einloggen, Mails
      lesen und so weiter.</para>
  </sect1>
    
  <sect1 id="users-superuser">
    <title>Der Superuser-Account</title>
    
    <para>Der Superuser-Account, normalerweise <username>root</username>
      genannt, ist vorkonfiguriert und erleichtert die Systemverwaltung, sollte
      aber nicht f&uuml;r allt&auml;gliche Aufgaben wie verschicken und
      empfangen von Mails, Entdecken des Systems oder Programmierung benutzt
      werden.</para>
      
    <para>Das ist so, da der Superuser im Gegensatz zu normalen
      Benutzer-Accounts ohne Beschr&auml;nkungen operiert und falsche
      Anwendung des Superuser-Accounts in spektakul&auml;ren Katastrophen
      resultieren kann.  Benutzer-Accounts sind nicht f&auml;hig das System
      versehentlich zu zerst&ouml;ren, deswegen ist es generell am besten
      normale Benutzer-Accounts zu verwenden, solange man nicht
      haupts&auml;chlich die extra Privililegien ben&ouml;tigt.</para>

    <para>Zus&auml;tzlich sollten Sie Kommandos, die Sie als Superuser
      eingeben, immer doppelt und dreifach &uuml;berpr&uuml;fen, da ein
      zus&auml;tzliches Leerzeichen oder ein fehlender Buchstabe irreparablen
      Datenverlust bedeuten kann. Diese zus&auml;tzlichen Privilegien, die Sie
      ben&ouml;tigten, als Sie zu dem Superuser-Account gewechselt haben,
      bedeuten, dass die Absicherung Ihres normalen Benutzer-Accounts nicht
      mehr g&uuml;ltig ist.</para>

    <para>Das erste, das Sie tun sollten, nachdem Sie dieses Kapitel gelesen
      haben, ist einen unprivilegierten Benutzer f&uuml;r Ihre eigene normale
      Benutzung zu erstellen, wenn Sie das nicht bereits getan haben.  Das
      trifft immer zu, egal ob Sie ein Mehrbenutzer-System oder ein System
      laufen haben, welches Sie alleine benutzen.  Sp&auml;ter in diesem
      Kapitel besprechen wir, wie man zus&auml;tzliche Accounts erstellt und
      wie man zwischen dem normalen Benutzer und dem Superuser wechselt.</para>
  </sect1>
    
  <sect1 id="users-system">
    <title>System-Accounts</title>

    <para>Systembenutzer starten Dienste wie DNS, mail, Web-Server und so
      weiter.  Der Grund daf&uuml;r ist die Sicherheit; wenn die Programme
      von dem Superuser gestartet werden, k&ouml;nnen Sie ohne
      Einschr&auml;nkungen handeln.</para>

    <para>Beispiele von Systembenutzern sind <username>daemon</username>,
      <username>operator</username>, <username>bind</username> (f&uuml;r den
      Domain Name Service) und <username>news</username>.  Oft erstellen
      Systemadministratoren den Benutzer <username>httpd</username>, um
      Web-Server laufen zu lassen, die sie installieren.</para>

    <para><username>nobody</username> ist der generische unprivilegierte
      Systembenutzer, aber je mehr Dienste nobody benutzen, um so
      privilegierter wird er.</para>
  </sect1>

  <sect1 id="users-user">
    <title>Benutzer-Accounts</title>

    <para>Benutzer-Account sind das prim&auml;re Mittel des Zugriffs f&uuml;r
      echte Menschen auf das System und isolieren Benutzer und Umgebung,
      sch&uuml;tzen die Benutzer davor das System oder Daten anderer Benutzer
      zu besch&auml;digen und erlauben Benutzern ihre Umgebung selbst
      einzurichten, ohne das sich dies auf andere auswirkt.</para>

    <para>Jede Person, die auf Ihr System zugreift, sollte ihren eigenen
      Account besitzen.  Das erlaubt Ihnen herauszufinden, wer was macht
      und h&auml;lt Leute davon ab, die Einstellungen der anderen zu
      ver&auml;ndern oder mails zu lesen, die nicht f&uuml;r sie bestimmt
      waren.</para>

    <para>Jeder Benutzer kann seine eigene Umgebung einstellen, um sie
      der Benutzung auf dem System anzupassen: Alternative Shells, Editoren,
      Tastaturbelegungen und Sprache.</para>
  </sect1>

  <sect1 id="users-modifying">
    <title>Accounts ver&auml;ndern</title>

    <para><application>pw</application> ist ein m&auml;chtiges und flexibles
      Mittel f&uuml;r zum &Auml;ndern von Accounts, aber <application>adduser
      </application> wird empfohlen zum Erstellen und <application>rmuser
      </application> zum L&ouml;schen von Accounts.</para>

    <para><application>chpass</application> erlaubt dem Systemadministrator
      und normalen Benutzern Passw&ouml;rter, Shells und personelle
      Informationen einzustellen.  Jedoch ist <application>passwd</application>
      das gew&ouml;hnlichere Mittel, um Passw&ouml;rter im speziellen zu
      &auml;ndern.</para>

    <sect2 id="users-adduser">
      <title>adduser</title>

      <para><application>adduser</application> ist ein einfaches Programm
        um neue Benutzer hinzuzuf&uuml;gen.  Es erstellt <filename>passwd
        </filename> und <filename>group</filename> Eintr&auml;ge f&uuml;r den
        Benutzer, genauso wie ein home Verzeichnis, kopiert ein paar
        vorgegebene dotfiles aus <filename>/usr/share/skel</filename> und kann
        optional dem Benutzer eine ,,Willkommen``-Nachricht zuschicken.</para>

      <para>Um die anf&auml;ngliche Konfigurationsdatei zu erstellen,
        benutzen Sie: <command>adduser -s -config_create</command>.
        <footnote>
          <para>Das <option>-s</option> bringt <application>adduser
            </application> dazu, weniger Fragen und Fehlermeldungen auszugeben.
            Wir benutzen <option>-v</option> sp&auml;ter, wenn wir die
            Voreinstellungen &auml;ndern wollen.</para>
        </footnote>
        Zun&auml;chst konfigurieren wir addusers Voreinstellungen und
        erstellen unseren ersten Benutzer-Account, da es b&ouml;se und
        unangenehm ist, root f&uuml;r normale Aufgaben zu verwenden.</para>
      <example>
        <title>Die Konfiguration f&uuml;r adduser &auml;ndern</title>

        <screen>&prompt.root; <userinput>adduser -v</userinput>
Use option ``-silent'' if you don't want to see all warnings and questions.
Check /etc/shells
Check /etc/master.passwd
Check /etc/group
Enter your default shell: csh date no sh tcsh [sh]: <userinput>tcsh</userinput>
Your default shell is: tcsh -> /usr/local/bin/tcsh
Enter your default HOME partition: [/home]:
Copy dotfiles from: /usr/share/skel no [/usr/share/skel]: 
Send message from file: /etc/adduser.message no 
[/etc/adduser.message]: <userinput>no</userinput>
Do not send message
Use passwords (y/n) [y]: <userinput>y</userinput>

Write your changes to /etc/adduser.conf? (y/n) [n]: <userinput>y</userinput>

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.
Enter username [a-z0-9_-]: <userinput>jru</userinput>
Enter full name []: <userinput>J. Random User</userinput>
Enter shell csh date no sh tcsh [tcsh]: 
Enter home directory (full path) [/home/jru]: 
Uid [1001]: 
Enter login class: default []: 
Login group jru [jru]: 
Login group is ``jru''. Invite jru into other groups: guest no 
[no]: <userinput>wheel</userinput>
Enter password []: 
Enter password again []: 

Name:     jru
Password: ****
Fullname: J. Random User
Uid:      1007
Gid:      1007 (jru)
Class:
Groups:   jru wheel
HOME:     /home/jru
Shell:    /usr/local/bin/tcsh
OK? (y/n) [y]: <userinput>y</userinput>
Added user ``jru''
Copy files from /usr/share/skel to /home/jru
Add another user? (y/n) [y]: <userinput>n</userinput>
Goodbye!
&prompt.root;</screen>
      </example>

      <para>Zusammengefasst haben wir die vorgegebene Shell in
        <application>tcsh</application> (eine zus&auml;tzliche Shell aus
        den Packages) ge&auml;ndert und das Senden einer
        ,,Willkommen``-Nachricht an neue Benutzer abgeschaltet.
        Danach haben wir die Konfiguration abgespeichert und anschliessend
        einen Account f&uuml;r <username>jru</username> eingerichtet
        und sichergestellt, dass <username>jru</username> in der
        Gruppe <username>wheel</username> ist (was sp&auml;ter wichtig ist,
        wie wir sehen werden).</para>
      <note>
        <para>Wenn Sie das Passwort eingeben, werden weder Passwort noch
          Sternchen angezeigt.  Passen Sie auf, dass Sie das Passwort nicht
          zweimal falsch eingeben. :-)</para>
      </note>
      <note>
        <para>Benutzen Sie ab jetzt <command>adduser</command> ohne Argumente,
          dann m&uuml;ssen Sie nicht jedes mal die Vorgaben neu einstellen.
          Wenn das Programm Sie fragt, ob Sie die Vorgaben &auml;ndern wollen,
          verlassen und starten Sie es erneut mit der <option>-s</option>
          Option.</para>
      </note>
    </sect2>

    <sect2 id="users-rmuser">
      <title>rmuser</title>

      <para><application>rmuser</application> entfernt Benutzer aus dem System,
        inklusive der Spuren ausserhalb der Benutzer-Datenbank.</para>

      <para><application>rmuser</application> f&uuml;hrt die folgenden
        Schritte durch:</para>

      <procedure>
        <step>
          <para>Enfernt den &man.crontab.1; Eintrag des Benutzers (wenn dieser
            existiert).</para>
        </step>
        <step>
          <para>Entfernt alle &man.at.1; jobs, die dem Benutzer geh&ouml;ren.
          </para>
        </step>
        <step>
          <para>Schliesst alle Prozesse des Benutzers.</para>
        </step>
        <step>
          <para>Entfernt den Benutzer aus der lokalen Passwort-Datei des
            Systems.</para>
        </step>
        <step>
          <para>Entfernt das home Verzeichnis des Benutzers (falls es dem
            Benutzer geh&ouml;rt).</para>
        </step>
        <step>
          <para>Entfernt die eingegangen mails, die dem Benutzer geh&ouml;ren,
          aus <filename>/var/mail</filename>.</para>
        </step>
        <step>
          <para>Entfernt alle Dateien des Benutzers aus tempor&auml;ren
            Dateispeicherbereichen wie <filename>/tmp</filename>.</para>
        </step>
        <step>
          <para>Entfernt den Benutzernamen von allen Gruppen, zu denen er
            geh&ouml;rt, aus <filename>/etc/group</filename>.

            <note>
              <para>Wenn eine Gruppe leer wird und der Gruppenname mit dem
                Benutzernamen identisch ist, wird die Gruppe entfernt; das
                erg&auml;nzt sich mit den einzelnen Benutzer-Gruppen, die von
                &man.adduser.8; f&uuml;r jeden neuen Benutzer erstellt werden.
              </para>
            </note>
          </para>
        </step>
      </procedure>

      <para><application>rmuser</application> kann nicht daf&uuml;r benutzt
        werden Superuser-Accounts zu entfernen, da dies nahezu immer ein
        Zeichen f&uuml;r eine massive Verw&uuml;stung ist.</para>

      <para>Als Vorgabe wird ein interaktiver Modus benutzt, der
        sicherzustellen versucht, dass Sie wissen, was Sie tun.</para>

      <example>
        <title>interaktives Account-Entfernen mit rmuser</title>

        <screen>&prompt.root; <userinput>rmuser jru</userinput>
Matching password entry:
jru:*:1000:1000::0:0:J. Random User:/home/jru:/usr/local/bin/tcsh
Is this the entry you wish to remove? <userinput>y</userinput>
Remove user's home directory (/home/jru)? <userinput>y</userinput>
Updating password file, updating databases, done.
Updating group file: trusted (removing group jru -- personal group is empty) done.
Removing user's incoming mail file /var/mail/jru: done.
Removing files belonging to jru from /tmp: done.
Removing files belonging to jru from /var/tmp: done.
Removing files belonging to jru from /var/tmp/vi.recover: done.
&prompt.root;</screen>
      </example>
    </sect2>

    <sect2 id="users-pw">
      <title>pw</title>

      <para><application>pw</application> ist ein Kommandozeilenprogramm, mit
        dem man Benutzer und Gruppen erstellen, entfernen und anzeigen kann,
        und fungiert als Editor der Benutzer- und Gruppendateien des Systems.
      </para>

      <para>Es wurde entworfen um n&uuml;tzlich als direkt ausgef&uuml;hrter
        Befehl und f&uuml;r die Benutzung in Shell-Scripts zu sein.</para>

      <para>Informationen dar&uuml;ber gibt es in &man.pw.8;.</para>
    </sect2>

    <sect2 id="users-chpass">
      <title>chpass</title>

      <para><application>chpass</application> &auml;ndert Informationen der
        Benutzerdatenbank wie Passw&ouml;rter, Shells und personelle
        Informationen.</para>

      <para>Nur Systemadministratoren, als Superuser, k&ouml;nnen die
        Informationen und Passw&ouml;rter der anderen Benutzer mit
        <application>chpass</application> ver&auml;ndern.</para>

      <para>Werden keine Optionen neben dem optionalen Benutzernamen
        angegeben, zeigt <application>chpass</application> einen Editor
        mit Benutzerinformationen an und wenn dieser Editor beendet wird,
        versucht es die Informationen in der Benutzerdatenbank zu
        ver&auml;ndern.</para>

      <example>
        <title>Interaktives chpass des Superusers</title>

        <screen>#Changing user database information for jru.
Login: jru
Password: *
Uid [#]: 1000
Gid [# or name]: 1000
Change [month day year]:
Expire [month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/tcsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</screen>
      </example>

      <para>Der normale Benutzer kann nur einen kleinen Teil dieser
        Informationen ver&auml;ndern und nat&uuml;rlich nur f&uuml;r sich
        selbst.</para>

      <example>
        <title>Interaktives chpass eines normalen Benutzers</title>

        <screen>#Changing user database information for jru.
Shell: /usr/local/bin/tcsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</screen>
      </example>

      <note>
        <para><command>chfn</command> und <command>chsh</command> sind
          nur Verweise auf <command>chpass</command>, genauso wie
          <command>ypchpass</command>, <command>ypchfn</command> und
          <command>ypchsh</command>.  NIS wird automatisch unterst&uuml;tzt,
          deswegen ist es nicht notwendig das <literal>yp</literal> vor dem
          Kommando einzugeben.</para>
      </note>
    </sect2>
    <sect2 id="users-passwd">
      <title>passwd</title>

      <para><application>passwd</application> ist der &uuml;bliche Weg Ihr
        eigenes Passwort als Benutzer zu &auml;ndern oder das Passwort eines
        anderen Benutzers als Superuser.</para>

      <note>
        <para>Benutzer m&uuml;ssen ihr urspr&uuml;ngliches Passwort eingeben,
          bevor sie es wechseln, um eine unauthorisierte Person davon
          abzuhalten ihr Passwort zu &auml;ndern, wenn der Benutzer gerade
          nicht an seinem Ger&auml;t ist.</para>
      </note>

      <example>
        <title>passwd</title>

        <screen>&prompt.user; <userinput>passwd</userinput>
Changing local password for jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: done

&prompt.root; <userinput>passwd jru</userinput>
Changing local password for jru.
New password:
Retype new password:
passwd: updating the database...
passwd: done</screen>
      </example>

      <note>
        <para><command>yppasswd</command> ist nur ein Verweis zu
          <command>passwd</command>.  NIS wird automatisch
          unterst&uuml;tzt, also ist es nicht notwendig, <literal>yp</literal>
          vor dem Kommando einzugeben.</para>
      </note>
    </sect2>
  </sect1>

  <sect1 id="users-limiting-and-personalizing">
    <title>Benutzer einschr&auml;nken und personalisieren</title>

    <para>Kontigente erlauben dem Systemadministrator
      Benutzungsbeschr&auml;nkungen der Festplatte festzusetzen und Benutzern
      ihre Festplattenbenutzung zu &uuml;berpr&uuml;fen, wenn Kontigente
      auf dem System verwendet werden.  Kontigente werden in ihrem
<!--
      <link linkend="quotas">eigenen Kapitel</link>
-->
      eigenen Kapitel
      besprochen.</para>

    <para>Die Lokalisierung ist eine Umgebung, die vom Systemadministrator oder
      Benutzer eingerichtet wird, um verschiedene Sprachen, Zeichens&auml;tze,
      Datum- und Zeitstandards und so weiter unterzubringen.  Dies wird im
      Kapitel &uuml;ber die
<!--
      <link linkend="l10n">Lokalisierung</link>
-->
      Lokalisierung
      besprochen.</para>
  </sect1>
</chapter>

<!-- 
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
