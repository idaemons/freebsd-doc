<!--
     The FreeBSD Russian Documentation Project

     $FreeBSD$
     $FreeBSDru: frdp/doc/ru_RU.KOI8-R/books/handbook/x11/chapter.sgml,v 1.3 2000/10/06 16:00:45 phantom Exp $
     Original revision: 1.12
-->

<chapter id="x11">
<title>X Window System</title>

<para>
  <emphasis>Этот раздел нам любезно предоставил &a.grog;, и он взят из
  его книги, <ulink
  url="http://www.cdrom.com/titles/freebsd/bsdcomp_bkx.phtml">The
  Complete FreeBSD</ulink>, соответственно, все права остаются за ним.
  Изменения, требуемые для помещения в Руководство, выполнил
  &a.jim;.</emphasis></para>

<sect1>
  <title>Предназначение</title>

  <para>Следующий раздел посвящен установке и настройке X11 на вашей
    системе.  Узнать более подробную информацию о X11, а также выяснить,
    поддерживается ли ваш видеоадаптер, можно на сайте проекта <ulink
    url="http://www.xfree86.org/">XFree86</ulink>.</para>
</sect1>

<sect1 id="x-overview">
  <title>Общий обзор</title>

  <para>Вместе с FreeBSD поставляется XFree86, порт X11R6, поддерживающий
    несколько различных версий UNIX на платформе Intel.  Эта глава
    рассказывает о том, как настроить ваш сервер XFree86.  Она написана
    на основе материалов, поставляемых с релизом для FreeBSD, в частности,
    файлов README.FreeBSD и README.Config из каталога
    <filename>/usr/X11R6/lib/X11/doc</filename>.  Если Вы найдете какие-либо
    разночтения, то содержимое этих файлов содержит самую последнюю
    информацию.  Кроме того, в файле
    <filename>/usr/X11R6/lib/X11/doc/RELNOTES</filename> содержится
    независимая от ОС информация о текущем релизе.</para>

  <para>X использует много памяти.  Для того, чтобы работать с X, вашей
    системе абсолютно необходимо иметь не менее 8 МБ оперативной памяти,
    однако с таким маленьким объемом памяти производительность будет
    болезненно низка.  Более разумным минимумом является 16 МБ, и Вы можете
    увеличить производительность, добавив еще оперативной памяти.  Если Вы
    используете X весьма интенсивно, то увеличение производительности может
    наблюдаться при увеличения объемов ОЗУ до 128 МБ.</para>

  <para>В оставшейся части главы содержится масса полезной информации, но
    может быть, что прямо сейчас вам информация не нужна, а все, что вам
    нужно - это запустить ваш X-сервер и начать работу.  Однако, мы
    предупреждаем :</para>

  <warning>
    <para>Неправильная установка может сжечь ваш монитор или графический
      адаптер.</para>
  </warning>

  <para>Однако, если Вы считаете себя специалистом, у вас стандартный
    адаптер Super VGA и хороший многочастотный монитор, то, вероятнее всего,
    вам удастся запустить все и начать работу без чтения этого
    раздела.</para>
</sect1>

<sect1 id="x-install">
  <title>Установка XFree86</title>

  <para>Самый легкий способ установки XFree86 заключается в использовании
    программы sysinstall либо при установке системы, либо позже, запустив
    <command>/stand/sysinstall</command>.  Оставшуюся часть главы мы
    посвятим рассмотрению того, что представляет собой дистрибутив, а также
    рассмотрим, как делается ручная установка X11.</para>

  <sect2>
    <title>Дистрибутив XFree86</title>

    <para>XFree86 распространяется в виде сбивающего с толку набора архивных
      файлов.  В следующем разделе мы рассмотрим, что Вы должны установить.
      Однако сильно об этом не беспокойтесь; если Вы не можете решить, что же
      нужно выбрать и у вас всего есть 200 МБ свободного дискового
      пространства, то этого хватит для распаковки всего набора.</para>

    <para>Минимально вам нужно распаковать архивы, перечисленные в следующей
      таблице, а также по крайней мере один сервер, соответствующий вашему
      адаптеру VGA.  Вам потребуется 10 МБ для минимально необходимых для
      работы бинарных файлов и от 1.7 до 3 МБ для сервера.</para>

    <para>Далее помещена таблица требуемых компонентов.</para>

    <informaltable>
    <tgroup cols="2">
    <thead>
      <row>
	<entry>Архив</entry>
	<entry>Описание</entry>
      </row>
    </thead>

    <tbody>
      <row>
	<entry><filename>Xbin.tgz</filename></entry>
	<entry>Все выполнимые клиентские X-приложения и совместно
	  используемые библиотеки.</entry>
      </row>

      <row>
	<entry><filename>Xfnts.tgz</filename></entry>
	<entry>Шрифты misc и 75 dpi.</entry>
      </row>

      <row>
	<entry><filename>Xlib.tgz</filename></entry>
	<entry>Файлы данных и библиотеки, необходимые во время
	  работы.</entry>
      </row>
    </tbody>
    </tgroup>
    </informaltable>
  </sect2>

  <sect2>
    <title>X-сервер</title>

    <para>Кроме вышеперечисленных архивов, вам требуется по крайней мере
      один сервер, занимающий порядка 3 МБ дискового пространства.  Его выбор
      в основном зависит от типа имеющегося графического адаптера.  Именем
      сервера по умолчанию является <filename>/usr/X11R6/bin/X</filename>,
      и это ссылка на конкретный выполнимый файл сервера
      <filename>/usr/X11R6/bin/XF86_xxxx</filename>.  Архивы с серверами
      для стандартной архитектуры PC находятся в
      <filename>/cdrom/XF86336/Servers</filename>, а серверы для
      архитектуры PC98, используемой в Японии, помещены в
      <filename>/cdrom/XF86336/PC98-Servers</filename>, если Вы работаете
      с дистрибутивом на компакт-дисках.  Кроме того, они доступны на нашем
      FTP-сервере по адресу <ulink
      url="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/XF86336/Servers/">
      ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/XF86336/Servers/</ulink>
      или <ulink url="ftp://ftp..FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/XF86336/PC98-Servers/">
      ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/&rel.current;-RELEASE/XF86336/PC98-Servers/</ulink></para>

    <para>Имеющиеся X-серверы для стандартной архитектуры PC:</para>

    <informaltable>
    <tgroup cols="2">
    <thead>
      <row>
	<entry>Архив</entry>
	<entry>Описание</entry>
      </row>
    </thead>

    <tbody>
      <row>
	<entry><filename>X8514.tgz</filename></entry>
	<entry>8-битный цвет для IBM 8514 и полностью совместимых
	  адаптеров.</entry>
      </row>

      <row>
	<entry><filename>XAGX.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров AGX и XGA.</entry>
      </row>

      <row>
	<entry><filename>XI128.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров I128.</entry>
      </row>

      <row>
	<entry><filename>XMa32.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров ATI Mach32.</entry>
      </row>

      <row>
	<entry><filename>XMa64.tgz</filename></entry>
	<entry>8, 16 и 32-битный цвет для адаптеров ATI Mach64.</entry>
      </row>

      <row>
	<entry><filename>XMa8.tgz</filename></entry>
	<entry>8-битный цвет для адаптеров ATI Mach8.</entry>
      </row>

      <row>
	<entry><filename>XMono.tgz</filename></entry>
	<entry>1-битный монохром для VGA, Super-VGA, Hercules и других
	  адаптеров.</entry>
      </row>

      <row>
	<entry><filename>XP9K.tgz</filename></entry>
	<entry>8, 16 и 32-битный цвет для адаптеров Weitek P9000 (Diamond
	  Viper).</entry>
      </row>

      <row>
	<entry><filename>XS3.tgz</filename></entry>
	<entry>8, 16 и 32-битный цвет для адаптеров S3.</entry>
      </row>

      <row>
	<entry><filename>XS3V.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров S3 ViRGE.</entry>
      </row>

      <row>
	<entry><filename>XSVGA.tgz</filename></entry>
	<entry>&gt;=8-битный цвет для адаптеров Super-VGA.</entry>
      </row>

      <row>
	<entry><filename>XVG16.tgz</filename></entry>
	<entry>4-битный цвет для адаптеров VGA и Super-VGA.</entry>
      </row>

      <row>
	<entry><filename>XW32.tgz</filename></entry>
	<entry>8-битный цвет для адаптеров ET4000/W32, /W32i, /W32p и
	  ET6000.</entry>
      </row>
    </tbody>
    </tgroup>
    </informaltable>

    <para>Имеющиеся X-серверы для архитектуры PC98 (Япония):</para>

    <informaltable>
    <tgroup cols="2">
    <thead>
      <row>
	<entry>Архив</entry>
	<entry>Описание</entry>
      </row>
    </thead>

    <tbody>
      <row>
	<entry><filename>X9GAN.tgz</filename></entry>
	<entry>8-битный цвет для адаптеров PC98 GA-98NB/WAP.</entry>
      </row>

      <row>
	<entry><filename>X9GA9.tgz</filename></entry>
	<entry>8, 16 и 32-битный цвет для адаптеров PC98 S3 GA-968.</entry>
      </row>

      <row>
	<entry><filename>X9480.tgz</filename></entry>
	<entry>8-битный цвет для PC98 PEGC</entry>
      </row>

      <row>
	<entry><filename>X9NKV.tgz</filename></entry>
	<entry>8-битный цвет для адаптеров PC98 NEC-CIRRUS/EPSON
	  NKV/NKV2.</entry>
      </row>

      <row>
	<entry><filename>X9WBS.tgz</filename></entry>
	<entry>8-битный цвет для адаптеров PC98 WAB-S.</entry>
      </row>

      <row>
	<entry><filename>X9WEP.tgz</filename></entry>
	<entry>8-битный цвет для адаптеров PC98 WAB-EP.</entry>
      </row>

      <row>
	<entry><filename>X9WSN.tgz</filename></entry>
	<entry>8-битный цвет для адаптеров PC98 WSN-A2F.</entry>
      </row>

      <row>
	<entry><filename>X9EGC.tgz</filename></entry>
	<entry>4-битный цвет для PC98 EGC.</entry>
      </row>

      <row>
	<entry><filename>X9TGU.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров PC98 Trident
	  Cyber9320/9680.</entry>
      </row>

      <row>
	<entry><filename>X9NS3.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров PC98 NEC S3.</entry>
      </row>

      <row>
	<entry><filename>X9SPW.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров PC98 S3 PW/PCSKB.</entry>
      </row>

      <row>
	<entry><filename>X9LPW.tgz</filename></entry>
	<entry>8 и 16-битный цвет для адаптеров PC98 S3 PW/LB.</entry>
      </row>
    </tbody>
    </tgroup>
    </informaltable>

    <para>К каждому их этих серверов прилагается страница Справочника,
      в которой даны подробности относительно поддерживаемых чипсетов и
      конфигурационных параметров, специфичных для этого сервера.</para>

    <para>Имеется также несколько архивов, предназначенных разработчикам
      приложений для X:</para>

    <informaltable>
    <tgroup cols="2">
    <thead>
      <row>
	<entry>Архив</entry>
	<entry>Описание</entry>
      </row>
    </thead>

    <tbody>
      <row>
	<entry><filename>Xprog.tgz</filename></entry>
	<entry>Файлы config, <filename>lib*.a</filename> и
	  <filename>*.h</filename>, необходимые для компиляции
	  программ-клиентов.</entry>
      </row>

      <row>
	<entry><filename>Xctrb.tgz</filename></entry>
	<entry>Исходные тексты.</entry>
      </row>

      <row>
	<entry><filename>Xlk98.tgz</filename></entry>
	<entry><quote>Пакет компоновки</quote> для построения серверов,
	  версия для PC98 (Япония).</entry>
      </row>

      <row>
	<entry><filename>Xlkit.tgz</filename></entry>
	<entry><quote>Пакет компоновки</quote> для построения серверов,
	  обычная архитектура PC.</entry>
      </row>

      <row>
	<entry><filename>Xsrc-1.tgz</filename></entry>
	<entry>Часть 1 полных исходных текстов.</entry>
      </row>

      <row>
	<entry><filename>Xsrc-2.tgz</filename></entry>
	<entry>Часть 2 полных исходных текстов.</entry>
      </row>

      <row>
	<entry><filename>Xsrc-3.tgz</filename></entry>
	<entry>Часть 3 полных исходных текстов.</entry>
      </row>
    </tbody>
    </tgroup>
    </informaltable>

    <note>
      <para>Если Вы собираетесь устанавливать приложения для X из портов,
	то вам нужен архив <filename>Xprog.tgz</filename>.</para>
    </note>

    <para>В поставку XFree86 также включено некоторое количество
      необязательных компонентов, таких, как документация и программы
      настройки.</para>

    <informaltable>
    <tgroup cols="2">
    <thead>
      <row>
	<entry>Архив</entry>
	<entry>Описание</entry>
      </row>
    </thead>

    <tbody>
      <row>
	<entry><filename>Xdoc.tgz</filename></entry>
	<entry>Файлы README</entry>
      </row>

      <row>
	<entry><filename>Xjdoc.tgz</filename></entry>
	<entry>Файлы README на японском языке.</entry>
      </row>

      <row>
	<entry><filename>Xps.tgz</filename></entry>
	<entry>Файлы README в формате PostScript.</entry>
      </row>

      <row>
	<entry><filename>Xhtml.tgz</filename></entry>
	<entry>Файлы README в формате HTML.</entry>
      </row>

      <row>
	<entry><filename>Xman.tgz</filename></entry>
	<entry>Страницы Справочника.</entry>
      </row>

      <row>
	<entry><filename>Xcfg.tgz</filename></entry>
	<entry>Конфигурационные файлы программ <command>xinit</command> и
	  <command>xdm</command>.</entry>
      </row>

      <row>
	<entry><filename>Xset.tgz</filename></entry>
	<entry>Утилита <filename>X86Setup</filename>; графическая версия
	  программы <filename>xf86config</filename>.</entry>
      </row>

      <row>
	<entry><filename>Xjset.tgz</filename></entry>
	<entry>Утилита <filename>XF86Setup</filename>, японоязычная версия,
	  для обычной архитектуры PC.</entry>
      </row>
    </tbody>
    </tgroup>
    </informaltable>

    <para><filename>XF86Setup</filename> является программой настройки для
      XFree86, и Вы можете выбрать ее, а не стандартную программу
      настройки <filename>xf86config</filename>.  Для получения
      <filename>xf86config</filename> вам не нужно никаких дополнительных
      архивов; эта утилита включена в <filename>Xbin.tgz</filename>.</para>

    <para>Во время первой установки для создания начальных конфигурационных
      файлов вам нужно иметь <filename>Xcfg.tgz</filename>.  Не используйте
      этот файл при обновлении; он перезапишет ваши конфигурационные
      файлы.</para>

    <para>Вместе с XFree86 поставляются дополнительные шрифты:</para>

    <informaltable>
    <tgroup cols="2">
    <thead>
      <row>
	<entry>Архив</entry>
	<entry>Описание</entry>
      </row>
    </thead>

    <tbody>
      <row>
	<entry><filename>Xf100.tgz</filename></entry>
	<entry>Шрифты 100 dpi.</entry>
      </row>

      <row>
	<entry><filename>Xfscl.tgz</filename></entry>
	<entry>Шрифты типа Speedo и Type1.</entry>
      </row>

      <row>
	<entry><filename>Xfnon.tgz</filename></entry>
	<entry>Японские, китайские и другие неанглийские шрифты.</entry>
      </row>

      <row>
	<entry><filename>Xfcyr.tgz</filename></entry>
	<entry>Шрифты с кириллицей.</entry>
      </row>
    </tbody>
    </tgroup>
    </informaltable>

    <para>В отличие от X-серверов, указанных выше, архивы для следующих
      серверов все находятся в основном каталоге.</para>

    <informaltable>
    <tgroup cols="2">
    <thead>
      <row>
	<entry>Архив</entry>
	<entry>Описание</entry>
      </row>
    </thead>

    <tbody>
      <row>
	<entry><filename>Xfsrv.tgz</filename></entry>
	<entry>Сервер шрифтов.</entry>
      </row>

      <row>
	<entry><filename>Xnest.tgz</filename></entry>
	<entry>Сервер, запускаемый как окно приложения-клиента на другом
	  дисплее.</entry>
      </row>

      <row>
	<entry><filename>Xprt.tgz</filename></entry>
	<entry>Сервер печати.</entry>
      </row>

      <row>
	<entry><filename>Xvfb.tgz</filename></entry>
	<entry>Сервер Virtual Framebuffer, отображающийся в память
	  или mmap-файл.</entry>
      </row>
    </tbody>
    </tgroup>
    </informaltable>
  </sect2>

  <sect2>
    <title>Ручная установка XFree86</title>

    <para>Если для установки X Вы не использовали программу sysinstall, то
      вам нужно выполнить несколько шагов:</para>

    <procedure>
      <step>
	<para>Создать каталоги и распаковать нужные архивы.</para>
      </step>

      <step>
	<para>Выбрать и установить X-сервер.</para>
      </step>

      <step>
	<para>Настроить рабочее окружение для работы с X.</para>
      </step>

      <step>
	<para>Найти виртуальный терминал для запуска X.</para>
      </step>

      <step>
	<para>Настроить X под ваше оборудование.</para>
      </step>
    </procedure>

    <para>На первый взгляд это кажется большой работой, однако если вы
      будете делать все методично, все не так уж и плохо.  В оставшейся части
      раздела мы рассмотрим по порядку каждый шаг.</para>

    <sect3>
      <title>Распаковка архивов</title>

      <para>Вы должны распаковывать архивы, работая как пользователь root,
	потому что некоторые выполнимые файлы имеют установленный атрибут
	set-user-id (они будут иметь привилегии пользователя root при
	запуске другими пользователями).  Если Вы распакуете архивы, работая
	в качестве рядового пользователя, у вас может не получиться их
	запустить.  Также Вы должны установить значение маски прав umask в
	022 (права rwxr-xr-x), так как X-серверу требуются особые
	права.</para>

      <screen>
&prompt.user; <userinput>su</userinput>
Password:
&prompt.root; <userinput>umask 022</userinput>
      </screen>

      <para>Если в файловой системе <filename>/usr</filename> недостаточно
	дискового пространства, создайте каталог в другом разделе и
	сделайте на него символическую ссылку из /usr.	Например, если
	файловая система <filename>/home</filename> имеет достаточно
	места, Вы можете сделать следующее:</para>

      <screen>
&prompt.root; <userinput>cd /home</userinput>
&prompt.root; <userinput>mkdir X11R6</userinput>
&prompt.root; <userinput>ln -s /home/X11R6 /usr/X11R6</userinput>
      </screen>

      <para>Затем определитесь, какие архивы Вы хотите установить.  Для
	минимальной установки выберите <filename>Xbin.tgz</filename>,
	<filename>Xfnts.tgz</filename>, <filename>Xlib.tgz</filename> и
	<filename>Xcfg.tgz</filename>.	Если X уже сконфигурированы под
	ваше оборудование, то Вы можете опустить
	<filename>Xcfg.tgz</filename>.</para>

      <para>Если Вы используете sh, выполните распаковку вот так:</para>

      <screen>
&prompt.root; <userinput>mkdir -p /usr/X11R6</userinput>
&prompt.root; <userinput>cd /usr/X11R6</userinput>
&prompt.root; <userinput>for i in bin fnts lib cfg; do</userinput>
&prompt.root; <userinput>  tar xzf X$i.tgz</userinput>
&prompt.root; <userinput>done</userinput>
      </screen>

      <para>Если Вы используете csh, то выполните:</para>

      <screen>
&prompt.root; <userinput>mkdir -p /usr/X11R6</userinput>
&prompt.root; <userinput>cd /usr/X11R6</userinput>
&prompt.root; <userinput>foreach i (bin fnts lib cfg)</userinput>
<prompt>?</prompt> <userinput>	tar xzf X$i.tgz</userinput>
<prompt>?</prompt> <userinput>end</userinput>
      </screen>
    </sect3>

    <sect3>
      <title>Установка сервера</title>

      <para>Выберите архивный файл с сервером, соответствующим вашему
	адаптеру VGA.  Если таблица, приведенная в предыдущем разделе, не
	дала вам достаточно подробную информацию, посмотрите страницы
	Справочника по серверу,
	<filename>/usr/X11R6/man/man1/XF86_*</filename>, в которых приведены
	списки чипсетов VGA, поддерживаемых каждым сервером.  Например, если
	у вас адаптер на основе чипсета ET4000, то Вы будете использовать
	сервер <filename>XF86_SVGA</filename>.	В таком случае Вы должны
	выполнить такие команды:</para>

      <screen>
&prompt.root; <userinput>cd /usr/X11R6</userinput>
&prompt.root; <userinput>tar xzf XSVGA.tgz [укажите здесь имя вашего сервера]</userinput>
      </screen>
    </sect3>

    <sect3>
      <title>Настройка рабочего окружения</title>

      <para>Теперь вам может понадобиться создать символическую ссылку
	<filename>/usr/X11/bin/X</filename>, которая указывает на сервер,
	соответствующий вашему графическому адаптеру.  В этом примере это
	сервер <filename>XF86_SVGA</filename>:</para>

      <screen>
&prompt.root; <userinput>cd /usr/X11R6/bin</userinput>
&prompt.root; <userinput>rm X</userinput>
&prompt.root; <userinput>ln -s XF86_SVGA X</userinput>
      </screen>

      <para>Символическая ссылка нужна системе X для того, чтобы она работала
	нормально, и у вас есть возможность ее создать после запуска
	<filename>xf86config</filename> &ndash; смотрите ниже.</para>

      <para>Затем убедитесь, что каталог <filename>/usr/X11R6/bin</filename>
	включен в маршрут поиска по умолчанию в файле
	<filename>/etc/profile</filename> в случае командного процессора sh
	или в файле <filename>/etc/csh.login</filename> при использовании
	оболочки csh, и добавьте туда этот маршрут, если его там нет.  Лучше
	всего сделать это в редакторе, но если вам нужен немедленный
	результат, Вы можете ввести:</para>

      <screen>
&prompt.root; <userinput>echo 'PATH=$PATH:/usr/X11R6/bin' &gt;&gt;/etc/profile</userinput>
      </screen>

      <para>или:</para>

      <screen>
&prompt.root; <userinput>echo 'set path = ($path /usr/X11R6/bin)' &gt;&gt;/etc/csh.login</userinput>
      </screen>

      <para>Другой способ заключается в помещении всеми, кто работает с X,
	пути <filename>/usr/X11R6/bin</filename> в переменные окружения
	<envar>PATH</envar> своего командного процессора.</para>

      <para>Теперь вызовите программу ldconfig для помещения совместно
	используемых библиотек в кэш для <filename>ld.so</filename>:</para>

      <screen>
&prompt.root; <userinput>ldconfig -m /usr/X11R6/lib</userinput>
      </screen>

      <para>Вы можете не запускать <command>ldconfig</command>, если
	собираетесь выполнить перезагрузку перед началом работы с X.</para>

      <para>Вам не нужно распаковывать файлы шрифтов, но если Вы это
	сделаете, то должны будете запустить команду
	<command>mkfontdir</command> в соответствующем каталоге со шрифтами,
	иначе ваш сервер аварийно завершит работу, выдав сообщение
	<quote>could not open default font `fixed'</quote>.</para>
    </sect3>

    <sect3>
      <title>Назначение для X виртуального терминала</title>

      <para>Теперь убедитесь, что у вас есть неиспользуемая виртуальная
	консоль с запущенной на ней программой getty.  Сначала определите,
	сколько у вас всего имеется виртуальных консолей:</para>

      <screen>
&prompt.root; <userinput>dmesg | grep virtual</userinput>
sc0: VGA color &lt;16 virtual consoles, flags=0x0&gt;
      </screen>

      <para>Затем загляните в файл <filename>/etc/ttys</filename> для того,
	чтобы убедиться в наличии по крайней мере одного виртуального
	терминала (устройства ttyvxx), на котором не запущена getty.  Поищите
	ключевое слово <literal>off</literal>:</para>

      <screen>
&prompt.root; <userinput>grep ttyv /etc/ttys</userinput>
ttyv0  "/usr/libexec/getty Pc" cons25  on secure
ttyv1  "/usr/libexec/getty Pc" cons25  on secure
ttyv2  "/usr/libexec/getty Pc" cons25  on secure
ttyv3  "/usr/libexec/getty Pc" cons25  off secure
      </screen>

      <para>В нашем случае, если в ядре отконфигурировано по крайней мере 4
	VT, то доступен терминал <filename>/dev/ttyv3</filename>.  Если это
	не так, то либо запретите запуск getty в файле
	<filename>/etc/ttys</filename>, сменив ключевое слово с on на off,
	либо построив ядро с большим количеством виртуальных
	терминалов.</para>
    </sect3>

    <sect3>
      <title>Настройка X под ваше оборудование</title>

      <para>После установки программного обеспечения для работы с X вам
	нужно настроить файл <filename>XF86Config</filename>, который
	используется X-сервером для определения параметров вашего
	оборудования и способа запуска.</para>

      <para>Чтобы настроить файл <filename>XF86Config</filename>, вам
	потребуется следующая информация об оборудовании:</para>

      <itemizedlist>
	<listitem>
	  <para>Тип вашей мыши, скорость обмена в случае мыши, подключенной к
	    последовательном порту, и имя устройства, к которому она
	    подключена.  Как правило, это будет устройство
	    <filename>/dev/ttyd0</filename> или
	    <filename>/dev/ttyd1</filename> в случае мыши, подключенной к
	    последовательному порту, <filename>/dev/psm0</filename> в случае
	    мыши PS/2 и <filename>/dev/mse0</filename>, если это мышь типа
	    bus mouse.</para>
	</listitem>

	<listitem>
	  <para>Тип графического адаптера и объем видеопамяти.	Если это
	    безымянный адаптер, выясните, какой чипсет VGA он
	    использует.</para>
	</listitem>

	<listitem>
	  <para>Параметры вашего монитора; частоты вертикальной и
	    горизонтальной развертки.</para>
	</listitem>
      </itemizedlist>
    </sect3>

    <sect3>
      <title>Идентификация оборудования</title>

      <para>Как Вы определяете, какое оборудование используется?
	Производитель должен сообщить об этом, но зачастую информация,
	которая сообщается о вашем графическом адаптере и мониторе является
	ничтожной; <quote>Super VGA board with 76 Hz refresh rate and
	16,777,216 colors</quote>.  Это говорит вам о максимально возможной
	глубине цвета (24 бита &ndash; - число цветов равно 2 в степени,
	равной глубине цвета), но ничего больше о графическом
	адаптере.</para>

      <para>Как мы увидим позже, реально необходимыми параметрами являются
	максимальная частота горизонтальной развертки, dot clock range,
	чипсет и объем памяти адаптера.</para>

      <para>Вам может не повезти в попытках выяснить эту информацию
	полностью, но Вы можете получить ее часть с помощью программы
	<command>SuperProbe</command>.	Она всегда должна суметь определить
	чипсет и объем памяти адаптера.</para>

      <para>Работа программы <command>SuperProbe</command> может вызвать
	аварийный сбой в работе вашей системы.	Не делайте ничего важного
	при запуске этой программы.  Запуск SuperProbe выглядит примерно
	так:</para>

      <screen>
&prompt.root; <userinput>SuperProbe</userinput>
(предупреждения и сообщения опущены)
First video: Super-VGA
	Chipset: Tseng ET4000 (Port Probed)
	Memory:  1024 Kbytes
	RAMDAC:  Generic 8-bit pseudo-color DAC
		 (with 6-bit wide lookup tables (or in 6-bit mode))
      </screen>

      <para>Программа <command>SuperProbe</command> сама по себе весьма
	придирчива, и Вы будете часто получать сообщения, похожие на
	такое:</para>

      <screen>
SuperProbe: Cannot be run while an X server is running
SuperProbe: If an X server is not running, unset $DISPLAY and try again
SuperProbe: Cannot open video
      </screen>

      <para>Другими словами, даже если X-сервер не запущен,
	<command>SuperProbe</command> не будет работать, если у вас
	определена переменная окружения <envar>DISPLAY</envar>.  Как от
	нее избавиться?  В случае использования командного процессора в стиле
	Bourne, выполните:</para>

      <screen>
&prompt.root; <userinput>unset DISPLAY</userinput>
      </screen>

      <para>Если у вас C shell, то выполните:</para>

      <screen>
&prompt.root; <userinput>unsetenv DISPLAY</userinput>
      </screen>
    </sect3>

    <sect3>
      <title>Запуск <command>xf86config</command></title>

      <para>Создать ваш конфигурационный файл можно просто, воспользовавшись
	одной из утилит <command>xf86config</command> (отметьте регистр
	букв) или <command>XF86Setup</command>.  Обе программы проведут вас
	через процедуру настройки шаг за шагом.  Программа
	<command>xf86config</command> работает в текстовом режиме, когда как
	<command>XF86Setup</command> - в графическом.  С утилитой
	<command>XF86Setup</command> могут быть проблемы с необычным
	оборудованием, так что я предпочитаю
	<command>xf86config</command>.</para>

      <para>Вы можете также использовать sysinstall, однако это практически
	ничего не изменит;  <application>sysinstall</application> просто
	запускает <command>xf86config</command>, так что проще запустить его
	непосредственно.  В этом разделе в примерах мы будем иллюстрировать
	процесс настройки через <command>xf86config</command>.	Мы
	устанавливаем X для древнего адаптера Diamond SpeedStar с 1 МБ
	видеопамяти, мышь Logitech MouseMan и монитор ADI MicroScan 5AP.
	Мышь подключена к системе через первый последовательный порт,
	<filename>/dev/ttyd0</filename>.</para>

      <para>Для запуска <command>xf86config</command> введите его имя.	Если
	каталог <filename>/usr/X11R6/bin</filename> включен в переменную
	вашего окружения <envar>PATH</envar>, вам достаточно набрать
	<command>xf86config</command>.	Если это н так, вам придется набрать
	полный путь к <command>xf86config</command>, например, так:</para>

      <screen>
&prompt.root; <userinput>/usr/X11R6/bin/xf86config</userinput>
      </screen>

      <para>Эта программа создаст первоначальный файл
	<filename>XF86Config</filename> на основании того, что Вы выберите
	с помощью системы меню.</para>

      <para>Файл <filename>XF86Config</filename> обычно находится в каталоге
	<filename>/usr/X11R6/lib/X11</filename> или
	<filename>/etc</filename>.  Пример файла
	<filename>XF86Config</filename> поставляется вместе с XFree86;
	он настроен на стандартный адаптер VGA и монитор с разрешением
	640x480.  Эта утилита запросит путь, когда будут готова к записи
	файла.</para>

      <para>Вы можете взять в качестве основы образцовый файл
	<filename>XF86Config</filename> и отредактировать его согласно вашим
	настройкам, либо позволить этой программе сгенерировать файл
	<filename>XF86Config</filename> для вашей конфигурации и тонко
	подстроить его.  Подробное описание процесса настройки дано в файле
	<filename>/usr/X11R6/lib/X11/doc/README.Config</filename>.</para>

      <para>Для серверов с ускорителями (включая драйверы с ускорителями в
	сервере SVGA) имеется множество зависимых от чипсета и адаптера
	опций и настроек.  Эта программа не знает об этих настройках.  В
	некоторых конфигурациях часть этих настроек должна быть указана.
	Обратитесь к страницам Справочника по серверу и файлам README,
	описывающим конкретный чипсет.</para>

      <para>Перед тем, как продолжить работу с программой, убедитесь, что вы
	знаете чипсет и объем видеопамяти вашего графического адаптера.
	В этом вам может помочь команда <command>SuperProbe</command>.
	Она также полезна, если Вы знаете, какой сервер собираетесь
	использовать.</para>

      <screen>
Press enter to continue, or ctrl-c to abort. ENTER

First specify a mouse protocol type. Choose one from the following list:

 1.  Microsoft compatible (2-button protocol)
 2.  Mouse Systems (3-button protocol)
 3.  Bus Mouse
 4.  PS/2 Mouse
 5.  Logitech Mouse (serial, old type, Logitech protocol)
 6.  Logitech MouseMan (Microsoft compatible)
 7.  MM Series
 8.  MM HitTablet
 9.  Microsoft IntelliMouse
      </screen>

      <para>Если у вас мышь с двумя кнопками, то вероятно, она имеет тип 1,
	если же кнопок три, то она, скорее всего, поддерживает оба типа
	протоколов, как 1, так и 2.  Если две основных разновидности
	последнего случая; мышка с переключателем для выбора протокола,
	и мышка с выставленным по умолчанию протоколом 1, которой требуется
	удержание кнопки при загрузке для выбора протокола 2.  Некоторые
	мышки можно заставить выбрать протокол 2 посылкой особой
	последовательности в порт мыши (смотрите опции
	ClearDTR/ClearRTS).</para>

      <screen>
Enter a protocol number: 6		Logitech MouseMan

You have selected a Logitech MouseMan type mouse. You might want to enable
ChordMiddle which could cause the third button to work.

Please answer the following question with either 'y' or 'n'.
Do you want to enable ChordMiddle? n
      </screen>

      <para>Вам определенно нужно включить третью кнопку у мыши, так как
	многие X-клиенты ее используют.  Однако, если Вы работаете с
	настоящей мышью Logitech, вам не нужно включать параметр
	<literal>ChordMiddle</literal> для использования кнопки.  Если вы
	обнаружили, что третья кнопка не работает после запуска X, то можете
	включить параметр <literal>ChordMiddle</literal>, отредактировав
	конфигурационный файл &ndash; это более легкий и свободный от
	ошибок способ, чем повторный запуск программы
	<command>XF86Setup</command>.</para>

      <para>Продолжаем настройку:</para>

      <screen>
If your mouse has only two buttons, it is recommended that you enable Emulate3Buttons.

Please answer the following question with either 'y' or 'n'.
Do you want to enable Emulate3Buttons? n

Now give the full device name that the mouse is connected to, for example
/dev/tty00. Just pressing enter will use the default, /dev/mouse.

Mouse device: /dev/ttyd1
      </screen>

      <para>Будьте очень аккуратны при вводе этого параметра.  Вы должны
	указать правильное имя устройства, к которому подключена мышь.
	Команда <command>xf86config</command> не является командой только
	для FreeBSD, и предлагаемый вариант абсолютно не подходит для
	FreeBSD.  Используйте имена от <filename>/dev/ttyd0</filename> до
	<filename>/dev/ttyd3</filename> для мышей на последовательном порту,
	<filename>/dev/psm0</filename> для мыши PS/2 и
	<filename>/dev/mse0</filename> для мыши типа bus mouse.</para>

      <para>Продолжив, мы увидим:</para>

      <screen>
Beginning with XFree86 3.1.2D, you can use the new X11R6.1
XKEYBOARD extension to manage the keyboard layout. If you answer 'n' to the
following question, the server will use the old method, and you have to
adjust your keyboard layout with xmodmap.

Please answer the following question with either 'y' or 'n'.
Do you want to use XKB? y

The following dialogue will allow you to select from a list of already
preconfigured keymaps. If you don't find a suitable keymap in the list,
the program will try to combine a keymap from additional information you
are asked then. Such a keymap is by default untested and may require
manual tuning. Please report success or required changes for such a
keymap to XFREE86@XFREE86.ORG for addition to the list of preconfigured
keymaps in the future.

Press enter to continue, or ctrl-c to abort.

List of preconfigured keymaps:

  1  Standard 101-key, US encoding
  2  Microsoft Natural, US encoding
  3  KeyTronic FlexPro, US encoding
  4  Standard 101-key, US encoding with ISO9995-3 extensions
  5  Standard 101-key, German encoding
  6  Standard 101-key, French encoding
  7  Standard 101-key, Thai encoding
  8  Standard 101-key, Swiss/German encoding
  9  Standard 101-key, Swiss/French encoding
 10  None of the above

Enter a number to choose the keymap.

1					Choose the standard US keyboard
      </screen>

      <para>Теперь мы должны задать характеристики монитора.  Двумя
	критически важными параметрами являются частота вертикальной
	развертки, которая определяет частоту обновления изображения и,
	частоту горизонтальной развертки, определяющую скорость
	вывода строк на экран.</para>

      <para>Рабочие пределы для частот вертикальной и горизонтальной
	развертки должны быть указаны в руководстве по вашему монитору.
	Если у вас возникли с этим проблемы, обратитесь к базе данных по
	мониторам в файле
	<filename>/usr/X11R6/lib/X11/doc/Monitors</filename> и попробуйте
	найти ваш монитор здесь.</para>

      <screen>
Press enter to continue, or ctrl-c to abort. ENTER

You must indicate the horizontal sync range of your monitor. You can either
select one of the predefined ranges below that correspond to industry-
standard monitor types, or give a specific range.

It is VERY IMPORTANT that you do not specify a monitor type with a horizontal
sync range that is beyond the capabilities of your monitor. If in doubt,
choose a conservative setting.

    hsync in kHz; monitor type with characteristic modes
 1  31.5; Standard VGA, 640x480 @@ 60 Hz
 2  31.5 - 35.1; Super VGA, 800x600 @@ 56 Hz
 3  31.5, 35.5; 8514 Compatible, 1024x768 @@ 87 Hz interlaced (no 800x600)
 4  31.5, 35.15, 35.5; Super VGA, 1024x768 @@ 87 Hz interlaced, 800x600 @@ 56 Hz
 5  31.5 - 37.9; Extended Super VGA, 800x600 @@ 60 Hz, 640x480 @@ 72 Hz
 6  31.5 - 48.5; Non-Interlaced SVGA, 1024x768 @@ 60 Hz, 800x600 @@ 72 Hz
 7  31.5 - 57.0; High Frequency SVGA, 1024x768 @@ 70 Hz
 8  31.5 - 64.3; Monitor that can do 1280x1024 @@ 60 Hz
 9  31.5 - 79.0; Monitor that can do 1280x1024 @@ 74 Hz
10  31.5 - 82.0; Monitor that can do 1280x1024 @@ 76 Hz
11  Enter your own horizontal sync range

Enter your choice (1-11):
      </screen>

      <para>К несчастью, наш монитор не упоминается в файле
	<filename>/usr/X11R6/lib/X11/doc/Monitors</filename>, но, на наше
	счастье, в руководстве по монитору в разделе технических параметров
	приведены диапазоны частот.  Частота горизонтальной развертки
	находится в пределах от 30 до 64 кГц, а вертикальной - в пределах
	от 50 до 100 Гц.   Диапазон частот горизонтальной развертки чуть ли
	не во всех случаях покрывается выбором 8, но эта настройка грозит
	быть на 0.3 кГц выше по частоте, чем указано в технических
	параметрах.  Хотите ли Вы рискнуть?  В большинстве случаев проблем
	это не вызовет, потому что вряд ли монитор сгорит при столь
	незначительном отклонении от стандартных режимов работы, и вряд ли в
	ваш файл <filename>XF86Config</filename> будет сгенерирована частота
	горизонтальной развертки от 64.0 до 64.3 kHz.  Однако нет причин
	идти даже на такой незначительный риск.  Просто укажите реальные
	значения:</para>

      <screen>
Enter your choice (1-11): 11

Please enter the horizontal sync range of your monitor, in the format used
in the table of monitor types above. You can either specify one or more
continuous ranges (e.g. 15-25, 30-50), or one or more fixed sync
frequencies.

Horizontal sync range: 30-64
      </screen>

      <para>Теперь выбираем диапазон частот вертикальной развертки:</para>

      <screen>
You must indicate the vertical sync range of your monitor.
You can either select one of the predefined ranges below that correspond
to industry-standard monitor types, or give a specific range.  For
interlaced modes, the number that counts is the high one (e.g., 87 Hz
rather than 43 Hz).

 1  50-70
 2  50-90
 3  50-100
 4  40-150
 5  Enter your own vertical sync range

Enter your choice: 3			     exactly the range of the monitor
      </screen>

      <para>На следующем шаге нужно указать идентификационные строки.
	Названия Вы можете придумать сами, если хотите, однако если Вы не
	специализируетесь на работе с разным оборудованием, то можете
	позволить программе <command>xf86config</command> сделать это
	за вас:</para>

      <screen>
You must now enter a few identification/description strings,
namely an identifier, a vendor name, and a model name. Just pressing enter
will fill in default names.

The strings are free-form, spaces are allowed.
Enter an identifier for your monitor definition: ENTER
Enter the vendor name of your monitor:	ENTER
Enter the model name of your monitor:  ENTER
      </screen>

      <para>Теперь следует шаг выбора графического адаптера.  У нас
	имеется старенький Diamond SpeedStar Plus с микросхемой ET4000 и
	неизвестные микросхемы для Ramdac и тактового генератора.  Давайте
	посмотрим, что у нас получится:</para>

      <screen>
Now we must configure video card specific settings.  At
this point you can choose to make a selection out of a database of video
card definitions.  Because there can be variation in Ramdacs and clock
generators even between cards of the same model, it is not sensible to
blindly copy the settings (e.g., a Device section).  For this reason,
after you make a selection, you will still be asked about the components
of the card, with the settings from the chosen database entry presented as
a strong hint.

The database entries include information about the chipset, what server to
run, the Ramdac and ClockChip, and comments that will be included in the
Device section. However, a lot of definitions only hint about what server
to run (based on the chipset the card uses) and are untested.

If you can't find your card in the database, there's nothing to worry about.
You should only choose a database entry that is exactly the same model as
your card; choosing one that looks similar is just a bad idea (e.g. a
GemStone Snail 64 may be as different from a GemStone Snail 64+ in terms of
hardware as can be).

Do you want to look at the card database? y
  0  2 the Max MAXColor S3 Trio64V+		       S3 Trio64V+
  1  928Movie					       S3 928
  2  AGX (generic)				       AGX-014/15/16
  3  ALG-5434(E)				       CL-GD5434
  4  ASUS 3Dexplorer				       RIVA128
  5  ASUS PCI-AV264CT				       ATI-Mach64
  6  ASUS PCI-V264CT				       ATI-Mach64
  7  ASUS Video Magic PCI V864			       S3 864
  8  ASUS Video Magic PCI VT64			       S3 Trio64
  9  AT25					       Alliance AT3D
 10  AT3D					       Alliance AT3D
 11  ATI 3D Pro Turbo				       ATI-Mach64
 12  ATI 3D Xpression				       ATI-Mach64
 13  ATI 3D Xpression+ PC2TV			       ATI-Mach64
 14  ATI 8514 Ultra (no VGA)			       ATI-Mach8
 15  ATI All-in-Wonder				       ATI-Mach64
 16  ATI Graphics Pro Turbo			       ATI-Mach64
 17  ATI Graphics Pro Turbo 1600		       ATI-Mach64

Enter a number to choose the corresponding card definition.
Press enter for the next page, q to continue configuration.
ENTER
      </screen>

      <para>В алфавитно-цифровом порядке приводится некоторое количество
	описаний адаптеров.  Наконец мы видим:</para>

      <screen>
108  DSV3325					       S3 ViRGE
109  DSV3326					       S3 Trio64V+
110  DataExpert DSV3325 			       S3 ViRGE
111  DataExpert DSV3365 			       S3 Trio64V+
112  Dell S3 805				       S3 801/805
113  Dell onboard ET4000			       ET4000
114  Diamond Edge 3D				       nv1
115  Diamond Multimedia Stealth 3D 2000 	       S3 ViRGE
116  Diamond Multimedia Stealth 3D 2000 PRO	       S3 ViRGE/DX
117  Diamond SpeedStar (Plus)			       ET4000
118  Diamond SpeedStar 24			       ET4000
119  Diamond SpeedStar 24X (not fully supported)       WD90C31
120  Diamond SpeedStar 64			       CL-GD5434
121  Diamond SpeedStar HiColor			       ET4000
122  Diamond SpeedStar Pro (not SE)		       CL-GD5426/28
123  Diamond SpeedStar Pro 1100 		       CL-GD5420/2/4/6/8/9
124  Diamond SpeedStar Pro SE (CL-GD5430/5434)	       CL-GD5430/5434
125  Diamond SpeedStar64 Graphics 2000/2200	       CL-GD5434

Enter a number to choose the corresponding card definition.
Press enter for the next page, q to continue configuration.

117

Your selected card definition:

Identifier: Diamond SpeedStar (Plus)
Chipset:    ET4000
Server:     XF86_SVGA

Press enter to continue, or ctrl-c to abort.ENTER

Now you must determine which server to run.  Refer to the man pages and
other documentation.  The following servers are available (they may not
all be installed on your system):

 1  The XF86_Mono server. This a monochrome server that should work on any
    VGA-compatible card, in 640x480 (more on some SVGA chipsets).
 2  The XF86_VGA16 server. This is a 16-color VGA server that should work on
    any VGA-compatible card.
 3  The XF86_SVGA server. This is a 256 color SVGA server that supports
    a number of SVGA chipsets. On some chipsets it is accelerated or
    supports higher color depths.
 4  The accelerated servers. These include XF86_S3, XF86_Mach32, XF86_Mach8,
    XF86_8514, XF86_P9000, XF86_AGX, XF86_W32, XF86_Mach64, XF86_I128 and
    XF86_S3V.

These four server types correspond to the four different "Screen" sections in
XF86Config (vga2, vga16, svga, accel).

 5  Choose the server from the card definition, XF86_SVGA.

Which one of these screen types do you intend to run by default (1-5)?
      </screen>

      <para>Система уже выбрала за нас XF86_SVGA.  Хотим ли мы это изменить?
	Нам нужен для этого весомую причину.  В этом случае особых причин у
	нас нет, так что оставим сервер, определенный по адаптеру:</para>

      <screen>
Which one of these screen types do you intend to run by default (1-5)? 5

The server to run is selected by changing the symbolic link 'X'. For example,
the SVGA server.

Please answer the following question with either 'y' or 'n'.
Do you want me to set the symbolic link? y
      </screen>

      <para>Все программы, запускающие X (xinit, startx и xdm), на самом
	деле запускают программу <filename>/usr/X11R6/bin/X</filename>.
	Эта символическая ссылка <filename>/usr/X11R6/bin/X</filename>,
	указывающая на ваш сервер.  Если у вас этой ссылки нет, Вы не
	сможете запустить X.</para>

      <screen>
Now you must give information about your video card.  This
will be used for the "Device" section of your video card in XF86Config.

You must indicate how much video memory you have. It is probably a good
idea to use the same approximate amount as that detected by the server you
intend to use. If you encounter problems that are due to the used server
not supporting the amount memory you have (e.g. ATI Mach64 is limited to
1024K with the SVGA server), specify the maximum amount supported by the
server.

How much video memory do you have on your video card:

 1  256K
 2  512K
 3  1024K
 4  2048K
 5  4096K
 6  Other

Enter your choice: 3

You must now enter a few identification/description strings, namely an
identifier, a vendor name, and a model name. Just pressing enter will fill
in default names (possibly from a card definition).

Your card definition is Diamond SpeedStar (Plus).

The strings are free-form, spaces are allowed.
Enter an identifier for your video card definition: ENTER
You can simply press enter here if you have a generic card, or want to
describe your card with one string.
Enter the vendor name of your video card:  ENTER
Enter the model (board) name of your video card:  ENTER

Especially for accelerated servers, Ramdac, Dacspeed and ClockChip settings
or special options may be required in the Device section.

The RAMDAC setting only applies to the S3, AGX, W32 servers, and some
drivers in the SVGA servers. Some RAMDAC's are auto-detected by the server.
The detection of a RAMDAC is forced by using a Ramdac "identifier" line in
the Device section. The identifiers are shown at the right of the following
table of RAMDAC types:

  1  AT&amp;T 20C490 (S3 and AGX servers, ARK driver)		     att20c490
  2  AT&amp;T 20C498/21C498/22C498 (S3, autodetected)		     att20c498
  3  AT&amp;T 20C409/20C499 (S3, autodetected)			     att20c409
  4  AT&amp;T 20C505 (S3)					     att20c505
  5  BrookTree BT481 (AGX)					 bt481
  6  BrookTree BT482 (AGX)					 bt482
  7  BrookTree BT485/9485 (S3)					 bt485
  8  Sierra SC15025 (S3, AGX)					 sc15025
  9  S3 GenDAC (86C708) (autodetected)				 s3gendac
 10  S3 SDAC (86C716) (autodetected)				 s3_sdac
 11  STG-1700 (S3, autodetected)				 stg1700
 12  STG-1703 (S3, autodetected)				 stg1703


Enter a number to choose the corresponding RAMDAC.
Press enter for the next page, q to quit without selection of a RAMDAC.


q				   Нам это не нужно


A Clockchip line in the Device section forces the detection of a
programmable clock device. With a clockchip enabled, any required
clock can be programmed without requiring probing of clocks or a
Clocks line. Most cards don't have a programmable clock chip.
Choose from the following list:

 1  Chrontel 8391						ch8391
 2  ICD2061A and compatibles (ICS9161A, DCS2824)		icd2061a
 3  ICS2595							ics2595
 4  ICS5342 (similar to SDAC, but not completely compatible)	ics5342
 5  ICS5341							ics5341
 6  S3 GenDAC (86C708) and ICS5300 (autodetected)		s3gendac
 7  S3 SDAC (86C716)						s3_sdac
 8  STG 1703 (autodetected)					stg1703
 9  Sierra SC11412						sc11412
10  TI 3025 (autodetected)					ti3025
11  TI 3026 (autodetected)					ti3026
12  IBM RGB 51x/52x (autodetected)				ibm_rgb5xx

Just press enter if you don't want a Clockchip setting.
What Clockchip setting do you want (1-12)? ENTER

For most configurations, a Clocks line is useful since it prevents the slow
and nasty sounding clock probing at server start-up. Probed clocks are
displayed at server startup, along with other server and hardware
configuration info. You can save this information in a file by running
imprecise; some clocks may be slightly too high (varies per run).

At this point I can run X -probeonly, and try to extract the clock information
from the output. It is recommended that you do this yourself and add a clocks
line (note that the list of clocks may be split over multiple Clocks lines) to
your Device section afterwards. Be aware that a clocks line is not
appropriate for drivers that have a fixed set of clocks and don't probe by
default (e.g. Cirrus). Also, for the P9000 server you must simply specify
clocks line that matches the modes you want to use.  For the S3 server with
a programmable clock chip you need a 'ClockChip' line and no Clocks line.

You must be root to be able to run X -probeonly now.

Do you want me to run 'X -probeonly' now?
      </screen>

      <para>Над последним вопросом стоит подумать.  Вы должны в какой-то
	момент запустить X -probeonly, но для этого нужно что-то сделать.
	Мы учтем рекомендации и попробуем это попозже.</para>

      <screen>
Do you want me to run 'X -probeonly' now? n

For each depth, a list of modes (resolutions) is defined. The default
resolution that the server will start-up with will be the first listed
mode that can be supported by the monitor and card.
Currently it is set to:

"640x480" "800x600" "1024x768" for 8bpp
"640x480" "800x600" for 16bpp
"640x480" for 24bpp
"640x400" for 32bpp

Note that 16, 24 and 32bpp are only supported on a few configurations.
Modes that cannot be supported due to monitor or clock constraints will
be automatically skipped by the server.

 1  Change the modes for 8pp (256 colors)
 2  Change the modes for 16bpp (32K/64K colors)
 3  Change the modes for 24bpp (24-bit color, packed pixel)
 4  Change the modes for 32bpp (24-bit color)
 5  The modes are OK, continue.

Enter your choice: 5	 примем значения, предложенные по умолчанию

You can have a virtual screen (desktop), which is screen area that is larger
than the physical screen and which is panned by moving the mouse to the edge
of the screen. If you don't want virtual desktop at a certain resolution,
you cannot have modes listed that are larger. Each color depth can have a
differently-sized virtual screen

Please answer the following question with either 'y' or 'n'.
Do you want a virtual screen that is larger than the physical screen? n
      </screen>

      <para>Трудно решить, нужен ли Вам виртуальный экран, превосходящий по
	размеру экран физический.  Я нахожу его весьма неудобным, так что
	советую ответить n.  Он может оказаться для Вас полезным, особенно
	если максимально допустимое разрешение невелико.</para>

      <para>Теперь настройка закончена, и программе
	<application>sysinstall</application> требуется просто записать
	конфигурационный файл:</para>

      <screen>
I am going to write the XF86Config file now.  Make sure
you don't accidently overwrite a previously configured one.

Shall I write it to /etc/XF86Config? y

File has been written. Take a look at it before running 'startx'. Note that
the XF86Config file must be in one of the directories searched by the server
(e.g. /usr/X11R6/lib/X11) in order to be used. Within the server press
ctrl, alt and '+' simultaneously to cycle video resolutions. Pressing ctrl,
alt and backspace simultaneously immediately exits the server (use if
the monitor doesn't sync for a particular mode).

For further configuration, refer to /usr/X11R6/lib/X11/doc/README.Config.
      </screen>

      <para>После того, как Вы закончите эту настройку, можно начать
	работу с X.</para>
    </sect3>
  </sect2>
</sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->

