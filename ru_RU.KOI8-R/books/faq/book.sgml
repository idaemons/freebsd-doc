<!DOCTYPE BOOK PUBLIC "-//FreeBSD//DTD DocBook V3.1-Based Extension//EN" [
<!ENTITY % man PUBLIC "-//FreeBSD//ENTITIES DocBook Manual Page Entities//EN">
%man;
]>

<book lang="en">

<bookinfo>
  <title>Часто Задаваемые Вопросы по FreeBSD 2.X и 3.X</title>

  <authorgroup>
    <author>
      <surname>The FreeBSD Russian Documentation Project</surname>
    </author>
  </authorgroup>

  <pubdate>$FreeBSD: doc/ru_RU.KOI8-R/books/faq/book.sgml,v 1.37 2000/02/27 20:06:13 chris Exp $</pubdate>

  <abstract>
    <para>Этот документ является так называемым FAQ (Frequently Asked
      Questions), то есть списком Часто Задаваемых Вопросов по FreeBSD версий
      2.X и 3.X.  Если не оговорено обратное, предполагается, что все
      замечания справедливы для версий FreeBSD 2.0.5 и выше. Пункты с
      пометкой &lt;XXX&gt; находятся в стадии разработки. Если вы хотите
      помочь в составлении этого документа, пошлите письмо в список рассылки
      проекта по адресу <ulink URL="mailto:freebsd-doc@FreeBSD.org">
      &lt;freebsd-doc@FreeBSD.org&gt;</ulink>.
      Последняя редакция этого документа всегда доступна с <ulink
      URL="http://www.FreeBSD.org/">WWW-сервера FreeBSD</ulink>. Его также
      можно получить в виде одного большого
      <ulink URL="book.html">HTML-файла</ulink> по HTTP или в виде обычного
      текстового файла, файла формата postscript или PDF с <ulink
      URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc">FTP-сервера</ulink>.
      Вы также можете осуществить
      <ulink URL="http://www.FreeBSD.org/search/search.html">поиск</ulink> в
      FAQ.</para>
  </abstract>
</bookinfo>


<preface id="preface">
  <title>Предисловие</title>

  <para>Добро пожаловать во FreeBSD 2.X-3.X FAQ!</para>
  
  <para>Как и обычный FAQ конференций Usenet, этот документ содержит
    большинство из часто задаваемых вопросов, касающихся операционной системы
    FreeBSD (и, конечно же, ответы на них).  Первоначально предназначенный для
    уменьшения потока сообщений и избежания повторения одних и тех же вопросов,
    постепенно FAQ превратился в ценный источник информации.</para>

  <para>Мы прилагаем все усилия, чтобы сделать этот FAQ максимально
    информативным; если у вас есть идеи по его усовершенствованию, пожалуйста,
    напишите <ulink URL="mailto:FAQ@FreeBSD.org">составителям</ulink>.</para>
 

<qandaset>
<qandaentry>
  <question>
    <para>FreeBSD - что это такое?</para>
  </question>

  <answer>

  <para>В двух словах, FreeBSD 2.X - это UN*X-подобная операционная система,
    основанная на версии 4.4BSD Калифорнийского Университета (Беркли) для
    платформы i386. Также она косвенно базируется на 386BSD (BSD Net/2,
    перенесённой на платформу i386 Вильямом Джолитцем (William Jolitz)), хотя
    от того первоначального кода осталось очень мало. Более подробные
    объяснения того, что представляет из себя FreeBSD и для чего она может вам
    пригодиться, можно найти на <ulink
    URL="http://www.FreeBSD.org/">домашней странице FreeBSD</ulink>.</para>
 
  <para>FreeBSD используется компаниями, Интернет-провайдерами, научными
    работниками, профессионалами в вычислительной технике, студентами и
    рядовыми пользователями по всему миру для работы, образования и отдыха. Вы
    можете увидеть некоторых из них в нашей <ulink
    URL="../../gallery/gallery.html">галерее</ulink>.</para>
 
  <para>Для более детального ознакомления с FreeBSD, пожалуйста,
    обращайтесь к <ulink URL="../../handbook/index.html">Руководству
    пользователя FreeBSD.</ulink></para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Каковы цели FreeBSD?</para>
  </question>

  <answer>

  <para>Цели, преследуемые проектом FreeBSD - это предоставление программного
    обеспечения, которое может быть использовано в любых целях без всяческих
    ограничений. Многие из нас вкладывают значительные усилия в её разработку
    (и проектирование) и определённо были бы не против получения финансовой
    поддержки, но мы не собираемся её требовать. Мы надеемся, что наша основная
    и самая значительная "миссия" - предоставить код всем желающим, для любых
    целей, так чтобы он нашел самое широкое применение и принес наибольшую
    пользу.  Это, на наш взгляд, одна из самых фундаментальных целей Free
    Software, которую мы с энтузиазмом поддерживаем.</para>
 
  <para>Исходный код, подпадающий под действие GNU General
    Public License (GPL) или GNU Library General Public License (LGPL),
    имеет несколько больше ограничений, хотя  и представляет собой
    навязывание доступа к исходным текстам, а не наоборот, как обычно. Из-за
    дополнительных сложностей, которые могут возникнуть в случае
    коммерческого использования программного обеспечения GPL, мы стараемся,
    где только это возможно, заменить подобное программное обеспечение
    аналогичным, но подпадающим под более свободную лицензию BSD.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Почему система называется именно FreeBSD?</para>
  </question>

  <answer>

  <para>     
    <itemizedlist>
      <listitem>
        <para>Она может использоваться безо всяческих выплат, даже
          для извлечения выгоды.</para>
      </listitem>

      <listitem>
        <para>Все исходные тексты операционной системы свободно доступны,
          на её использование в других разработках (как коммерческих, так и
          некоммерческих) и дальнейшее распространение наложены минимальные
          ограничения.</para>
      </listitem>

      <listitem>
        <para>Любой, у кого есть усовершенствования и/или исправления,
          может предоставить свой код и он будет (правда, с парой
          оговорок) добавлен в исходные тексты системы.</para>
      </listitem>

    </itemizedlist>
  </para>
 
  <para>Для тех наших читателей, для которых английский не является родным
    языком, можно добавить, что слово ``free'' используется здесь в двух
    смыслах, один означает ``бесплатно'', а другой ``вы можете делать всё,
    что хотите''. За исключением пары вещей, которые вы <emphasis remap=tt>не
    можете</emphasis> производить с FreeBSD, например,
    претендовать на то, что вы являетесь её разработчиком, вы на самом
    деле можете делать с ней всё, что вам заблагорассудится.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Какова последняя версия FreeBSD?</para>
  </question>

  <answer>

  <para>Версия <ulink
    URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/3.4-RELEASE/">
    3.4</ulink>, выпущенная в декабре 1999 года, является самой последней
    <emphasis>стабильной</emphasis> версией. Она также является самым последним
    <emphasis>релизом</emphasis>.</para>

  <para>Если говорить кратко, то ветка <emphasis>-STABLE</emphasis>
    предназначена поставщикам услуг Internet или другим корпоративным
    пользователям, которым в первую очередь нужна надёжность и не слишком
    большое количество отличий от последнего релиза по сравнению с
    возможностями последнего снэпшота <emphasis>-CURRENT</emphasis>.  Релизы
    можно делать из любой "ветки", но <emphasis>-CURRENT</emphasis> вы должны
    использовать только в случае, если уверены, что готовы к постоянным (по
    сравнению со <emphasis>-STABLE</emphasis>) изменениям в работе
    системы.</para>
 
  <para>Релизы делаются только <link linkend="release-freq">раз в несколько
    месяцев</link>.  Хотя многие стараются отслеживать актуальное состояние
    исходных текстов FreeBSD (обратите внимание на вопросы о <link
    linkend="current">FreeBSD-CURRENT</link> и <link
    linkend="stable">FreeBSD-STABLE</link>), делать это не обязательно, так как
    исходные тексты постоянно меняются.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question id="current">
    <para>Что такое FreeBSD-CURRENT?</para>
  </question>

  <answer>

  <para><ulink
    URL="../../handbook/cutting-edge.html#CURRENT">FreeBSD-CURRENT</ulink> -
    это версия операционной системы, находящаяся в стадии разработки до момента
    выпуска 4.0-RELEASE. Таким образом, она представляет реальный интерес только
    для разработчиков системы и её фанатов.  Обратитесь к <ulink
    URL="../../handbook/cutting-edge.html#CURRENT">соответствующему
    разделу</ulink> <ulink URL="../../handbook/index.html">Руководства</ulink>
    для прояснения деталей работы с -CURRENT.</para>
 
  <para>Если вы не специалист по операционным системам или не в состоянии
    отличить реальную проблему от временных явлений, вы не должны использовать
    FreeBSD-CURRENT.  Эта ветвь зачастую меняется очень быстро и вполне может
    быть просто не работоспособна некоторое время. Те, кто используют
    FreeBSD-CURRENT, должны быть в состоянии анализировать любые проблемы и
    сообщать о них, если это действительно ошибки, а не ``глюки''.  Сообщения
    типа ``make world produces some error about groups'' в списке рассылки
    -CURRENT иногда воспринимаются пренебрежительно.</para>
 
  <para>Из ветви -CURRENT регулярно делаются <ulink 
    URL="../../releases/snapshots.html">снэпшоты</ulink>, некоторые из которых
    доступны на CDROM. Их предназначение:</para>
 
  <para>     
    <itemizedlist>
      <listitem>
        <para>Тестирование самой последней версии инсталлятора.</para>
      </listitem>

      <listitem>
        <para>Дать людям, которые хотят работать с -CURRENT, но не
          имеют времени и/или мозможности (пропускной способности) для
          отслеживания ежедневных измененений, простой способ её
          установки.</para>
      </listitem>

      <listitem>
        <para>Фиксация точки для последующих ссылок в случае,
          если позже мы что-нибудь очень сильно сломаем. (Хотя CVS, как
          правило, не позволяет случиться ничему такому ужасному :)</para>
      </listitem>

      <listitem>
        <para>Любые новые возможности, которым требуется тестирование,
          должны иметь как можно больше потенциальных тестеров.</para>
      </listitem>

    </itemizedlist>
  </para>
 
  <para>Не утверждается, что всякий снэпшот имеет качество ``готового
    продукта''.  Для стабильной и надёжной работы вам нужно дождаться выхода
    полного релиза.</para>
 
  <para>Снэпшоты доступны непосредственно с <ulink
    URL="ftp://current.FreeBSD.org/pub/FreeBSD/">
    ftp://current.FreeBSD.org/pub/FreeBSD/</ulink>
    и, как правило, генерируются ежедневно для веток 4.0-CURRENT и
    3.0-STABLE.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question id="stable">
    <para>В чём смысл FreeBSD-STABLE?</para>
  </question>

  <answer>

  <para>После того, как была выпущена FreeBSD 2.0.5, мы решили разделить
    разработку FreeBSD на две части. Одна ветка, названная <ulink
    URL="../../handbook/stable.html">-STABLE</ulink>, предназначена для внесения
    только хорошо оттестированных исправлений и маленьких последовательных
    усовершенствований (для провайдеров услуг Интернет и других коммерческих
    пользователей, для которых неожиданные изменения или экспериментальные
    возможности весьма нежелательны).  Другой ветвью является <ulink
    URL="../../handbook/cutting-edge.html#CURRENT">-CURRENT</ulink>, и она по
    существу является прямой линией, ведущей к 4.0-RELEASE (и последующим) с тех
    пор, как была выпущена 2.0.  Если вам поможет картинка, то вот как это
    выглядит:</para>
 
    <para>
      <literallayout>
               2.0
                |
                |
                |  [2.1-STABLE]
 *ВЕТВЬ*      2.0.5 -&gt; 2.1 -&gt; 2.1.5 -&gt; 2.1.6 -&gt; 2.1.7.1  [конец 2.1-STABLE]
                |                            (Мар 1997)
                |
                |
                |  [2.2-STABLE]
 *ВЕТВЬ*      2.2.1 -&gt; 2.2.2-RELEASE -&gt; 2.2.5 -&gt; 2.2.6 -&gt; 2.2.7 -&gt; 2.2.8 [конец]
                |        (Мар 1997)   (Окт 97) (Апр 98)  (Июл 98) (Дек 98)
                |
                |
             3.0-SNAPs  (начало в I квартале 1997)
                |
                |
           3.0.0-RELEASE (Окт 1998)
                |
                |  [3.0-STABLE]
 *ВЕТВЬ*       3.1  (Фев 1999) -&gt; 3.2 -&gt; ... будущие релизы 3.x ...
                |               (Май 1999)
                |
               \|/
                +
        [продолжение 4.0-CURRENT]
    </literallayout>
  </para>
 
  <para>Ветвь -CURRENT постепенно переходит в 4.0 и выше, тогда как предыдущая
    ветвь, 2.2-STABLE, была вытеснена релизом 2.2.8.  Теперь его заменила ветвь
    3.4-STABLE, последний релиз которой, 3.4-RELEASE, вышел в середине декабря
    1999 года.  "Текущей веткой" сейчас является 4.0-CURRENT, первый релиз
    которой появится в первом квартале 2000 года.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question id="release-freq">
    <para>В какой момент выпускаются новые версии FreeBSD?</para>
  </question>

  <answer>

  <para>Как правило, основная группа разработчиков выпускает новую версию,
    только когда они уверены, что добавленных новых возможностей и/или
    внесённых исправлений уже достаточно и новый релиз не потеряет
    стабильности. Многие пользователи оценивают эту осторожность как одну из
    лучших сторон FreeBSD, хотя она несколько разочаровывает, если вам не
    терпится попробовать новые возможности..</para>
 
  <para>В среднем новые версии выпускаются примерно каждые четыре
    месяца.</para>
 
  <para>Для тех, кому не терпится, предназначены SNAP-релизы, выпускаемые более
    часто, в частности, в течении месяца перед релизом.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>FreeBSD доступна только для персональных компьютеров?</para>
  </question>

  <answer>

  <para>В настоящее время FreeBSD 3.x работает как на архитектуре x86,
    так и на платформе <ulink URL="../../alpha/alpha.html">DEC Alpha</ulink>.
    Некоторый интерес был проявлен к переносу на
    SPARC, однако подробности этого проекта ещё не ясны.</para>

   <para>Если ваш компьютер имеет другую архитектуру и вам нужно что-то прямо
     сейчас, советуем попробовать
     <ulink URL="http://www.netbsd.org/">NetBSD</ulink> или
     <ulink URL="http://www.openbsd.org/">OpenBSD</ulink>.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Кто разрабатывает FreeBSD?</para>
  </question>

  <answer>

  <para>Решения, которые касаются ключевых моментов в проекте FreeBSD,
    такие, как общее направление развития проекта или кто
    может добавлять код к дереву исходных текстов, принимаются 
    <ulink URL="../../handbook/staff.html#STAFF-CORE">основной командой</ulink>
    разработчиков (core team), состоящей из 15 человек.  Также существует
    гораздо большая группа из более 150
    <ulink URL="../../handbook/staff-committers.html">коммиттеров</ulink>
    (committers), которые могут делать изменения прямо в дереве исходных
    текстов FreeBSD.</para>
 
  <para>Однако, большинство нетривиальных изменений широко обсуждается
    в <link linkend="mailing">списках рассылки</link>, и не существует 
    никаких ограничений на участие в подобных дискуссиях.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question id="where-get">
    <para>Где можно найти FreeBSD?</para>
  </question>

  <answer>

  <para>Все основные релизы FreeBSD доступны по ftp с <ulink
    URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/">FTP-сервера
    FreeBSD</ulink>:</para>
 
  <para>     
    <itemizedlist>
      <listitem>
        <para>Текущий релиз 2.2-STABLE, 2.2.8R, находится в каталоге <ulink
          URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/2.2.8-RELEASE/">
          2.2.8-RELEASE</ulink>.</para>
      </listitem>

      <listitem>
        <para>Текущий релиз 3.X-STABLE, 3.4-RELEASE, находится в каталоге <ulink
          URL="ftp://current.FreeBSD.org/pub/FreeBSD/releases/i386/3.4-RELEASE">
          3.4-RELEASE</ulink>.</para>
      </listitem>

      <listitem>
        <para>Релизы <ulink URL="ftp://releng22.FreeBSD.org/pub/FreeBSD/">
          2.2 Snapshot</ulink> делаются ежедневно из ветки RELENG_2_2
          (после 2.2.8), которая постепенно переходит в режим сопровождения.
          Ветвь RELENG_2_2 ведётся очень аккуратно и сейчас туда
          не вносятся изменений, кроме как жизненно необходимых по соображениям
          безопасности и надёжности.</para>
      </listitem>

      <listitem>
        <para>Выпуски <ulink
          URL="ftp://releng30.FreeBSD.org/pub/FreeBSD/">
          3.X Snapshot</ulink> также делаются ежедневно из ветки RELENG_3
          (после 3.0-RELEASE), пока она переходит в 3.4-RELEASE.</para>
      </listitem>

      <listitem>
        <para>Выпуски <ulink 
          URL="ftp://current.FreeBSD.org/pub/FreeBSD/">4.0 Snapshot</ulink>,
          которые делаются ежедневно из ветви <link
          linkend="current">-CURRENT</link>, предназначены для тестеров и
          разработчиков.</para>
      </listitem>
    </itemizedlist>
  </para>
 
  <para>FreeBSD также доступна через компанию CDROM, по такому адресу:</para>
 
  <address>
    <otheraddr>Walnut Creek CDROM</otheraddr>
    <street>4041 Pike Lane, Suite F</street>
    <city> Concord</city>, <state>CA</state> <postcode>94520</postcode>
    <country>USA</country>

    <phone>Заказы:    +1 800 786-9907</phone>
    <phone>Вопросы:   +1 925 674-0783</phone>
    <fax>FAX:         +1 925 674-0821</fax>
    <otheraddr>email: <ulink URL="mailto:orders@cdrom.com">WC Orders address</ulink></otheraddr>
    <otheraddr>WWW:   <ulink URL="http://www.cdrom.com/">WC Home page</ulink></otheraddr>
  </address>

  <para>В Австралии вы можете найти её по адресу:</para>
 
  <address>
    <otheraddr>  Advanced Multimedia Distributors</otheraddr>
    <street>     Factory 1/1 Ovata Drive</street>
    <city>       Tullamarine, Melbourne</city>
    <state>      Victoria</state>
    <country>    Australia</country>
    <phone>      Voice: +61 3 9338 6777</phone>
 
    <otheraddr>  CDROM Support BBS</otheraddr>
    <street>     17 Irvine St</street>
    <city>       Peppermint Grove</city> <state>WA</state> <postcode>6011</postcode>
    <phone>      Voice: +61 9 385-3793</phone>
    <fax>        Fax:   +61 9 385-2360</fax>
  </address>

  <para>И в Великобритании:</para>
 
  <address>
    <otheraddr>  The Public Domain &amp; Shareware Library</otheraddr>
    <street>     Winscombe House, Beacon Rd</street>
    <city>       Crowborough</city>
    <state>      Sussex. TN6 1UL</state>
    <phone>      Voice: +44 1892 663-298</phone>
    <fax>        Fax:   +44 1892 667-473</fax>
  </address>

  </answer>
</qandaentry>


<qandaentry>
  <question id="mailing">
    <para>Где найти информацию по спискам рассылки FreeBSD?</para>
  </question>

  <answer>

  <para>Исчерпывающая информация содержится в <ulink
    URL="../../handbook/eresources.html#ERESOURCES-MAIL">разделе</ulink>
    Руководства, который посвящен спискам рассылки.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Где можно найти информацию о проблеме 2000 года во FreeBSD?</para>
  </question>

  <answer>

  <para>Полная информация находится на странице <ulink
    URL="http://www.FreeBSD.org/y2kbug.html">Готовности к 2000
    году</ulink>.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Какие существуют телеконференции по FreeBSD?</para>
  </question>

  <answer>

  <para>Полная информация о группах новостей есть в <ulink
    URL="../../handbook/eresources-news.html">разделе</ulink> Руководства,
    касающемся телеконференций.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Существуют ли каналы IRC (Internet Relay Chat) по FreeBSD?</para>
  </question>

  <answer>

  <para>Да, большинство сетей IRC имеют канал FreeBSD:</para>
 
  <para>     
    <itemizedlist>
      <listitem>
        <para>Канал <emphasis remap=tt>#FreeBSD</emphasis> в сети EFNet
          посвящён FreeBSD, но не обращайтесь туда за технической поддержкой и
          даже не пытайтесь найти человека, который поможет вам обойтись без
          чтения страниц Справочника или собственных изысканий.  Этот канал
          предназначен в первую и основную очередь для общения, и в круг
          обсуждаемых тем входит секс, спорт, ядерное оружие, как будто это и
          есть FreeBSD.  В общем, вас предупредили!  Канал доступен на сервере
          <hostid>irc.chat.org</hostid>.</para>
      </listitem>

      <listitem>
        <para>Канал <emphasis remap=tt>#FreeBSD</emphasis> в сети DALNET
          доступен на сервере <hostid>irc.dal.net</hostid> в США и на
          <hostid>irc.eu.dal.net</hostid> в Европе.</para>
      </listitem>

      <listitem>
        <para>Канал <emphasis remap=tt>#FreeBSD</emphasis> в сети UNDERNET
          доступен на серверах <hostid>us.undernet.org</hostid> в США и
          <hostid>eu.undernet.org</hostid> в Европе.  Так как это канал
          взаимопомощи, приготовьтесь к чтению документации, к которой вас
          отошлют.</para>
      </listitem>
    </itemizedlist>
  </para>
 
  <para>Все эти каналы разные и не имеют отношения друг к другу. Их стили
    общения также отличаются, так что вам, может быть, придётся попробовать
    все, чтобы найти тот, который соответствует вашему стилю.  Как и обычно с
    *любым* каналом IRC, если вы легко раздражаетесь или не можете иметь дела
    с большим количеством лиц школьного (и младшего школьного) возраста,
    пытающихся озвучить свои попытки самоутверждения, не обращайте на это
    внимания.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Книги по FreeBSD</para>
  </question>

  <answer>

  <para>Вы можете обратиться в FreeBSD Documentation Project (а ещё лучше к
    нему присоединиться) через список рассылки <emphasis
    remap=tt>doc</emphasis>: <ulink
    URL="mailto:freebsd-doc@FreeBSD.org">
    &lt;freebsd-doc@FreeBSD.org&gt;</ulink>.
    Этот список рассылки предназначен для обсуждения документации
    FreeBSD. Для вопросов по системе предназначен список рассылки
    <emphasis remap=tt>questions</emphasis>: <ulink
    URL="mailto:freebsd-questions@FreeBSD.org">
    &lt;freebsd-questions@FreeBSD.org&gt;</ulink>.</para>
 
  <para>``Руководство'' по FreeBSD доступно и может быть найдено на
    <ulink URL="../../handbook/index.html">веб-сервере</ulink>.
    Заметьте, что этот проект находится в процессе разработки,
    так что некоторые части могут отсутствовать.</para>
 
  <para>Прекрасным печатным руководством по FreeBSD является книга
    ``The Complete FreeBSD'', написанная Грегом Лиэем (Greg Lehay) и
    изданная Walnut Creek CDROM Books. В настоящее время вышло второе
    издание, содержащее 1,750 страниц руководств по установке и
    администрированию системы и прикладных программ, а также страницы
    Справочника. Книга (и последний релиз FreeBSD) может быть заказана у
    <ulink URL="http://www.cdrom.com">Walnut Creek</ulink>,
    <ulink URL="http://www.cheapbytes.com">CheapBytes</ulink>, или в
    вашем любимом книжном магазине. Индекс ISBN 1-57176-227-2.</para>
 
  <para>Так как FreeBSD 2.2.X основана на выпуске Berkeley 4.4BSD-Lite2,
    большинство руководств по 4.4BSD подходят к FreeBSD 2.2.X.
    O'Reilly and Associates издают следующие руководства:</para>
 
  <para>     
    <itemizedlist>
      <listitem>
        <para>4.4BSD System Manager's Manual <!-- <br> -->
          By Computer Systems Research Group, UC Berkeley <!-- <br> -->
          1st Edition June 1994, 804 pages <!-- <br> -->
          <ulink URL="http://www.amazon.com/exec/obidos/ASIN/1-56592-080-5">ISBN</ulink>: 1-56592-080-5 <!-- <br> --></para>
      </listitem>

      <listitem>
        <para>4.4BSD User's Reference Manual <!-- <br> -->
          By Computer Systems Research Group, UC Berkeley <!-- <br> -->
          1st Edition June 1994, 905 pages <!-- <br> -->
          <ulink URL="http://www.amazon.com/exec/obidos/ASIN/1-56592-075-9">ISBN</ulink>: 1-56592-075-9 <!-- <br> --></para>
      </listitem>

      <listitem>
        <para>4.4BSD User's Supplementary Documents <!-- <br> -->
          By Computer Systems Research Group, UC Berkeley <!-- <br> -->
          1st Edition July 1994, 712 pages <!-- <br> -->
          <ulink URL="http://www.amazon.com/exec/obidos/ASIN/1-56592-076-7">ISBN</ulink>: 1-56592-076-7 <!-- <br> --></para>
      </listitem>

      <listitem>
        <para>4.4BSD Programmer's Reference Manual <!-- <br> -->
          By Computer Systems Research Group, UC Berkeley <!-- <br> -->
          1st Edition June 1994, 886 pages <!-- <br> -->
          <ulink URL="http://www.amazon.com/exec/obidos/ASIN/1-56592-078-3">ISBN</ulink>: 1-56592-078-3 <!-- <br> --></para>
      </listitem>

      <listitem>
        <para>4.4BSD Programmer's Supplementary Documents <!-- <br> -->
          By Computer Systems Research Group, UC Berkeley <!-- <br> -->
          1st Edition July 1994, 596 pages <!-- <br> -->
          <ulink URL="http://www.amazon.com/exec/obidos/ASIN/1-56592-079-1">ISBN</ulink>: 1-56592-079-1 <!-- <br> --></para>
      </listitem>
    </itemizedlist>
  </para>
 
  <para>Описание этих книг может быть найдено через WWW:</para>
 
  <para><ulink URL="http://gnn.com/gnn/bus/ora/category/bsd.html">Описание книг
    из набора 4.4BSD</ulink>.  Из-за малых объёмов продаж, эти книги найти
    труднее.</para>
 
  <para>Вы не ошибётесь, если для подробного ознакомления с устройством
    ядра 4.4BSD kernel обратитесь к следующей литературе:</para>
 
  <para>McKusick, Marshall Kirk, Keith Bostic, Michael J Karels,
    and John Quarterman.<!-- <br> --></para>
 
  <para><emphasis>The Design and Implementation of the 4.4BSD Operating
    System</emphasis>.  Reading, Mass. : Addison-Wesley, 1996.<!-- <br> -->
    <ulink URL="http://www.amazon.com/exec/obidos/ASIN/0-201-54979-4">ISBN</ulink> 0-201-54979-4<!-- <br> --></para>
 
  <para>Хорошей книгой по системному администрированию является:</para>
 
  <para>Evi Nemeth, Garth Snyder, Scott Seebass &amp;
    Trent R. Hein,<!-- <br> -->
    ``Unix System Administration Handbook'', Prentice-Hall, 1995<!-- <br> -->
    <ulink URL="http://www.amazon.com/exec/obidos/ASIN/0-13-151051-7">ISBN</ulink>: 0-13-151051-7<!-- <br> --></para>
 
  <para><emphasis remap=bf>ЗАМЕЧАНИЕ</emphasis> Удостоверьтесь, что вы
    получили второе издание, с красной обложкой, а не первое.</para>

  <para>Эта книга касается основ администрирования, в том числе протоколов
    TCP/IP, DNS, NFS, SLIP/PPP, sendmail, INN/NNTP, системы печати итд..
    Она сравнительно дорогая (примерно US&#36;45-&#36;55), но
    стоит того.  К ней прилагается также компакт-диск с исходными
    текстами различных утилит; большинство их них, однако, также 
    присутствуют на диске FreeBSD 2.2.6R (на котором к тому же
    часто находятся более свежие версии).</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Как можно получить доступ к вашей базе сообщений о проблемах (Problem
      Report)?</para>
  </question>

  <answer>

  <para>Сообщения пользователей обо всех проблемах могут быть запрошены (или
    добавлены) с помощью нашего <ulink
    URL="http://www.FreeBSD.org/send-pr.html">веб-интерфейса</ulink> и <ulink
    URL="http://www.FreeBSD.org/cgi/query-pr-summary.cgi">запроса</ulink>.
    Команда <command>send-pr(1)</command> также может быть использована для
    передачи и изменения сообщений о проблемах через электронную почту.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Где можно найти FAQ в форматах ASCII/PostScript?</para>
  </question>

  <answer>

  <para>Актуальная версия FAQ в форматах PostScript и обычного текста (7
    бит ASCII и 8 бит Latin1) доступна с веб-сервера FreeBSD или с любого
    его зеркала.</para>
 
  <para>Как PostScript (примерно 370Кб):
    <itemizedlist>
      <listitem>
        <para><ulink URL="http://www.FreeBSD.org/FAQ/FAQ.ps">
          http://www.FreeBSD.org/FAQ/FAQ.ps</ulink></para>
      </listitem>
    </itemizedlist>
  </para>
 
  <para>Как текст ASCII (примерно 220Кб):
    <itemizedlist>
      <listitem>
        <para><ulink URL="http://www.FreeBSD.org/FAQ/FAQ.ascii">
          http://www.FreeBSD.org/FAQ/FAQ.ascii</ulink></para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Как текст ISO 8859-1 (примерно 220Кб):
    <itemizedlist>
      <listitem>
        <para><ulink URL="http://www.FreeBSD.org/FAQ/FAQ.latin1">
          http://www.FreeBSD.org/FAQ/FAQ.latin1</ulink></para>
      </listitem>
    </itemizedlist>
  </para>

  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Где можно найти Руководство в форматах ASCII/PostScript?</para>
  </question>

  <answer>

  <para>Актуальная версия Руководства в форматах PostScript и обычного
    текста (7 бит ASCII и 8 бит Latin1) доступна с веб-сервера FreeBSD
    или с любого его зеркала.</para>
 
  <para>Как PostScript (примерно 1.7Мб):
    <itemizedlist>
      <listitem>
        <para><ulink URL="http://www.FreeBSD.org/handbook/handbook.ps">
          http://www.FreeBSD.org/handbook/handbook.ps</ulink></para>
      </listitem>
    </itemizedlist>
  </para>

  <para>Как текст ASCII (примерно 1080Кб):
    <itemizedlist>
      <listitem>
        <para><ulink URL="http://www.FreeBSD.org/handbook/handbook.ascii">
          http://www.FreeBSD.org/handbook/handbook.ascii</ulink></para>
      </listitem>
    </itemizedlist>
  </para>
 
  <para>Как текст ISO 8859-1 (примерно 1080Кб):
    <itemizedlist>
      <listitem>
        <para><ulink URL="http://www.FreeBSD.org/handbook/handbook.latin1">
          http://www.FreeBSD.org/handbook/handbook.latin1</ulink></para>
      </listitem>
    </itemizedlist>
  </para>

  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Руководство в формате ASCII - не чистый текст!</para>
  </question>

  <answer>

  <para>Действительно, FAQ и Руководство в форматах ASCII и Latin1 не
    являются чисто текстовыми документами; они содержат символы 
    форматирования для вывода на печать. Если вам нужно преобразовать эти
    документы к виду, пригодному для чтения, обработайте файл программой
    col:</para>
 
  <para>     
    <literallayout>
      $ col -b &lt; inputfile &gt; outputfile
    </literallayout>
  </para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Могу ли я зазеркалировать веб-сервер FreeBSD?</para>
  </question>

  <answer>

  <para>Несомненно! Есть несколько способов это сделать.</para>
  
  <para>     
    <itemizedlist>
      <listitem>
        <para>С помошью CVSUP: Вы можете скачивать отформатированные файлы с
          помощью CVSUP с сервера cvsup.FreeBSD.org.  Добавьте следующую
          строку в конфигурационный файл cvsup:

          <literallayout>
            www release=current hostname=/home base=/usr/local/etc/cvsup 
            prefix=/usr/local/www/data/www.FreeBSD.org delete old use-rel-suffix
          </literallayout>
        </para>
      </listitem>

      <listitem>
        <para>С помощью rsync:  Обратитесь к странице, посвящённой <ulink
          URL="http://www.FreeBSD.org/internal/mirror.html">
          зеркалированию</ulink>.</para>
      </listitem>

      <listitem>
        <para>С помощью зеркалирования ftp:  Вы можете скачать копию
          веб-сервера, находящуюся на ftp, используя ваше любимое средство
          зеркалирования ftp. Просто начните с каталога
          ftp://ftp.FreeBSD.org/pub/FreeBSD/FreeBSD-CURRENT/www.</para>
      </listitem>
    </itemizedlist>
  </para>

  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Я могу перевести документацию на язык племени мумбо-юмбо.</para>
  </question>

  <answer>

  <para>Хорошо. Хотя мы не сможем заплатить, в наших силах подарить вам
    бесплатный CD или футболку и внести вас в список составителей
    Руководства, если вы предоставите перевод.</para>

  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>Другие источники информации.</para>
  </question>

  <answer>

  <para>Следующие телеконференции содержат информацию о FreeBSD, которая 
    будет полезна её пользователям:</para>

  <para>     
    <itemizedlist>
      <listitem>
        <para><ulink URL="news:comp.unix.bsd.freebsd.announce">
          comp.unix.bsd.freebsd.announce</ulink> (модерируемая)</para>
      </listitem>

      <listitem>
        <para><ulink URL="news:comp.unix.bsd.freebsd.misc">
          comp.unix.bsd.freebsd.misc</ulink></para>
      </listitem>

      <listitem>
        <para><ulink
          URL="news:comp.unix.bsd.misc">comp.unix.bsd.misc</ulink></para>
      </listitem>
    </itemizedlist>
  </para>
 
  <para>Ресурсы Internet:</para>
 
  <para>     
    <itemizedlist>
      <listitem>
        <para><ulink URL="http://www.FreeBSD.org/">Веб-сервер FreeBSD</ulink>.
        </para>
      </listitem>

      <listitem>
        <para><anchor id="pao">Если у вас лаптоп, взгляните на страницу
          <ulink URL="http://www.jp.FreeBSD.org/PAO/">Tatsumi
          Hosokawa's Mobile Computing</ulink> в Японии.</para>
      </listitem>

      <listitem>
        <para><anchor id="smp">Информация о SMP (Symmetric MultiProcessing)
          находится на <ulink
          URL="http://people.FreeBSD.org/~fsmp/SMP/SMP.html">странице поддержки
          SMP</ulink>.</para>
      </listitem>

      <listitem>
        <para><anchor id="multimedia">Информация о мультимедийных приложениях
          для FreeBSD находится на <ulink
          URL="http://people.FreeBSD.org/~faulkner/multimedia/mm.html">
          мультимедийной странице</ulink>.  Если вы интересуетесь адаптерами
          захвата изображения <ulink
          URL="http://people.FreeBSD.org/~ahasty/Bt848.html">Bt848</ulink>,
          перейдите по ссылке.</para>
      </listitem>
    </itemizedlist>
  </para>

  <para>В Руководстве по FreeBSD имеется достаточно полный <ulink
    URL="../../handbook/bibliography.html">библиографический раздел</ulink>,
    который стоит посмотреть, если вы хотите подыскать книгу по системе.</para>

  </answer>
</qandaentry>

</qandaset>

</preface>


<chapter
id="install">
<title>Установка</title>

<qandaset><qandaentry><question>
<para>Какой файл нужно скачать для установки FreeBSD?</para></question><answer>

<para>До выхода в свет релиза FreeBSD 3.1 для установки вам был нужен только
  один файл с образом дискеты, <filename>floppies/boot.flp</filename>.  Однако,
  начиная с версии 3.1, во FreeBSD была добавлена базовая поддержка для очень
  широкого спектра оборудования, что требует значительно большего дискового
  пространства, поэтому для установки FreeBSD версий 3.x и 4.x используются
  два образа дискет, находящиеся в файлах
  <filename>floppies/kernel.flp</filename> и
  <filename>floppies/mfsroot.flp</filename>.  Эти образы нужно перенести на
  дискеты с помощью таких утилит, как <command>fdimage</command> или
  &man.dd.1;.</para>

<para>Если вы хотите скачать дистрибутив самостоятельно (например, для
  установки с раздела DOS), вот список рекомендованных частей 
  дистрибутива:</para>
 
<para>     
<itemizedlist>

<listitem>
<para> bin/<!-- <br> -->
     </para>
</listitem>

<listitem>
<para> manpages/<!-- <br> -->
     </para>
</listitem>

<listitem>
<para> compat*/<!-- <br> -->
     </para>
</listitem>

<listitem>
<para> doc/ <!-- <br> -->
     </para>
</listitem>

<listitem>
<para> src/ssys.* <!-- <br> -->
     </para>
</listitem>

</itemizedlist>
</para>
  
<para>Полные инструкции по этой процедуре и об установке вообще можно
     найти в <ulink URL="../../handbook/install.html">разделе</ulink>
     Руководства, посвящённом инсталляции FreeBSD.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Помогите! Загрузочный файл не помещается на дискету!
      </para></question><answer>

<para>На дискету размером 3.5 дюйма (1.44Мб) может поместиться
     1474560 байт данных. Образ дискеты имеет размер ровно 1474560 байт.</para>
  
<para>Типичные ошибки при подготовке загрузочной дискеты:
     
<itemizedlist>

<listitem>
<para>Образ дискеты был загружен по FTP не в режиме <emphasis remap=tt>binary</emphasis>.

</para>

<para>Некоторые клиентские программы FTP используют по умолчанию
       текстовый (<emphasis remap=tt>ascii</emphasis>) режим передачи и пытаются поменять 
       все принятые последовательности символов "конец строки" на 
       соответствующие им в вашей системе. В таком случае образ
       загрузочного диска будет неизбежно испорчен. Проверьте размер
       полученного файла: если он не <emphasis>точно</emphasis> такой же,
       как на FTP-сервере, то ошибка произошла, скорее всего, в процессе
       передачи.</para>

<para>Во избежание этого введите команду <emphasis remap=tt>binary</emphasis> в командной
       строке FTP после того, как вы подключитесь к серверу, но до того,
       как начали скачивать файл.</para>

</listitem>

<listitem>
<para>Для переноса образа на дискету была использована команда DOS
       <emphasis remap=tt>copy</emphasis> (или её аналог с графическим интерфейсом).
</para>

<para>Программы типа <emphasis remap=tt>copy</emphasis> не работают с образами дискет,
       предназначенными для загрузки. Образ содержит полное содержимое
       дискеты, дорожка за дорожкой, и не предназначен для помещения на
       дискету в качестве обычного файла. Вам необходимо перенести его
       на дискету ``непосредственно'', используя низкоуровневые средства
       (такие как <emphasis remap=tt>fdimage</emphasis> или <emphasis remap=tt>rawrite</emphasis>), описанные в 
       <ulink URL="../../handbook/install.html">руководстве</ulink>.</para>

</listitem>

</itemizedlist>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Где инструкции по инсталляции FreeBSD?</para></question><answer>

<para>Инструкции по установке могут быть найдены в
     <ulink URL="../../handbook/install.html">главе</ulink>
     Руководства, посвящённом установке FreeBSD.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Что мне нужно иметь для запуска FreeBSD?</para></question><answer>

<para>Вам нужен персональный компьютер не ниже 386, с 5 или более
     мегабайтами ОЗУ и по крайней мере 60Мб свободного пространства на
     винчестере. Система может работать с дешёвым графическим адаптером MDA,
     но для того, чтобы запустить X11R6, требуется ведеокарта стандарта VGA
     или лучше.</para>
  
<para>Посмотрите также раздел
     <xref linkend="hardware" remap="Аппаратная совместимость">.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        У меня только 4Мб ОЗУ. Смогу ли я установить FreeBSD?
      </para></question><answer>

<para>FreeBSD 2.1.7 была последней версией, которую можно было
     проинсталлировать на системе с 4Мб ОЗУ. Более новые версии FreeBSD,
     типа 2.2, требуют по крайней мере 5Мб ОЗУ для установки.</para>
  
<para>Все версии FreeBSD, включая 3.0, будут РАБОТАТЬ на 4Мб ОЗУ,
     просто на 4Мб нельзя запустить инсталляционную программу. Вы
     можете добавить дополнительную память для инсталляции, если вам
     это нужно, а после того, как система будет установлена и запущена,
     вернуться к конфигурации с 4Мб. Или вы можете подключить ваш диск
     к компьютеру с ОЗУ, большим чем 4Мб, проинсталлировать систему и
     переставить диск обратно.</para>
 
<para>Есть ещё несколько причин, по которым FreeBSD 2.1.7 не будет
     устанавливаться с 4Мб. А именно: она не будет устанавливаться
     на системе с 640Кб основной и 3Мб дополнительной памяти. Если ваша
     материнская плата может перемещать некоторую ``потерянную''
     память из области 640Кб в область 1Мб, тогда может быть, вы
     сможете запустить FreeBSD 2.1.7.</para>
 
<para>Попробуйте войти в настройку вашего BIOS и посмотреть параметры
     ``перемещения'' (remap). Включите его. Может быть, еще понадобится 
     выключить теневое ПЗУ (ROM shadowing).</para>
 
<para>Может быть, самое простое решение - найти еще 4Мб на время
     инсталляции. Откомпилируйте ядро только с теми параметрами, которые
     нужны и затем уберите 4Мб.</para>
 
<para>Вы можете также проинсталлировать версию 2.0.5, а затем
     обновить вашу систему до 2.1.7 с помощью пункта ``upgrade''
     программы инсталляции 2.1.7.</para>
 
<para>После установки вы можете построить ядро, которое будет работать
     на 4Мб. Кто-то даже умудрялся загружаться с 2Мб (хотя система
     в основном была неработоспособна :-))</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Как сделать оригинальную загрузочную дискету?
      </para></question><answer>

<para>В настоящий момент нет *простого* способа сделать оригинальную
     загрузочную дискету. Файл
     <filename>/usr/src/release/floppies/Makefile</filename> предназначен именно для
     этого, однако на самом деле</para>
  
<para>     that's supposed to let you *just* make those floppies, but it's not
     really gelled yet.</para>
 
<para>Чтобы сделать оригинальный релиз, следуйте инструкциям <link
     linkend="custrel">здесь</link>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Могу ли я иметь более чем одну операционную систему на моём PC?
      </para></question><answer>

<para>Взгляните на это <ulink URL="../../tutorials/multi-os/">руководство</ulink>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Может ли Windows 95 сосуществовать с FreeBSD?</para></question><answer>

<para>Сначала проинсталлируйте Windows 95, затем FreeBSD.  Менеджер
     загрузки FreeBSD будет управлять процессом загрузки Win95 или 
     FreeBSD, Если вы после этого ещё раз проинсталлируете Windows 95,
     то в процессе установки менеджер загрузки будет грубо удалён.
     Если такое случится, обратитесь к следующему разделу.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Windows 95 уничтожила мой менеджер загрузки! Как мне его вернуть?
      </para></question><answer>

<para>Вы можете переустановить менеджер загрузки FreeBSD двумя способами:</para>
  
<para>     
<itemizedlist>

<listitem>
<para>Запустите DOS, перейдите в каталог tools/ вашего дистрибутива
       FreeBSD и найдите программу <filename>bootinst.exe</filename>.  Запустите её
       следующим образом:

       </para>

<para><emphasis remap=bf>bootinst.exe boot.bin</emphasis></para>

<para>и менеджер загрузки будет переустановлен.</para>

</listitem>

<listitem>
<para>Загрузитесь с установочной дискеты FreeBSD и перейдите в меню
       установки Custom install.  Выберите пункт Partition.  Выберите
       устройство, на котором будет располагаться для ваш менеджера загрузки
       (это будет самый первый диск) и когда вы перейдете к редактированию
       разделов, первым делом (то есть ещё не делая никаких изменений)
       выберите (W)rite.  Последует запрос на подтверждение, ответьте yes,
       и когда вы попадёте в меню выбора менеджера загрузки, выберите 
       пункт "Boot Manager".  Менеджер загрузки будет переписан на диск.
       Теперь нужно выйти из меню установки и загрузиться с винчестера
       как обычно.
     </para>
</listitem>

</itemizedlist>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Можно ли использовать диск с повреждёнными блоками?
      </para></question><answer>

<para>Программа обнаружения повреждённых блоков
     (<ulink URL="http://www.FreeBSD.org/cgi/man.cgi?bad144">bad144</ulink>)
     помогает не во всех 100% случаев; (к нашему стыду)
     можно, к сожалению, сказать, что если у вас диск IDE или ESDI с
     большим количеством повреждённых блоков, то FreeBSD, похоже, не для
     вас. Однако она работает на тысячах систем с повреждёнными дисками,
     так что лучше всего сначала всё же попробовать самим.</para>
  
<para>Если повреждённые блоки находятся на SCSI диске, взгляните на
     <link linkend="awre">такое решение</link>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Странные вещи происходят при загрузке с инсталляционного диска!
      </para></question><answer>

<para>Если вы видите, что как машина зависает или неожиданнно 
     перезагружается, когда вы пытаетесь загрузиться с установочной
     дискеты, вы должны задать себе три вопроса:-</para>
  
<para>     
<orderedlist>

<listitem>
<para>Вы используете новую, только что отформатированную дискету
       (предпочтительно неиспользованную прямо из коробки, а не ту, что
       пришла с популярным журналом и последние три года провалялась под
       диваном)?

       </para>
</listitem>

<listitem>
<para>Вы скачали образ дискеты в двоичном режиме?
       (не смущайтесь, даже лучшие из нас время от времени скачивают
       двоичный файл в режиме ASCII!)

       </para>
</listitem>

<listitem>
<para>Если вы используете все эти свежеиспеченные операционные
       системы типа Windows95 или WindowsNT, удостоверьтесь, что вы их
       закрыли и перестартовали машину в добром старом DOS? Похоже,
       что эти операционные системы могут влиять на программы, работающие
       непосредственно с оборудованием, что и делает программа создания
       установочного диска; даже запуск из DOS в графической оболочке может
       вызвать проблемы.
     </para>
</listitem>

</orderedlist>
</para>
  
<para>Есть сведения, что Netscape вызывает проблемы при скачивании
     загрузочного диска, так что лучше всего использовать специальную
     программу FTP, если она у вас есть.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Помогите! Не могу установить систему с ленты!</para></question><answer>

<para>Если вы инсталлируете 2.1.7R с ленты, вы должны создать
     ленту с размером блока tar, равным 10 (5120 байт). Размер
     блока tar по умолчанию равен 20 (10240 байт), поэтому ленты,
     созданные со стандартным размером блока, не могут быть использованы
     для установки 2.1.7R; вы получите сообщение об ошибке, говорящее,
     что размер записи слишком большой.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Соединение двух машин с FreeBSD через параллельные порты (PLIP)
      </para></question><answer>

<para>Для этого нужен соединительный шнур типа laplink и на обеих машинах
     должна быть включена поддержка драйвера lpt.</para>
  
<para>     
<literallayout>      $ dmesg | grep lp
      lpt0 at 0x378-0x37f irq 7 on isa
      lpt0: Interrupt-driven port
      lp0: TCP/IP capable interface
      </literallayout>
</para>
 
<para>Подключите кабель laplink к параллельным портам компьютеров.</para>
 
<para>Настройте параметры сетевого интерфейса lp0 на обеих машинах, войдя
     администратором.  Например, если вы хотите соединить хосты с именами
     max и moritz</para>
  
<para>     
<literallayout>                 max &lt;-----&gt; moritz
IP Address    10.0.0.1      10.0.0.2
      </literallayout>
</para>
  
<para>    на машине max дайте команду
    
<literallayout>	# ifconfig lp0 10.0.0.1 10.0.0.2
     </literallayout>
</para>
  
<para>    на машине moritz запустите</para>
  
<para>    
<literallayout>	# ifconfig lp0 10.0.0.2 10.0.0.1
     </literallayout>
</para>
 
<para>Это всё!  Пожалуйста, прочтите ещё страницы Справочника 
    <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?lp">lp(4)</ulink> и
    <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?lpt">lpt(4)</ulink>.</para>
 
<para>Вы также должны добавить эти хосты в файл
  <filename>/etc/hosts</filename>.</para>
 
<para>    
<literallayout>     127.0.0.1               localhost.my.domain localhost 
     10.0.0.1                max.my.domain max
     10.0.0.2                moritz.my.domain moritz
     </literallayout>
</para>
 
<para>Для проверки работоспособности связи выполните следующие действия:</para>
 
<para>    на машине max:</para>
  
<para>
<literallayout>$ ifconfig lp0
lp0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000 </literallayout>
</para>
  
<para>
<literallayout>$ netstat -r
Routing tables

Internet:
Destination        Gateway            Flags     Refs     Use     Netif Expire
moritz              max              UH          4   127592       lp0</literallayout>
</para>
  
<para>
<literallayout>$ ping -c 4 moritz
PING moritz (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- moritz ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>         Можно ли я установить систему на лэптоп через PLIP (Parallel Line IP)?
      </para></question><answer>

<para>Для этого нужно соединить два компьютера параллельным кабелем
     Laplink следующим образом:</para>
  
<para>     
<literallayout>            +----------------------------------------+
            |A-name A-End   B-End   Descr.  Port/Bit |
            +----------------------------------------+
            |DATA0  2       15      Data    0/0x01   |
            |-ERROR 15      2               1/0x08   |
            +----------------------------------------+
            |DATA1  3       13      Data    0/0x02   |
            |+SLCT  13      3               1/0x10   |
            +----------------------------------------+
            |DATA2  4       12      Data    0/0x04   |
            |+PE    12      4               1/0x20   |
            +----------------------------------------+
            |DATA3  5       10      Strobe  0/0x08   |
            |-ACK   10      5               1/0x40   |
            +----------------------------------------+
            |DATA4  6       11      Data    0/0x10   |
            |BUSY   11      6               1/0x80   |
            +----------------------------------------+
            |GND    18-25   18-25   GND -            |
            +----------------------------------------+
      </literallayout>
</para>
  
<para>Посмотрите также <link linkend="pao">это замечание</link> на странице,
     посвящённой мобильным вычислениям.</para>
  
</answer></qandaentry>

<qandaentry><question
id="geometry">
<para>        Какие параметры диска я должен использовать?
      </para></question><answer>

<para>(Под "параметрами" диска мы понимаем число дорожек, головок и
     секторов на дорожку на диске, что для простоты обозначается как
     C/H/S. Именно так работает BIOS персональных компьютеров при чтении
     или записи диска).</para>
  
<para>Похоже, что по каким-то причинам это вызывает много недоразумений.
     Прежде всего, <emphasis remap=tt>физические</emphasis> параметры диска SCSI не имеют никакого
     значения, так как FreeBSD работает в терминах дисковых блоков.
     Фактически нет такого показателя, как "физические параметры",
     так как плотность размещения секторов различна по всему диску; то,
     что производители называют "реальными" физическими параметрами обычно
     размеры рабочие
     выызвабт по крайней мере потерянное простран\ство. Для дисков IDE, 
     FreeBSD работает в терминах C/H/S, но во всех современных дисках они
     преобразовываются во внутреннее представление.</para>
  
<para>Имеет значение только <emphasis remap=tt>логические</emphasis> параметры - это то, что 
     получает BIOS, когда спрашивает "какие у тебя параметры?", а затем
     использует для обращения к диску.  Так как FreeBSD использует BIOS
     при загрузке, очень важно получить верные параметры.  В частности,
     если у вас на диске находятся несколько операционных систем, они обе
     должны иметь одинаковое представление о параметрах диска, иначе
     серьёзные проблемы при загрузке неизбежны!</para>
  
<para>В случае дисков SCSI, параметры используются в зависимости от того,
     включена ли поддержка расширенной трансляции на вашем контроллере
     (что часто обозначается как "support for DOS disks &gt;1GB" или
     что-то похожее).  Если эта возможность выключена, то используйте
     N дорожек, 64 головки и 32 сектора на дорожку, где N - это ёмкость
     диска в мегабайтах. Например, 2Гбайтный диск должен иметь 2048 
     дорожек, 64 головки и 32 сектора а дороку.</para>
  
<para>Если трансляция <emphasis remap=tt>включена</emphasis> (что обычно используется для
     преодоления некоторых ограничений MSDOS) и ёмкость диска превышает
     1ГБ, используется M дорожек, 63 сектора на дорожку (*не* 64) и 255
     головок, где 'M' - это объём диска в мегабайтах, поделённый на
     7.844238 (!).  Таким образом, наш диск объёмом 2ГБ будет иметь 
     261 дорожку, 63 сектора на дорожку и 255 головок.</para>
  
<para>Если вы не уверены, или FreeBSD ошибается при определении
     параметров диска во время установки, самый простой способ решить эту 
     проблему - создать на диске маленький раздел DOS.  После этого
     параметры диска должны определиться правильно (и вы всегда можете
     удалить раздел DOS в редакторе разделов, если вы не хотите его
     сохранить, или оставить его для настройки сетевых адаптеров и подобных
     вещей).</para>
  
<para>Кроме того, существует свободно доступная утилита, распространяемая
     вместе с FreeBSD, которая называется ``<filename>pfdisk.exe</filename>'' 
     (можно найти в каталоге <emphasis remap=tt>tools</emphasis> компакт-диска с FreeBSD или
     на различных ftp-серверах), которую можно использовать для определения
     параметров, которые используются другими операционными системами,
     расположенными на вашем диске.  Затем вы можете использовать эти 
     параметры в редакторе разделов.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Есть ли ограничения на разбиение диска?</para></question><answer>

<para>Да. Вы должны убедиться, что корневой раздел находится до
     1024 дорожки, так чтобы BIOS могла загрузить с него ядро. (Заметьте,
     что это ограничение BIOS компьютера, а не FreeBSD).</para>
  
<para>Для диска SCSI, это, как правило, будет означать, что
     корневой раздел располагается в первых 1024Мб (или в первых 4096Мб,
     если включен режим расширенной трансляции - посмотрите предыдущий
     вопрос).  Для дисков IDE соответствующее значение равно 504Мб.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Как насчет менеджеров диска? У меня большой диск!
      </para></question><answer>

<para>FreeBSD распознаёт Ontrack Disk Manager и допускает его
     использование. Другие менеджеры дисков не поддерживаются.</para>
  
<para>Если вы хотите использовать диск с FreeBSD, вам не нужен
     менеджер диска. Отконфигурируйте диск на столько пространства,
     сколько сможет обработать BIOS (обычно 504 мегабайта). и
     FreeBSD разпознает, сколько места у вас есть на самом деле.
     Если вы используете старый диск с контроллером MFM, вам может
     потребоваться точно указать FreeBSD количество используемых
     дорожек.</para>
  
<para>Если вы хотите использовать FreeBSD совместно с другой
     операционной системой, это можно сделать и без менеджера диска:
     удостоверьтесь, что загрузочный раздел FreeBSD и раздел для другой
     операционной системы не выходят за пределы 1024 дорожки. Если вы
     будете осторожны, 20 мегабайтного раздела для загрузки будет
     достаточно.</para>
  
</answer></qandaentry>

<qandaentry><question
id="missing-os">
<para>При загрузке FreeBSD выдается сообщение ``Missing Operating System'' 
     </para></question><answer>

<para>Это классический  случай, когда FreeBSD и DOS или другая операционная
     система конфликтуют по поводу <link linkend="geometry">параметров</link>
     диска.  Вам нужно будет переустановить FreeBSD, но имейте в виду, что
     инструкции, данные выше, помогают всегда.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        После приглашения менеджера загрузки `F?' ничего не происходит.
      </para></question><answer>

<para>Это ещё один признак проблемы, описанной в предыдущем разделе.
     Параметры диска в BIOS и параметры, используемые FreeBSD, не 
     совпадают. Если ваш контроллер или BIOS поддерживают трансляцию
     дорожек (часто обозначаемую как ``&gt;1GB drive support''),
     попробуйте включить эту возможность и переустановить FreeBSD.</para>
  
</answer></qandaentry>

<qandaentry><question
id="bigram">
<para>        У меня &gt;16Мб ОЗУ. Это не вызовет никаких проблем?
      </para></question><answer>

<para>Кроме разве что вопроса производительности, нет. Во FreeBSD 2.X 
     встроен контроль границ буферов (bounce buffers), что позволяет вашим
     контроллерам, работающим в режиме прямого доступа к шине, иметь доступ
     к памяти выше 16Мб. (Заметьте, что это будет требоваться только если
     вы используете устройства ISA, хотя этого также требуют некоторые 
     устройства EISA и VLB).</para>
  
<para>Обратитесь к разделу о <link linkend="reallybigram">машинах
     с &gt;64Mб</link>, если у вас столько ОЗУ или вы используете
     машины Compaq или BIOS, который выдаёт неверные параметры ОЗУ.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Нужно ли устанавливать все исходные тексты системы?
      </para></question><answer>

<para>В общем случае, нет. Однако мы настоятельно рекомендуем
     проинсталлировать, как минимум, исходные тексты набора
     ``<emphasis remap=tt>base</emphasis>'', включающий некоторые файлы, здесь упоминаемые,
     и ``<emphasis remap=tt>sys</emphasis>'', в который включены исходные тексты ядра.
     Для работы системы присутствия исходных текстов не требуется,
     разве что для программы конфигурирования ядра 
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?config">config</ulink>.
     За исключением исходных текстов ядра, структура
     исходных текстов системы позволяет монтировать её в режиме
     "только для чтения" через NFS и компилировать программы. (Из-за
     ограничения на исходные тексты ядра мы рекомендуем монтировать их
     не прямо в <filename>/usr/src</filename>, а в какой-нибудь другой каталог с
     символическими ссылками для дублирования структуры каталогов.</para>
  
<para>Наличие исходных текстов системы значительно облегчает
     процесс обновления до новых версий FreeBSD.</para>
  
<para>Для выбора подмножества исходных текстов, которое вы
     хотите установить, используйте пункт меню Custom, когда
     находитесь в меню Distributions программы установки.  Скрипт
     <filename>src/install.sh</filename> также инсталлирует часть исходных
     текстов, в зависимости от указанного при запуске параметра.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Нужно ли перекомпилировать ядро?</para></question><answer>

<para>Построение нового ядра всегда было необходимым шагом при
     установке FreeBSD, однако последние релизы предоставляют более
     дружественный инструмент конфигурации ядра. В командной строке
     на приглашение загрузчика FreeBSD (boot:) введите "-c" и вы 
     попадёте в экран визуальной настройки, которая позволяет 
     конфигурировать настройки ядра для большинства адаптеров ISA.</para>
  
<para>Однако рекомендуется, что потом вы всё же построите новое ядро,
     содержащее только те дравера, которые вам нужны, для того,
     чтобы сэкономить немного ОЗУ, хотя для большиства систем это 
     больше не является большой необходимостью.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Находясь за пределами США, могу ли я использовать систему
        шифрования DES?
      </para></question><answer>

<para>Если нет абсолютной необходимости в использовании криптографической
     системы типа DES, то для <emphasis remap=bf>большей</emphasis> безопасности вы можете
     использовать стандартную для FreeBSD системы криптографии без
     экспортных ограничений. Используемый по умолчанию скрамблер паролей
     FreeBSD 2.0 в настоящее время основан на <emphasis remap=bf>MD5</emphasis>, и более устойчив
     к подбору пароля, чем DES, к тому же позволяет иметь более длинные
     пароли.  Единственной
     причиной не использовать шифрование <emphasis remap=bf>MD5</emphasis> может быть требование
     использовать один и тот же файл паролей между системами FreeBSD и
     не-FreeBSD.</para>
  
<para>Так как алгоритм шифрования DES не может быть законно
     экспортирован из США, пользователи за их пределами не должны
     сгружать это программное обеспечеиие (как часть <emphasis remap=tt>secrdist</emphasis>)
     с американских ftp-серверов.</para>
  
<para>Существует, однако, библиотека, заменяющая libcrypt, которая
     основана на коде, разработанном в Австралии Дэвидом Барреном
     (David Burren).  Этот код можно найти на некоторых неамериканских
     зеркалах FreeBSD.  Исходные тексты для libcrypt без экспортных
     ограничений, и сами программы, её использующие, можно получить
     со следующих ftp-серверов:</para>
  
<para>     
<variablelist>
<varlistentry><term>Южная Африка</term>
<listitem>
<para><filename>ftp://ftp.internat.FreeBSD.org/pub/FreeBSD</filename><!-- <br> -->
         <filename>ftp://storm.sea.uct.ac.za/pub/FreeBSD</filename></para>
  
<para>       </para>
  
</listitem>
</varlistentry>

<varlistentry><term>Бразилия</term>

<listitem>
<para><filename>ftp://ftp.iqm.unicamp.br/pub/FreeBSD</filename></para>
  
</listitem>
</varlistentry>

<varlistentry><term>Финляндия</term>

<listitem>
<para><filename>ftp://nic.funet.fi/pub/unix/FreeBSD/eurocrypt</filename>
     </para>
  
</listitem>
</varlistentry>
</variablelist>
</para>
  
<para>Неамериканский <emphasis remap=tt>securedist</emphasis> может быть использован как 
     непосредственную замену американского <emphasis remap=tt>securedist</emphasis>.  Этот
     <emphasis remap=tt>securedist</emphasis> устанавливается таким же образом, как и 
     американский вариант (обратитесь к замечаниям по установке).  Если
     вы собираетесь устанавливать шифрование DES, вы должны сделать это
     до того, как будете устанавливать другое программное обеспечение.</para>
  
<para>Пользователи за пределами США не должны сгружать
     любое криптографическое программное обеспечение из США.  Это может 
     вызвать проблемы юридического плана у тех, что занимается
     обслуживанием тех сайтов, с которых было сгружено программное
     обеспечение.</para>
 
<para>В разработке находится неамериканский дистрибутив системы
     Kerberos, и текущая версия может получена с анонимного FTP по
     адресу <filename>braae.ru.ac.za</filename>.</para>
 
<para>Существует <link linkend="mailing">список рассылки</link>, посвящённый
     неамериканскому криптографическому программному обеспечению. Для запроса
     информации пошлите письмо, содержащее одну строчку
     ``<emphasis remap=tt>help</emphasis>'' в теле сообщения на адрес</para>

<para><email>majordomo@braae.ru.ac.za</email>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>      Загрузка с установочной дискеты прерывается на сообщении
      ``Probing Devices...''.
    </para></question><answer>

<para>Если у вас установлены устройства IDE Zip или Jaz, уберите их
   и попробуйте снова. Они могут мешать инсталляционной программе. После
   того, как система будет установлена, вы можете снова подключить
   устройства. Надеемся, что это будет исправлено в более поздних
   релизах.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>      Сообщение ``panic: cant mount root'' после перезагрузки
      только что установленной системы.
    </para></question><answer>

<para>Эта ошибка проявляется, когда есть несогласование между
   представлениями загрузочного блока и ядра о дисковых устройствах. Эта
   ошибка обычно проявляется на системах с двумя дисками IDE, с винчестерами,
   установленными как ведущий или единственный на отдельных контроллерах IDE,
   с FreeBSD, инсталлированной на втором контроллере IDE. Загрузочные блоки
   думают, что система установлена на wd1 (второй диск BIOS), тогда как
   ядро даёт первому диску на втором контроллере название wd2. После
   обнаружения устройства ядро пытается смонтировать то, что загрузочные
   блоки выдают за загрузочный диск, wd1, тогда как он на самом деле wd2,
   и ошибается.</para>
  
<para>Для разрешения этой проблемы сделайте одно из следующих действий:</para>
  
<para>   
<orderedlist>

<listitem>
<para>В приглашении Boot: наберите
    <emphasis remap=tt>1:wd(2,a)kernel</emphasis> и нажмите клавишу Enter. Если система 
    запустилась, выполните команду
<literallayout>echo "1:wd(2,a)kernel" &gt; /boot.config</literallayout>

    чтобы сделать это строкой загрузки по умолчанию.
    </para>
</listitem>

<listitem>
<para>Поместите диск с FreeBSD на первичный контроллер IDE, так чтобы
    именования диском пришли в соответствие.
    </para>
</listitem>

<listitem>
<para><ulink URL="../../handbook/kernelconfig.html">Перестройте ядро</ulink>,
    изменив конфигурацию контроллера wd на следующее:

<literallayout>controller      wdc0    at isa? port "IO_WD1" bio irq 14 vector wdintr
disk            wd0     at wdc0 drive 0
# disk            wd1     at wdc0 drive 1 # comment out this line

controller      wdc1    at isa? port "IO_WD2" bio irq 15 vector wdintr
disk            wd1     at wdc1 drive 0 # change from wd2 to wd1
disk            wd2     at wdc1 drive 1 # change from wd3 to wd2</literallayout>


    Проинсталлируйте новое ядро.
    Если вы переместили ваши диски и хотите посстановить предыдущую
    настройку, замените диски в нужной конфигурации и перезагрузитесь.
    Ваша система должна нормально запуститься.

   </para>
</listitem>

</orderedlist>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Какие имеются ограничения на объём оперативной памяти?
  </para></question><answer>

<para>Размер оперативной памяти ограничен объёмом в 4 гигабайта.  Такая
  конфигурация реально тестировалась, подробности есть в <ulink
  URL="ftp://ftp.cdrom.com/archive-info/configuration">конфигурации
  wcarchive</ulink>.  Если вы собираетесь устанавливать столько оперативной
  памяти в компьютер, будьте внимательны.  Скорее всего, вам придётся
  использовать память ECC и для уменьшения нагрузки также взять 9-чиповые
  модули памяти вместо 18-чиповых.</para>

</answer></qandaentry>

<qandaentry><question>
<para>       Какие существуют ограничения для файловой системы ffs?
     </para></question><answer>

<para>Для файловой системы ffs максимальный теоретический размер равен 
    8 терабайтам (2Г блоков) или 16ТБ при стандартном размере блока 8К.
    На практике есть программное ограничение в 1 терабайт, но с
    некоторыми модификациями достижимы 4 гигабайта (и такие системы
    существуют).</para>
  
<para>Максимальный размер одного файла ffs равен примерно 1Г блоков
    (4ТБ) при размере блока 4К.</para>
  
<para>    
<literallayout>                     максимальный размер файла
                ----------------------------------
                   2.2.7    3.0
размер блока fs   -STABLE  -CURRENT  работает  должно работать
---------------   -------  --------  --------  ---------------
4K                 4T-1      4T-1     4T-1       4+T
8K                 32+G      8T-1     32+G       16T-1
16K                128+G     16T-1    128+G      32T-1
32K                512+G     32T-1    512+G      64T-1
64K                2048+G    64T-1    2048+G     128T-1
     </literallayout>
</para>
  
<para>При размере блока файловой системы 4К, тройная адресация
    блоков работает и всё должно быть ограничено максимальным количеством 
    блоков, которое задаётся в виде тройной переадресации
    блока (примерно 1K^3 + 1K^2 + 1K), однако всё ограничивается 
    (ошибочным) лимитом 1Г-1 на количество блоков файловой системы.
    Это ограничение должно быть равным 2Г-1. При количестве блоков,
    приближающемся к 2Г-1, появляются некоторые ошибки, но этот предел 
    недостижим при размере блока 4К.</para>
  
<para>При размере блока 8К и больше, всё должно быть ограничено
    лимитом 2Г-1 на количество блоков файловой системы, но реально
    ограничено пределом в 1Г-1 на число блоков файловой системы, кроме
    случая -STABLE, недостижимый при тройной переадресации, так что предел
    равен максимальному числу блоков файловой системы, который может
    быть представлен через двойную переадресацию (примерно
    (размер блока/4)^2 + (размер блока/4)), и под -CURRENT превышеине
    этого ограничения может вызвать проблемы.  Использование верного
    ограничения в 2Г-1 блоков вызывает проблемы.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Как можно поместить файлы размером 1ТБ на дискету?</para></question><answer>

<para>Я храню парочку таких на дискете :-)  Максимальный размер 
    файла не связан непосредственно с максимальным размером диска.
    Максимальный размер диска равен 1ТБ.  Особенностью является
    то, что размер файла может превышать размер диска.</para>
  
<para>В следующем примере создаётся файл размером 8Т-1 с помощью всего
    32К дискового пространства (3 блока адреса и 1 блок данных) на 
    маленьком корневом разделе.  Команда dd должна уметь работать с
    большими файлами.</para>
  
<para>
<literallayout>ttyv0:bde@alphplex:/tmp/q&gt; cat foo
df .
dd if=/dev/zero of=z bs=1 seek=`echo 2^43 - 2 | bc` count=1
ls -l z
du z
df .
ttyv0:bde@alphplex:/tmp/q&gt; sh foo
Filesystem  1024-blocks     Used    Avail Capacity  Mounted on
/dev/da0a         64479    27702    31619    47%    /
1+0 records in
1+0 records out
1 bytes transferred in 0.000187 secs (5346 bytes/sec)
-rw-r--r--  1 bde  bin  8796093022207 Sep  7 16:04 z
32	z
Filesystem  1024-blocks     Used    Avail Capacity  Mounted on
/dev/da0a         64479    27734    31587    47%    /
ttyv0:bde@alphplex:/tmp/q&gt; exit</literallayout>
</para>
  
<para>Bruce Evans, September 1998</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Я скомпилировал новое ядро и при загрузке получил сообщение об ошибке
        "archsw.readin.failed".
      </para></question><answer>

<para>Вы можете осуществить загрузку системы, явно указав ядро во время
     второго этапа загрузочного процесса, нажав любую клавишу после
     появления символа | до запуска загрузчика.  Более точно, вы обновили
     исходные тексты ядра, откомпилировали и установили новое ядро <emphasis>без
     выполнения make world </emphasis>.  Такое не поддерживается.  Выполните
     make world.</para>
  
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="hardware">
<title>Аппаратная совместимость</title>


<qandaset><qandaentry><question>
<para>Какие типы винчестеров поддерживает FreeBSD?</para></question><answer>

<para>FreeBSD работает с дисками стандартов EIDE и SCSI (с
     соответствующими контроллерами; обратитесь к следующему разделу), и
     всеми дисками, использующими оригинальный интерфейс "Western Digital"
     (MFM, RLL, ESDI и, конечно же, IDE).  Некоторые контроллеры ESDI,
     использующие собственные интерфейсы, могут и не работать: к таким
     относятся WD1002/3/6/7 и их клоны.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Какие поддерживаются контроллеры SCSI?</para></question><answer>

<para>Полный список приведён в <ulink URL="../../handbook/install.html#INSTALL-HW">Руководстве</ulink>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Какие приводы CD-ROM поддерживаются во FreeBSD?</para></question><answer>

<para>Поддерживаются любые SCSI-устройства чнения компакт дисков,
     подключенные к поддерживаемому контроллеру.</para>
  
<para>Кроме того, поддерживаются следующие оригинальные интерфейсы:</para>
  
<para>     
<itemizedlist>

<listitem>
<para>Mitsumi LU002 (8bit), LU005 (16bit) и FX001D (16bit 2x Speed).
       </para>
</listitem>

<listitem>
<para>Sony CDU 31/33A<!-- <br> -->
       </para>
</listitem>

<listitem>
<para>Sound Blaster не-SCSI CD-ROM<!-- <br> -->
       </para>
</listitem>

<listitem>
<para>Matsushita/Panasonic CD-ROM<!-- <br> -->
       </para>
</listitem>

<listitem>
<para>ATAPI-совместимые IDE CD-ROM<!-- <br> -->
     </para>
</listitem>

</itemizedlist>
</para>
  
<para>Все не-SCSI адаптеры ставятся своей медлительностью по сравнению
     со SCSI, а некоторые CDROM стандарта ATAPI могут и не работать.</para>
  
<para>С версии 2.2 компакт-диск с FreeBSD от Walnut Creek является
     загрузочным.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Поддерживает ли FreeBSD устройства ZIP?</para></question><answer>

<para>Несомненно, FreeBSD поддерживает ZIP-устройства SCSI.  Устройству
     ZIP могут быть назначены SCSI ID только 5 или 6, и если BIOS вашего
     SCSI-адаптера поддерживает такую возможность, вы можете с него даже 
     загрузиться.  Мне не известны адаптеры, позволяющие загрузиться с
     устройств, номера которых отличны от 0 или 1... посмотрите в
     вашей документации (и сообщите мне, если у вас это работает).</para>
  
<para>Устройства ZIP стандарта ATAPI (IDE) поддерживаются FreeBSD начиная
     с версии 2.2.6.</para>
  
<para>FreeBSD поддерживает устройства Zip, работающие через параллельный
     порт, начиная с версии 3.0.  Если вы используете более новую версию,
     проверьте, содержит ли ваше ядро драйверы для <emphasis remap=tt>scbus0</emphasis>, <emphasis remap=tt>da0
     </emphasis>, <emphasis remap=tt>ppbus0</emphasis> и <emphasis remap=tt>vp0</emphasis> (ядро GENERIC содержит всё это,
     кроме vp0).  Если эти драйверы имеются, то устройство должно быть
     доступно как /dev/da0s4.  Диски могут быть смонтированы
     командами <command>mount /dev/da0s4 /mnt</command> или (для дисков dos)
     <emphasis remap=tt>mount_msdos /dev/da0s4 /mnt</emphasis>.</para>
  
<para>Также посмотрите <link linkend="jaz">следующее замечание</link>
     о съёмных носителях, и <link linkend="disklabel">это замечание</link>
     о 'форматировании'.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Поддерживает ли FreeBSD съёмные диски типа JAZ или EZ?
      </para></question><answer>

<para>Кроме IDE-варианта устройства EZ, это всё устройства SCSI, так что
     для FreeBSD все они должны выглядеть как диски SCSI, а IDE EZ должен
     выглядеть как диск IDE.</para>
  
<para><anchor id="jaz">Я не знаю, насколько хорошо FreeBSD поддерживает
     смену носителя во время работы.  Конечно, чтобы сменить диск, вам 
     сначала нужно его размонтировать, и обратите внимание на то, что при
     загрузке все внешние устройства должны быть включены, чтобы FreeBSD
     могла их распознать.</para>
  
<para>Посмотрите это <link linkend="disklabel">замечание</link> о 
     'форматировании'.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Какие многопортовые последовательные адаптеры поддерживаются
        во FreeBSD?
      </para></question><answer>

<para>Список таких устройств находится в разделе о <ulink URL="../../handbook/install.html#INSTALL-MISC">различных устройствах</ulink> Руководства.</para>
  
<para>Некоторые безымянные клоны таких адаптеров тоже работают нормально,
     особенно те, которые заявляют о своей совместимости с AST.</para>
  
<para>Прочтите страницы Справочника о
   <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sio">sio</ulink>
   для получения подробной информации о конфигурировании таких
   адаптеров.</para>
  
</answer></qandaentry>


<qandaentry>
  <question id="usbkbd">
    <para>У меня клавиатура USB.  Поддерживает ли её FreeBSD?</para>
  </question>

  <answer>
    <para>Поддержка устройств USB была добавлена во FreeBSD 3.1.  Однако там
      она ещё находилась в стадии разработки и не всегда работает так, как
      в версии 3.2.  Если вы хотите поэкспериментировать с поддержкой мыши USB,
      следуйте нижеприводимым указаниям.</para>

    <orderedlist>
      <listitem>
        <para>Используйте FreeBSD 3.2 и выше.</para>
      </listitem>

      <listitem>
        <para>В конфигурационный файл ядра добавьте следующие строки и
          перестройте ядро.</para>

        <programlisting>
          controller      uhci0
          controller      ohci0
          controller      usb0
          controller      ukbd0
          options         KBD_INSTALL_CDEV
        </programlisting>
      </listitem>

      <listitem>
        <para>Перейдите в каталог <filename>/dev</filename> и создайте
          специальные файлы устройств следующим образом:</para>

        <screen>
          &prompt.root; <userinput>cd /dev</userinput>
          &prompt.root; <userinput>./MAKEDEV kbd0 kbd1</userinput>
        </screen>
      </listitem>

      <listitem>
        <para>Отредактируйте файл <filename>/etc/rc.conf</filename>, добавив
          следующие строки:</para>

        <programlisting>
          usbd_enable="YES"
          usbd_flags=""
        </programlisting>
      </listitem>
    </orderedlist>

    <para>После перезагрузки системы AT-клавиатуре будет соответствовать
      <devicename>/dev/kbd0</devicename>, а клавиатуре USB -
      <devicename>/dev/kbd1</devicename>, если они обе подключены к системе.
      Если присутствует только клавиатура USB, ей будет соответствовать
      <devicename>/dev/ukbd0</devicename>.</para>

    <para>Если вы хотите использовать клавиатуру USB на консоли, вы должны
      явно указать драйверу консоли на использование имеющейся клавиатуры
      USB.  Это может быть сделано в процессе инициализации системы следующей
      командой.</para>

    <screen>
      &prompt.root; <userinput>kbdcontrol -k /dev/kbd1 &lt; /dev/ttyv0 &gt; /dev/null</userinput>
    </screen>

    <para>Заметьте, что, если клавиатура USB является единственной
      присутствующей, она доступна как <devicename>/dev/kbd0</devicename>,
      и поэтому команда должна выглядеть примерно так:</para>

    <screen>
      &prompt.root; <userinput>kbdcontrol -k /dev/kbd0 &lt; /dev/ttyv0 &gt; /dev/null</userinput>
    </screen>

    <para>Вышеуказанную команду хорошо бы добавить в
      <filename>/etc/rc.i386</filename>.</para>

    <para>Как только вы всё это сделаете, клавиатура USB будет работать и в
      X-окружении без каких-либо особых настроек.</para>

    <para>Выключение и включение USB-клавиатуры на ходу может ещё не работать
      совершенно корректно.  Во избежание неприятностей было бы правильно
      подключить клавиатуру перед запуском системы и не отключать её до
      закрытия системы.</para>

    <para>За дополнительной информацией обратитесь к странице Справочника
      &man.ukbd.4;.</para>
  </answer>
</qandaentry>


<qandaentry><question id="busmouse">
<para>У меня необычная мышь типа bus mouse. Как её настроить?
  </para></question><answer>

<para>FreeBSD поддерживает мыши типов bus mouse и InPort bus mouse от таких
  производителей, как Microsoft, Logitech и ATI.  Драйвер устройства bus mouse
  включен по умолчанию в ядро GENERIC во FreeBSD версий 2.X, но не включён в
  версию 3.0 и выше.  Если вы строите собственное ядро с этим драйвером,
  добавьте следующую строку в конфигурационный файл ядра</para>
 
<para>Во FreeBSD 3.0 и ранее, добавьте:</para>

<para>     
  <literallayout>
    device mse0 at isa? port 0x23c tty irq5 vector mseintr
  </literallayout>
</para>
 
<para>Во FreeBSD 3.1 и выше, строчка должна иметь вид:</para>

<para>
  <literallayout>
    device mse0 at isa? port 0x23c tty irq5
  </literallayout>
</para>

<para>Мышь типа bus mouse обычно поставляется с отдельным интерфейсным
  адаптером.  Он позволяет установить адрес порта ввода/вывода и номер IRQ,
  отличающиеся от приведённых выше.  Для получения дополнительной информации
  обратитесь к документации по вашей мыши и странице Справочника
  &man.mse.4;.</para>
 
</answer></qandaentry>


<qandaentry><question id="ps2mouse">
<para>Как использовать мышь PS/2 (типа ``mouse port'' или ``keyboard'')?
  </para></question><answer>

<para>Если вы используете FreeBSD версии выше, чем 2.2.5, то необходимый
  драйвер, <devicename>psm</devicename>, включён в ядро и активизирован.  Ядро
  должно обнаружить мышь PS/2 во время загрузки.</para>
 
<para>Если вы работаете с предыдущей, но сравнительно свежей версией FreeBSD
  (2.1.x и выше), то вы можете просто включить её поддержку в меню конфигурации
  ядра во время инсталляции, либо позже, указав <option>-c</option> в
  приглашении <command>boot:</command>.  По умолчанию она отключена, так что
  вы должны включить её явно.</para>
 
<para>Если вы используете более старую версию FreeBSD, то вам нужно добавить
  следующие строки в файл конфигурации ядра и построить новое ядро.</para>

<para>Во FreeBSD 3.0 и ранее, строчка должна иметь вид:</para>
 
<para>     
  <literallayout>
    device psm0 at isa? port "IO_KBD" conflicts tty irq 12 vector psmintr
  </literallayout>
</para>

<para>Во FreeBSD 3.1 и выше, строчка должна быть такой:</para>

<para>
  <literallayout>
    device psm0 at isa? tty irq 12
  </literallayout>
</para>

<para>Во FreeBSD 4.0-CURRENT и выше, строчка должна иметь вид:</para>

<para>
  <literallayout>
    device psm0 at atkbdc? irq 12
  </literallayout>
</para>
 
<para>Обратитесь к главе Руководства о <ulink
  URL="../../handbook/kernelconfig.html">конфигурировании ядра</ulink>, если
  вы не имели опыта такой работы.</para>
 
<para>После того, как ядро правильно обнаружило <devicename>psm0</devicename>
  во время загрузки, проверьте существование файла устройства для
  <devicename>psm0</devicename> в каталоге <filename>/dev</filename>.  Это
  можно сделать, набрав:</para>
 
<para>     
  <literallayout>
    cd /dev; sh MAKEDEV psm0
  </literallayout>
</para>
 
<para>войдя в систему администратором.</para>
 
</answer></qandaentry>


<qandaentry><question
id="moused">
<para>        Можно ли каким-либо образом использовать мышь, кроме X Window?
        
      </para></question><answer>

<para>Если вы используете стандартный драйвер консоли, syscons, то можете
     использовать указатель мыши в текстовых консолях для выделения и 
     переноса текста.  Запустите демон мыши, moused, и включите отображение
     указателя мыши на консоли:</para>
  
<para>     
<literallayout>        moused -p /dev/xxxx -t yyyy 
        vidcontrol -m on
      </literallayout>
</para>
 
<para>Здесь <emphasis remap=tt>xxxx</emphasis> - это имя устройства мыши,
  а <emphasis remap=tt>yyyy</emphasis> - тип протокола, используемого мышью.
  Страница Справочника по &man.moused.8; содержит информацию о поддерживаемых
  типах протоколов.</para>
 
<para>Вы можете запускать демон мыши автоматически во время старта
     системы.  В версии 2.2.1, установите значение следующей переменной в
     <filename>/etc/sysconfig</filename>.</para>
  
<para>     
<literallayout>	mousedtype="yyyy"
	mousedport="xxxx"
	mousedflags=""
      </literallayout>
</para>
  
<para>     В версиях 2.2.2 и выше, установите значения следующих переменных в
     <filename>/etc/rc.conf</filename>.</para>
  
<para>     
<literallayout>	moused_type="yyyy"
	moused_port="xxxx"
	moused_flags=""
      </literallayout>
</para>
 
<para>Кроме того, если вы хотите использовать даемон мыши на всех виртуальных
  терминалах, а не только на консоли во время загрузки, добавьте следующую
  строку в файл <filename>/etc/rc.conf</filename>.</para>

  <para>
    <literallayout>
      allscreens_flags="-m on"
    </literallayout>
  </para>

<para>Начиная с FreeBSD 2.2.6, даемон мыши в состоянии определять тип протокола
  автоматически, если, конечно, мышь не достаточно древней модели.  Укажите
  ``<emphasis remap=tt>auto</emphasis>'' для автоматического определения типа
  протокола.</para>
 
<para>После запуска даемона мыши, доступ к мыши должен согласовываться
  между даемоном мыши и другими программами типа X Window.  Этот вопрос
  рассмотрен в <link linkend="x-and-moused">другом разделе</link>.</para>
 
</answer></qandaentry>


<qandaentry><question>
<para>        Как можно вырезать и копировать текст с помощью мыши в
        текстовой консоли?
      </para></question><answer>

<para>После того, как вы запустили демон мыши (посмотрите <link
     linkend="moused">предыдущий раздел</link>), нажмите кнопку 1 (левую) и
     двигайте мышь для выбора области выделения.  Затем нажмите кнопку 2
     (среднюю) или кнопку 3 (правую) для вставки текста из буфера, начиная
     с текущей позиции курсора.</para>
 
<para>В версиях 2.2.6 и выше, нажатие на кнопку 2 вызовет вставку текста.
  Нажатие на кнопку 3 ``расширит'' выбранный область текста.  Если у вашей
  мыши отсутствует средняя кнопка, вы можете её сэмулировать или переназначить
  кнопки опциями программы moused. Обратитесь к странице Справочника по <ulink
  URL="http://www.FreeBSD.org/cgi/man.cgi?moused">moused(8)</ulink>.</para>
 
</answer></qandaentry>


<qandaentry>
  <question id="usbmouse">
    <para>У меня мышь USB.  Поддерживает ли FreeBSD мышь USB?</para>
  </question>

  <answer>
    <para>Поддержка устройств USB была добавлена во FreeBSD 3.1.  Однако там
      она ещё находилась в стадии разработки и не всегда работает так, как
      в версии 3.2.  Если вы хотите поэкспериментировать с поддержкой мыши USB,
      следуйте нижеприводимым указаниям.</para>

    <orderedlist>
      <listitem>
        <para>Используйте FreeBSD 3.2 и выше.</para>
      </listitem>

      <listitem>
        <para>В конфигурационный файл ядра добавьте следующие строки и 
          перестройте ядро.</para>

        <programlisting>
          controller     uhci0
          controller     ohci0
          controller     usb0
          device         ums0
        </programlisting>
      </listitem>

      <listitem>
        <para>Перейдите в каталог <filename>/dev</filename> и создайте
          специальный файл устройства такой командой:</para>

        <screen>
          &prompt.root; <userinput>cd /dev</userinput>
          &prompt.root; <userinput>./MAKEDEV ums0</userinput>
        </screen>
      </listitem>

      <listitem>
        <para>Одредактируйте файл <filename>/etc/rc.conf</filename>, добавив
          такие строчки:</para>

        <programlisting>
          moused_enable="YES"
          moused_type="auto"
          moused_port="/dev/ums0"
          moused_flags=""
          usbd_enable="YES"
          usbd_flags=""
        </programlisting>

        <para>Подробное обсуждение moused может быть найдено в <link
          linkend="moused">предыдущем разделе</link>.</para>
      </listitem>

      <listitem>
        <para>Чтобы использовать мышь USB при работе в X, отредактируйте
          файл <filename>XF86Config</filename>.  Если вы используете
          XFree86 3.3.2 и выше, то в разделе <emphasis>Pointer</emphasis>
          должны присутствовать такие строки:</para>

        <programlisting>
          Device         "/dev/sysmouse"
          Protocol       "Auto"
        </programlisting>

        <para>Если у вас более старая версия XFree86, то в разделе
          <emphasis>Pointer</emphasis> должны присутствовать строки:</para>

        <programlisting>
          Device         "/dev/sysmouse"
          Protocol       "SysMouse"
        </programlisting>
      </listitem>
    </orderedlist>

    <para>Поддержке мыши при работе в X посвящен <link
      linkend="x-and-moused">другой раздел</link>.</para>

    <para>Выключение и включение мыши USB на ходу может ещё не работать
      совершенно корректно.  Во избежание неприятностей было бы правильно
      подключить мышь перед запуском системы и не отключать её до закрытия
      системы.</para>
  </answer>
</qandaentry>


<qandaentry>
  <question>
    <para>У моей мыши есть дополнительные колёсико и кнопочки.  Можно ли их
      использовать во FreeBSD?</para>
  </question>

  <answer>
    <para>Ответ, к сожалению, `в зависимости от обстоятельств'.
      Эти мышки с дополнительными возможностями, как правило, требуют наличия
      специальных драйверов.  До тех пор, пока драйвер мыши или прикладная
      программа не будут иметь отдельную поддержку такой мыши, она будет
      работать как стандартная двух- или трёхкнопочная мышь.</para>

    <para>Возможные способы использования колёсиков мыши при работе в X Window
      описаны в <link linkend="x-and-wheel">другом разделе</link>.</para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question id="psmerr">
    <para>Похоже, что моя мышь не работает.  Её курсор прыгает по экрану.  Мышь
      имеет колёсико и подключено к порту мыши PS/2.</para>
  </question>

  <answer>
    <para>В драйвере psm для мыши PS/2 во FreeBSD версий 3.2 и ранее имеются
      проблемы при работе с некоторыми мышками, у которых есть колёсико, в том
      числе с мышками Logitech модель M-S48 и их OEM-разновидностями.
      Исправьте файл <filename>/sys/i386/isa/psm.c</filename> с помощью
      следующего патча и перестройте ядро.</para>

    <programlisting>
Index: psm.c
===================================================================
RCS file: /src/CVS/src/sys/i386/isa/Attic/psm.c,v
retrieving revision 1.60.2.1
retrieving revision 1.60.2.2
diff -u -r1.60.2.1 -r1.60.2.2
--- psm.c      1999/06/03 12:41:13     1.60.2.1
+++ psm.c      1999/07/12 13:40:52     1.60.2.2
@@ -959,14 +959,28 @@
     sc->mode.packetsize = vendortype[i].packetsize;

     /* set mouse parameters */
+#if 0
+    /*
+     * A version of Logitech FirstMouse+ won't report wheel movement,
+     * if SET_DEFAULTS is sent...  Don't use this command.
+     * This fix was found by Takashi Nishida.
+     */
     i = send_aux_command(sc->kbdc, PSMC_SET_DEFAULTS);
     if (verbose >= 2)
       printf("psm%d: SET_DEFAULTS return code:%04x\n", unit, i);
+#endif
     if (sc->config & PSM_CONFIG_RESOLUTION) {
         sc->mode.resolution
           = set_mouse_resolution(sc->kbdc,
-              (sc->config & PSM_CONFIG_RESOLUTION) - 1);
+                                 (sc->config & PSM_CONFIG_RESOLUTION) - 1);
+    } else if (sc->mode.resolution >= 0) {
+      sc->mode.resolution
+          = set_mouse_resolution(sc->kbdc, sc->dflt_mode.resolution);
+    }
+    if (sc->mode.rate > 0) {
+      sc->mode.rate = set_mouse_sampling_rate(sc->kbdc, sc->dflt_mode.rate);
     }
+    set_mouse_scaling(sc->kbdc, 1);

     /* request a data packet and extract sync. bits */
     if (get_mouse_status(sc->kbdc, stat, 1, 3) < 3) {</programlisting>

    <para>Версии FreeBSD выше чем 3.2 должны работать нормально.</para>
  </answer>
</qandaentry>


<qandaentry><question>
<para>        Как использовать мышь/трэкболл/сенсорную панель на лэптопе?
      </para></question><answer>

<para>Посмотрите <link linkend="ps2mouse">один из предыдущих разделов</link>.
     И посмотрите <link linkend="pao">это замечание</link> на странице о
     мобильных вычислениях.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Какие типы стримеров поддерживаются?</para></question><answer>

<para>FreeBSD поддерживает стримеры с интерфейсами SCSI, QIC-36 (с
     интерфейсом QIC-02) и QIC-40/80 (на основе НГМД), включая 8-мм
     (Exabyte) и DAT.  Стримеры QIC-40/80 стравнительно медленны.</para>
  
<para>Некоторые ранние модели 8-мм стримеров не совсем соответствуют
     стандарту SCSI-2 и могут работать не совсем хорошо.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Поддерживает ли FreeBSD роботов для смены лент?</para></question><answer>

<para>FreeBSD 2.2 поддерживает SCSI-чейнджеры через устройство
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ch(4)">ch</ulink>
     и команду <ulink 
     URL="http://www.FreeBSD.org/cgi/man.cgi?chio">chio</ulink>.  Детальная
     информация об управлении чейнджерами может
     быть найдена на странице Справочника по команде
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?chio">chio</ulink>.</para>
  
<para>Если вы не используете систему
     <ulink URL="http://www.FreeBSD.org/cgi/ports.cgi?amanda">AMANDA</ulink>
     или другое программное обеспечение, умеющее работать с роботами, имейте в
     виду, что они могут только переносить ленты с одного места на другое,
     так что вам нужно самим отслеживать, в каком слоте находится нужная
     лента, и в какой слот нужно вернуть ленту, находящуюся в стримере.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Какие звуковые платы поддерживаются во FreeBSD?</para></question><answer>

<para>FreeBSD поддерживает звуковые платы SoundBlaster, SoundBlaster Pro,
     SoundBlaster 16, Pro Audio Spectrum 16, AdLib и Gravis UltraSound.
     Имеется ограниченная поддержка MPU-401 и совместимых с ним адаптеров.
     Адаптеры, удовлетворяющие спецификации Microsoft Sound System, также
     поддерживаются драйвером pcm.</para>
  
<para><emphasis remap=bf>ЗАМЕЧАНИЕ</emphasis> Это касается только звука!  Этот
     драйвер не поддерживает CDROM, SCSI или джойстики на всех подобных
     адаптерах, кроме SoundBlaster.  Поддерживаются устройства на
     SCSI-интерфейсе SoundBlaster и не-SCSI CDROM, но загрузиться с них
     невозможно.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Есть ли решение проблемы отсутствия звука при использовании
     драйвера pcm с адаптером es1370?</para></question><answer>

<para>При каждой перезагрузке вам нужно запускать следующую команду:</para>

<para>mixer pcm 100 vol 100 cd 100</para>

</answer></qandaentry>


<qandaentry><question>
<para>Какие сетевые адаптеры поддерживает FreeBSD?</para></question><answer>

<para>Более полный список содержится в разделе Руководства об
  <ulink URL="../../handbook/install-hw.html#INSTALL-NICS">адаптерах
  Ethernet</ulink>.</para>
 
</answer></qandaentry>


<qandaentry><question>
<para>На моей машине отсутствует математический сопроцессор - это плохо?
  </para></question><answer>

<para><emphasis remap=tt>Замечание</emphasis> Это касается только владельцев
  компьютеров 386/486SX/486SLC - во всех остальных машинах модуль вычислений
  с плавающей точкой объединён с центральным процессором.</para>

<para>В общем случае это не проблема, но в отсутствии сопроцессора вы
  можете столкнуться со снижением производительность и точности при
  использовании программной эмуляции сопроцессора (обратитесь к разделу
  об <link linkend="emul">эмуляции вычислений с плавающей точкой</link>).  
  В частности, прорисовка дуг в X будет ОЧЕНЬ медленной.  Приобретение
  математического сопроцессора настоятельно рекомендуется, он того стоит.</para>

<para><emphasis remap=bf>ЗАМЕЧАНИЕ</emphasis> Некоторые математические
  сопроцессоры работают лучше, чем другие.  Нам неприятно это признавать,
  но Intel пока никого не подводил.  Если вы не уверены, что сопроцессор
  будет работать с FreeBSD, избегайте клонов.</para>

</answer></qandaentry>


<qandaentry><question>
<para>Какие ещё устройства поддерживаются в 2.X?</para></question><answer>

<para>В <ulink
  URL="../../handbook/install-hw.html#INSTALL-MISC">Руководстве</ulink>
  приведён список остальных устройств, которые поддерживаются во
  FreeBSD.</para>

</answer></qandaentry>


<qandaentry><question>
<para>Поддерживает ли FreeBSD управление энергосбережением на лаптопах?
  </para></question><answer>

<para>FreeBSD поддерживает APM на некоторых машинах.  Поищите в файле
  конфигурации ядра <acronym>LINT</acronym> слово
  <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?apm">APM</ulink>.</para>

</answer></qandaentry>


<qandaentry><question>
<para>        Решение специфичных проблем с аппаратным обеспечением
      </para></question><answer>

<para>Этот раздел содержит решения специфичных проблем с аппаратным
     обеспечением, с которыми сталкиваются наши пользователи.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Компьютеры Micron зависают при загрузке</para></question><answer>

<para>Некоторые материнские платы Micron имеют BIOS, не удовлетворяющую
      стандарту PCI BIOS, что приводит к печальным последствиям при
      загрузке FreeBSD, потому что имеет место несоответствие устройств
      PCI занимаемым ими адресам.</para>
 
<para>Для решения этой проблемы отключите в BIOS опцию "Plug and Play
      Operating System" .  </para>
 
<para>Более подробная информация об этой проблеме находится по следующему
      адресу: <ulink URL="http://cesdis.gsfc.nasa.gov/linux/drivers/vortex.html#micron">http://cesdis.gsfc.nasa.gov/linux/drivers/vortex.html#micron</ulink></para>
 
</answer></qandaentry>

<qandaentry><question>
<para>      FreeBSD не распознаёт мой новейший контроллер от Adaptec.
    </para></question><answer>

<para>Новый набор микросхем AIC789x от Adaptec поддерживается подсистемой CAM
     SCSI, впервые появившейся в 3.0.  Патчи для 2.2-STABLE находятся по адресу
     <ulink URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/development/cam/">ftp://ftp.FreeBSD.org/pub/FreeBSD/development/cam/</ulink>.
     Загрузочный диск с поддержкой CAM доступен по адресу <ulink
     URL="http://people.FreeBSD.org/~abial/cam-boot/">http://people.FreeBSD.org/~abial/cam-boot/</ulink>.
     В обоих случаях прежде чем начать, прочтите файл README. </para>
  
</answer></qandaentry>

<qandaentry><question>
<para>FreeBSD не находит внутренний модем Plug &amp; Play.</para></question><answer>

<para>Вам нужно добавить PnP ID вашего модема в список PnP ID драйвера 
  последовательного порта.  Для включения поддержки Plug &amp; Play, 
  откомпилируйте новое ядро с опцией <emphasis remap=tt>controller
  pnp0</emphasis> в конфигурационном файле, и перезагрузите машину.  Ядро
  выведет список ID всех найденных PnP-устройств.  Добавьте PnP ID модема в
  таблицу в файле <filename>/sys/i386/isa/sio.c</filename>, где-то в районе
  2777 строки.  Чтобы найти таблицу, поищите слово "SUP1310" в структуре
  "siopnp_ids[]".  Снова постройте ядро, проинсталлируйте его и
  перезагрузитесь. Теперь ваш модем должен быть опознан.</para>
  
<para>Вам может понадобиться отконфигурировать PnP-устройства командой 'pnp'
  в конфигураторе во время загрузки следующим образом:</para>
  
<para>  
<literallayout>   pnp 1 0 enable os irq0 3 drq0 0 port0 0x2f8
   </literallayout>

  чтобы модем был распознан.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>     Как сделать, чтобы приглашение boot: выводилось на консоль на
     последовательном порту?
   </para></question><answer>

<para>
<orderedlist>

<listitem>
<para>Постройте ядро с опцией <emphasis remap=tt>options COMCONSOLE</emphasis>.
  </para>
</listitem>

<listitem>
<para>Создайте файл /boot.config, поместив туда только текст <option>-P</option>.
  </para>
</listitem>

<listitem>
<para>Отключите клавиатуру.
  </para>
</listitem>

</orderedlist>
</para>
  
<para>Подробная информация находится в файле
  <filename>/usr/src/sys/i386/boot/biosboot/README.serial</filename>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Почему сетевой адаптер 3Com PCI не работает с компьютерами Micron?
      </para></question><answer>

<para>Некоторые материнские платы Micron имеют BIOS, не удовлетворяющую
     стандарту PCI BIOS, что приводит к несоответствию устройств PCI
     занимаемым ими адресам.  Это приводит к печальным последствиям при
     загрузке FreeBSD.</para>
  
<para>Для решения этой проблемы отключите в BIOS опцию "Plug and Play
     Operating System" .  </para>
  
<para>Более подробная информация об этой проблеме находится по следующему
     адресу: <ulink URL="http://cesdis.gsfc.nasa.gov/linux/drivers/vortex.html#micron">http://cesdis.gsfc.nasa.gov/linux/drivers/vortex.html#micron</ulink></para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Поддерживает ли FreeBSD многопроцессорные системы (SMP)?
      </para></question><answer>

<para>Поддержка SMP (Symmetric Multiprocessing) имеется только в
     3.0-STABLE и последующих релизах.</para>
  
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="troubleshoot">
<title>Устранение некоторых проблем</title>


<qandaset><qandaentry><question
id="awre">
<para>        На моём винчестеры есть запорченные блоки!
      </para></question><answer>

<para>Если это SCSI-устройство, то винчестер должен иметь возможность
     автоматической переадресации таких блоков.  Однако по непонятным
     причинам во многих поставляемых дисках эта возможность отключена...</para>
  
<para>Чтобы её включить, вам нужно изменить режим работы устройства, что
     во FreeBSD может быть выполнено администратором посредством команды</para>
  
<para>     
<literallayout>        scsi -f /dev/rsd0c -m 1 -e -P 3
      </literallayout>
</para>
  
<para>и изменить значения параметров AWRE и ARRE с 0 на 1:-</para>
  
<para>     
<literallayout>        AWRE (Auto Write Reallocation Enbld):  1
        ARRE (Auto Read Reallocation Enbld):  1
      </literallayout>
</para>
  
<para>Последующие параграфы были предоставлены
     <ulink URL="mailto:tedm@toybox.placo.com">Тэдом Миттельштадтом</ulink>
     (Ted Mittelstaedt):</para>
  
<para>Для дисков IDE появление запорченных блоков является признаком
     возможных неприятностей.  Все современные IDE-диски поставляются с
     включенной возможностью переадресации испорченных блоков.  Все 
     производители винчестеров в настоящее время предоставляют расширенные
     гарантии и заменяют диски с запорченными блоками.</para>
  
<para>Если вы всё же хотите спасти ваш диск IDE с запорченными блоками,
     вы можете попытаться найти программу диагностики винчестеров от
     производителя и протестировать ею диск.  Иногда эти программы могут
     заставить электронику винчестера пересканировать диск в поисках
     испорченных блоков и заблокировать их.</para>
  
<para>В случае дисков стандартов ESDI, RLL и MFM, наличие испорченных блоков
     является обычным явлением и не является большой проблемой. В ПК
     контроллер винчестера и BIOS берут на себя работу по блокировке
     испорченных блоков.  Это прекрасно работает в случае операционных систем
     типа DOS, которые используют вызовы BIOS для доступа к диску.  Однако
     драйвер диска во FreeBSD не обращается к BIOS, поэтому для обеспечения
     подобной функциональности существует bad144.  bad144 работает только с
     драйвером wd, её НЕВОЗМОЖНО использовать со SCSI.  bad144 помещает все
     найденные испорченные сектора в специальный файл.</para>
  
<para>У bad144 имеется особенность - специальный файл с испорченными
     блоками помещается на последнюю дорожку диска.  Так как этот файл
     может содержать список испорченных секторов, находящихся в начале
     диска, где может располагаться файл ядра /kernel, он должен быть
     доступен загрузчику, использующему вызовы BIOS для чтения файла ядра.
     Это значит, что диск, который использует bad144, не должен иметь
     размеры, превышающие 1024 дорожки, 16 головок и 63 сектора.  Это
     ограничивает размер диска, обрабатываемого bad144, 500 мегабайтами.</para>
  
<para>Для использования bad144, просто установите "Bad Block"
     в положение ON на экране программы fdisk во время начальной установки.
     Это работает начиная с FreeBSD 2.2.7.  Диск должен иметь размер,
     не превышающий 1024 дорожки.  Рекомендуется, чтобы до этого диск
     проработал не менее 4 часов для перехода в рабочий тепловой режим и
     стабильный режим работы головок.</para>
  
<para>Если диск имеет размер, превышающий 1024 головки (как, например,
     большой диск ESDI), контроллер ESDI использует особый режим 
     трансляции, чтобы это работало в DOS.  Драйвер wd будет знать об этих
     режимах трансляции, ЕСЛИ вы укажете на использование "преобразованных"
     параметров в команде "set geometry" программы fdisk.  Вы также НЕ должны
     использовать режим "dangerously dedicated" при выделении раздела для
     FreeBSD, так как при этом параметры диска не принимаются во внимание.
     Также, хотя fdisk будет использовать изменённые параметры, он всё же
     помнит настоящий размер диска, и попытается создать слишком большой
     раздел FreeBSD.  Если параметры диска изменились на транслированные,
     раздел ДОЛЖЕН быть создан вручную с указанием количества блоков.</para>
  
<para>Самым быстрым способом является установка большого диска ESDI с
     контоллером ESDI, загрузка DOS и выделение на нём раздела DOS.  Затем
     запустите инсталляционную программу FreeBSD и в экране программы
     fdisk найдите и запишите размер блока и их количество раздела DOS.
     Затем установите параметры в те же значения, которые использует DOS,
     удалите раздел DOS и создайте "совмещённый" раздел FreeBSD с ранее
     записанным размером блока.  Затем установите загрузку с этого раздела
     и включите сканирование испорченных блоков.  Во время установки сначала,
     ещё до создания файловых систем, запустится bad144 (вы можете это
     увидеть по Alt-F2).  Если возникнут проблемы при создании файла с
     запорченными секторами, вы установили слишком большие параметры диска
     - перезагрузитесь и начните всё сначала (включая повторные разбиение
     на разделы и форматирование винчестера в DOS).</para>
  
<para>Если переадресация включена и всё равно на диске присутствуют
     запорченные блоки, то, по-видимому, остаётся только заменить винчестер.
     Количество испорченных блоков с течением времени имеет тенденцию только
     увеличиваться.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        FreeBSD не распознаёт мой EISA SCSI контроллер Bustek 742a!
      </para></question><answer>

<para>Нижеследующая информация специфична для 742a, но может касаться и
     других адаптеров от Buslogic (Bustek = Buslogic).</para>
  
<para>Существуют две основных ``версии'' адаптеров 742a.  Это аппаратные
     модификации A-G и модификации H и выше.  Буква, обозначающая
     модификацию, расположена после номера сборки на кромке адаптера.  На
     адаптере 742a установлены две микросхемы ПЗУ, одна содержит BIOS, а
     другая - микрокод (так называемое firmware).  Для FreeBSD не имеет
     значения используемая версия BIOS, но имеет значение версия микрокода.
     Buslogic высылает обновления для ПЗУ, если вы позвоните в их отдел
     технической поддержки.  Михросхемы с BIOS и микрокодом поставляются
     соответствующими парами.  В ПЗУ адаптера вы должны иметь самую
     последнюю версии микрокода для вашей аппаратной модификации.</para>
  
<para>Адаптерам модификаций A-G может только подойти BIOS/Firmware версий
     вплоть до 2.41/2.21.  Адаптерам модификаций H и старше подходят самые
     последние версии BIOS/Firmware 4.70/3.37.  Отличие между версиями
     микрокода заключается в том, что версия микрокода 3.37 поддерживает
     механизм ``round robin''.</para>
  
<para>На адаптерах Buslogic проставлен серийный номер.  Если у вас
     адаптер старой модификации, вы можете позвонить в подразделение RMA
     фирмы Buslogic, сказать им серийный номер адаптера и попытаться
     обменять его на более новую модификацию.  Если адаптер достаточно нов,
     то они его поменяют.</para>
  
<para>FreeBSD 2.1 поддерживает микрокод модификаций только 2.21 и выше.
     Если у вас версия микрокода старее, чем эта, то адаптер не будет
     распознаваться как адаптер Buslogic.  Однако он может быть опознан
     как Adaptec 1540.  Ранние версии микрокода от Buslogic содержат режим
     ``эмуляции'' AHA1540.  Однако для EISA-адаптера всё это выглядит как-то
     некрасиво.</para>
  
<para>Если у вас адаптер старой модификации и вы получили микрокод 2.21
     для него, установите перемычку W1 в положение B-C, по умолчанию она
     находится в положении A-B.</para>
  
<para>Адаптеры 742a EISA никогда не имели проблему ``&gt;16MB'', описанную в
     разделе <link linkend="bigram">о машинах с &gt;16 MB ОЗУ</link>.
     Эта проблема возникает со SCSI-адаптерами Vesa-Local Buslogic.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Не распознаётся SCSI-контроллер на HP Netserver!
      </para></question><answer>

<para>В общем-то это известная проблема.  EISA-контроллеры SCSI, 
     расположенные на материнской плате машин HP Netserver, занимают
     EISA-слот номер 11, так что все ``настоящие'' слоты EISA будут ему
     предшествовать.  Так как адресное пространство для слотов EISA выше 10
     пересекается с адресным пространством, предназначенным для PCI, то
     автоконфигуратор FreeBSD в настоящее время не может эту проблему
     нормально обойти.</para>
  
<para>Так что пока лучшее, что вы можете предпринять, это попытаться
     указать, что пересечения диапазонов адресов нет :), установив опцию
     ядра <symbol>EISA_SLOTS</symbol> в значение 12.  Отконфигурируйте и откомпилируйте
     ядро так, как это описано в <ulink URL="../../handbook/kernelconfig.html">разделе Руководства</ulink> о конфигурировании ядра.</para>
  
<para>Конечно, это даст вам типичную ситуации "курица или яйцо"
     при установке системы на такой машине.  Для обхода этой проблемы
     внутри <emphasis>UserConfig</emphasis> есть специальный хак.  Не используя
     ``визуального'' интерфейса, а только интерфейс командной строки,
     просто наберите</para>
  
<para>     
<literallayout>        eisa 12
        quit
      </literallayout>
</para>
  
<para>в приглашении, и проинсталлируйте систему как обычно.  В любом
     случае рекомендуется, что вы отконфигурируете и проинсталлируете
     собственное ядро. Программа <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?dset">dset</ulink> в настоящее
     время может сохранять это значение.</para>
  
<para>Надеемся, что будущие версии будут содержать полное решение этой
     проблемы.</para>
  
<para><emphasis remap=tt>ЗАМЕЧАНИЕ:</emphasis> Вы не сможете использовать режим
     <emphasis remap=bf>dangerously dedicated</emphasis> на машинах HP
     Netserver.  Полное описание причин содержится в 
     <link linkend="dedicate">этом замечании</link>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Что не так с IDE-контроллером CMD640?</para></question><answer>

<para>Этот контроллер не рабочий.  Он не может отрабатывать команды на
     обоих каналах одновременно.</para>
  
<para>Решение этой проблемы существует и включается автоматически, если
     в вашей системе испольщуется этот контроллер.  Подробная информация
     находится на страницах Справочника по дисковому драйверу (man 4 wd).</para>
  
<para>Если вы уже работаете с FreeBSD 2.2.1 или 2.2.2 с IDE-контроллером
     CMD640 и хотите использовать второй канал, постройте новое ядро с
     включенной опцией <emphasis remap=tt>options "CMD640"</emphasis>.  В версии 2.2.6 и выше это
     включено по умолчанию.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Выдаются сообщения типа ``<emphasis remap=tt>ed1: timeout</emphasis>''.</para></question><answer>

<para>Обычно это вызвано конфликтом прерываний (например, двух адаптеров,
     использующих один и тот же IRQ).  FreeBSD до версии 2.0.5R была
     нечувствительна к таким конфликтам, и драйвер сетевого адапетра
     оставался работоспособен даже при конфликтах IRQ.  Однако с версии
     2.0.5R и выше, конфликты IRQ больше не считаются безобидными.  
     Загрузитесь с опцией -c и смените строку, описывающую ed0/de0/...
     на соответствующую вашей системе..</para>
  
<para>Если вы используете разъём BNC сетевого адаптера, таймауты
     устройства могут быть вызваны плохим терминированием.  Чтобы это
     проверить, подключите терминатор к адаптеру (без кабеля) и
     посмотрите, не исчезли ли сообщения об ошибках.</para>
  
<para>Некоторые NE2000-совместимые адаптеры выдают такую ошибку, если нет
     связи по UTP-порту или отключен кабель.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        При монтировании компакт-диска, выдаётся сообщение
        ``Incorrect super block''.
      </para></question><answer>

<para>В параметрах команды <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?mount">mount</ulink> вам нужно
     указать тип устройства, который вы собираетесь смонтировать.  По
     умолчанию <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?mount">mount</ulink> полагает, что монтируемая файловая система имеет тип 
     ``<emphasis remap=tt>ufs</emphasis>''.  При монтировании файловой системы CDROM нужно указать
     опцию ``<option>-t cd9660</option>'' в команде <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?mount">mount</ulink>.  При этом
     конечно предполагается, что CDROM содержит файловую систему стандарта
     ISO 9660, как на большинстве CDROM.  С версии 1.1R FreeBSD автоматически
     распознаёт также расширение Rock Ridge (для длинных имён файлов).</para>
  
<para>Например, если вы хотите смонтировать устройство CDROM
     ``<filename>/dev/cd0c</filename>'', в каталог <filename>/mnt</filename>, вы должны выполнить
     следующую команду:</para>
  
<para>     
<literallayout>        mount -t cd9660 /dev/cd0c /mnt
      </literallayout>
</para>
  
<para>Заметьте, что имя устройства (``<filename>/dev/cd0c</filename>'' в этом примере)
     может быть другим, в зависимости от интерфейса вашего CDROM.
     Отметьте, что опция ``<option>-t cd9660</option>'' всего лишь приводит к вызову
     команды ``<symbol>mount_cd9660</symbol>'', так что пример выше может быть
     укорочен до такой команды:</para>
  
<para>     
<literallayout>        mount_cd9660 /dev/cd0c /mnt
      </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        При монтировании компакт-диска выдаётся сообщение
        ``Device not configured''.
      </para></question><answer>

<para>Обычно это означает, что в приводе CDROM нет компакт-диска либо
     устройство не было обнаружено на этапе загрузки.  Вставьте в
     привод какой-нибудь диск, и/или проверьте его настройку как
     ведущего/ведомого устройства, если оно типа IDE (ATAPI).  Для привода
     CDROM может потребоваться несколько секунд для обнаружения, что был
     вставлен диск, так что будьте терпеливыми.</para>
  
<para>Иногда SCSI CDROM может отсутствовать в системе из-за недостатка
     времени на ответ при сбросе шины.  Если ваш привод CD-ROM является
     SCSI-устройством, пожалуйста, попробуйте добавить такой символ в ваш
     файл конфигурации ядра и перекомпилируйте его.</para>
  
<para>     
<literallayout>        options "SCSI_DELAY=15"
      </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Мой принтер печатает невероятно медленно.  Что тут можно сделать?
      </para></question><answer>

<para>Если принтер подключен к параллельному порту, и единственной
     проблемой является его медлительность, попробуйте установить порт в
     режим ``polled'':</para>
  
<para>     
<literallayout>        lptcontrol -p
      </literallayout>
</para>
  
<para>Утверждается, что некоторые новейшие принтеры от HP не работают
     корректно в режиме прерываний, скорее всего из-за (это ещё не совсем
     точно выянено) проблем с временными задержками.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Программы аварийно завершают работу с ошибкой ``Signal 11''.
      </para></question><answer>

<para>Это может быть вызвано сбоями аппаратного обеспечением (память,
     материнская плата, итд).  Попробуйте запустить на вашем ПК программу
     тестирования памяти.  Имейте в виду, что в случае незначительных
     отклонений в работе возможна ситуация, когда все программы
     тестирования, которые вы будете пробовать, будут утверждать, что с
     ОЗУ всё в порядке, а ошибка будет возникать при определённых условиях 
     (таких, как использование DMA при использовании режима управления
     шиной контроллером SCSI типа Adaptec 1542, интенсивное обращение к
     ОЗУ при компиляции ядра или значительной нагрузке на систему).</para>
  
<para>В FAQ по SIG11 (ссылка дана ниже) сказано, что медленная память
     является самая распространённой причиной возникновения этой проблемы.
     Увеличьте число тактов ожидания в настройке BIOS или установите более
     быструю память.</para>
  
<para>Для меня самой распространённой причиной была сбойная кэш-память
     или кэш-контроллер.  Попробуйте отключить внешний кэш (второго
     уровня) в BIOS и посмотрите, не решит ли это вашу проблему.</para>
  
<para>Подробная информация по этому вопросу содержится в <ulink URL="http://www.bitwizard.nl/sig11/">FAQ по проблеме SIG11</ulink>.</para>
  
</answer></qandaentry>


<qandaentry><question>
<para>При загрузке монитор темнеет и теряет синхронизацию!
  </para></question><answer>

<para>Это известная проблема с видеоадаптерами ATI Mach 64.  Она вызвана тем,
  что этот адаптер использует адрес <emphasis remap=tt>2e8</emphasis>, как и
  четвёртый последовательный порт.  Из-за ошибки (или особенности?) в драйвере
  <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sio">sio.c</ulink> он
  обращается к порту, даже если если он не существует, и
  <emphasis remap=bf>даже</emphasis> если вы отключите sio3 (четвёртый порт),
  который, как правило, использует этот адрес ввода/вывода.</para>
 
<para>Пока это не исправлено, используйте следующий метод:</para>
  
<para>
  <orderedlist>
    <listitem>
      <para>В приглашенни загрузчика наберите <option>-c</option>.  (Это
        переведёт ядро в режим конфигурации).</para>
    </listitem>

    <listitem>
      <para>Отключите устройства <emphasis remap=tt>sio0</emphasis>,
        <emphasis remap=tt>sio1</emphasis>, <emphasis
        remap=tt>sio2</emphasis> и <emphasis remap=tt>sio3</emphasis>
        (все).  После этого драйвер sio не будет активизироваться и проблем
        не будет.</para>
    </listitem>

    <listitem>
      <para>Для продолжения загрузки наберите exit.</para>
    </listitem>
  </orderedlist>
</para>
 
<para>Если вам нужно использовать последовательные порты, вм должны построить
  новое ядро со следующей модификацией: в файле
  <filename>/usr/src/sys/i386/isa/sio.c</filename> найдите строчку, содержащую
  число <literal>0x2e8</literal> и удалите её вместе с предшествующий запятой
  (оставив следующую).  После этого следуйте обычным указаниям по построению
  ядра.</para>
 
<para>Даже после этих изменений вы можете обнаружить, что X Window работает
  ненормально.  Если это произошло, удостоверьтесь, что вы используете
  XFree86 версии не ниже 3.3.3.  Этот и последующие релизы имеют встроенную
  поддержку адаптеров Mach64 и даже отдельный X-сервер для таких
  адаптеров.</para>

</answer></qandaentry>


<qandaentry><question id="reallybigram">
<para>У меня 128 МБ ОЗУ, но система используется только 64.
  </para></question><answer>

<para>Так как для определения объёма памяти FreeBSD использует информацию
     BIOS, она ограничена 16 битами, используемыми для выражения
     размера ОЗУ в килобайтах (65535 КБ = 64МБ) (или меньше... некоторые
     BIOS ограничивают размеры памяти до 16МБ).  Если у вас больше чем 64МБ
     ОЗУ, FreeBSD будет пытаться обнаружить эту память; однако эта попытка
     может и не удасться).</para>
  
<para>Для решения этой проблемы вам нужно использовать опцию ядра,
     указанную ниже.  Способ выяснения полной информации о памяти из BIOS
     существует, но у нас нет места в загрузочном блоке, чтобы это делать.
     Когда проблема нехватки места в загрузочных блоках будет решена, мы
     будем использовать расширенные функции BIOS для получения полной
     информации о памяти... но пока мы остановились на опции ядра.</para>
  
<para>     <literal>       options "MAXMEM=&lt;n&gt;"
     </literal></para>
  
<para>Здесь <emphasis remap=tt>n</emphasis> - это объём памяти в килобайтах. Для машины со 128 МБ
     ОЗУ вам нужно использовать значение <emphasis remap=tt>131072</emphasis>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        FreeBSD 2.0 аварийно завершает работу с сообщением
        ``kmem_map too small!''
      </para></question><answer>

<para><emphasis remap=tt>Замечание</emphasis> Сообщение может также выглядеть как
     ``mb_map too small!''</para>
  
<para>Такое завершение работы показывает, что системе не хватает
     виртуальной памяти для сетевых буферов (точнее, структур mbuf). Вы
     можете увеличить количество виртуальной памяти для структур mbuf,
     добавив:</para>
  
<para><literal>options "NMBCLUSTERS=&lt;n&gt;"</literal></para>
  
<para>в файл конфигурации ядра, где &lt;n&gt; - это число в пределах
     512-4096, в зависимости от числа TCP-соединений, которое вам нужно
     одновременно обслуживать.  Я рекомендую попробовать значение 2048 -
     это должно избавить вас от аварийных остановов.  Вы можете отслеживать
     количество структур mbuf, выделенных/используемых системой командой
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?netstat">netstat -m</ulink>.  Значение по умолчанию для NMBCLUSTERS равно 
     <emphasis remap=tt>512 + MAXUSERS * 16</emphasis>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Сообщение ``CMAP busy panic'' при перезагрузке с новым ядром.
      </para></question><answer>

<para>Процедура определения устаревших фалов <filename>/var/db/kvm_*.db</filename>
     иногда даёт сбой и использует не те файлы, что может вызвать аварийный
     останов системы.</para>
  
<para>Если это случилось, перезагрузитесь в однопользовательском режиме
     и выполните команду:</para>
  
<para>     
<literallayout>        rm /var/db/kvm_*.db
      </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>ahc0: brkadrint,  Illegal Host Access at seqaddr 0x0</para></question><answer>

<para>Это - результат конфликта со SCSI-адаптером Ultrastor. </para>
  
<para>Во время загрузки войдите в меню конфигурации ядра и выключите
     устройство <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?uha(4)">uha0</ulink>, являющееся источником этой проблемы.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Sendmail говорит, что ``mail loops back to myself''</para></question><answer>

<para>В FAQ по sendmail на это дан такой ответ:-</para>
  
<para>     
<literallayout>        * Выдаются сообщения "Local configuration error", примерно такие:

        553 relay.domain.net config error: mail loops back to myself
        554 &lt;user@domain.net&gt;... Local configuration error

        Как можно решить эту проблему?

        Согласно записям MX, почта для домена (скажем, domain.net) была
        перенаправлена на указанный хост (в нашем случае relay.domain.net),
        но он не распознаётся как domain.net.  Добавьте строку domain.net в
        файл /etc/sendmail.cw (если вы используете FETURE(use_cw_file)) или
        добавьте "Cw domain.net" в /etc/sendmail.cf.
      </literallayout>
</para>
  
<para>Текущая версия <ulink URL="ftp://rtfm.mit.edu/pub/usenet/news.answers/mail/sendmail-faq">FAQ по sendmail</ulink> больше не поставляется вместе с sendmail.
     Однако этот документ регулярно помещается в конференции
     <ulink URL="news:comp.mail.sendmail">comp.mail.sendmail</ulink>,
     <ulink URL="news:comp.mail.misc">comp.mail.misc</ulink>,
     <ulink URL="news:comp.mail.smail">comp.mail.smail</ulink>,
     <ulink URL="news:comp.answers">comp.answers</ulink> и
     <ulink URL="news:news.answers">news.answers</ulink>.
     Вы можете получить копию по электронной почте, послав сообщение,
     содержащее команду "send usenet/news.answers/mail/sendmail-faq" в теле
     письма, в адрес <ulink URL="mailto:mail-server@rtfm.mit.edu">mail-server@rtfm.mit.edu</ulink>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Полноэкранные приложения на удалённой машине ведут себя неправильно!
     </para></question><answer>

<para>На удалённой машине тип терминала может быть устанавлен в значение,
     отличное от типа терминала <emphasis remap=tt>cons25</emphasis>,
     требуемом при использовании консоли FreeBSD.</para>
  
<para>Есть несколько возможных способов решения этой проблемы:</para>
  
<para>
<itemizedlist>

<listitem>
<para>После входа на другую машину установите значение переменной
     окружения TERM равным <emphasis remap=tt>ansi</emphasis> или
     <emphasis remap=tt>sco</emphasis>, если эта машина знает об этих
     типах терминалов.</para>
</listitem>

<listitem>
<para>Используйте эмулятор VT100 типа <ulink
     URL="http://www.FreeBSD.org/cgi/ports.cgi?screen-">screen</ulink> 
     на консоли FreeBSD. <emphasis remap=tt>screen</emphasis> даёт вам
     возможность открывать несколько рабочих сеансов на одном терминале, и она
     имеет ещё ряд полезных особенностей. Каждое окно программы
     <emphasis remap=tt>screen</emphasis> ведёт себя как терминал VT100, так
     что переменная TERM на удалённой машине должна быть установлена в
     значение <emphasis remap=tt>vt100</emphasis>.</para>
</listitem>

<listitem>
<para>Опишите терминал <emphasis remap=tt>cons25</emphasis> в базе данных
     характеристик терминалов на удалённой машине. Способ описания зависит от
     используемой на этой машине операционной системе. Вам может помочь
     чтение руководств по администрированию удалённой системы.</para>
</listitem>

<listitem>
<para>Запустите X-сервер на стороне FreeBSD и войдите на удалённую систему
     с помощью какого-либо эмулятора терминала, работающего в X Window, такого,
     как <emphasis remap=tt>xterm</emphasis> или <emphasis
     remap=tt>rxvt</emphasis>. Переменная окружения TERM на удалённой
     машине должна быть установлена в значение <emphasis
     remap=tt>xterm</emphasis> или <emphasis remap=tt>vt100</emphasis>.</para>
</listitem>

</itemizedlist>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>         Выводятся сообщения "calcru: negative time..."
       </para></question><answer>

<para>Это может быть вызвано различными аппаратными или программными
      проблемами, связанными с прерываниями.  Это может быть связано как
      с ошибками при программировании, так и с природой самих устройств.
      Например, работа с TCP/IP по параллельному порту с использованием
      большого MTU приводит к этой проблеме, также как использование
      графических акселераторов; в последнем случае вы должны проверить
      настройку прерываний на графическом адаптере.</para>
  
<para>Одним из проявлений этой проблемы является прерывание работы
      процессов с диагностическим сообщением "SIGXCPU exceeded cpu time
      limit".</para>
  
<para>Если эта проблема не может быть решена, для FreeBSD 3.0 от 29
      ноября 1998 и выше измените значение системной переменной:</para>
  
<para>
<literallayout>               sysctl -w kern.timecounter.method=1</literallayout>
</para>
  
<para>Это коснётся производительности системы, но принимая во внимание
      источник этой проблемы, это будет незаметно.  Если проблема всё ещё
      даёт знать о себе, оставьте значение этой переменной равным единичке
      и увеличьте значение параметра "NTIMECOUNTER" в файле конфигурации
      вашего ядра.  Если в конце концов вы достигнете значения
      "NTIMECOUNTER=20", то вам эту проблему решить не удастся, прерывания
      дают слишком большую нагрузку на процессор, чтобы обеспечить
      отслеживание времени.</para>
  
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="commercial">
<title>Коммерческие приложения</title>

<para><emphasis remap=bf>ЗАМЕЧАНИЕ</emphasis> Этот раздел выглядит довольно
     заброшенным, однако мы,
     конечно же, надеемся, что производители сделают добавления! :)  Проект
     FreeBSD финансово не заинтересован в успехах никакой из компаний, которые
     здесь упоминаются, хотя приводит их список в интересах общества (в
     предположении, что коммерческий интерес к FreeBSD может положительно
     повлиять на дальнейшее развитие FreeBSD).  Мы просим поставщиков
     коммерческого программного обеспечения присылать нам информацию о
     ваших продуктах для включения в этот список.  Более подробный список
     производителей находится на <ulink 
     URL="../../commercial/commercial.html">странице производителей</ulink>.
     </para>
 

<qandaset><qandaentry><question>
<para>Где можно купить Motif для FreeBSD?</para></question><answer>

<para>Обратитесь в фирму <link linkend="apps2go">Apps2go</link>, предлагающую
  самый дешёвый дистрибутив Motif 2.1.20 для FreeBSD (как для i386, так и для
  Alpha) в формате ELF.<anchor id="apps2go"></para>
 
<para>Существуют два дистрибутива, "для разработчиков" ("development edition")
  и ещё более дешёвая "времени выполнения" ("runtime edition").  В эти
  дистрибутивы включены:

  <itemizedlist>
    <listitem>
      <para>OSF/Motif manager, xmbind, panner, wsm.</para>
    </listitem>

    <listitem>
      <para>Пакет разработчика с uil, mrm, xm, xmcxx, файлами include
        и Imake.</para>
    </listitem>

    <listitem>
      <para>Статические и динамические ELF-библиотеки (для использования
        с FreeBSD 3.0 и выше).</para>
    </listitem>

    <listitem>
      <para>Демонстрационные приложения.</para>
    </listitem>
  </itemizedlist>
</para>
 
<para>При оформлении заказа не забудьте указать, что вам нужна версия Motif
  именно для FreeBSD (не забудьте также указать архитектуру процессора)!
  <emphasis>Apps2go</emphasis> также продаёт версии для NetBSD и OpenBSD.  В
  настоящий момент их можно получить только по FTP.</para>
 
<para>     
<variablelist>
<varlistentry><term>Дополнительная информация</term>
<listitem>
<para><ulink URL="http://www.apps2go.com/">WWW-сервер Apps2go</ulink></para>
  
</listitem>
</varlistentry>

<varlistentry><term>или</term>

<listitem>
<para>электронные адреса отделов <ulink URL="mailto:sales@apps2go.com">продаж</ulink> и <ulink URL="mailto:support@apps2go.com">поддержки</ulink>.</para>
  
</listitem>
</varlistentry>

<varlistentry><term>или</term>

<listitem>
<para>телефоны (817) 431 8775  и +1 817 431-8775
     </para>
  
</listitem>
</varlistentry>
</variablelist>
</para>
  
<para>Обратитесь в фирму <link linkend="metrox">Metro Link</link> для получения
     дистрибутива Motif 2.1 для FreeBSD в форматах ELF или a.out.</para>
  
<para>В этот дистрибутив включены:
     
<itemizedlist>

<listitem>
<para>OSF/Motif manager, xmbind, panner, wsm.</para>
</listitem>

<listitem>
<para>Пакет разработчика с uil, mrm, xm, xmcxx, файлами include
     и Imake.</para>
</listitem>

<listitem>
<para>Статические и динамические библиотеки (укажите ELF для
     использования с FreeBSD 3.0 и выше; или a.out при использовании
     FreeBSD 2.2.8 и ранее).</para>
</listitem>

<listitem>
<para>Демонстрационные приложения.

        </para>
</listitem>

<listitem>
<para>Преформатированные страницы справочника.</para>
</listitem>

</itemizedlist>
</para>
  
<para>При заказе обязательно отметьте, что вам требуется версия Motif
     именно для FreeBSD! <emphasis>Metro Link</emphasis> также предлагает
     версии для Linux. Они доступны на CDROM или для скачивания по FTP.</para>
  
<para>Обратитесь в фирму <link linkend="xig">Xi Graphics</link> за
     дистрибутивом Motif 2.0 для FreeBSD в формате a.out.</para>
  
<para>В этот дистрибутив включены:
     
<itemizedlist>

<listitem>
<para>OSF/Motif manager, xmbind, panner, wsm.</para>
</listitem>

<listitem>
<para>Пакет разработчика с uil, mrm, xm, xmcxx, файлами include
     и Imake.</para>
</listitem>

<listitem>
<para>Статические и динамические библиотеки (для использования с
     FreeBSD 2.2.8 и ранее).</para>
</listitem>

<listitem>
<para>Демонстрационные приложения.</para>
</listitem>

<listitem>
<para>Отформатированные страницы Справочника.</para>
</listitem>

</itemizedlist>
</para>
  
<para>При заказе обязательно укажите, что вам требуется версия Motif именно
     для FreeBSD!  <emphasis>Xi Graphics</emphasis> также предлагает версии
     для BSDI и Linux.  В настоящее время это набор из 4 дискет... в будущем
     это будет стандартный дистрибутив на компакт-диске, как их CDE.</para>
 
</answer></qandaentry>


<qandaentry><question>
<para>Где можно купить CDE для FreeBSD?</para></question><answer>

<para>Фирма <link linkend="xig">Xi Graphics</link> предлагала CDE для FreeBSD,
  но сейчас этот продукт в продаже отсутствует.</para>
 
<para><ulink URL="http://www.kde.org/">KDE</ulink> - это свободно
  распространяемый вариант десктопа для X11, который во многом похож на CDE.
  Вам может также приглянуться <ulink url="http://www.xfce.org/">xfce</ulink>.
  Как KDE, так и xfce могут быть найдены в <ulink
  url="http://www.FreeBSD.org/ports/">коллекции портов</ulink>.</para>

</answer></qandaentry>


<qandaentry><question>
<para>Существуют ли коммерческие высокопроизводительные X-серверы?
     </para></question><answer>

<para>Да, фирмы <ulink URL="http://www.xig.com/">Xi Graphics</ulink> и
     <ulink URL="http://www.metrolink.com/">Metro Link</ulink> предлагают свой
     продукт Accelerated-X для FreeBSD и других систем на базе Intel.</para>
  
<para>Metro Link предлагает высокопроизводительный X-сервер, в котором
     предусмотрена упрощённая процедура конфигурирования с помощью набора
     утилит FreeBSD для работы с пэкэджами, поддержка нескольких
     видеоадаптеров одновременно и он поставляется только в бинарном виде,
     доступном по FTP.  Нельзя не отметить, что Metro Link продаёт всё это
     по очень доступной цене в 39 долларов.<anchor id="metrox"></para>
  
<para>Metro Link продаёт также Motif для FreeBSD в форматах ELF и a.out
     (смотрите выше).</para>
  
<para>     
<variablelist>
<varlistentry><term>Дополнительная информация</term>
<listitem>
<para><ulink URL="http://www.metrolink.com/">WWW-сервер Metro Link</ulink></para>
 
</listitem>
</varlistentry>

<varlistentry><term>или</term>

<listitem>
<para>адреса электронной почты отделов <ulink 
     URL="mailto:sales@metrolink.com">продаж</ulink> и <ulink
     URL="mailto:tech@metrolink.com">поддержки</ulink>.</para>
  
</listitem>
</varlistentry>

<varlistentry><term>или</term>

<listitem>
<para>телефоны (954) 938-0283 и +1 954 938-0283
     </para>
  
</listitem>
</varlistentry>
</variablelist>
</para>
  
<para>Xi Graphics предлагает высокопроизводительный X-сервер, который
     обеспечивает простую конфигурацию, поддержку нескольких видеоадаптеров
     и поставляется только в бинарной форме, в форме стандартного
     дистрибутива на дискетах для FreeBSD и Linux.  Xi Graphics также
     предлагает высокопроизводительный X-сервер с поддержкой компьютеров
     класса laptop.<anchor id="xig"></para>
  
<para>Доступна бесплатная "демонстрационная" версия 5.0.</para>
  
<para>Xi Graphics также предлагает Motif и CDE для FreeBSD (смотрите выше).</para>
  
<para>     
<variablelist>
<varlistentry><term>Дополнительная информация</term>
<listitem>
<para><ulink URL="http://www.xig.com/">Xi Graphics WWW page</ulink></para>
  
</listitem>
</varlistentry>

<varlistentry><term>или</term>

<listitem>
<para><ulink URL="mailto:sales@xig.com">Sales</ulink> или
       <ulink URL="mailto:support@xig.com">Support</ulink> по email.</para>
  
</listitem>
</varlistentry>

<varlistentry><term>или</term>

<listitem>
<para>телефон (800) 946 7433  или +1 303 298-7478.
     </para>
  
</listitem>
</varlistentry>
</variablelist>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Существуют ли СУБД для FreeBSD?</para></question><answer>

<para>Да! Обратитесь к разделу <ulink
     URL="../commercial/software_bycat.html#CATEGORY_DATABASE">Поставщики
     программного обеспечения</ulink> на веб-сервере FreeBSD.</para>

<para>Также посмотрите раздел <ulink URL="../ports/databases.html">
     Базы данных</ulink> коллекции портов.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Можно ли запустить Oracle на FreeBSD?</para></question><answer>

<para>Да. Руководство по настройке Linux-Oracle на FreeBSD находится
       по следующим адресам:</para>
  
<para>       
<itemizedlist>

<listitem>
<para><ulink URL="http://www.scc.nl/~marcel/howto-oracle.html">http://www.scc.nl/~marcel/howto-oracle.html</ulink>

         </para>
</listitem>

<listitem>
<para><ulink URL="http://www.lf.net/lf/pi/oracle/install-linux-oracle-on-freebsd">http://www.lf.net/lf/pi/oracle/install-linux-oracle-on-freebsd</ulink>
       </para>
</listitem>

</itemizedlist>
</para>
  
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="applications">
<title>Прикладные программы</title>


<qandaset><qandaentry><question>
<para>Итак, где находятся все прикладные программы?</para></question><answer>

<para>Пожалуйста, загляните на
     <ulink URL="../../ports/">страницу портов</ulink>, содержащую информацию
     о программных продуктах, перенесённых под FreeBSD.  На данный момент в
     этом списке находится более 1800 приложений и он ежедневно увеличивается,
     так что почаще туда заглядывайте или подпишитесь на <link
     linkend="mailing">список рассылки</link> <emphasis
     remap=tt>freebsd-announce</emphasis>, в котором публикуется информация
     о появлении новых приложений.</para>
  
<para>Большинство портов предназначено для версий 2.2, 3.x и 4.0, и многие из
     них должны нормально работать на системах версий 2.1.x.  При выходе
     нового релиза FreeBSD в него в каталог <filename>ports/</filename>
     включается актуальная на момент выхода коллекция портов.</para>
  
<para>Мы также поддерживаем концепцию ``пакаджа'', являющегося не более
     чем упакованным дистрибутивом в бинарной форме с некоторыми
     встроенными возможностями по его настройке во время установки. Пакадж
     может быть легко проинсталлирован и деинсталлирован снова без углубления
     в детали того, какие файлы должны быть инсталлированы.</para>
  
<para>Используйте меню установки пакаджей в <filename>/stand/sysinstall</filename>
     (в пункте меню post-configuration) или запускайте
     <command>pkg_add(1)</command> с указанием конкретных файлов с пакаджами,
     которые вы хотите проинсталлировать.  Файлы с пакаджами, как правило,
     идентифицируются по их постфиксу <filename>.tgz</filename>, а для тех, кто имеет
     дистрибутив системы на компакт-диске, предназначен каталог
     <filename>packages/All</filename>, содержащий все эти файлы.  Они также могут быть
     получены по сети для разных версий FreeBSD со следующих серверов:</para>
  
<para>     
  <variablelist>
    <varlistentry><term>для 2.2.8-RELEASE/2.2.8-STABLE</term>
      <listitem>
        <para><ulink URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-2.2.8/">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-2.2.8/</ulink></para>
      </listitem>
    </varlistentry>

    <varlistentry><term>для 3.X-RELEASE/3.X-STABLE</term>
      <listitem>
        <para><ulink URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-3-stable/">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-3-stable/</ulink></para>
      </listitem>
    </varlistentry>

    <varlistentry><term>для 4.0-CURRENT</term>
      <listitem>
        <para><ulink URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-3.0/">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/i386/packages-3.0/</ulink></para>
      </listitem>
    </varlistentry>
  </variablelist>
</para>
 
<para>или с ближайшего к вам зеркального сервера.</para>
  
<para>Имейте в виду, что не все порты могут быть доступны в виде
     пакаджей, так как постоянно идёт добавление новых. Неплохо время от
     времени проверять, какие пакаджи доступны на основном сервере
     <ulink URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/">ftp.FreeBSD.org</ulink>.</para>
  
</answer></qandaentry>


<qandaentry><question>
<para>Почему возможности <command>/bin/sh</command> так малы?  Почему бы
  во FreeBSD не использовать <command>bash</command> или какой-либо другой
  командный процессор?</para></question><answer>

<para>Потому что в стандарте POSIX сказано, что все командные процессоры должны
  вести себя так же, как shell.</para>

<para>Более подробный ответ заключается в следующем: многим требуется, чтобы
  разрабатываемые скрипты для командного процессора были переносимы между
  многими системами.  Именно поэтому в POSIX очень подробно описан командный
  процессор и набор утилит.  Большинство скриптов пишутся на языке процессора
  Bourne shell, к тому же некоторые важные программные вызовы
  (&man.make.1;, &man.system.3;, &man.popen.3; и их аналоги на языках скриптов
  высокого уровня, таких как Perl или Tcl) предполагают для интерпретации
  команд использование именно Bourne shell.  Так как Bourne shell используется
  столь широко и часто, то очень важно, чтобы он стартовал очень быстро, его
  поведение было строго регламентировано и при этом потребности в оперативной
  памяти были малы.</para>

<para>В имеющейся реализации мы приложили максимум усилий для воплощения в
  жизнь всех этих требований одновременно.  Для того, чтобы сохранить
  <command>/bin/sh</command> небольшим по размеру, мы не включили многие из
  обычных возможностей, которые имеются в других командных процессорах.
  Однако в Коллекцию Портов включены командные процессоры, обладающие гораздо
  большими возможностями, такие, как bash, scsh, tcsh и zsh. (Вы можете
  сами сравнить использование памяти всеми этими оболочками, посмотрев в
  колонки <quote>VSZ</quote> и <quote>RSS</quote> вывода команды <command>ps
  -u</command>).</para>

</answer></qandaentry>


<qandaentry><question>
<para>Где найти библиотеку libc.so.3.0?</para></question><answer>

<para>Похоже, что вы пытаетесь запустить пакадж для 2.2/3.x/4.0 на 
     системе версии 2.1.x. Пожалуйста, прочтите предыдущий раздел и
     найдите подходящий для вашей системы порт или пакадж.</para>
  
</answer></qandaentry>

<qandaentry><question
id="emul">
<para>        ghostscript выдаёт массу сообщений на моём 386/486SX.
      </para></question><answer>

<para>У вас нет сопроцессора, верно?  Вам нужно добавить в ядро другой
     емулятор сопроцессора; это делается добавлением следующей строки в файл
     конфигурации ядра и последующей его перекомпиляцией.</para>
  
<para>     
<literallayout>        options GPL_MATH_EMULATE
      </literallayout>
</para>
  
<para><emphasis remap=bf>ЗАМЕЧАНИЕ</emphasis> Если вы поступаете таким образом, вам нужно будет
     убрать опцию <symbol>MATH_EMULATE</symbol>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        При запуске приложения SCO/iBCS2, он прерывается на <emphasis remap=tt>socksys</emphasis>.
      </para></question><answer>

<para>Прежде всего вам нужно отредактировать файл <filename>/etc/sysconfig</filename>
     (или <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?rc.conf(5)">/etc/rc.conf</ulink>), изменив в последнем разделе значение следующей
     переменной на <acronym>YES</acronym>:</para>
  
<para>     
<literallayout>        # Set to YES if you want ibcs2 (SCO) emulation loaded at startup
        ibcs2=NO
      </literallayout>
</para>
  
<para>Это включит загрузку модуля поддержки <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ibcs2">ibcs2</ulink>
     на этапе загрузки системы.</para>
  
<para>Затем вам нужно изменить каталог /compat/ibcs2/dev так, чтобы он
     выглядел следующим образом:</para>
  
<para>     
<literallayout>lrwxr-xr-x  1 root  wheel         9 Oct 15 22:20 X0R@ -&gt; /dev/null
lrwxr-xr-x  1 root  wheel         7 Oct 15 22:20 nfsd@ -&gt; socksys
-rw-rw-r--  1 root  wheel         0 Oct 28 12:02 null
lrwxr-xr-x  1 root  wheel         9 Oct 15 22:20 socksys@ -&gt; /dev/null
crw-rw-rw-  1 root  wheel   41,   1 Oct 15 22:14 spx
      </literallayout>
</para>
 
<para>Работа с socksys была значительно упрощена по ставнению с более ранними
  версиями.  Socksys должен указывать на <ulink 
  URL="http://www.FreeBSD.org/cgi/man.cgi?null(4)">/dev/null</ulink>, чтобы
  обмануть open &amp; close.  Код, имеющийся в -CURRENT, возьмёт на себя всё
  остальное.  Если вам нужен драйвер <emphasis remap=tt>spx</emphasis> для
  подключения X по локальному сокету, определите переменную
  <symbol>SPX_HACK</symbol> при компиляции системы.</para>
 
</answer></qandaentry>


<qandaentry><question>
<para>        Как настроить INN (Internet News) на моей машине?
      </para></question><answer>

<para>После инсталяции пакаджа или порта для inn, для начала загляните
     на <ulink URL="http://www.cis.ohio-state.edu/~barr/INN.html">страничку Дэйва Бэрра</ulink> (Dave Barr), посвящённую INN, где вы
     найдёте соответствующий FAQ.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>       Какую версию Microsoft FrontPage я должен иметь?
     </para></question><answer>

<para>Используй порт, дурачок! Среди портов имеется Apache с поддержкой
     FrontPage.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Поддерживает ли FreeBSD среду Java?</para></question><answer>

<para>Да. Посетите страницу <ulink 
     URL="http://www.FreeBSD.org/java/">http://www.FreeBSD.org/java/</ulink>.
     </para>

</answer></qandaentry>

<qandaentry><question>
<para>Почему некоторый порт не компилируется на моей машине
  с 3.X-STABLE?</para></question><answer>

<para>Если вы используете FreeBSD версии, значительно отстающей от -CURRENT или
     -STABLE, вам нужен пакет обновления, который можно найти по адресу <ulink
     URL="http://www.FreeBSD.org/ports/">http://www.FreeBSD.org/ports/</ulink>.
     Если вы отслеживаете все изменения, то, скорее всего, кто-то внёс
     изменения в порт, так что он работает в -CURRENT, но не работает в
     -STABLE.  Так как предполагается, что коллекция портов должна работать
     как в ветке -CURRENT, так и в ветви -STABLE, то, пожалуйста, пошлите
     сообщение об этой ошибке с помощью команды <command>send-pr(1)</command>.
     </para>

</answer></qandaentry>

<qandaentry><question>
      <para>Где найти ld.so?</para></question><answer>

<para>Если вам необходимо запустить некоторые приложения в формате aout
     типа Netscape Navigator на Elf-машине, такой как 3.1-R и выше,
     то для этого требуется /usr/libexec/ld.so и некоторые библиотеки в
     формате aout. Они включены в дистрибутив как compat22.
     Запустите /stand/sysinstall или install.sh в каталоге compat22, чтобы
     установить этот компонент.  Прочтите также документы ERRATA от
     3.1-R и 3.2-R.</para>

</answer></qandaentry></qandaset>
</chapter>


<chapter
id="kernelconfig">
<title>Конфигурирование ядра</title>


<qandaset><qandaentry><question
id="make-kernel">
<para>        Я хочу изменить настройки ядра. Это сложно?
      </para></question><answer>

<para>Вовсе нет! Обратитесь к <ulink URL="../../handbook/kernelconfig.html">соответствующему разделу</ulink> Руководства, который посвящён этому
     вопросу.</para>
  
<para><emphasis remap=bf>ЗАМЕЧАНИЕ:</emphasis> Рекомендуем сохранить копию вашего ядра в
     файл <filename>kernel.YYMMDD</filename> после того, как вы получите рабочую версию,
     для того, чтобы в следующий раз, если вы испортите что-либо в
     вашем конфигурационном файле, вы смогли загрузить это ядро, вместо того,
     чтобы начинать снова с <filename>kernel.GENERIC</filename>.  Это, в частности, имеет
     смысл, если вы производите загрузку системы с контроллера, который
     не поддерживается в стандартном ядре GENERIC (из моего личного
     опыта).</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Я не могу скомпилировать ядро. Отсутствует
        <symbol>_hw_float</symbol>.
      </para></question><answer>

<para>Позвольте мне угадать.  Вы, наверное, удалили
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?npx(4)">npx0</ulink> из
     вашего файла конфигурации ядра, потому что у вас нет сопроцессора, да?
     А вот и неправильно! :-)   Строка <emphasis remap=tt>npx0</emphasis>
     <emphasis remap=bf>ОБЯЗАТЕЛЬНА</emphasis>.  Даже если у вас нет
     математического сопроцессора, вы <emphasis remap=bf>должны</emphasis>
     включить поддержку <emphasis remap=tt>npx0</emphasis>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Конфликты прерываний при включении поддержки многопортовыx
        коммуникационных адаптеров.
      </para></question><answer>

<para><emphasis remap=bf>Q.</emphasis> Когда я компилирую ядро с поддержкой многопортовых
     коммуникационных адаптеров, сообщается, что только первый порт будет
     тестироваться, а все остальные пропускаются из-за конфликтов
     прерываний.  Как это исправить?</para>
  
<para><emphasis remap=bf>A.</emphasis> Проблема состоит в том, что во FreeBSD встроен код,
     предохраняющий ядро от аппаратных и программных конфликтов. Вам нужно
     убрать указания IRQ на всех портах, кроме одного. Например:</para>
  
<para>     
<literallayout>        #
        # Высокоскоростной коммуникационный адаптер - 16550 UARTS
        #
        device sio2 at isa? port 0x2a0 tty irq 5 flags 0x501 vector siointr
        device sio3 at isa? port 0x2a8 tty flags 0x501 vector siointr
        device sio4 at isa? port 0x2b0 tty flags 0x501 vector siointr
        device sio5 at isa? port 0x2b8 tty flags 0x501 vector siointr
      </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Как включить поддержку накопителей QIC-40/80?</para></question><answer>

<para>Раскомментируйте следующую строку в файле конфигурации стандартного
     ядра (или добавьте ее в конфигурационный файл вашего ядра), добавьте
     ``<literal>flags 0x1</literal>'' к строке, содержащей
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?fdc(4)">fdc</ulink> и перекомпилируйте ядро.</para>
  
<para>     
<literallayout>controller  fdc0  at isa? port "IO_FD1" bio irq 6 drq 2 flags 0x1 vector fdintr
disk        fd0   at fdc0 drive 0                       ^^^^^^^^^
disk        fd1   at fdc0 drive 1
#tape       ft0   at fdc0 drive 2
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      </literallayout>
</para>
  
<para>Затем создайте устройство с именем <filename>/dev/ft0</filename>, перейдя в
     каталог <filename>/dev</filename> и запустив команду</para>
  
<para>     
<literallayout>        sh ./MAKEDEV ft0
      </literallayout>
</para>

<para>для первого устройства, <emphasis remap=tt>ft1</emphasis> для второго и
     так далее.</para>
 
<para>У вас появится устройство с именем <filename>/dev/ft0</filename>, на
     которое вы можете производить запись с помощью специальной программы
     управления, называющейся ``<emphasis remap=tt>ft</emphasis>'' - за
     дополнительной информацией обратитесь к странице справочника по
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ft">ft</ulink>.</para>
 
<para>Версии операционной системы, предшествующие <option>-CURRENT</option>,
     имеют огрехи, связанные с качеством носителя. Если у вас появились
     проблема, когда <emphasis remap=tt>ft</emphasis> прокручивает ленту
     туда-сюда на одном и том же месте, попробуйте взять последнюю версию
     программы <emphasis remap=tt>ft</emphasis> с
     <filename>/usr/src/sbin/ft</filename> из <option>-CURRENT</option> и
     попробовать её.</para>
 
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="admin">
<title>Системное администрирование</title>


<qandaset><qandaentry><question>
<para>Где расположены файлы конфигурации системы?</para></question><answer>

<para>Для FreeBSD версий от 2.0.5R до 2.2.1R основным конфигурационным файлом
     является <filename>/etc/sysconfig</filename>.  Все параметры указываются
     здесь, а остальные конфигурационные файлы, такие, как
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?rc">/etc/rc</ulink>
     и <filename>/etc/netstart</filename> просто его используют.</para>
 
<para>Посмотрите файл <filename>/etc/sysconfig</filename> и измените значения
     переменных на соответствующие вашей системе.  В файле содержатся
     комментарии, описывающие смысл этих переменных и способ их задания.</para>
 
<para>В системах выше 2.2.1 и в 3.0 файл <filename>/etc/sysconfig</filename>
     сменил название на говорящее само за себя <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?rc.conf(5)">rc.conf</ulink>,
     синтаксис описания переменных был несколько улучшен.
     <filename>/etc/netstart</filename> тоже был переименован в
     <filename>/etc/rc.network</filename>, так что все конфигурационные файлы
     теперь можно перенести одной командой <command><ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?cp">cp</ulink>
     /usr/src/etc/rc* /etc</command>.</para>
 
<para><filename>/etc/rc.local</filename> как обычно, можно использовать для
     запуска дополнительных местных служб типа <ulink
     URL="http://www.FreeBSD.org/cgi/ports.cgi?^inn">INN</ulink> или
     для настройки дополнительных параметров.</para>
 
<para>Файл <filename>/etc/rc.serial</filename> предназначен для инициализации
     коммуникационных адаптеров (например, установки характеристик
     работы последовательных портов итд).</para>
 
<para>Файл <filename>/etc/rc.i386</filename> предназначен для настройки специфичных
     для архитектуры Intel параметров, таких, как эмуляция iBCS2 или
     характеристик системной консоли ПК.</para>
 
<para>Начиная с версии 2.1.0R, вы можете иметь "местные" файлы
     автозапуска в каталоге, указанном в файле <filename>/etc/sysconfig</filename>
     (или <filename>/etc/rc.conf</filename>):</para>
  
<para>     
<literallayout>        # Location of local startup files.
        local_startup=/usr/local/etc/rc.local.d
      </literallayout>
</para>
 
<para>Каждый файл, оканчивающийся на <filename>.sh</filename>, будет запущен на выполнение
     в алфавитном порядке.</para>
 
<para>Если вам нужно добиться определённого порядка выполнения не
     меняя имён файлов, можно использовать схему, в которой для
     упорядочения используются цифры, предшествующие имени файла.</para>
  
<para>     
<literallayout>        10news.sh
        15httpd.sh
        20ssh.sh
      </literallayout>
</para>
 
<para>Это может выглядеть безобразно (как SysV :-)), но это
     простой и понятный метод для добавления дополнительных служб без
     шаманства с редактированием <filename>/etc/rc.local</filename>.  Многие
     порты/пакаджи предполагают, что каталог
     <filename>/usr/local/etc/rc.d</filename> предназначен для размещения
     запускаемых при загрузке системы скриптов.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как проще всего добавить пользователя?</para></question><answer>

<para>Используйте команду <ulink 
     URL="http://www.FreeBSD.org/cgi/man.cgi?adduser">adduser</ulink>.
     Для выполнения более сложных операций обратитесь к команде <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?pw">pw</ulink>.</para>
 
<para>Чтобы удалить пользователя, используйте команду <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?rmuser">rmuser</ulink>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как добавить в систему новый диск?</para></question><answer>

<para>Обратитесь к Руководству по форматированию дисков на сервере <ulink
  URL="../../tutorials/formatting-media/">www.FreeBSD.org</ulink>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как использовать устройство для чтения сменных дисков?
     </para></question><answer>

<para>Каким бы ни было это устройство, типа ZIP, EZ (или даже обычным
     дисководом, если вы хотите его использовать) или каким-то
     другим, как только оно будет установлено и распознано
     системой, и вы вставите в него картридж/дискету/что-там-ещё, всё
     будет выглядеть примерно одинаково.</para>
 
<para><anchor id="disklabel">(этот раздел опирается на <ulink URL="http://www.vmunix.com/mark/FreeBSD/ZIP-FAQ.html">FAQ по устройствам ZIP</ulink> Марка Мэйо (Mark Mayo))</para>
 
<para>Если это устройство ZIP или обычный дисковод, и у вас уже есть
     файловая система DOS на дискетах, то вы можете нспользовать команду
     типа:</para>
  
<para>     
  <literallayout>
    mount -t msdos /dev/fd0c /floppy
  </literallayout>
</para>
 
<para>для обычных дискет, или</para>
 
<para>     
  <literallayout>
    mount -t msdos /dev/da2s4 /zip
  </literallayout>
</para>
 
<para>для дискет ZIP со стандартной конфигурацией.</para>
 
<para>Для других дисков посмотрите их параметры с помощью
     <emphasis remap=tt>fdisk</emphasis> или <filename>/stand/sysinstall</filename>.</para>
 
<para>Остальные примеры даны для привода ZIP на da2, третьем диске SCSI.</para>
 
<para>Если это дискета или сменный диск, который будет использоваться для
     обмена информацией с другими людьми, хорошой идеей будет помещение туда
     файловой системы BSD.  Вы получите поддержку длинных имён файлов,
     увеличение производительности по крайней мере в два раза и гораздо
     большую надёжность.  Первым делом вам снова будет нужно выполнить
     разбиение диска на разделы/файловые системы.  Вы можете воспользоваться
     утилитой <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?fdisk">fdisk</ulink> либо
     <filename>/stand/sysinstall</filename>, а в случае небольшого диска, на
     котором не нужно располагать несколько операционных систем, просто сотрите
     таблицу разделов (слайсов) FAT и используйте разбиение на разделы
     BSD.</para>
 
<para>     
  <literallayout>
    dd if=/dev/zero of=/dev/rda2 count=2
    disklabel -Brw da2 auto
  </literallayout>
</para>
 
<para>Вы можете использовать disklabel или
     <filename>/stand/sysinstall</filename> для создания нескольких разделов
     BSD.  Вам наверняка придётся это сделать, если вы станете добавлять место
     для раздела подкачки на винчестере, хотя это не имеет отношения к
     устройствам типа ZIP.</para>
 
<para>В итоге вы должны создать новую файловую систему (в этом примере
     она занимает весь наш диск ZIP):</para>
 
<para>     
  <literallayout>
    newfs /dev/rda2c
  </literallayout>
</para>
 
<para>и смонтировать её:</para>
  
<para>     
  <literallayout>
    mount /dev/da2c /zip
  </literallayout>
</para>
 
<para>Хорошо ещё добавить строку типа следующей в файл
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?fstab">/etc/fstab</ulink>,
     чтобы в будущем можно было просто давать команду "mount /zip":</para>
 
<para>     
  <literallayout>
    /dev/da2c /zip ffs rw,noauto 0 0
  </literallayout>
</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как смонтировать вторичный раздел DOS?</para></question><answer>

<para>Вторичные разделы DOS находятся после ВСЕХ первичных разделов.
     Например, если раздел "E" является вторым разделом DOS на
     втором диске SCSI, вам нужно создать специальные файлы для пятого
     "слайса" в каталоге /dev, затем смонтировать /dev/da1s5:</para>
  
<para>     
  <literallayout>
    # cd /dev
    # ./MAKEDEV da1s5
    # mount -t msdos /dev/da1s5 /dos/e
  </literallayout>
</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Можно ли смонтировать другие файловые системы?
     </para></question><answer>

<para>Компакт-диски с файловой системой UFS от 
     <emphasis remap=bf>Digital UNIX</emphasis> могут быть замонтированы без
     всяких проблем.  Монтирование файловых систем Digital UNIX или других
     систем, поддерживающих UFS, может быть более сложным, в зависимости от
     особенностей разбиения диска конкретной операционной системой.</para>
 
<para><emphasis remap=bf> Linux</emphasis>: Версии 2.2 и выше имеют поддержку разделов <emphasis remap=bf>ext2fs</emphasis>.
     За дополнительной информацией обратитесь к страницам справочника по
     команде <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?mount_ext2fs">mount_ext2fs</ulink>.</para>
 
<para><emphasis remap=bf> NT</emphasis>: Существует драйвер, позволяющий под
  FreeBSD иметь доступ к NTFS в режиме "только для чтения".  Посмотрите учебник
  от Марка Овенса (Mark Ovens) по адресу <ulink
  URL="http://ukug.uk.freebsd.org/~mark/ntfs_install.html">http://ukug.uk.freebsd.org/~mark/ntfs_install.html</ulink>.
</para>
  
<para>Нас интересует любая дополнительная информация по этому вопросу.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Как можно использовать загрузчик NT для запуска FreeBSD?
  </para></question><answer>

<para>Эта процедура выглядит по разному для версий FreeBSD 2.2.x и 3.x (с
  трёхступенчатым процессом загрузки системы).</para>

<para>Идея заключается в копировании первого сектора корневого раздела
     FreeBSD в файл, находящийся в разделе DOS/NT.  Предположим, что
     вы назвали этот файл <filename>c:\bootsect.bsd</filename> (по аналогии с
     <filename>c:\bootsect.dos</filename>), после чего можете отредактировать
     файл <filename>c:\boot.ini</filename>, чтобы он выглядел примерно так:</para>
  
<para>     
<literallayout>        [boot loader]
        timeout=30
        default=multi(0)disk(0)rdisk(0)partition(1)\WINDOWS
        [operating systems]
        multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows NT"
        C:\BOOTSECT.BSD="FreeBSD"
        C:\="DOS"
      </literallayout>
</para>

<para>Для систем 2.2.x предполагается, что DOS, NT, FreeBSD или другая
  операционная система были установлены в их соответствующие разделы fdisk на
  <emphasis remap=bf>одном и том же</emphasis> диске.  В моём случае DOS &amp;
  NT находятся на первом разделе fdisk, а FreeBSD на втором.  Я также
  установил FreeBSD для загрузки с её раздела, а
  <emphasis remap=bf>не</emphasis> из MBR.</para>
 
<para>Смонтируйте дискету в формате DOS (если вы используете NTFS) или
     раздел FAT, скажем, в каталог <filename>/mnt</filename>.</para>
 
<para>     
  <literallayout>
    dd if=/dev/rda0a of=/mnt/bootsect.bsd bs=512 count=1
  </literallayout>
</para>
 
<para>Перезапустите DOS или NT.  Пользователи NTFS должны скопировать файл
     <filename>bootsect.bsd</filename> и/или <filename>bootsect.lnx</filename>
     с дискеты на диск <emphasis remap=tt>C:\</emphasis>.  Измените атрибуты
     (права) на файл <filename>boot.ini</filename> следующим образом:</para>
 
<para>
  <literallayout>
    attrib -s -r c:\boot.ini
  </literallayout>
</para>
 
<para>Отредактируйте этот файл, добавив соответствующие строки из
     примерного <filename>boot.ini</filename> выше, и восстановите атрибуты:</para>
 
<para>     
  <literallayout>
    attrib +s +r c:\boot.ini
  </literallayout>
</para>
 
<para>Если FreeBSD загружается из MBR, восстановите его командой DOS
  ``<command>fdisk</command>'' после того, как переконфигурировали их для
  загрузки с их ``родных'' разделов.</para>

<para>Для систем FreeBSD 3.x эта процедура выглядит несколько проще.</para>

<para>Если FreeBSD установлена на тот же самый диск, что и загрузочный раздел
  NT, скопируйте <filename>/boot/boot1</filename> в
  <filename>c:\bootsect.bsd</filename> или, если FreeBSD установлена на
  другой диск, скопируйте <filename>/boot/boot0</filename> в
  <filename>c:\bootsect.bsd</filename>.  Затем измените
  <filename>c:\bootsect.ini</filename> так, как это описано выше.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Как загрузить FreeBSD и Linux с помощью LILO?
      </para></question><answer>

<para>Если у вас установлены FreeBSD и Linux на одном и том же диске,
     следуйте указаниям по установке LILO о загрузке не-Linux операционных
     систем.  Они сводятся к следующему:</para>
 
<para>Загрузите Linux, и добавьте следующие строки в файл
  <filename>/etc/lilo.conf</filename>:
     
  <programlisting>
    other=/dev/hda2
    table=/dev/hda
    label=FreeBSD
  </programlisting>

  (здесь вы предполагаем, что слайс с FreeBSD известен Linux как
  <filename>/dev/hda2</filename>; измените эту строку в соответствии с вашей 
  конфигурацией).  Затем достаточно будет запустить <command>lilo</command>,
  войдя в систему как администратор.</para>
 
<para>Если FreeBSD располагается на другом диске, вам нужно добавить строчку
     ``<literal>loader=/boot/chain.b</literal>'' в конфигурационный файл
     LILO.  Например:

     <programlisting>
       other=/dev/dab4
       table=/dev/dab
       loader=/boot/chain.b
       label=FreeBSD
     </programlisting>
</para>
 
<para>В некоторых случаях для успешной загрузки со второго диска вам
     может потребоваться указать номер диска BIOS загрузчику FreeBSD.
     Например, если диск SCSI с FreeBSD определяется BIOS как диск 1,
     в приглашении загрузчика FreeBSD нужно указать:

     <literallayout>
       Boot: 1:da(0,a)/kernel
     </literallayout>
</para>
 
<para>Во FreeBSD 2.2.5 и выше вы можете настроить <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?boot(8)">boot(8)</ulink>
     на автоматическое принятие таких параметров во время загрузки.</para>
 
<para>В документе <ulink URL="http://sunsite.unc.edu/LDP/HOWTO/mini/Linux+FreeBSD.html">Linux+FreeBSD mini-HOWTO</ulink> содержится много информации,
     касающейся взаимодействия FreeBSD и Linux.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Как загрузить FreeBSD и Linux с помощью BootEasy?
      </para></question><answer>

<para>Установите LILO в начало загрузочного раздела Linux, а не в
     Master Boot Record.  После этого можно запустить LILO из BootEasy.</para>
  

  
<para>Это рекомендуется сделать в любом случае при одновременном
     использовании Windows-95 и Linux, чтобы упростить восстановление
     работоспособности Linux после переинсталляции Windows95 (которая
     является Недоброжелательной Операционной Системой и не терпит
     присутствия других операционных систем в Master Boot Record).</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Не угрожает ли режим ``dangerously dedicated'' моему здоровью?
      </para></question><answer>

<para><anchor id="dedicate">В процессе установки вы можете выбрать два
     различных метода разбиения вашего диска.  По умолчанию это делается
     в режиме совместимости с другими операционными системами на этой же
     машине с использованием записей в таблице разделов fdisk (то, что
     называется ``слайсом'' во FreeBSD), со слайсом (разделом), выделенным
     FreeBSD.  Опционально, вы можете выбрать установку менеджера
     загрузки для переключения между операционными системами.  Либо вы
     можете выделить диск полностью под FreeBSD, не заботясь о совместимости
     с другими операционными системами.</para>
  

  
<para>Почему же этот режим называется ``dangerous''? Дело в том, что
     диск в этом режиме не будет содержать того, что обычные утилиты для
     ПК распознают как таблицу разделов.  В зависимости от того, насколько
     хорошо они написаны, они могут сообщить вам об этом, как только
     обнаружат такой диск, или, что гораздо хуже, могут запортить загрузчик
     BSD, даже не спрашивая и не сообщая об этом.  К тому же известно, что
     разметка диска в режиме ``dangerously dedicated'' вводит в заблуждение
     BIOS многих производителей, включая AWARD (которые используются в
     компьютерах HP Netserver, Micronics и многих других) и Symbios/NCR
     (производителя популярных SCSI-контроллеров серии 53C8xx).  И это не
     полный список, есть ещё другие производители.  Симптомами подобных
     проблем является сообщение "read error", выводимое загрузчиком FreeBSD,
     когда он не может найти сам себя, а также зависания системы при загрузке.</para>
  

  
<para>Тогда зачем вообще нужен этот режим?  Он экономит всего лишь
     несколько килобайт дискового пространства и может вызвать серьёзные 
     проблемы при новой инсталляции.  Причиной появления этого режима
     является желание избежать появления одной из самых распространённых
     проблем, с которой сталкиваются новички - соответствие параметров
     BIOS и реальных параметров диска.</para>
 
<para>``Параметры'' диска являются устаревшей концепцией, но она лежит
     в основе работы BIOS с диском.  Когда программа установки FreeBSD
     создаёт слайсы, она записывает их расположение в соответствии с тем,
     как с ними будет работать BIOS.  Если это делается неправильно, вы не
     сможете выполнить загрузку системы.</para>
 
<para>Режим ``dangerously dedicated'' пытается обойти это, упрощая решение
     данной проблемы.  Иногда он делает это правильно.  Однако это значит,
     что его нужно использовать только как последнюю альтернативу - есть
     способы получше, решающие проблему в 99 случаях из 100.</para>
 
<para>Итак, как избежать использования режима ``DD'' во время установки?
     Сначала запишите параметры диска, которые сообщает BIOS.  Вы можете
     выяснить это, заставив ядро вывести эти параметры при загрузке, указав
     ``-v'' в приглашении ``boot:'', или используя ``boot -v'' в загрузчике.
     Перед тем, как запустится программа установки, ядро выведет параметры,
     используемые BIOS.  Не волнуйтесь - подождите запуска программы
     установки, а затем воспользуйтесь скроллингом, чтобы посмотреть
     значения этих параметров.  Как правило, BIOS нумерует диски в том же
     порядке, что и FreeBSD, сначала IDE, затем SCSI.</para>
 
<para>Когда вы разбиваете диск на слайсы, проверьте, что параметры диска,
     выводимые в окне программы FDISK, корректны (то есть они соответствуют
     параметрам BIOS); если это не так, воспользуйтесь командой ``g'', чтобы
     их исправить.  Вы можете это сделать, если на диске нет абсолютно
     ничего или если этот диск был перенесён с другой системы.  Заметьте,
     что это касается только загрузочного диска; FreeBSD прекрасно разберётся 
     с остальными дисками, которые могут у вас быть.</para>
  

  
<para>Как только вы добились соответствия параметров диска в BIOS и
     FreeBSD, скорее всего, проблем у вас больше не будет, и использовать
     режим ``DD'' не потребуется.  Если, однако, страшной сообщение
     ``read error'' продолжает появляться при загрузке, самое время
     перекреститься и попробовать этот режим - вам больше нечего терять.</para>
  

  
<para>Чтобы вернуть диск из режима ``dangerously dedicated'' к
     нормальному режиму использования, есть два способа. Первый заключается
     в том, что вы записываете достаточное количество байтов NULL поверх
     MBR, чтобы любой инсталлятор думал, что это чистый диск. Это можно
     сделать, например, командой</para>
  
<para>     
  <literallayout>
    dd if=/dev/zero of=/dev/rda0 count=15
  </literallayout>
</para>
 
<para>Другой способ - недокументированной командой DOS</para>
 
<para>     
<literallayout>        fdisk /mbr
      </literallayout>
</para>
 
<para>проинсталлировать новую MBR, удалив загрузчик BSD.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Как добавить дополнительную виртуальную память?
      </para></question><answer>

<para>Наилучший способ - увеличить размер раздела подкачки, может быть,
     добавив для этого ещё один диск.  Общим правилом является выбор
     размера виртуальной памяти, в два раза превышающий объём физической
     памяти.  Однако, если у вас очень мало физической памяти, этот объём
     гораздо больше.  Хорошей практикой является задание достаточного
     объёма виртуальной памяти в ожидании добавления физической памяти,
     чтобы потом не испытывать трудностей.</para>
  

  
<para>Перенос виртуальной памяти на отдельный диск увеличивает
     быстродействие системы по сравнению с добавлением виртуальной памяти
     на том же диске.  Например, компиляция исходных текстов происходит
     быстрее, если они находятся не на том же диске, что и раздел подкачки.
     Особенно это заметно для дисков SCSI.</para>
  

  
<para>Если у вас имеется несколько дисков, размещение раздела подкачки
     на каждом из них, даже на рабочем диске, обычно бывает полезно.
     Как правило, каждый быстрый диск в вашей системе должен иметь раздел
     подкачки.  FreeBSD поддерживает по умолчанию до 4 устройств подкачки с
     чередованием.  При задании нескольких разделов подкачки вам захочется
     сделать их одинакового размера, однако иногда первичный раздел подкачки
     делается несколько больше для того, чтобы он мог поместить аварийный
     образ ядра.  Размер вашего первичного раздела подкачки должен по крайней 
     мере быть равным объёму физической памяти, чтобы поместить аварийный
     образ ядра.</para>
  

  
<para>Диски IDE не позволяют реализовать одновременный доступ к обоим
     дискам по одному каналу (FreeBSD не поддерживает режим 4, так что
     весь ввод/вывод для дисков IDE ``программируется'').  Однако я всё
     равно советую перенести раздел подкачки на отдельный диск.  Диски
     достаточно дешёвы, и экономить тут не на чем.</para>
  

  
<para>Использование NFS для размещения раздела подкачки рекомендуется
     только в случае, если у вас нет локального диска.  Подкачка поверх
     NFS медленна и неэффективна в релизах FreeBSD до 4.x, хотя достаточно
     быстра в релизах 4.0 и выше.  Кроме того, её скорость будет ограничена
     реальной пропускной способностью сети и это даст дополнительную нагрузку
     на NFS-сервер.</para>
  

  
<para>Вот пример vn-файла подкачки размером 64Мб (<filename>/usr/swap0</filename>,
     хотя, конечно, вы можете выбрать любое другое имя.</para>
  

  
<para>Удостоверьтесь, что ядро откомпилировано со строкой</para>
  
<para>     
<literallayout>        pseudo-device   vn 1   #Vnode driver (turns a file into a device)
      </literallayout>
</para>
  

  
<para>в конфигурационном файле.  Ядро GENERIC её содержит</para>
  
<para>     
<orderedlist>

<listitem>
<para>создайте vn-устройство

       
<literallayout>          cd /dev
          sh ./MAKEDEV vn0
        </literallayout>


       </para>
</listitem>

<listitem>
<para>создайте файл подкачки (<filename>/usr/swap0</filename>)

       
<literallayout>          dd if=/dev/zero of=/usr/swap0 bs=1024k count=64
        </literallayout>


       </para>
</listitem>

<listitem>
<para>Установите корректные права на файл (<filename>/usr/swap0</filename>)

       
<literallayout>          chmod 0600 /usr/swap0
        </literallayout>

 
       </para>
</listitem>

<listitem>
<para>Включите использование файла подкачки в <filename>/etc/rc.conf</filename>

       
<literallayout>          swapfile="/usr/swap0"   # Set to name of swapfile if aux swapfile desired.
        </literallayout>


       </para>
</listitem>

<listitem>
<para>перезагрузите машину
     </para>
</listitem>

</orderedlist>
</para>
  

  
<para>Чтобы включить использование файла подкачки немедленно, наберите</para>
  
<para>     
<literallayout>        vnconfig -ce /dev/vn0c /usr/swap0 swap
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>У меня проблемы с установкой принтера.</para></question><answer>

<para>Обратитесь к соответствующему <ulink URL="../../handbook/printing.html">разделу</ulink> Руководства, посвящённому печати.  В нём описаны
     решения большинства ваших проблем.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Раскладка клавиатуры неверна.</para></question><answer>

<para>Программа kbdcontrol имеет параметр, задающий файл раскладки.
     Файлы раскладок находятся в каталоге
     <filename>/usr/share/syscons/keymaps</filename>.  Выберите соответствующий вашей
     системе и загрузите его.</para>
  
<para>     
<literallayout>        kbdcontrol -l uk.iso
      </literallayout>
</para>
 
<para>Программа <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?kbdcontrol">kbdcontrol</ulink>
     предполагает использование каталога
     <filename>/usr/share/syscons/keymaps</filename>
     и расширения <filename>.kbd</filename>.</para>
 
<para>Это может быть настроено в файле <filename>/etc/sysconfig</filename> (или
     <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?rc.conf(5)">rc.conf</ulink>).
     Обратитесь к соответствующим комментариям в этом файле.</para>
 
<para>В системах 2.0.5R и выше, всё, относящееся к знакогенератору,
     раскладке клавиатуры, находится в каталоге
     <filename>/usr/share/examples/syscons</filename>.</para>
  

  
<para>На данный момент поддерживаются следующие раскладки:</para>
  
<para>     
<itemizedlist>

<listitem>
<para>Belgian ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>Brazilian 275 keyboard Codepage 850 
       </para>
</listitem>

<listitem>
<para>Brazilian 275 keyboard ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>Danish Codepage 865 
       </para>
</listitem>

<listitem>
<para>Danish ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>French ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>German Codepage 850 
       </para>
</listitem>

<listitem>
<para>German ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>Italian ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>Japanese 106 
       </para>
</listitem>

<listitem>
<para>Japanese 106x 
       </para>
</listitem>

<listitem>
<para>Latin American 
       </para>
</listitem>

<listitem>
<para>Norwegian ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>Polish ISO-8859-2 (programmer's) 
       </para>
</listitem>

<listitem>
<para>Russian Codepage 866 (alternative) 
       </para>
</listitem>

<listitem>
<para>Russian koi8-r (shift) 
       </para>
</listitem>

<listitem>
<para>Russian koi8-r 
       </para>
</listitem>

<listitem>
<para>Spanish ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>Swedish Codepage 850 
       </para>
</listitem>

<listitem>
<para>Swedish ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>Swiss-German ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>United Kingdom Codepage 850 
       </para>
</listitem>

<listitem>
<para>United Kingdom ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>United States of America ISO-8859-1 
       </para>
</listitem>

<listitem>
<para>United States of America dvorak 
       </para>
</listitem>

<listitem>
<para>United States of America dvorakx 
     </para>
</listitem>

</itemizedlist>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Не получается заставить работать дисковые квоты.</para></question><answer>

<para>     
<orderedlist>

<listitem>
<para>Не включайте квотирование на '/',

       </para>
</listitem>

<listitem>
<para>Помещайте файл с квотами в ту файловую систему, которую
       он обслуживает, то есть:

       
<literallayout>          ФС      ФАЙЛ КВОТ
          /usr    /usr/admin/quotas
          /home   /home/admin/quotas
          ...
        </literallayout>

     </para>
</listitem>

</orderedlist>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Что не так с устройством ccd?</para></question><answer>

<para>Симптом выглядит так:</para>
  
<para>     
<literallayout>        # ccdconfig -C
        ccdconfig: ioctl (CCDIOCSET): /dev/ccd0c: Inappropriate file type or format
        #
      </literallayout>
</para>
  

  
<para>Это сообщение обычно выдаётся, когда вы пытаетесь объединить разделы
     'c', по умолчанию имеющие тип 'unused'.  Драйвер ccd требует, чтобы
     используемые разделы имели тип FS_BSDFFS.  Отредактируйте метки тех
     дисков, которые вы хотите использовать, сменив типы разделов на 
     '4.2BSD'.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Почему невозможно отредактировать метку диска ccd?
      </para></question><answer>

<para>Симптом выглядит так:</para>
  
<para>     
<literallayout>        # disklabel ccd0
        (здесь выводится информация о диске, пробуем отредактировать метку)
        # disklabel -e ccd0
        (редактирование, сохранение, выход)
        disklabel: ioctl DIOCWDINFO: No disk label on disk;
        use "disklabel -r" to install initial label
        #
      </literallayout>
</para>
  

  
<para>Это происходит из-за того, что метка диска, возвращаемая ccd, на
     самом деле 'ненастоящая', не соответствующая реально располагающейся
     на диске.  Вы можете решить эту проблему, явно записав эту метку
     обратно следующим образом:</para>
  
<para>     
<literallayout>        # disklabel ccd0 &gt; /tmp/disklabel.tmp
        # disklabel -Rr ccd0 /tmp/disklabel.tmp
        # disklabel -e ccd0
        (теперь это будет работать)
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Поддерживает ли FreeBSD вызовы IPC из System V?</para></question><answer>

<para>Да, FreeBSD поддерживает IPC из System V, а именно совместно
     используемую память, сообщения и семафоры.  Чтобы они работали, вам
     нужно добавить следующие строки в файл конфигурации ядра.</para>
  
<para>     
<literallayout>        options    SYSVSHM
        options    "SHMMAXPGS=64"   # 256Kb of sharable memory
        options    SYSVSEM          # enable for semaphores
        options    SYSVMSG          # enable for messaging
      </literallayout>
</para>
  

  
<para>Перекомпилируйте и проинсталлируйте ядро.</para>
  

  
<para><emphasis remap=bf>ЗАМЕЧАНИЕ:</emphasis> Вам может потребоваться увеличить значение
     константы SHMMAXGS на что-то большее, типа 4096 (16М!), если вы
     собираетесь ипользовать GIMP.  256Кб достаточно для работы X11R6.</para>
 
</answer></qandaentry>


<qandaentry><question id="uucpmail">
<para>Как настроить sendmail для доставки почты по UUCP?
  </para></question><answer>

<para>Конфигурация sendmail, поставляемая с FreeBSD, предназначена для
  сайтов, которые имеют непосредственный выход в Internet.  Сайты,
  которым требуется обмениваться почтой по UUCP, должны использовать
  другой конфигурационный файл.</para>
 
<para>Ковыряние в файле <filename>/etc/sendmail.cf</filename> вручную - это
  занятие для пуристов (и мазохистов).  Восьмая версия sendmail поставляется
  с новой системой генерации конфигурационных файлов с использованием
  препроцессора <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?m4">m4</ulink>,
  в которой ручная настройка перенесена на более высокий уровень абстракции.
  Используйте конфигурационные файлы в каталоге
  <filename>/usr/src/usr.sbin/sendmail/cf</filename>
  </para>
 
<para>Если вы не собираетесь инсталлировать все исходные тексты системы,
  специально для вас конфигурационные файлы sendmail выделены в отдельный
  дистрибутив.  Если вы имеете смонтированный компакт-диск, выполните
  такую команду:</para>

  <screen>
    &prompt.root; <userinput>cd /cdrom/src</userinput>
    &prompt.root; <userinput>cat scontrib.?? | tar xzf - -C /usr/src contrib/sendmail</userinput>
  </screen>
 
<para>Не волнуйтесь, эти файлы занимают всего лишь несколько сотен килобайт.
  Файл <filename>README</filename> в каталоге <filename>cf</filename> может
  быть использован как начальное введение в конфигурацию m4.</para>
 
<para>Для доставки почты по UUCP лучше всего использовать
  <literal>mailertable</literal>.  В этом файле содержится база данных,
  используемая sendmail при маршрутизации почты.</para>
 
<para>Первым делом создайте ваш файл <filename>.mc</filename>.  Для таких файлов
  предназначен каталог <filename>/usr/src/usr.sbin/sendmail/cf/cf</filename>.
  Посмотрите в нём, там есть уже несколько примеров.  Положим, что вы назвали
  ваш файл <filename>foo.mc</filename>, всё, что вам нужно для преобразования
  его в нормальный <filename>sendmail.cf</filename>, это:</para>
 
  <screen>
    &prompt.root; <userinput>cd /usr/src/usr.sbin/sendmail/cf/cf</userinput>
    &prompt.root; <userinput>make foo.cf</userinput>
    &prompt.root; <userinput>cp foo.cf /etc/sendmail.cf</userinput>
  </screen>
 
<para>Типичный файл <filename>.mc</filename> выглядит примерно так:</para>
  
<programlisting>
  include(`../m4/cf.m4')
  VERSIONID(`<replaceable>Your version number</replaceable>')
  OSTYPE(bsd4.4)

  FEATURE(nodns)
  FEATURE(nocanonify)
  FEATURE(mailertable)

  define(`UUCP_RELAY', <replaceable>your.uucp.relay</replaceable>)
  define(`UUCP_MAX_SIZE', 200000)

  MAILER(local)
  MAILER(smtp)
  MAILER(uucp)

  Cw    <replaceable>your.alias.host.name</replaceable>
  Cw    <replaceable>youruucpnodename.UUCP</replaceable>
</programlisting>
 
<para>Параметры <literal>nodns</literal> и <literal>nocanonify</literal>
  подавляют использование DNS в процессе доставки.  Строка
  <symbol>UUCP_RELAY</symbol> может понадобиться только в очень странных
  случаях, не спрашивайте о них.  Просто поместите здесь имя хоста Internet,
  который может обрабатывать адреса с псевдо-доменами .UUCP; в
  большинстве случаев достаточно поставить сюда имя почтового шлюза
  вашего провайдера.</para>
 
<para>Как только вы сгенерируете конфигурационный файл, вам понадобится
  <filename>/etc/mailertable</filename>.  Типичный пример такого файла:</para>
  
<programlisting>
  #
  # makemap hash /etc/mailertable.db &lt; /etc/mailertable
  #
  horus.interface-business.de   uucp-dom:horus
  .interface-business.de        uucp-dom:if-bus
  interface-business.de         uucp-dom:if-bus
  .heep.sax.de                  smtp8:%1
  horus.UUCP                    uucp-dom:horus
  if-bus.UUCP                   uucp-dom:if-bus
  .                             uucp-dom:
</programlisting>
 
<para>Как видите, это часть реально существующего файла.  Первые три строки
  описывают особые случаи, когда почта, направленная на некоторые домены, будет
  посылаться не по стандартному маршруту, а на некоторую близлежащую
  UUCP-систему для `сокращения' маршрута доставки.  Следующая строка описывает,
  что почта на локальный домен в сети Ethernet может быть доставлена по SMTP.
  В конце файла описаны близлежащие системы UUCP в псевдо-домене .UUCP, что
  позволит выполнять правильную доставку почты на адреса
  ``uucp-система!получатель''.  В последней строке всегда присутствует одна
  точка, соответствующая всем остальным доменам, с доставкой по UUCP на
  ближнюю систему UUCP, который является универсальный почтовым шлюзом во весь
  остальной мир.  Все имена узлов после <literal>uucp-dom:</literal>
  должны быть реально существующими узлами UUCP, что можно проверить
  командой <literal>uuname</literal>.</para>
 
<para>Как напоминание о том, что этот файл должен быть преобразован в формат
  базы данных DBM перед использованием, командная строка, выполняющая это
  действие, помещена как комментарий в начало файла.  При изменении
  mailertable всегда нужно выполнять эту команду.</para>

<para>Последняя подсказка: если вы не уверены в правильности настройки
  маршрутизаци почты, используйте sendmail с опцией <option>-bt</option>.  Она
  переводит sendmail в режим <emphasis>проверки адресов</emphasis>; введите
  ``0 '', а затем адрес, который вы хотите протестировать на правильность
  маршрутизации.  В последней строке будут указаны используемый
  почтовый агент, хост получателя, с которым будет работать этот агент,
  и (может быть преобразованный) адрес.  Выход их этого режима
  осуществляется по Control-D.</para>
 
<screen>
  &prompt.user; <userinput>sendmail -bt</userinput>
  ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
  Enter &lt;ruleset&gt; &lt;address&gt;
  <prompt>&gt;</prompt> <userinput>0 foo@interface-business.de</userinput>
  rewrite: ruleset  0   input: foo @ interface-business . de
  ...
  rewrite: ruleset  0 returns: $# uucp-dom $@ if-bus $: foo \
  &lt; @ interface-business . de &gt;
  <prompt>&gt;</prompt> <userinput>^D</userinput>
</screen>
 
</answer></qandaentry>


<qandaentry><question
id="ispmail">
<para>        Как настроить почту при коммутируемом соединении с Internet?
        
      </para></question><answer>

<para>Если вам выделен статический IP-адрес, вам не нужно ничего
     менять.  Установите имя вашего хоста в соответствии с выделенным
     именем DNS, а sendmail сделаёт всё остальное.</para>
  

  
<para>Если ваш IP-адрес выделяется динамически при коммутируемом 
     соединении по <emphasis remap=bf>ppp</emphasis> с Internet, может быть, вам выделен почтовый
     ящик на сервере провайдера.  Предположим, что домен вашего
     провайдера называется <filename>myISP.com</filename>, а ваше имя пользователя
     <emphasis remap=tt>user</emphasis>.  Также положим, что вы назвали вашу машину <filename>bsd.home</filename> и
     что ваш провайдер сказал, что вы должнв использовать
     <filename>relay.myISP.com</filename> как почтовый шлюз.</para>
  

  
<para>Чтобы забирать почту из вашего почтового ящика, вам нужно установить
     соответствующий агент.  Хорошим агентов является <emphasis remap=bf>fetchmail</emphasis>, так
     как он поддерживает много различных протоколов.  Обычно провайдеры
     предлагают POP3.  Если вы используете user-ppp, вы можете
     автоматически забирать вашу почту при установлении соединения с
     Internet, добавив такую строку в <filename>/etc/ppp/ppp.linkup</filename>:</para>
  
<para>     
<literallayout>        MYADDR:
          !bg su user -c fetchmail
      </literallayout>
</para>
  

  
<para>Если вы используете <emphasis remap=tt>sendmail</emphasis> (как показано ниже) для 
     доставки почты для внешних пользователей, поместите команду</para>
  
<para>     
<literallayout>	  !bg su user -c "sendmail -q"
      </literallayout>
</para>
  
<para>     после вышеуказанной строки.  Это заставит sendmail обработать вашу
     очередь почтовых сообщений, как только будет осуществлено подключение
     к сети.</para>
  

  
<para>Предположим, что вы имеет учётную запись для <emphasis remap=tt>user</emphasis> на машине
     <filename>bsd.home</filename>.  В домашнем каталоге пользователя <emphasis remap=tt>user</emphasis> на машине
     <filename>bsd.home</filename> создайте такой файл <filename>.fetchmailrc</filename>:</para>
  
<para>     
<literallayout>        poll myISP.com protocol pop3 fetchall pass MySecret;
      </literallayout>
</para>
  

  
<para>Излишним будет напоминание о том, что этот файл никому не должен
     быть доступен для чтения, кроме пользователя <emphasis remap=tt>user</emphasis>, потому что
     он содержит пароль <emphasis remap=tt>MySecret</emphasis> доступа к почтовому ящику.</para>
  

  
<para>Чтобы посылать почту с правильным заголовком <emphasis remap=bf>from:</emphasis>, вы должны
     указать программе sendmail использовать <email>user@myISP.com</email>, а не
     <email>user@bsd.home</email>.  Вам может понадобиться настроить sendmail для
     посылки всей почты через <filename>relay.myISP.com</filename>, чтобы убыстрить её
     передачу.</para>
  

  
<para>Следующий файл <filename>.mc</filename> должен подойти:</para>
  
<para>     
<literallayout>        VERSIONID(`bsd.home.mc version 1.0')
        OSTYPE(bsd4.4)dnl
        FEATURE(nouucp)dnl
        MAILER(local)dnl
        MAILER(smtp)dnl
        Cwlocalhost
        Cwbsd.home
        MASQUERADE_AS(`myISP.com')dnl
        FEATURE(allmasquerade)dnl
        FEATURE(masquerade_envelope)dnl
        FEATURE(nocanonify)dnl
        FEATURE(nodns)dnl
        define(SMART_HOST, `relay.myISP.com')
        Dmbsd.home
        define(`confDOMAIN_NAME',`bsd.home')dnl
        define(`confDELIVERY_MODE',`deferred')dnl
      </literallayout>
</para>
  

  
<para>В предыдущем разделе описано, как преобразовать файл <filename>.mc</filename> в
     <filename>sendmail.cf</filename>.  И не забудьте перезапустить sendmail после
     обновления sendmail.cf.</para>
  
<para>  </para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Ой! Я забыл пароль администратора!</para></question><answer>

<para>Без паники!  Просто перезапустите систему, наберите <userinput>boot
   -s</userinput> в приглашении Boot: (или просто <userinput>-s</userinput> в
   случае использования версий FreeBSD до 3.2) для входа в однопользовательский
   режим.  На вопрос об используемой оболочке нажмите ENTER.  На приглашение
   &prompt.root; введите <command>mount -u /</command>, чтобы перемонтировать
   корневую файловую систему в режиме чтения/записи, после чего выполните
   команду <command>mount -a</command> для монтирования всех файловых систем.
   Запустите команду <emphasis remap=tt>passwd root</emphasis>, чтобы сменить
   пароль администратора и затем <emphasis remap=tt>exit</emphasis> для
   продолжения процесса загрузки.
</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как запретить перезагрузку по клавишам Control-Alt-Delete?
  </para></question><answer>

  <para>Если вы используете драйвер консоли syscons (который является
    стандартным) во FreeBSD 2.2.7-RELEASE и выше, перегенерируйте и установите
    новое ядро со строчкой</para>

  <programlisting>options SC_DISABLE_REBOOT</programlisting>

  <para>в конфигурационном файле.  Если же вы используете драйвер консоли PCVT
    во FreeBSD 2.2.5-RELEASE и выше, то укажите следующую строку в
    конфигурационном файле:</para>

  <programlisting>options PCVT_CTRL_ALT_DEL</programlisting>

  <para>Для более старых версий FreeBSD отредактируйте используемый для консоли
    файл раскладки клавиатуры, заменив ключевые слова <literal>boot</literal>
    на <literal>nop</literal>.  Используемая по умолчанию раскладка находится
    в файле <filename>/usr/share/syscons/keymaps/us.iso.kbd</filename>. Вам
    может потребоваться явно указать в файле <filename>/etc/rc.conf</filename>
    загрузку этой раскладки, чтобы она действительно поменялась.  Конечно,
    если в вашей стране вы используете другую раскладку, вы должны 
    отредактировать именно её.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Как преобразовать текстовые файлы DOS в формат UNIX?</para></question><answer>

<para>Используйте такую команду:</para>
  
<para>
<literallayout>perl -i.bak -npe 's/\r\n/\n/g' file ...</literallayout>
</para>
  

  
<para>где file - это имя файла(ов) для преобразования.  Преобразование
    делается в том же самом файле, оригинальные файлы сохраняются с
    расширением .bak.</para>
  
<para>Это преобразование также можно выполнить с помощью команды
    <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tr">tr</ulink>:</para>
  
<para>
<literallayout>tr -d '\r' &lt; dos-text-file &gt; unix-file</literallayout>
</para>
 
<para>где dos-text-file - это имя файла, содержащего текст DOS, а
    в файл unix-file будет помещён уже преобразованный текст.  Этот способ
    может работать гораздо быстрее, чем при использовании perl.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как прервать процесс по имени?</para></question><answer>

<para>Используйте команду <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?killall">killall</ulink>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Почему su выдаёт сообщение о том, что я не вхожу в root ACL?
      </para></question><answer>

<para>Эта ошибка выдаётся распределённой системой аутентификации Kerberos.
     Эта ошибка не фатальна, однако это раздражает.  Вы можете запустит su
     с ключом -K либо деинсталлировать Kerberos, как описано в следующем
     разделе.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Как деинсталлировать Kerberos?</para></question><answer>

<para>Чтобы убрать Kerberos из системы, переинсталлируйте дистрибутив bin
     того релиза, который у вас запущен.  Если у вас есть CDROM, вы можете
     смонтировать компакт-диск (положим, в каталог /cdrom) и выполнить
     команду</para>
  
<para>     
<literallayout>        cd /cdrom/bin
        ./install.sh
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Как добавить в систему дополнительные псевдотерминалы?</para></question><answer>

<para>Если у вас много пользователей, работающий в сеансах telnet, ssh, X
     или в screen, вам можете столкнуться с проблемой нехватки
     псевдотерминалов.  Их количество можно уыеличить следующим образом:</para>
  
<para>     
<orderedlist>

<listitem>
<para>Откомпилируйте и инсталлируйте новое ядро, в конфигурационный
     файл которого входит строка

     
<literallayout>        pseudo-device pty 256
      </literallayout>


     </para>
</listitem>

<listitem>
<para>Выполните команду

     
<literallayout>        # cd /dev
        # ./MAKEDEV pty{1,2,3,4,5,6,7}
      </literallayout>


     </para>

<para>для создания 256 дополнительных файлов устройств для новых терминалов.</para>


</listitem>

<listitem>
<para>Отредактируйте файл <filename>/etc/ttys</filename>, добавив по строке для
     каждого из 256 терминалов.  Они должны соответствовать формату
     существующих строк, то есть должны выглядеть как

     
<literallayout>        ttyqc none network
      </literallayout>


     </para>

<para>Порядок назначения букв при записи в виде регулярного выражения имеет
     вид <emphasis remap=tt>tty[pqrsPQRS][0-9a-v]</emphasis>.</para>


</listitem>

<listitem>
<para>Теперь осталось только перезапустить систему с новым ядром.
     </para>
</listitem>

</orderedlist>
</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Не получается создать устройство snd0!</para></question><answer>

<para>Команда для создания устройств для звуковых адаптеров выглядит
     следующим образом:

     <literallayout>
       # cd /dev
       # sh MAKEDEV snd0
     </literallayout>
</para>

<para>Однако при этом устройства с именем <filename>/dev/snd0</filename> не
     создаётся.  Вместо этого создаются устройства <emphasis
     remap=tt>mixer0</emphasis>, <emphasis remap=tt>audio0</emphasis>,
     <emphasis remap=tt>dsp0</emphasis> и другие.  Запуск этой команды
     необходим для добавления звуковых устройств.</para>

</answer></qandaentry>

<qandaentry><question>
<para>Как перечитать содержимое /etc/rc.conf и перестартовать /etc/rc
     без перезагрузки системы?</para></question><answer>

<para>Перейдите в однопользовательский режим, а затем возвратитесь обратно
     в многопользовательский.</para>
  
<para>На консоли выполните следующее:</para>
  
<para>     
  <literallayout>
    # shutdown now
      (Замечание: без -r или -h)

    # return
    # exit
  </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Что означает термин sandbox (песочница)?</para></question><answer>

<para>&quot;Sandbox&quot; - это термин, используемый при обеспечении
     безопасности.  Он имеет два значения:</para>

<para>
<itemizedlist>

<listitem>
<para>Процесс, помещённый внутрь некоторых виртуальных стен, которые
     предназначены для того, чтобы предотвратить взлом всей системы в
     результате взлома этого конкретного процесса.</para>

<para>Говорится, что процесс может "играть" в границах этих стен. Что бы
     этот процесс ни делал, он эти стены разрушить не может, поэтому вам
     не нужен его особый аудит, чтобы с уверенностью сказать, насколько
     его работа безопасна для системы.</para>

<para>Стеной может служить, например, идентификатор пользователя. Вот
     определение, даваемое на страницах справочника по named и часто
     используемое при обсуждении безопасности систем.</para>

<para>Рассмотрим, например, службу 'ntalk' (смотрите /etc/inetd.conf).
     Раньше эта служба запускалась с идентификатором пользователя root,
     а сейчас - tty.  Пользователь tty - это та песочница, которая
     осложняет взлом системы через ntalk посредством использования этого
     идентификатора пользователя.</para>
</listitem>
 
<listitem>

<para>Процесс, помещённый внутрь симулируемой машины. Это даёт больший
     уровень безопасности.  В общем это означает, что некто, взломавший
     процесс, может думать. что может сломать и систему в целом, однако
     фактически может сломать только симулятор этой машины и не может
     модифицировать никаких реальных данных.</para>
        
<para>Самым распространённым способом достигнуть такого результата
     является построение имитирующего окружения в каталоге и затем запуск
     процессов и этом каталоге через chroot (т.е. задав этот каталог в
     качестве "/" для этого процесса, а не реальный "/" всей системы).</para>

<para>Другим часто используемым методом является монтирование низлежащей
     файловой системы в режиме "только для чтения" и затем создание
     уровня фаловой системы поверх неё, что даёт процессу видимость
     доступа по записи на ту файловую систему.  Процесс будет полагать,
     что может записывать в те файлы, но это будет единственный процесс,
     который увидит результат &dash; другие процессы не будут этого делать,
     ни в коем случае.</para>

<para>Попытка сделать такой тип песочницы настолько прозрачна, что
     пользователь (или взломщик) даже не поймёт, что он в ней находится.</para>
</listitem>

</itemizedlist>
</para>

<para>В UNIX реализованы два типа "песочниц". Один на уровне процесса, и один
     на уровне идентификаторов пользователей.</para>

<para>Каждый процесс в UNIX полностью защищён от других процессов. Никакой
     процесс не может модифицировать адресное пространство другого процесса.
     Это отличается от Windows, где процесс может легко записать что-либо в
     адресное пространство другого процесса, что приводит к аварийным
     ситуациям.</para>

<para>В UNIX каждым процессом владеет некоторый идентификатор пользователя.
     Если этот пользователь не root, от ограждает процесс от других, 
     владельцами которых являются другие пользователи.  Этот идентификатор
     используется также для защиты данных на диске.</para>

</answer></qandaentry>

      <qandaentry>
	<question>
	  <para>Как разрешить обычным пользователям монтировать дискеты и
            другие сменные носители?</para>
	</question>

	<answer>
	  <para>Обычным пользователям можно позволить монтировать устройства.
            Вот как это делается:</para>

	  <procedure>
	    <step>
	      <para>Работая пользователем <username>root</username>, назначьте
		соответствующие права на устройства с поблочным доступом,
		которые соответствуют сменным носителям.</para>

	      <para>Например, чтобы позволить пользователям монтировать дискеты
		в первом дисководе, воспользуйтесь командой</para>
		
	      <screen>&prompt.root; <userinput>chmod 777 /dev/fd0</userinput></screen>
	    </step>

	    <step>
	      <para>Как пользователь <username>root</username>, установите
		значение sysctl-переменной <varname>vfs.usermount</varname> в
		значение <literal>1</literal>.</para>

	      <screen>&prompt.root; <userinput>sysctl -w vfs.usermount=1</userinput></screen>
	    </step>
	  </procedure>

	  <para>Теперь пользователи смогут смонтировать 
            <filename>/dev/fd0</filename> в свои каталоги:</para>

	  <screen>&prompt.user; <userinput> mkdir ~/my-mount-point</userinput>
&prompt.user; <userinput> mount -t msdos /dev/fd0 ~/my-mount-point</userinput></screen>

	  <para>Размонтировка устройства осуществляется просто:</para>

	  <screen>&prompt.user; <userinput>umount <filename>~/my-mount-point</filename></userinput></screen>

	  <para>
            Использование <varname>vfs.usermount</varname>, однако, имеет
            некоторые негативные стороны, связанные с вопросами безопасности.
            Более правильным способом работы с носителями в формате MSDOS
            является использование <ulink
	    url="http://www.FreeBSD.org/cgi/ports.cgi?query=%5Emtools-&amp;stype=name">mtools</ulink>
            из коллекции портов.
          </para>
	</answer>
      </qandaentry>

</qandaset>
</chapter>
 

<chapter
id="x">
<title>X Window System и виртуальные консоли</title>


<qandaset><qandaentry><question>
<para>Я хочу запустить X, как это сделать?</para></question><answer>

<para>Самый простой способ - это указать во время инсталляции, что вы
     хотите использовать X.</para>
  

  
<para>Затем следуйте указаниям в документации по утилите <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?manpath=xfree86&amp;query=xf86config">xf86config</ulink>, которая предназначена для конфигурирования работы
     XFree86(tm) с вашим графическим адаптером/мышью/итд.</para>
  

  
<para>Вы можете также попробовать сервер Xaccel. За подробной информацией
     обратитесь к разделу, посвящённому продуктам фирм <link
     linkend="xig">Xi Graphics</link> и <link
     linkend="metrox">Metro Link</link>.</para>
 
</answer></qandaentry>


<qandaentry>
  <question id="x-and-moused">
    <para>Почему моя мышь не работает с X?</para>
  </question>

  <answer>
    <para>Если вы используете syscons (стандартный драйвер консоли), то можете
      настроить поддержку указателя мыши во всех виртуальных экранах.  Во
      избежание конфликтов с X, драйвер syscons поддерживает виртуальное
      устройство ``<filename>/dev/sysmouse</filename>''.  Все события,
      получаемые от реальной мыши, пишутся в устройство sysmouse через moused.
      Если вы хотите использовать вашу мышь на одной или нескольких виртуальных
      консолях, <emphasis remap=bf>продолжая</emphasis> использовать X,
      посмотрите <xref linkend="moused" remap="другой раздел"> и настройте
      moused.</para>

    <para>Затем отредактируйте <filename>/etc/XF86Config</filename> так, чтобы
      в нём были следующие строки.</para>
 
    <programlisting>
      Section        Pointer
      Protocol       "SysMouse"
      Device         "/dev/sysmouse"
      .....
    </programlisting>

    <para>Пример выше предназначен для XFree86 3.3.2 и выше.  Для более ранних
      версий параметр <emphasis>Protocol</emphasis> должен быть
      <emphasis>MouseSystems</emphasis>.</para>
 
    <para>Некоторые предпочитают использовать в X устройство
      ``<filename>/dev/mouse</filename>''.  Чтобы оно работало, файл устройства
      должен являться ссылкой на <ulink
      URL="http://www.FreeBSD.org/cgi/man.cgi?sysmouse">
      /dev/sysmouse</ulink>:</para>
 
    <para>     
      <literallayout>
        # cd /dev
        # rm -f mouse
        # ln -s sysmouse mouse
      </literallayout>
    </para>
 
  </answer>
</qandaentry>


<qandaentry>
  <question id="x-and-wheel">
    <para>У моей мыши есть колёсико.  Могу ли я его использовать при работе
      в X?</para>
  </question>

  <answer>
    <para>Да.  Но вам нужно будет настроить программы-клиенты для X.
      Посмотрите <ulink
      URL="http://www.inria.fr/koala/colas/mouse-wheel-scroll/">страничку
      Коласа Наабу (Colas Nahaboo)
      (http://www.inria.fr/koala/colas/mouse-wheel-scroll/)</ulink></para>
  </answer>
</qandaentry>


<qandaentry><question>
<para>        Меню и диалоговые окна в X Window работают неправильно!
      </para></question><answer>

<para>Попробуйте выключить Num Lock.</para>
  

  
<para>Если клавиша Num Lock во время загрузки по умолчанию включена,
     добавьте в секцию ``<emphasis remap=tt>Keyboard</emphasis>'' файла <emphasis remap=tt>XF86Config</emphasis> следующую
     строку.</para>
  
<para>     
<literallayout>        # Let the server do the NumLock processing.  This should only be
        # required when using pre-R6 clients
            ServerNumLock
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Что такое виртуальные консоли и как изменить их количество?
      </para></question><answer>

<para>Виртуальные консоли, упрощённо говоря, позволяют вам иметь
     несколько одновременных сеансов работы с той же самой машиной без
     установки какой бы то ни было сети или запуска X.</para>
  

  
<para>При запуске системы после вывода сообщений этапа загрузки на консоль
     выдаётся приглашение на вход в систему.  Вы можете ввести своё имя и
     пароль и начать работать (или играть!) на первой виртуальной консоли.</para>
  
 
<para>В какой-то момент вы можете захотеть запустить ещё одну сеанс,
     скажем, чтобы заглянуть в документацию по программе, которую вы
     запустили или для для чтения электронной почты во время ожидания
     завершения передачи данных по FTP.  Просто нажмите Alt-F2 (удерживая
     клавишу Alt, нажмите F2) и вы обнаружите приглашение, ждущее вас на
     второй ``виртуальной консоли''!  Когда захотите вернуться к
     первоначальному сеансу, нажмите Alt-F1.</para>
 
<para>После инсталляции по умолчанию во FreeBSD задействованы три виртуальных
  консоли (8 начиная с 3.3-RELEASE), а комбинации клавиш Alt-F1, Alt-F2 и
  Alt-F3 служат для переключения между ними.</para>
 
<para>     Чтобы увеличить количество консолей, отредактируйте файл <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ttys">/etc/ttys</ulink>,
     добавив туда записи для терминалов с именами от ``<emphasis remap=tt>ttyv4</emphasis>'' до
     ``<emphasis remap=tt>ttyvc</emphasis>'' после слов ``Virtual terminals'':</para>
  
<para>     
<literallayout>        # Edit the existing entry for ttyv3 in /etc/ttys and change
        # "off" to "on".
        ttyv3   "/usr/libexec/getty Pc"         cons25  on secure
        ttyv4   "/usr/libexec/getty Pc"         cons25  on secure
        ttyv5   "/usr/libexec/getty Pc"         cons25  on secure
        ttyv6   "/usr/libexec/getty Pc"         cons25  on secure
        ttyv7   "/usr/libexec/getty Pc"         cons25  on secure
        ttyv8   "/usr/libexec/getty Pc"         cons25  on secure
        ttyv9   "/usr/libexec/getty Pc"         cons25  on secure
        ttyva   "/usr/libexec/getty Pc"         cons25  on secure
        ttyvb   "/usr/libexec/getty Pc"         cons25  on secure
      </literallayout>
</para>
  

  
<para>Используйте из них столько, сколько посчитаете нужным.  Чем больше
     виртуальных терминалов у вас имеется, тем больше ресурсов они
     используют; это может иметь значение, если у вас меньше чем 8МБ ОЗУ.
     Вы можете сменить статус консолей с ``<emphasis remap=tt>secure</emphasis>'' на
     ``<emphasis remap=tt>insecure</emphasis>''.</para>
  

  
<para><emphasis remap=bf>ВАЖНОЕ ЗАМЕЧАНИЕ</emphasis> если вы хотите запустить X, вы <emphasis remap=bf>ДОЛЖНЫ</emphasis>
     оставить для него по крайней мере один неиспользуемый (или
     выключенный) виртуальный терминал.  Таким образов, если вы хотите
     иметь приглашения login на всех двенадцати функциональнык клавиши,
     то вам не повезло - вы можете это сделать только для одиннадцати из
     них, если хотите на этой же машине ещё запустить X-сервер.</para>
  

  
<para>Самым простым способом убрать консоль является просто её
     выключение.  Например, если вы запустили на всех 12 консолях
     виртуальные терминалы, как указано выше, и ещё хотите запустить X, то
     должны будете изменить параметры двенадцатого виртуального
     терминала с:</para>
  
<para>     
<literallayout>        ttyvb   "/usr/libexec/getty Pc"         cons25  on secure
      </literallayout>
</para>
  

  
<para>на:</para>
  
<para>     
<literallayout>        ttyvb   "/usr/libexec/getty Pc"         cons25  off secure
      </literallayout>
</para>
  

  
<para>Если на вашей клавиатуре только десять функциональных клавиш,
     то последние строки будут выглядеть так:</para>
  
<para>     
<literallayout>        ttyv9   "/usr/libexec/getty Pc"         cons25  off secure
        ttyva   "/usr/libexec/getty Pc"         cons25  off secure
        ttyvb   "/usr/libexec/getty Pc"         cons25  off secure
      </literallayout>
</para>
  

  
<para>(Вы также можете просто их удалить.)</para>
  

  
<para>После того, как вы отредактировали файл <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ttys">/etc/ttys</ulink>,
     проверьте, что у вас имеется достаточное количество устройств для
     виртуальных терминалов.  Самый простой способ сделать это:</para>
  
<para>     
<literallayout>        # cd /dev
        # ./MAKEDEV vty12                 # For 12 devices
      </literallayout>
</para>
  

  
<para>Самым простым (и надёжным) способом активировать виртуальные
     консоли является перезагрузка.  Однако если вы вовсе не хотите этого
     делать, просто остановите X Window System и выполните (как
     администратор):</para>
  
<para>     
<literallayout>        kill -HUP 1
      </literallayout>
</para>
  

  
<para>При этом требуется, чтобы вы полностью закрыли X Window, если она
     была запущена, до запуска этой команды.  Если вы это не сделаете,
     ваша система может повиснуть/заблокироваться после выполнения команды
     kill.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Как осуществляется доступ к виртуальным консолям из X?
      </para></question><answer>

<para>Если на консоли запущена X Window, вы можете использовать
     комбинации клавиш, подобные Ctrl-Alt-F1, для переключения в режим
     работы с виртуальной консолью.  Заметьте, однако, что как только вы
     переключитесь из X Window в виртуальный терминал, вы можете
     использовать только Alt- клавиши для переключения в другой
     виртуальный терминал или снова в X Window.  Вам не нужно ещё нажимать
     клавишу Ctrl.  Если вы используете клавишу Ctrl при переключении в X,
     то в старых релизах вы может обнаружить, что ваша текстовая консоль
     осталась в режиме ``заблокированного control''. Нажмите эту клавишу
     ещё раз.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Как запустить XDM во время загрузки?</para></question><answer>

<para>Есть две философские школы, проповедующие различные методы запуска
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?manpath=xfree86&amp;query=xdm">xdm</ulink>.  Последователи одного течения запускают xdm из <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ttys">/etc/ttys</ulink>,
     используя приводимый пример, тогда как другие вставляют запуск xdm в
     скрипт <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?rc">rc.local</ulink> или <filename>X.sh</filename>, поместив последний в каталог
     <filename>/usr/local/etc/rc.d</filename>.  Оба метода равноправны, и один из них
     может работать в ситуациях, с которыми не справляется другой и
     наоборот.  В обоих случая результат один и тот же: X выводит
     графическое приглашение login:.</para>
  

  
<para>Плюсом метода с использованием ttys является документрование того,
     на каком vty будет запущен X и то, что ответственность за перезапуск
     X-сервера при завершении сеанса работы лежит на процессе init.  Метод
     с использованием rc.local позволяет просто прекратить работу xdm, если
     при запуске X возникли какие-нибудь проблемы.</para>
 
<para>Из rc.local <emphasis remap=tt>xdm</emphasis> должен быть запущен без
     аргументов, (то есть как даемон).  xdm должен быть запущен ПОСЛЕ запуска
     getty, иначе они будут конфликтовать, блокируя консоль.  Лучше всего
     выдержать паузу секунд на 10 и потом запустить xdm.</para>
 
    <para>Если <command>xdm</command> запускается из
      <filename>/etc/ttys</filename>, то есть вероятность конфликта между
      <command>xdm</command> и <command>getty</command>.  Одним из способов
      избежать этого является добавление номера <literal>vt</literal> в файл
      <filename>/usr/X11R6/lib/X11/xdm/Xservers</filename>.</para>

    <programlisting>
      :0 local /usr/X11R6/bin/X vt4
    </programlisting>

    <para>В вышеприведённом случае X-серверу указывается работать на
      <filename>/dev/ttyv3</filename>.  Заметьте, что номера отличаются на
      единицу.  Дело в том, что X-сервер считает vty от единицы, когда как
      отсчёт vty в ядре FreeBSD ведётся с нуля.</para>

  </answer>
</qandaentry>


<qandaentry><question>
<para>        При запуске xconsole выдаётся сообщение ``Couldn't open console''.
      </para></question><answer>

<para>Если вы запускаете <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?manpath=xfree86&amp;query=X">X</ulink> через скрипт <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?manpath=xfree86&amp;query=startx">startx</ulink>, права на устройство /dev/console <emphasis remap=tt>не</emphasis> изменяются,
     поэтому такие команды, как <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?manpath=xfree86&amp;query=xterm">xterm -C</ulink> и <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?manpath=xfree86&amp;query=xconsole">xconsole</ulink>, не будут работать.</para>
  

  
<para>Это зависит от прав доступа, установленных для консоли по умолчанию.
     В многопользовательской системе вовсе не нужно, чтобы любой
     пользователь мог выводить информацию на системную консоль.  Для
     пользователей, вошедших в систему через VTY, для решения этой проблемы
     существует файл <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?fbtab">fbtab</ulink>.</para>
  

  
<para>В общем, раскомментируйте строчку вида</para>
  
<para>     
<literallayout>        /dev/ttyv0 0600 /dev/console
      </literallayout>
</para>
  

  
<para>в файле <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?fbtab(5)">/etc/fbtab</ulink>, и этого будет достаточно для того, чтобы всякий,
     кто вошёл в систему с <filename>/dev/ttyv0</filename>, будет иметь доступ к
     консоли.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Моя мышь PS/2 в X работает неправильно.</para></question><answer>

<para>Вполне может быть, что ваша мышь и её драйвер
     рассинхронизировались.</para>
  

  
<para>В версиях 2.2.5 и более ранних это может произойти при переключении
     из X в виртуальный терминал и последующем возвращении в X.  Если эта
     проблема возникает достаточно часто, попробуйте добавить следующую
     строку в файл конфигурации ядра и перекомпилировать его.</para>
  
<para>     
<literallayout>        options PSM_CHECKSYNC
      </literallayout>
</para>

<para>Если у вас нет опыта перекомпиляции ядра, обратитесь к <link
     linkend="make-kernel">соответствующему разделу</link>.</para>
 
<para>С этой опцией проблем с синхронизацией мыши и её драйвера должно
     быть меньше.  Если, однако, эта проблема всё же осталась, щёлкните
     любой кнопкой мыши, не двигая ей, что заставит мышь и драйвер сделать
     попытку синхронизироваться.</para>
 
<para>Заметьте, что в некоторых системах эта опция может не работать и
     приводить к отключению функции ``tap'' устройства ALPS GlidePoint,
     подключенного к порту мыши PS/2.</para>
  

  
<para>В версиях 2.2.6 и выше, проверка синхронизации сделана гораздо лучше
     и включена в стандартный драйвер мыши PS/2.  Она должна работать даже с
     GlidePort.  (Так как код проверки стал стандартной функцией, опция
     PSM_CHECKSYNC в этих версиях нежоступна.)  Однако в редких случаях
     драйвер может ошибочно обнаруживать проблемы с синхронизацией, и вы
     будете видеть такие сообщения ядра:</para>
  
<para>     
<literallayout>        psmintr: out of sync (xxxx != yyyy)
      </literallayout>
</para>
  
<para>     а также обнаружите, что мышь теперь работает неправильно.</para>
  

  
<para>Если это случится, отмените проверку согласования, установив
     значение флага для драйвера мыши PS/2 в 0x100.  Войдите в конфигуратор
     <emphasis>UserConfig</emphasis>, задав опцию ``<option>-c</option>'' в приглашении
     загрузчика:</para>
  
<para>     
<literallayout>        boot: -c
      </literallayout>
</para>
  
<para>     Затем в командной строке <emphasis>UserConfig</emphasis> наберите:</para>
  
<para>     
<literallayout>        UserConfig&gt; flags psm0 0x100
        UserConfig&gt; quit
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Моя мышь PS/2 от MouseSystems похоже, не работает.</para></question><answer>

<para>Было несколько сообщений, что некоторые модели мышей PS/2 от
     MouseSystems работают только в режиме ``высокого разрешения''.  В
     других режимах курсор мыши постоянно прыгает в верхний левый угол
     экрана.</para>
 
<para>К сожалению, для версий 2.0.X и 2.1.X решения этой проблемы не
     существует.  Для версий от 2.2 до 2.2.5 приложите следующий патч к файлу
     <filename>/sys/i386/isa/psm.c</filename> и перестройте ядро.  Если у вас
     нет опыта перекомпиляции ядра, обратитесь к <link
     linkend="make-kernel">соответствующему разделу</link>.</para>
  
<para>     
<literallayout>diff -u psm.c.orig psm.c
@@ -766,6 +766,8 @@
     if (verbose &gt;= 2)
 	log(LOG_DEBUG, "psm%d: SET_DEFAULTS return code:%04x\n",
 	    unit, i);
+    set_mouse_resolution(sc-&gt;kbdc, PSMD_RES_HIGH);
+
 #if 0
     set_mouse_scaling(sc-&gt;kbdc); 	/* 1:1 scaling */
     set_mouse_mode(sc-&gt;kbdc);		/* stream mode */
      </literallayout>
</para>
  

  
<para>Для версий 2.2.6 и выше укажите флаг 0x04 драйверу мыши PS/2
     для перевода её в режим высокого разрешения. Войдите в
     <emphasis>UserConfig</emphasis>, задав опцию ``<option>-c</option>'' в приглашении
     загрузчика:</para>
  
<para>     
<literallayout>        boot: -c
      </literallayout>
</para>
  
<para>     Затем в командной строке <emphasis>UserConfig</emphasis> наберите:</para>
  
<para>     
<literallayout>        UserConfig&gt; flags psm0 0x04
        UserConfig&gt; quit
      </literallayout>
</para>
  

  
<para>В предыдущем разделе описана возможная причина проблем с мышью.</para>
  
<para>  </para>
  
</answer></qandaentry>

<qandaentry><question>
<para>      При компиляции приложений для X <emphasis remap=tt>imake</emphasis> не может найти файл
      <filename>Imake.tmpl</filename>.  Где он находится?
    </para></question><answer>

<para>Файл Imake.tmpl является частью пакета Imake, стандартного
   инструмента для построения X-приложений.  Он, также как ещё несколько
   заголовочных файлов, требуемых для построения X-приложений, содержится
   в дистрибутиве программ X.  Вы можете их проинсталлировать из sysinstall
   или взять из дистрибутива X. </para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Как поменять местами кнопки мыши?</para></question><answer>

<para>Поместите команду <literal> xmodmap -e "pointer = 3 2 1"</literal> в
     один из ваших скриптов .xinitrc или .xsession.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как установить экранную заставку и где такие заставки можно
     найти?</para></question><answer>

<para>Перед самым выпуском релиза FreeBSD 3.1 в систему была добавлена
     возможность вывода &quot;заставки&quot; во время загрузки.  На данный
     момент экраны заставок должны быть 256-цветными файлами формата BMP
     <filename>*.BMP</filename> или ZSoft PCX (<filename>*.PCX</filename>).
     Кроме того, они должны иметь разрешение 320x200 или меньше для работы со
     стандартными адаптерами VGA. Если вы включили поддержку VESA при компиляции
     ядра, то вы можете использовать экраны размером до 1024x768.  Заметьте, что
     поддержка VESA требует указание опции <emphasis remap=tt>VM86</emphasis>
     при компиляции ядра.  Реальная поддержка VESA может быть вкомпилирована в
     ядро при указании опции <acronym>VESA</acronym> либо загружена в виде
     kld-модуля ядра во время начальной загрузки.</para>

<para>Чтобы использовать заставку, вам нужно изменить файлы, управляющие
     процессом загрузки FreeBSD.  Формат этих файлов был изменён перед выпуском
     релиза FreeBSD 3.2, так что есть два способа загрузки экранных заставок:</para>

<para>
<itemizedlist>

<listitem>
<para>FreeBSD 3.1</para>

<para>Первым делом нужно найти экранную заставку в формате BMP. Релиз 3.1
     поддерживает заставки только в формате Windows.  После того, как вы
     нашли понравившуюся вам заставку, скопируйте её в файл
     <filename>/boot/splash.bmp</filename>.  Затем вам нужно поместить в файл
     <filename>/boot/loader.rc</filename> следующие строки:</para>

<para>
  <literallayout>
    load kernel
    load -t splash_image_data /boot/splash.bmp
    load splash_bmp
    autoboot
  </literallayout>
</para>
</listitem>

<listitem>

<para>FreeBSD 3.2+</para>

<para>Кроме поддержки заставок в формате PCX, FreeBSD 3.2 включает более гибкую
     систему конфигурации процесса загрузки.  Если вы хотите, вы можете
     использовать метод, указанный выше для FreeBSD 3.1.  Если же вы хотите
     использовать формат PCX, замените <symbol>splash_bmp</symbol> на
     <symbol>splash_pcx</symbol>.  С другой стороны, если вы хотите
     использовать новую систему конфигурации процесса загрузки, вам нужно
     создать файл <filename>/boot/loader.rc</filename>, содержащий следующие
     строки:</para>

<para>
  <literallayout>
    include /boot/loader.4th
    start
  </literallayout>
</para>

<para>и файл <filename>/boot/loader.conf</filename> со строками:</para>

<para>
  <literallayout>
    splash_bmp_load="YES"
    bitmap_load="YES"
  </literallayout>
</para>

<para>Здесь предполагается, что в качестве заставки вы используете файл
     <filename>/boot/splash.bmp</filename>.  Если вы используете PCX-файл,
     скопируйте его под именем <filename>/boot/splash.pcx</filename>, создайте
     файл <filename>/boot/loader.rc</filename>, как указано выше, и создайте
     файл <filename>/boot/loader.conf</filename>, который содержит
     следующее:</para>

<para>
  <literallayout>
    splash_pcx_load="YES"
    bitmap_load="YES"
    bitmap_name="/boot/splash.pcx"
  </literallayout>
</para>
</listitem>

</itemizedlist>
</para>

<para>Теперь всё, что вам нужно - это сама заставка.  Поищите заставки в
     галерее по адресу <ulink 
     URL="http://www.cslab.vt.edu/~jobaldwi/splash/">http://www.cslab.vt.edu/~jobaldwi/splash/</ulink>.</para>

</answer></qandaentry></qandaset>
</chapter>


<chapter
id="networking">
<title>Работа в сети</title>


<qandaset><qandaentry><question>
<para>Где можно найти информацию о ``бездисковой загрузке''?</para></question><answer>

<para>``Бездисковая загрузка'' означает, что машина с FreeBSD загружается
     по сети и читает необходимые файлы с сервера, а не со своего диска.
     Подробное описание есть в
     <ulink URL="../../handbook/diskless.html">соответствующей главе</ulink>
     Руководства.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Может ли машина с FreeBSD использоваться как маршрутизатор?
     </para></question><answer>

<para>Стандарты Internet и опыт практической работы не позволяют нам
     в FreeBSD держать маршрутизацию пакетов включенной по умолчанию. Вы,
     можете сделать это, изменив значение следующей переменной в файле
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?rc.conf">rc.conf</ulink> на <acronym>YES</acronym>:</para>
  
<para>     
<literallayout>        gateway_enable=YES          # Set to YES if this host will be a gateway
      </literallayout>
</para>
 
<para>Этот параметр изменит значение
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sysctl">системной переменной</ulink>
     <filename>net.inet.ip.forwarding</filename> на <emphasis remap=tt>1</emphasis>.</para>
  
<para>Кроме того, в большинстве случаев вам будет необходимо запустить
     программу маршрутизации, для того, чтобы объявить о появлении нового
     маршрутизатора другим системам в вашей сети; FreeBSD поставляется со
     стандартной для BSD-систем программой маршрутизации <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?routed">routed</ulink>, в более
     сложных ситуациях вы можете попробовать <emphasis>GaTeD</emphasis>
     (доступный по адресу
     <ulink URL="http://www.gated.org/">http://www.gated.org </ulink>
     с <filename>ftp.gated.Merit.EDU</filename>), который
     поддерживает FreeBSD начиная с версии 3_5Alpha7.</para>

<para>Мы обязаны предупредить вас, что даже когда FreeBSD настроена
     таким образом, она не полностью соответствует стандартам Internet 
     для маршрутизаторов, однако для обычной работы этого хватает.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Можно ли подключить машину с Win95 к Internet с помощью FreeBSD?
      </para></question><answer>

<para>Как правило, те, кто задает такие вопросы, имеют дома два компьютера,
     один с FreeBSD, а другой с Win95; идея состоит в использовании
     FreeBSD для подключения к Internet, а затем осуществлять выход в
     Internet из Windows95 через FreeBSD. На самом деле это просто
     особый случай предыдущего вопроса.</para>
  

  
<para>Существует полезный <ulink URL="http://www.ssimicro.com/~jeremyc/ppp.html">документ</ulink>,
     описывающий, как настроить FreeBSD в качестве маршрутизатора с выходом
     по протоколу PPP.</para>
  

  
<para><emphasis remap=bf>ЗАМЕЧАНИЕ:</emphasis> При этом требуется иметь по крайней мере два 
     фиксированных IP адреса, а может быть, три или больше, в зависимости
     от того, сколько машин с Windows вы хотите подключить. Как вариант,
     если у вас нет фиксированных IP адресов, вы можете использовать
     одну из частных IP подсетей и установить <emphasis remap=bf>прокси</emphasis> типа 
     <ulink URL="http://squid.nlanr.net/Squid/">SQUID</ulink> или
     <ulink URL="http://www.tis.com/">TIS</ulink> на машине с FreeBSD.</para>
 
<para>Посмотрите также раздел о <link linkend="natd">natd</link>.</para>

</answer></qandaentry>

<qandaentry><question>
<para>        Почему не проходит компиляция последней версии BIND от ISC?
      </para></question><answer>

<para>Это - результат конфликта между файлом ``<filename>cdefs.h</filename>'' в
     дистрибутиве и тем, что поставляется с FreeBSD. Достаточно 
     удалить файл <filename>compat/include/sys/cdefs.h</filename>.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Поддерживает ли FreeBSD протоколы SLIP и PPP?</para></question><answer>

<para>Да. Посмотрите страницы справочника по командам 
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?slattach">slattach</ulink>, <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sliplogin">sliplogin</ulink>,
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?pppd">pppd</ulink> и 
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ppp">ppp</ulink>.
     <emphasis remap=tt>Pppd</emphasis> и <emphasis remap=tt>ppp</emphasis> могут обслуживать как входящие, так и исходящие
     соединения. <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sliplogin">Sliplogin</ulink> имеет дело исключительно со входящими соединениям,
     а <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?slattach">slattach</ulink> - только с исходящими.</para>
 
<para>Эти программы описаны в следующих разделах
     <ulink URL="../../handbook/index.html">руководства</ulink>:</para>
  
<para>     
<itemizedlist>

<listitem>
<para><ulink URL="../../handbook/slips.html">Протокол SLIP (сервер)</ulink>

       </para>
</listitem>

<listitem>
<para><ulink URL="../../handbook/slipc.html">Протокол SLIP (клиент)</ulink>

       </para>
</listitem>

<listitem>
<para><ulink URL="../../handbook/ppp.html">Протокол PPP (режим ядра)</ulink>

       </para>
</listitem>

<listitem>
<para><ulink URL="../../handbook/ppp-and-slip.html#USERPPP">Протокол PPP (режим пользователя)</ulink>
     </para>
</listitem>

</itemizedlist>
</para>
  

  
<para>Если вы имеете доступ в Internet через командную строку
     оболочки, вам может подойти <ulink URL="http://www.FreeBSD.org/cgi/ports.cgi?^slirp">slirp</ulink>.
     С его помощью можно получить (ограниченный) доступ к таким
     службам, как ftp и http прямо с вашей машины.</para>
  

  
</answer></qandaentry>

<qandaentry><question
id="natd">
<para>        Поддерживает ли FreeBSD NAT или Masquerading?
      </para></question><answer>

<para>Если у вас есть локальная сеть (одна или больше машин), но
     только один IP адрес, предоставленный провайдером, вас может привлечь
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?natd">natd</ulink>.
     <emphasis remap=tt>Natd</emphasis> позволяет подключить всю сеть к Internet, используя
     единственный IP адрес.</para>
  

  
<para>Программа <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ppp">ppp</ulink> имеет похожую встроенную возможность через параметр 
     <option>-alias</option>.  В обоих случаях используется библиотека
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?libalias">libalias</ulink>.</para>
  

  
</answer></qandaentry>


<qandaentry><question>
<para>Не могу создать устройство <filename>/dev/ed0</filename>!</para></question><answer>

<para>В стандарте сетевого взаимодействия Беркли сетевые интерфейсы
     напрямую доступны только ядру.  За дополнительной информацией
     обратитесь к файлу <filename>/etc/rc.network</filename> и страницам справочника,
     описывающим различные сетевые программы, упоминаемые здесь.  Если всё
     это оставит вас в недоумении, почитайте книгу, описывающую
     администрирование сети в другой BSD-подобной операционной системе;
     с некоторыми незначитальными исключениями, администрирование сети
     во FreeBSD в основном совпадает с SunOS 4.0 и Ultrix.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Как настроить алиас на Ethernet?</para></question><answer>

<para>Добавьте ``<literal>netmask 0xffffffff</literal>'' в командной строке <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ifconfig">ifconfig</ulink>
     так, как это сделано здесь:</para>
  
<para>     
<literallayout>        ifconfig ed0 alias 204.141.95.2 netmask 0xffffffff
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Как заставить адаптер 3C503 использовать другой тип сетевого разъёма?
      </para></question><answer>

<para>Если вы хотите задействовать другой разъём, то должны указать
     дополнительный параметр в командной строке
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ifconfig">ifconfig</ulink>. Разъёмом по умолчанию является ``<emphasis remap=tt>link0</emphasis>''.
     Чтобы задействовать разъём AUI, а не BNC, используйте ``<emphasis remap=tt>link2</emphasis>''.
     Эти флаги должны быть указаны с помощью переменных ifconfig_*
     в <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?rc.conf">/etc/rc.conf</ulink>.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>У меня проблемы при работе NFS во FreeBSD.</para></question><answer>

<para>Некоторые сетевые адаптеры работают (мягко говоря) хуже, чем другие
     что может иногда вызывать проблемы при работе приложений типа NFS,
     интенсивно использующих сеть.</para>
  

  
<para>Подробности описаны в <ulink URL="../../handbook/nfs.html">соответствующей главе</ulink> Руководства, посвящённой NFS.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Почему я не могу смонтировать диск Linux по NFS?</para></question><answer>

<para>Некоторые версии NFS для Linux поддерживают запросы на монтирование
     только с привилегированного порта; попробуйте</para>
  
<para>     
<literallayout>        mount -o -P linuxbox:/blah /mnt
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Почему я не могу смонтировать диск Sun по NFS?</para></question><answer>

<para>Рабочие станции Sun под управлением SunOS 4.X поддерживают запросы
     на монтирование только с привилегированного порта; попробуйте</para>
  
<para>     
<literallayout>        mount -o -P sunbox:/blah /mnt
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Проблемы при связи по PPP с машинами NeXTStep.</para></question><answer>

<para>Попробуйте отменить все расширения TCP в <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?rc.conf">/etc/rc.conf</ulink>,
     изменив значение следующей переменной в NO:</para>
  
<para>     
<literallayout>        tcp_extensions=NO
      </literallayout>
</para>
  

  
<para>Маршрутизаторы Annex фирмы Xylogic не работают по этой же причине,
     поэтому при подключении к ним вам нужно проделать то же самое.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Как включить поддержку multicast IP?</para></question><answer>

<para>Работа с многоадресной рассылкой по умолчанию полностью
     поддерживается версиями FreeBSD 2.0 и выше.  Если вы хотите использовать
     ваш компьютер как маршрутизатор многоадресного трафика, вам нужно
     перекомпилировать ядро с включенной опцией <acronym>MROUTING</acronym> и
     запустить <emphasis remap=tt>mrouted</emphasis>.  Версии FreeBSD 2.2 и выше будут запускать
     <emphasis remap=tt>mrouted</emphasis> во время загрузки, если переменная <symbol>mrouted_enable</symbol>
     в файле <filename>/etc/rc.conf</filename> установлена в значение "YES".</para>
  

  
<para>Приложения MBONE находятся в своей категории портов, mbone.  Если
     вы ищете приложения для организации конференций <emphasis remap=tt>vic</emphasis> и <emphasis remap=tt>vat</emphasis>,
     посмотрите там!</para>
  

  
<para>Более подробная информация располагается на сервере
     <ulink URL="http://www.mbone.com/">Mbone Information Web</ulink>.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Какие сетевые адаптеры сделаны на наборе микросхем DEC PCI?
      </para></question><answer>

<para>Вот список, составленный <ulink URL="mailto:gfoster@driver.nsta.org">Гленом Фостером</ulink> (Glen Foster), с некоторыми незначительными
     добавлениями:</para>
  
<para>     
<literallayout>        Производитель   Модель
        ----------------------------------------------
        ASUS            PCI-L101-TB
        Accton          ENI1203
        Cogent          EM960PCI
        Compex          ENET32-PCI
        D-Link          DE-530
        Dayna           DP1203, DP2100
        DEC             DE435, DE450
        Danpex          EN-9400P3
        JCIS            Condor JC1260
        Linksys         EtherPCI
        Mylex           LNP101
        SMC             EtherPower 10/100 (Model 9332)
        SMC             EtherPower (Model 8432)
        TopWare         TE-3500P
        Znyx            (2.2.x) ZX312, ZX314, ZX342, ZX345, ZX346, ZX348
                        (3.x) ZX345Q, ZX346Q, ZX348Q, ZX412Q, ZX414, ZX442,
                              ZX444, ZX474, ZX478, ZX212, ZX214 (10mbps/hd)
      </literallayout>
</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Почему я должен использовать FQDN для хостов не в моей сети?
      </para></question><answer>

<para>Вы, наверное, обнаружили, что хост, к которому вы обратились, 
     оказался на самом деле в другом домене; например, если вы находитесь
     в домене foo.bar.edu и хотите обраттиться к хосту ``mumble'' в домене
     bar.edu, то должны указать его полное доменное имя, ``mumble.bar.edu'',
     а не просто ``mumble''.</para>
  

  
<para>Традиционно, это позволял делать ресолвер BSD BIND. Однако текущая
     версия <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?named">bind</ulink>, 
     поставляемая с FreeBSD, больше не добавляет имена доменов,
     отличающихся от того, в котором вы находитесь, для не полностью
     указанных имён хостов.  Так что неполно указанный хост <emphasis remap=tt>mumble</emphasis>
     будет найден либо как <filename>mumble.foo.bar.edu</filename>, либо будет искаться
     в корневом домене.</para>
  

  
<para>Это отличается от предыдущего поведения, при котором поиск
     продолжался в <filename>mumble.bar.edu</filename>, и <filename>mumble.edu</filename>.
     Посмотрите RFC 1535 о причинах объявления такого поведения плохой
     практикой и даже ошибкой в безопасности.</para>
  

  
<para>Как хорошее решение, вы можете поместить строку</para>
  
<para>     
<literallayout>        search foo.bar.edu bar.edu
      </literallayout>
</para>
  

  
<para>вместо ранее используемой</para>
  
<para>     
<literallayout>        domain foo.bar.edu
      </literallayout>
</para>
  

  
<para>в файл <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?resolv.conf">/etc/resolv.conf</ulink>.  Однако удостоверьтесь, что порядок поиска не
     нарушает ``границ полномочий между местным и внешним
     администрированием'', как это названо в RFC 1535.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>``Permission denied'' для любых действий в сети.</para></question><answer>

<para>Если вы компилировали ядро с опцией <acronym>IPFIREWALL</acronym>, имейте в 
     виду, что политика по умолчанию настроена как в 2.1.7R (она
     на самом деле изменилась во время разработки 2.1-STABLE), то есть
     указан запрет на прохождение всех пакетов, которые явно не разрешены.</para>
  

  
<para>Если вы случайно неверно отконфигурировали брандмауэр, то для
     восстановления работоспособность сети дайте такую команду, войдя
     суперпользователем:</para>
  
<para>     
<literallayout>        ipfw add 65534 allow all from any to any
      </literallayout>
</para>
  

  
<para>Также вы можете установить "firewall_type='open'" в файле
     <filename>/etc/rc.conf</filename>.</para>
  

  
<para>Более подробная информация о конфигурировании брандмауэра в
     FreeBSD находится в <ulink URL="../../handbook/firewalls.html">соответствующем разделе</ulink> Руководства.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Какую нагрузку вызывает использование IPFW?</para></question><answer>

<para>Ответ на этот вопрос зависит главным образом от набора правил
     и производительности процессора.  Для большинства приложений, имеющих
     дело с ethernet и простым набором правил, ответ: незначительно.  Для
     тех, кому нужны реальные цифры для удовлетвореия любопытства,
     читайте дальше.</para>
  

  
<para>Следующие измерения были сделаны с использованием 2.2.5-STABLE на
     машине 486-66.  IPFW был модифицирован для измерения времени,
     затрачиваемого внутри процедуры <symbol>ip_fw_chk</symbol> и вывода результатов
     на консоль каждую тысячу пакетов.</para>
  

  
<para>Тестировались два набора по 1000 правил в каждом.  Первый набор
     был предназначен для демонстрации наихудшего случая, повторяя условие</para>
  
<para>     
<literallayout>        ipfw add deny tcp from any to any 55555
      </literallayout>
</para>
  

  
<para>Это наихудший случай, так как все условия IPFW будут проверены
     перед тем, как будет принято окончательное решение о том, что пакет
     не соответствует условию (мы меняли номер порта).  После 999
     повторений этого условия находилось правило
     <emphasis remap=tt>allow ip from any to any</emphasis>.</para>
  

  
<para>Второй набор был предназначен для быстрого прерывания
     процесса проверки условий:</para>
  
<para>     
<literallayout>        ipfw add deny ip from 1.2.3.4 to 1.2.3.4
      </literallayout>
</para>
  

  
<para>Неподходяший IP-адрес источника для указанного условия
     быстро вызывает пропуск этого правила.  Как и ранее, последним правилом
     было <emphasis remap=tt>allow ip from any to any</emphasis>.</para>
  

  
<para>Затраты на обработку пакета в первом случае было примерно 2.703
     мс/пакет, или примерно 2.7 микросекунд на правило.  Таким образом,
     теоретический предел скорости обработки пакетов с этими правилами
     равен примерно 370 пакетам в секунду.  Предполагая использование
     ethernet 10Мб/с с размером пакета примерно 1500, мы можем достигнуть
     только 55.5% использования пропускной способности.</para>
  

  
<para>В последнем случае на обработку каждого пакета было затрачено
     примерно 1.172мс, или около 1.2 микросекунд на правило.  Теоретический
     предел обработки будет равен около 853 пакетам в секунду, что почти
     соответствует скорости 10Мб/с ethernet.</para>
  

  
<para>Большое количество протестированных правил и природа этих правил
     не даёт представление о реальной жизни - они были использованы
     только для генерации информации о времени обработки.  Вот 
     несколько наблюдений, которые нужно иметь в виду для построении
     эффективного набора правил:</para>
  
<para>     
<itemizedlist>

<listitem>
<para>Поместите правило `established' в самое начало списка для
       обработки основного трафика TCP.  Не помещайте перед ним никаких
       правил <emphasis remap=tt>allow tcp</emphasis>.

       </para>
</listitem>

<listitem>
<para>Старайтесь помещать часто вызываемые правила как можно раньше,
       а редко используемые - позже (<emphasis remap=bf>без изменения политики</emphasis>,
       конечно).  Вы можете выяснить частоту использования правил с помощью
       вывода статистики командой <command>ipfw -a l</command>.

     </para>
</listitem>

</itemizedlist>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Как можно перенаправить запросы с одной машины на другую?
      </para></question><answer>

<para>Вы можете перенаправить запрос на FTP (или другой сервис) с помощью
     пакаджа 'socket', доступного в дереве портов в категории 'sysutils'.
     Просто замените командную строку запуска сервиса на вызов socket,
     типа:</para>
  
<para>
<literallayout>ftp stream tcp nowait nobody /usr/local/bin/socket socket ftp.foo.com ftp</literallayout>
</para>
  

  
<para>где 'ftp.foo.com' и 'ftp' являются соответственно хостом и портом
     для перенаправления.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Где можно найти средства управления сетевым трафиком?
      </para></question><answer>

<para>Для FreeBSD существуют два средства управления трафиком: свободно
     распространяемый <ulink
     URL="http://www.csl.sony.co.jp/person/kjc/programs.html">ALTQ</ulink>
     и коммерческий продукт Bandwidth Manager от <ulink 
     URL="http://www.etinc.com/">Emerging Technologies</ulink>.</para>
 
</answer></qandaentry>


<qandaentry><question>
<para>Почему появляются сообщения
  `/dev/bpf0: device not configured'?</para></question><answer>

<para>Для работы программ, использующих Berkeley Packet Filter <ulink
  URL="http://www.FreeBSD.org/cgi/man.cgi?bpf">(bpf)</ulink> необходимо
  включение в ядро соответствующего драйвера.  Перекомпилируйте ядро, добавив
  в его конфигурационный файл следующую строку:</para>
 
<para>     
  <literallayout>
    pseudo-device bpfilter		# Berkeley Packet Filter
  </literallayout>
</para>
 
<para>Затем, после перезапуска системы, вам нужно создать соответствующий файл
  устройства.  Это можно сделать, сменив текущий каталог на 
  <filename>/dev</filename> и выполнив команду</para>
 
<para>     
  <informalexample>
    <screen>
      # sh MAKEDEV bpf0
    </screen>
  </informalexample>
</para>
 
<para>Обратитесь к разделу руководства, посвящённому <ulink
  URL="../../handbook/kernelconfig-nodes.html">созданию файлов
  устройств</ulink> за подробной информацией по этому вопросу.</para>

</answer></qandaentry></qandaset>
</chapter>


<chapter
id="ppp">
<title>PPP</title>

<qandaset><qandaentry><question
id="userppp">

<para>Не могу заставить работать ppp. Что я делаю не так?
      </para></question><answer>

<para>Первым делом прочтите <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ppp">страницы справочника</ulink>, посвящённые ppp, а также соответствующий
     <ulink URL="../../handbook/ppp-and-slip.html#USERPPP">раздел</ulink> руководства.
     Включите протоколирование командой</para>
  
<para>     
<literallayout>        set log Phase Chat Connect Carrier lcp ipcp ccp command
      </literallayout>
</para>
 
<para>Эта команда может быть набрана в командной строке <emphasis remap=bf>ppp</emphasis> или
     она может находиться в конфигурационном файле
     <filename>/etc/ppp/ppp.conf</filename> (начало секции <emphasis remap=bf>default</emphasis> - лучшее
     для неё место. Удостоверьтесь, что файл
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?syslog.conf">/etc/syslog.conf</ulink> содержит строки</para>
  
<para>     
<literallayout>        !ppp
        *.*              /var/log/ppp.log
      </literallayout>
</para>
 
<para>и файл <filename>/var/log/ppp.log</filename> существует. Теперь вы сможете
     найти полную информацию о происходящем в файле протокола. Не
     беспокойтесь, если не всё вам будет там понятно.  Если вы будете
     пользоваться чьей-то помощью, протокол вам пригодится.</para>
 
<para>Если ваша версия ppp не понимает команду "set log", вы должны скачать
     <ulink URL="http://people.FreeBSD.org/~brian/">последнюю версию</ulink>.
     Она рассчитана на FreeBSD версий 2.1.5 и выше.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Ppp просто зависает, когда я его запускаю</para></question><answer>

<para>Обычно это происходит, когда не может быть определено имя
       вашего хоста.  Наилучший способ исправить это -
       удостовериться, что файл <filename>/etc/hosts</filename> используется вашим
       ресолвером.  Отредактируйте файл <filename>/etc/host.conf</filename>, поместив
       на первое место строчку <emphasis remap=tt>hosts</emphasis>.  Затем просто добавьте
       записи о вашей машине в файл <filename>/etc/hosts</filename>.  Если у вас нет
       локальной сети, измените строку <emphasis remap=tt>localhost</emphasis>:</para>
  
<para>       
<literallayout>127.0.0.1	foo.bar.com foo localhost
        </literallayout>
</para>
  
<para>       В противном случае просто добавьте ещё одну запись о вашем хосте.
       Обратитесь к соответствующим страницам справочника за подробным
       описанием.</para>
  
<para>Если вы выполнили эти указания, вы сможете успешно выполнить
       команду <command>ping -c1 `hostname`</command>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Ppp не звонит в режиме -auto</para></question><answer>

<para>Во-первых, проверьте, что у вас есть маршрут по умолчанию.
       Запустив <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?netstat">netstat -rn</ulink>, вы должны увидеть две строки вида:</para>
  
<para>       
<literallayout>Destination        Gateway            Flags     Refs     Use     Netif Expire
default            10.0.0.2           UGSc        0        0      tun0
10.0.0.2           10.0.0.1           UH          0        0      tun0
        </literallayout>
</para>
  
<para>Здесь предполагается, что вы использовали адреса, 
       приведённые в Руководстве, Справочнике или файле
       ppp.conf.sample. Если у вас нет маршрута по умолчанию, это
       может быть из-за использования старой версии
       <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ppp">ppp</ulink>, которая не понимает слова <acronym>HISADDR</acronym> в файле
       ppp.conf. Если ваша версия <emphasis remap=bf>ppp</emphasis> из FreeBSD версий ранее
       чем 2.2.5, замените строку</para>
  
<para>       
<literallayout>          add 0 0 HISADDR
        </literallayout>
</para>
  
<para>на</para>
  
<para>       
<literallayout>          add 0 0 10.0.0.2
        </literallayout>
</para>
  
<para>Другой причиной отсутствия маршрута по умолчанию может быть
       то, что вы ошибочно установили маршрут по умолчанию в вашем файле
       <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?rc.conf">/etc/rc.conf</ulink> (этот файл назывался <filename>/etc/sysconfig</filename>
       до 2.2.2-RELEASE), и вы пропустили строку</para>
  
<para>       
<literallayout>          delete ALL
        </literallayout>
</para>
  
<para>в <filename>ppp.conf</filename>.  В таком случае обратитесь к соответствующему
       <ulink URL="../../handbook/ppp-and-slip.html#USERPPP-FINAL">разделу</ulink> Руководства.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Что означает сообщение "No route to host"?</para></question><answer>

<para>Эта ошибка появляется из-за отсутствующего раздела</para>
  
<para>       
<literallayout>          MYADDR:
            delete ALL
            add 0 0 HISADDR
        </literallayout>
</para>
  
<para>в файле <filename>/etc/ppp/ppp.linkup</filename>. Он необходим, если ваш
       IP адрес выделяется динамически или адрес маршрутизатора вам не
       известен.  Если вы используете интерактивный
       режим, вы можете набрать следующие команды после входа в
       <emphasis remap=tt>пакетный режим</emphasis> (пакетный режим идентифицируется заглавными
       буквами <acronym>PPP</acronym> в приглашении):</para>
  
<para>       
<literallayout>          delete ALL
          add 0 0 HISADDR
        </literallayout>
</para>
  
<para>Обратитесь к разделу <ulink URL="../../handbook/ppp-and-slip.html#USERPPP-DYNAMICIP">PPP и динамические IP адреса</ulink> Руководства за подробной
       информацией.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Соединение разрывается через 3 минуты</para></question><answer>

<para>Таймаут для ppp по умолчанию равен 3 минутам.  Это может быть
       изменено строкой</para>
  
<para>       
<literallayout>          set timeout NNN
        </literallayout>
</para>
  
<para>где <acronym>NNN</acronym> - время неактивности в секундах, после которого
       соединение закывается.  Если <acronym>NNN</acronym> равно нулю, соединение никогда
       не разрывается по таймауту.  Эту команду можно поместить в файл
       <filename>ppp.conf</filename> или набрать ее в интерактивном режиме.  Изменение
       этого параметра также возможно при активном соединении, если
       подключиться к сокету <emphasis remap=bf>ppp</emphasis> сервера с помощью программ
       <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?telnet">telnet</ulink>
       или <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?pppctl">pppctl</ulink>.  Обратитесь к страницам Справочника, посвящённым
       <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ppp">ppp</ulink>.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Соединение разрывается при большой нагрузке</para></question><answer>

<para>Если у вас включен Link Quality Reporting (LQR), возможно,
       что слишком много пакетов LQR теряется в канале.  Ppp делает вывод,
       что канал плох, и разрывает соединение. В FreeBSD до версии 2.2.5
       LQR было включено по умолчанию.  Сейчас оно по умолчанию выключено.
       LQR можно выключить строкой</para>
  
<para>       
<literallayout>          disable lqr
        </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Соединение разрывается в случайные промежутки времени
        </para></question><answer>

<para>Иногда, на шумной линии или даже на линии с включенным режимом
       ожидания звонка, ваш модем может вешать трубку, думая (совершенно
       напрасно), что потерял несущую.</para>
  
<para>В большинстве модемов есть параметр, определяющий чувствительность
       к временной потере несущей.  Например, в модеме USR Sportster,
       это определяется значением регистра S10 в десятых долях секунды.
       Чтобы сделать связь более устойчивой, добавьте следующую
       последовательность посылок-ожиданий в строку набора:</para>
  
<para>       
<literallayout>          set dial "...... ATS10=10 OK ......"
        </literallayout>
</para>
  
<para>Обратитесь к руководству по вашему модему.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Соединение часто рвётся в случайные промежутки времени
        </para></question><answer>

<para>Многие сообщают об обрывах соединений без видимой причины.  Первым 
       делом нужно выяснить, с какой стороны соединения рвётся связь. </para>
  
<para>Если вы используете внешний модем, можете просто попробовать
       использовать утилиту <emphasis remap=tt>ping</emphasis> и посмотреть, мигает ли индикатор
       <acronym>TD</acronym> при передаче данных.  Если он мигает (а индикатор <acronym>TD</acronym> нет),
       проблема с той стороны.  Если индикатор <acronym>TD</acronym> не загорается, проблема
       с вашей стороны.  При использовании внутреннего модема вам необходимо
       воспользоваться командой <emphasis remap=tt>set server</emphasis>, указав её в файле
       <filename>ppp.conf</filename>.  Когда произойдёт обрыв связи, подключитесь к ppp с
       помощью pppctl.  Если ваше сетевое подключение неожиданно восстановится
       (ppp оживает при проявлении активности на диагностическом сокете) или
       или если вы не сможете соединиться (здесь мы полагаем, что команда
       <emphasis remap=tt>set socket</emphasis> в начальный момент была выполнена успешно), то проблема
       имеет локальный характер.  Если вы сможете подключиться, но связи всё
       равно нет, включите вывод отладочной информации командой <emphasis remap=tt>set log
       local async</emphasis> и запустите <emphasis remap=tt>ping</emphasis> из другого окна или терминала, чтобы
       проверить связь.  В отладочном выводе будут показаны данные,
       передаваемые и получаемые из канала связи.  Если данные посылаются,
       но не принимаются обратно, проблема с противоположной стороны.</para>
  
<para>Выяснив, является эта проблема локальной или удалённой системы,
       вы имеете следующие возможности:</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Удалённая система не отвечает</para></question><answer>

<para>Здесь вы мало что можете сделать.  Большинство провайдеров
         отказываются оказать помощь, если вы используете ОС не от Microsoft.
         Вы можете добавить команду <emphasis remap=tt>enable lqr</emphasis> в ваш <filename>ppp.conf</filename>, что
         позволит ppp отследить ошибки в удалённой системе и закрывать
         соединение, однако такое обнаружение достаточно медленное и поэтому
         не так уж полезно.  Вы можете также просто не сообщать своему
         провайдеру, что запускаете user-ppp....</para>
  
<para>Первым делом попробуйте отключить всю местную компрессию, 
         указав в конфигурационном файле следующее:</para>
  
<para>         
<literallayout>            disable pred1 deflate deflate24 protocomp acfcomp shortseq vj
            deny pred1 deflate deflate24 protocomp acfcomp shortseq vj
          </literallayout>
</para>
 
<para>Теперь попробуйте установить соединение ещё раз и удостовериться,
         что ситуация не изменилась.  Если качество соединения улучшилось
         или проблема окащалась полностью решённой, выясните, настройка
         чего приводила к проблемам методом проб и ошибок.  Это даст вам
         дополнительную защиту, когда вы будете разговаривать с вашим
         провайдером (хотя при этом может обнаружиться, что вы работаете
         не с продуктом Microsoft). </para>
 
<para>Перед тем, как звонить провайдеру, включите вывод отладочной
         информации, как вы это делали ранее и подождите, пока соединение
         снова не прервётся.  Правда, для этого требуется некоторое
         дисковое пространство.  Интерес могут представлять последние
         прочитанные из порта данные.  Обычно это данные в формате ascii
         и они могут даже содержать описание проблемы (``Memory fault,
         core dumped'' ?).</para>
 
<para>Если ваш провайдер согласен помочь вам, нужно будет включить
         режим отладки с их стороны, а потом, когда связь прервётся в
         следующий раз, они могут сказать вам, почему возникли проблемы
         с их стороны.  Будет хорошо, если вы пришлёте детальное описание
         на адрес <ulink URL="mailto:brian@Awfulhak.org">brian@Awfulhak.org</ulink>, или даже попросите провайдера связаться
         со мной напрямую.</para>

</answer></qandaentry>

<qandaentry><question>
<para>Ppp зависает</para></question><answer>

<para>Лучше всего в этом случае перекомпилировать ppp, добавив параметры
         <literal>CFLAGS+=-g</literal> и <literal>STRIP=</literal> в конец Makefile, а затем выполнить
         <emphasis remap=tt>make clean &amp;&amp; make &amp;&amp; make install</emphasis>.  Когда ppp
         зависнет, найдите идентификатор процесса ppp с помощью команды
         <emphasis remap=tt>ps ajxww | fgrep ppp</emphasis> и выполните команду <emphasis remap=tt>gdb ppp PID</emphasis>.
         Затем в приглашении gdb вы можете использовать команду <emphasis remap=tt>bt</emphasis> для
         получения стека вызовов.</para>
 
<para>Пошлите результат на адрес <ulink URL="mailto:brian@Awfulhak.org">brian@Awfulhak.org</ulink>.</para>

</answer></qandaentry>

<qandaentry><question>
<para>          Ничего не происходит после сообщения Login OK!
        </para></question><answer>

<para>До версии FreeBSD 2.2.5, как только связь устанавливалась,
       <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ppp">ppp</ulink> ожидал начала согласования Line Control Protocol
       (LCP) с противоположной стороны.  Многие провайдеры Internet не
       начинают согласования и предполагают, что это сделает клиент.
       Чтобы заставить <emphasis remap=bf>ppp</emphasis> инициировать согласование параметров
       LCP, используйте следующую строку:</para>
  
<para>       
<literallayout>          set openmode active
        </literallayout>
</para>
 
<para><emphasis remap=bf>Замечание</emphasis>: Ничего страшного не произойдёт, если согласование
       начнут обе стороны, поэтому режим инициирования сейчас
       по умолчанию активный.  Однако, в следующем разделе описывается
       ситуация, когда это <emphasis remap=bf>приводит</emphasis> к некоторым неприятностям.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          В протоколе есть сообщения о том, что 'magic being the same'.
        </para></question><answer>

<para>Иногда, сразу же после установления соединения, вы можете увидеть
       сообщения в протоколе, говорящие что "magic is the same". Иногда
       эти сообщения проходят безболезненно, а иногда одна из сторон
       прекращают работу.  Большинство реализаций ppp не может справиться с
       такой ситуацией, и, даже когда связь выглядит установившейся, вы
       будете видеть только бесконечно повторяющиеся конфигурационные
       запросы и подтверждения в файле протокола до тех пор, пока ppp
       окончательно не закроет соединение.</para>
  
<para>Обычно это происходит на серверах с медленными дисками, на
       которых порт обслуживает программа getty, а ppp выполняется из
       сценария регистрации или другой программы после регистрации
       пользователя.  Были сообшения, что такое случается постоянно при
       использовании slirp.  Причина заключается в том, что во время,
       проходящее между завершением работы getty и запуском ppp, ppp
       со стороны клиента начинает посылать пакеты Line Control Protocol
       (LCP).  Так как режим эха остаётся всё ещё включенным, ppp клиента
       получает "отражения" своих запросов.</para>
  
<para>Частью процесса согласования параметров LCP является определение
       "магического" числа для каждой стороны соединения для обнаружения
       "отражений".  Согласно спецификации, когда одна сторона пытается
       использовать совпадающее "магическое" число, должен быть послан ответ
       NAK и должно быть выбрано новое "магическое" число.  В тот момент,
       когда на порту сервера включен режим эха, клиент ppp посылает пакеты
       LCP, получает то же самое "магическое" число в отражённом пакете и
       отвечает на него NAK.  Он также видит отражённый NAK (который также
       означает, что ppp должен изменить своё "магическое" число).  В
       потенциале это может вызвать появление огромного количества процессов
       смен "магических" чисел, и все они накапливаются в буфере терминала.
       Как только запустится сервер ppp, он будет перегружен запросами на
       смену "магических", немедленно решит, что этого много для согласования
       LCP и прервёт соединение.  В то же самое время, клиент, который больше 
       не видит отражений, останавливается для того, чтобы увидеть, что
       сервер закрыл соединеие.</para>
  
<para>Этого можно избежать, позволив начинать согласование 
       противоположной стороне следующей строкой в файле ppp.conf:</para>
  
<para>       
<literallayout>          set openmode passive
        </literallayout>
</para>
  
<para>Это заставит ppp ожидать начала согласования LCP.  Некоторые
       серверы, однако, могут никогда не начать согласование.  Если это тот
       самый случай, вы можете сделать следующее:</para>
  
<para>       
<literallayout>          set openmode active 3
        </literallayout>
</para>
  
<para>Это заставит ppp пассивно ждать 3 секунды, и только затем посылать
       запросы LCP.  Если противоположная сторона начнёт посылать в этот
       момент запросы, ppp немедленно ответит, не ожидая истечения
       трёхсекундного интервала.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Согласование LCP продолжается, пока не закроется соединение
        </para></question><answer>

<para>В настоящий момент одной из неприятных особенностей
       реализации <emphasis remap=bf>ppp</emphasis> является то, что она не связывает сообщения
       LCP, CCP &amp; IPCP с запросами.  Как результат, если реализация
       <emphasis remap=bf>ppp</emphasis> с одной стороны более чем на 6 секунд медленнее, чем с
       другой, противоположная сторона будет посылать два дополнительных
       запроса на согласование параметров LCP. Это фатально.</para>
  
<para>       Предположим, что у нас работают две реализации, <emphasis remap=bf>A</emphasis> и <emphasis remap=bf>B</emphasis>.
       <emphasis remap=bf>A</emphasis> начинает посылать запросы LCP сразу же после соединения, а
       <emphasis remap=bf>B</emphasis> требуется 7 секунд для запуска.  Когда <emphasis remap=bf>B</emphasis> запускается,
       <emphasis remap=bf>A</emphasis> послало 3 LCP-запроса.  Полагаем, что режим эха выключен,
       в противном случае мы столкнулись бы с проблемами "магического"
       числа, описанные в предыдущем разделе.  <emphasis remap=bf>B</emphasis> посылает REQ, затем
       ACK на первый REQ от <emphasis remap=bf>A</emphasis>.  Это приводит к тому, что <emphasis remap=bf>A</emphasis> входит
       в состояние <acronym>OPENED</acronym> и посылает (первый) ACK обратно <emphasis remap=bf>B</emphasis>.  В
       то же самое время <emphasis remap=bf>B</emphasis> посылает обратно ещё два ACK в ответ на
       два дополнительных REQ, посланные <emphasis remap=bf>A</emphasis> до старта <emphasis remap=bf>B</emphasis>.  <emphasis remap=bf>B</emphasis>
       затем получает первый ACK от <emphasis remap=bf>A</emphasis> и возвращается в состояние
       <emphasis remap=bf>REQ-SENT</emphasis>, послав ещё один (четвёртый) REQ согласно RFC.  Затем
       он получает третий ACK и входит в состояние <acronym>OPENED</acronym>.  В то же
       время <emphasis remap=bf>B</emphasis> принимает четвёртый REQ от <emphasis remap=bf>A</emphasis>, что возвращает
       его в состояние <emphasis remap=bf>ACK-SENT</emphasis> и посылает ещё один (второй) REQ
       и (четвёртый) ACK согласно RFC.  <emphasis remap=bf>A</emphasis> получает REQ, переходит
       в состояние <emphasis remap=bf>REQ-SENT</emphasis> и посылает ещё один REQ.  Он немедленно
       принимает последующий ACK и входит в состояние <acronym>OPENED</acronym>.</para>
 
<para>Это будет продолжаться до тех пор, пока одна из сторон не
       обнаружит, что это ни к чему не приводит и не закроет соединение.</para>
 
<para>Лучшим способом избежать этой ситуации является конфигурация
       одной из сторон как <emphasis remap=bf>passive</emphasis>, чтобы она ждала другую для
       начала согласования.  Это можно сделать командой</para>
  
<para>       
<literallayout>          set openmode passive
        </literallayout>
</para>
  
<para>       С этой командой нужно быть осторожным.  Вы также должны будете
       использовать команду</para>
  
<para>       
<literallayout>          set stopped N
        </literallayout>
</para>
  
<para>       для ограничения периода ожидания, в течении которого <emphasis remap=bf>ppp</emphasis> ждёт
       начала согласования с противоположной стороны.  Как вариант, может
       быть использована строка</para>
  
<para>       
<literallayout>          set openmode active N
        </literallayout>
</para>
  
<para>       (где <emphasis remap=bf>N</emphasis> - период ожидания в секундах перед тем, как начать
       согласование).</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Вскоре после соединения ppp блокируется</para></question><answer>

<para>В версиях FreeBSD ранее 2.2.5, была возможна ситуация, 
       когда связь выключалась очень скоро после соединения из-за
       некорректной обработки запроса на согласования сжатия данных
       <emphasis remap=bf>ppp</emphasis>.  Это случалось, когда обе стороны пытались установить
       разные типы CCP (Compression Control Protocol).  Эта проблема
       сейчас решена, но если вы всё ещё используете старую версию
       <emphasis remap=bf>ppp</emphasis>, проблема может быть обойдена с помощью строки</para>
  
<para>       
<literallayout>          disable pred1
        </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Когда я выполняю команду shell для тестирования соединения,
          ppp блокируется
        </para></question><answer>

<para>Когда вы выполняете команду <emphasis remap=tt>shell</emphasis> или <emphasis remap=tt>!</emphasis>, <emphasis remap=bf>ppp</emphasis>
       запускает оболочку (если были заданы параметры, <emphasis remap=bf>ppp</emphasis> их 
       использует).  Ppp будет ждать окончания выполнения команды, прежде
       чем продолжить.  Если вы попытаетесь воспользоваться связью ppp
       после запуска команды, связь будет выглядеть заблокированной.  Это
       происходит из-за того, что <emphasis remap=bf>ppp</emphasis> ждёт завершения выполнения
       запущенной команды.</para>
 
<para>Если вам необходимо выполнять подобные команды, используйте
       команду <emphasis remap=tt>!bg</emphasis>.  В этом случае нужная команда будет выполняться
       в фоновом режиме, а ppp сможет продолжить обслуживание канала связи.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Ppp, обслуживающее нуль-модем, никогда не закрывается
        </para></question><answer>

<para><emphasis remap=bf>Ppp</emphasis> не может определить, что соединение было закрыто.
       Это происходит из-за метода использования сигнальных линий 
       нуль-модемного кабеля.  При использовании такого типа соединения
       всегда включайте LQR.</para>
  
<para>       
<literallayout>          enable lqr
        </literallayout>
</para>
  
<para>По умолчанию LQR включается, если это было затребовано с
       противоположной стороны на этапе согласования параметров соединения.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>В режиме -auto ppp неожиданно начинает звонить</para></question><answer>

<para>Если <emphasis remap=bf>ppp</emphasis> начинает неожиданно звонить, вы должны определить
       причину и задать фильтры dfilters для предотвращения подобных
       звонков.</para>
  
<para>Для выяснения причины такого поведения, используйте строку:</para>
  
<para>       
<literallayout>          set log +tcp/ip
        </literallayout>
</para>
  
<para>Это включит протоколирование всего трафика через соединение.  В
       следующий раз, когда неожиданно будет установлено соединение,
       вы установите причину по временным отметкам в файле протокола.</para>
  
<para>После этого вы можете запретить дозвонку при выясненных
       условиях.  Как правило, такие проблемы возникают из-за обращений
       к DNS.  Для предотвращения обращений к DNS и установления соединения
       (что <emphasis remap=bf>не</emphasis> запретит <emphasis remap=bf>ppp</emphasis> пропускать пакеты через уже
       установленное соединение), используйте такую комбинацию:</para>
  
<para>       
<literallayout>          set dfilter 1 deny udp src eq 53
          set dfilter 2 deny udp dst eq 53
          set dfilter 3 permit 0/0 0/0
        </literallayout>
</para>
  
<para>Это может вам не подойти, так как закроет возможность дозвонки
       по запросу - большинству программ нужно обратиться к DNS до того,
       как начать работать.</para>
 
<para>В случае DNS, вы должны попытаться определить, кто пытается
       определить имя хоста.  В большистве случаев виновным оказывается
       <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sendmail">sendmail</ulink>. Удостоверьтесь, что вы указали программе sendmail
       не осуществлять обращений к DNS в его конфигурационном файле.  
       Обратитесь к разделу о <link linkend="ispmail">настройке почты</link>
       за подробным описанием создания конфигурационного файла и что туда
       нужно поместить.  Вам может понадобиться добавить в файл <filename>.mc</filename>
       строку:</para>
  
<para>       
<literallayout>          define(`confDELIVERY_MODE', `d')dnl
        </literallayout>
</para>
 
<para>Это заставит sendmail ставить все сообщения в очередь до
       тех пор, пока не будет запущена её обработка (как правило,
       sendmail запускается с параметрами ``-bd -q30m'', указывающие, что
       обрабатывать очередь нужно каждые 30 минут) или до тех пор, пока 
       не будет выполнена команда ``sendmail -q'' (может быть, из файла
       ppp.linkup).</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Что означают ошибки CCP</para></question><answer>

<para>В файле протокола появляются такие сообщения об ошибках:</para>
  
<para>       
<literallayout>          CCP: CcpSendConfigReq
          CCP: Received Terminate Ack (1) state = Req-Sent (6)
        </literallayout>
</para>
  
<para>Это происходит, если ppp пытается установить компрессию 
       типа Predictor1, а противоположная сторона не хочет устанавливать
       никакой компрессии. Эти сообщения безобидны, но если вы хотите
       от них избавиться, вы можете запретить компрессию Predictor1 и
       у себя тоже:</para>
  
<para>       
<literallayout>          disable pred1
        </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Ppp блокируется во время передачи файла с ошибками ввода-вывода
        </para></question><answer>

<para>В FreeBSD 2.2.2 и ранее существовала ошибка в драйвере устройства
       tun, которая не позволяла проходить пакетам размером, превышающим
       значене MTU интерфейса.  Приём пакета, большего, чем размер MTU,
       приводит к ошибке ввода-вывода, который протоколируется через syslogd.</para>
  
<para>Спецификация протокола ppp утверждает, что MRU, равное 1500,
       должно <emphasis remap=bf>всегда</emphasis> подходить как минимальное, несмотря на
       согласование LCP, таким образом, если сделать MTU меньше
       1500, ваш провайдер может начать передавать пакеты размером 1500,
       несмотря ни на что, и вы это почувствуете - ваше соединение
       заблокируется.</para>
  
<para>Проблема может быть обойдена, если никогда не ставить MTU,
       меньшее, чем 1500, для FreeBSD 2.2.2 и ранее.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Почему ppp не протоколирует скорость соединения?
        </para></question><answer>

<para>Для вывода протокола взаимодействия с модемом вам нужно
       включить следующее:</para>
  
<para>       
<literallayout>          set log +connect
        </literallayout>
</para>
  
<para>Это заставит <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ppp">ppp</ulink>
       протоколировать всё вплоть до последней прочтённой через "expect"
       строки.</para>
 
<para>Если вы хотите видеть скорость соединения и используете
       PAP или CHAP (и поэтому вам не нужно определять никаких сценариев
       входа через "set login" после получения строки CONNECT сценарием
       дозвонки dial), вы должны указать ppp, что нужно ожидать полную
       строку CONNECT, вроде следующего:</para>
  
<para>       
<literallayout>          set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \"\" ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT \\c \\n"
        </literallayout>
</para>
 
<para>Здесь мы получили строку CONNECT, ничего не посылаем, затем
       ожидаем символа перевода строки, заставляя <emphasis remap=bf>ppp</emphasis> принять
       полный ответ модема.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Ppp игнорирует символ `\' в chat-скрипте</para></question><answer>

<para>Ppp обрабатывает каждую строку в ваших конфигурационных файлах, так что
  он может проинтерпретировать строку вида
  <emphasis remap=tt>set phone "123 456 789"</emphasis> правильно (и
  обнаружить. что номер является на самом деле
  <emphasis remap=bf>единственным</emphasis> аргументом. Для того, чтобы
  указать символ `&quot;', вы должны экранировать его символом
  обратного слэша (`\').</para>

<para>Когда интерпретатор chat обрабатывает каждую строку, он ещё раз
  просматривает аргумент для того, чтобы найти какую-либо специальную
  последовательность типа `\P' или `\T' (обратитесь к
  Справочнику).  В результате этой двойной интерпретации вы должны всегда
  использовать правильное число экранирующих символов.</para>
 
<para>Если вам нужно передать символ `\', например, вашему модему,
  вам необходимо указать что-то типа:</para>
 
<para>
  <literallayout>
    set dial "\"\" ATZ OK-ATZ-OK AT\\\\X OK"
  </literallayout>
</para>
 
<para>что приведёт к такой последовательности:</para>
 
<para>       
  <literallayout>
    ATZ
    OK
    AT\X
    OK
  </literallayout>
</para>
 
<para>или</para>
 
<para>
<literallayout>          set phone 1234567
          set dial "\"\" ATZ OK ATDT\\T"
        </literallayout>
</para>
  
<para>что даст такую последовательность:</para>
  
<para>       
<literallayout>          ATZ
          OK
          ATDT1234567
        </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Ppp получает ошибку защиты, но я не вижу файла <filename>ppp.core</filename>
        </para></question><answer>

<para>Ppp (или любая другая программа такого рода) никогда не
       создаёт файлов дампа памяти.  Так так ppp запускается с
       эффективным uid, равным 0, то операционная система не будет 
       записывать дамп памяти ppp на диск перед его завершением.  Если,
       однако ppp <emphasis remap=bf>всё же</emphasis> прекратит работу из-за нарушения защиты,
       или по другому сигналу, который вызывает создание дампа памяти,
       <emphasis remap=bf>и</emphasis> вы уверены, что используете самую последнюю версию (смотрите
       самое начало раздела), то вы должны сделать следующее:</para>
  
<para>       
<literallayout>          $ tar xfz ppp-*.src.tar.gz
          $ cd ppp*/ppp
          $ echo STRIP= &gt;&gt;Makefile
          $ echo CFLAGS+=-g &gt;&gt;Makefile
          $ make clean all
          $ su
          # make install
          # chmod 555 /usr/sbin/ppp
        </literallayout>
</para>
  
<para>Теперь у вас есть отладочная версия ppp. Вам нужно
       стать суперпользователем для запуска ppp, так как соответствующие
       биты прав были убраны. Когда запустите ppp, обратите особое внимание
       на то, какой каталог у вас был текущим на этот момент.</para>
  
<para>Итак, если ppp получит ошибку нарушения защиты, он сбросит дамп 
       памяти с именем ppp.core.  Затем вам нужно сделать следующее:</para>
  
<para>       
<literallayout>          $ su
          # gdb /usr/sbin/ppp ppp.core
          (gdb) bt
          .....
          (gdb) f 0
          .....
          (gdb) i args
          .....
          (gdb) l
          .....
        </literallayout>
</para>
  
<para>Вся эта информация должна быть предоставлена вместе с вашим
       вопросом, чтобы проблему можно было продиагностировать.</para>
  
<para>Если вы умеете обращаться с gdb, вы можете попробовать найти
       причины образования дампа, а также адреса и значения относящихся
       к этому переменных.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Процесс, вызвавший прозвонку в режиме auto, никогда не получает
          затребованного соединения
        </para></question><answer>

<para>Эта проблема проявлялась, когда <emphasis remap=bf>ppp</emphasis> в режиме auto был
       настроен на динамическое согласование локального IP-адреса с
       противоположной стороной.  Это исправлено в последней версии -
       поищите на странице справочника слово <emphasis remap=bf>iface</emphasis>.</para>
  
<para>Причиной было то, что когда эта программа использует системный
       вызов <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?connect">connect(2)</ulink>, для сокета назначается IP-адрес tun-интерфейса.
       Ядро создаёт первый исходящий пакет и записывает его в устройство
       tun. Затем <emphasis remap=bf>ppp</emphasis> читает пакет и устанавливает соединение.  Если
       в результате согласования <emphasis remap=bf>ppp</emphasis> динамического IP-адреса,
       адрес интерфейса менется, сокет будет работать некорректно.  Любые
       IP-пакеты, передаваемые через сокет, будут отброшены.  Если даже
       этого не произойдёт, ответные данные не будут достигать отправителя,
       так как этот адрес больше ему не принадлежит.</para>
  
<para>Теоретически есть несколько способов решить эту проблему.
       Лучше всего, если противоположная сторона назначит интерфейсу тот же
       самый IP-адрес <emphasis remap=tt>:-)</emphasis>  Текущая версия <emphasis remap=bf>ppp</emphasis> именно так и
       поступает, более ранние реализации этого не делали.</para>
  
<para>Самым простым решением будет просто никогда не менять IP-адрес
       tun-интерфейса, а вместо этого изменять на лету все исходящие
       пакеты так, чтобы IP-адрес источника менялся с IP-адреса интерфейса
       на согласованный с противоположной стороной.  Это, в сущности, то же
       самое, что делает опция <emphasis remap=tt>iface-alias</emphasis> в последней версии <emphasis remap=bf>ppp</emphasis>
       (с помощью библиотеки <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?libalias">libalias(3)</ulink>
       и ключа <option>-alias</option> для ppp) - она отслеживает все назначенные
       ранее интерфейсу адреса и замещает их на последний из назначенных.</para>
  
<para>Другой возможный (и наверное, самый надёжный) способ - это
       создать системный вызов, меняющий IP-адреса всем уже связанным
       сокетам.  <emphasis remap=bf>Ppp</emphasis> использовал бы этот вызов для модификации сокетов
       всех работающих программ после согласования нового IP-адреса.  Этот
       же самый системный вызов могли бы использовать клиенты DHCP, когда
       они осуществляют повторную привязку к сокету.</para>
  
<para>Ещё одной возможностью является резрешение интерфейсу становиться
       активным без IP-адреса.  Исходящим пакетам будет даваться IP адрес
       255.255.255.255 до тех пор, пока не будет дан ioctl-запрос SIOCAIFADDR.
       приводящий к полной привязке сокета.  <emphasis remap=bf>Ppp</emphasis> нужно будет изменять
       IP-адрес источника и контрольную сумму пакета, только если он
       установлен в 255.255.255.255. Это, однако, является некоторым
       хаком, так как ядро будет посылать некорректные пакеты на не полностью
       сконфигурированный интрерфейс, в предположении, что существует
       механизм исправления этих пакетов.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>          Почему большинство игр не работает с опцией -alias?
        </para></question><answer>

<para>Причиной, по которой игры и подобные программы не работают
       с библиотекой libalias заключается в том, что внешняя машина будет
       пытаться открыть соединение или посылать (нежданные) UDP пакеты на
       машину внутренней сети.  Программное обеспечение, обеспечивающее
       опцию -alias, не знает о том, что должна посылать эти пакеты машине
       внутренней сети.</para>
  
<para>Чтобы это всё же заработало, удостоверьтесь, что единственной
       запущенной программой является программное обеспечение, с которым
       вы испытываете проблемы, затем напустите tcpdump на 
       tun-интерфейс маршрутизатора либо включите протоколирование tcp/ip
       в ppp (``set log +tcp/ip'') на маршрутизаторе.</para>
  
<para>Когда вы запустите некорректно работающее программное обеспечение,
       вы должны увидеть пакеты, проходящие через маршрутизатор.  Когда
       что-то начнёт приходить извне, оно будет отброшено (в этом-то и
       проблема).  Заметьте номер порта получателя этих пакетов, затем
       завершите работу вашего программного обеспечения.  Выполните эту
       процедуру несколько раз для того, чтобы убедиться, что номер порта
       постоянен.  Если это так, то следующая строчка в соответствующем
       разделе /etc/ppp/ppp.conf заставит программное обеспечение
       функционировать нормально:</para>
  
<para>       
<literallayout>          alias port proto internalmachine:port port
        </literallayout>
</para>
  
<para>Здесь ``proto'' - это ``tcp'' либо ``udp'', ``internalmachine'' -
       это машина, которой вы хотите перенаправлять пакеты, и ``port'' - это
       номер порта получателя пакетов.</para>
  
<para>Несомненно, вы не сможете использовать программное обеспечение на
       других машинах, не изменяя указанную выше команду, а также запускать
       программное обеспечение на двух машинах внутри сети одновременно -
       в конце концов, внешний мир видит всю вашу сеть как единственную
       машину.</para>
  
<para>Есои номера портов непостоянны, есть ещё три варианта:</para>
  
<para><emphasis remap=bf>1)</emphasis> Настройте поддержку этого в libalias.  Примеры 
       ``особых случаев'' можно найти в /usr/src/lib/libalias/alias_*.c 
       (alias_ftp.c - хорошее начало).  Это означает, что вам нужно будет
       использовать чтение некоторых распознаваемых исходящих пакетов,
       обнаруживать команды для установления внешней машиной обратной связи
       на внутреннюю машину на конкретный (случайный) порт и настраивать
       ``маршрут'' в таблице соответствий так, чтобы последующие пакеты
       проходили нормально.</para>
  
<para>Это самое трудоёмкое решение, но оно наилучшее и позволит
       программному обеспечению работать на нескольких машинах.</para>
  
<para><emphasis remap=bf>2)</emphasis> Используйте прокси.  Приложение может поддерживать,
       например, socks5 или (как в случае ``cvsup'') может иметь
       режим ``passive'', обходящийся без запросов к противоположной
       стороне на открытие обратного соединения.</para>
  
<para><emphasis remap=bf>3)</emphasis> Переназначьте всё на внутреннюю машину с помощью
       команды ``alias addr''.  Это решение в лоб.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Кто-нибудь составляет список полезных номеров портов?
     </para></question><answer>

<para>Пока нет, но ниже находится список, могущий таковым стать (если
     к этому будет проявлен какой-либо интерес).  В каждом примере <emphasis
     remap=tt>internal</emphasis> должно быть заменено IP адресом машины,
     участвующей в игре.</para>
  
<para>         
<itemizedlist>

<listitem>
<para><emphasis remap=bf>Quake</emphasis>
</para>

<para><emphasis remap=tt>alias port udp internal:6112 6112</emphasis></para>

<para>Альтернативное решение, обеспечивающее поддержку прокси для Quake, можно
     найти на сервере <ulink 
     URL="http://www.battle.net/support/proxy/">www.battle.net</ulink>.</para>
</listitem>

</itemizedlist>
</para>

<para>
<itemizedlist>

<listitem>
<para><emphasis remap=bf>Quake 2</emphasis>
</para>

<para><emphasis remap=tt>alias port udp internal:27901 27910</emphasis></para>
</listitem>

</itemizedlist>
</para>  

<para>
<itemizedlist>

<listitem>
<para><emphasis remap=bf>Red Alert</emphasis>
</para>

<para><emphasis remap=tt>alias port udp internal:8675 8675</emphasis></para>

<para><emphasis remap=tt>alias port udp internal:5009 5009</emphasis></para>
</listitem>

</itemizedlist>
</para>

<para>
<itemizedlist>

<listitem>
<para><emphasis remap=bf>Half Life</emphasis>
</para>

<para><emphasis remap=tt>alias port udp internal:27005 27015</emphasis></para>
</listitem>

</itemizedlist>
</para>

<para>
<itemizedlist>

<listitem>
<para><emphasis remap=bf>PCAnywhere 8.0</emphasis>
</para>

<para><emphasis remap=tt>alias port udp internal:5632 5632</emphasis></para>

<para><emphasis remap=tt>alias port tcp internal:5631 5631</emphasis></para>
</listitem>

</itemizedlist>
</para>

</answer></qandaentry>

<qandaentry><question>
<para>Что такое ошибки FCS?</para></question><answer>

<para>FCS является сокращением от <emphasis remap=bf>F</emphasis>rame <emphasis remap=bf>C</emphasis>heck <emphasis remap=bf>S</emphasis>equence
       (контроль последовательности кадров).  Каждый кадр ppp имеет
       контрольную сумму для проверки того, что принятые данные совпадают
       с переданными.  Если FCS принятого пакета некорректна, пакет 
       отбрасывается и счётчик FCS для HDLC увеличиваетя.  Значения ошибок
       уровня HDLC можно вывести командой <emphasis remap=tt>show hdlc</emphasis>.</para>
  
<para>Если у вас плохая линия (или драйвер коммуникационного адаптера
       отбрасывает пакеты), ошибки FCS неизбежны.  Это обычно не является
       причиной для волнений, хотя это существенно замедляет протоколы
       компрессии.  Если у вас внешний модем, проверьте качество
       экранирования соединительного кабеля - это может избавить от
       проблемы.</para>
  
<para>Если ваша связь замирает, как только вы соединились и
       наблюдается большое количество ошибок FCS, это может быть вызвано
       не полной прозрачностью канала для 8-битовых данных.  Проверьте, что
       модем не использует программного управоения потоком, используйте
       команду <literal>set accmap 0x000a0000</literal> для указания <emphasis remap=bf>ppp</emphasis>
       экранировать символы ^Q и ^S.</para>
  
<para>Другой причиной слишком большого количества ошибок FCS может
       быть прекращение противоположной стороной сеанса <acronym>PPP</acronym>.
       В этом случае Вам может понадобиться включить протоколирование
       <emphasis remap=tt>async</emphasis> для проверки того, не являются ли поступаемые из линии
       данные на самом деле приглашениями login или shell.  Если вы 
       получили приглашение shell с противоположной стороны, возможно
       завершение ppp без обрыва связи командой <emphasis remap=tt>close lcp</emphasis>
       (последующая команда <emphasis remap=tt>term</emphasis> снова вернёт вас к приглашению
       shell на удалённой машине).</para>
  
<para>Если ничего в файле протокола не говорит о том, что связь
       была прервана, вы должны спросить у администратора удалённой
       машины (вашего провайдера), почему сеанс был закрыт.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Ничего не помогает - я уже отчаялся!</para></question><answer>

<para>Если всё уже перепробовано, и ничего не получается, пошлите нам
       максимальное количество информации, ваш конфигурационный файл, 
       способ запуска <emphasis remap=bf>ppp</emphasis>, соответствующие части файла протокола, и
       вывод команды <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?netstat">netstat -rn</ulink>
       (до и после соединения) в адрес списка рассылки
       <ulink URL="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</ulink> или в телеконференцию
       <ulink URL="news:comp.unix.bsd.freebsd.misc">comp.unix.bsd.freebsd.misc</ulink>, и может быть, кто-нибудь
       укажет вам верное направление.</para>
 
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="serial">
<title>Коммуникационные адаптеры</title>

<para>В этом разделе освещены вопросы о работе последовательных
   адаптеров во FreeBSD.  Протоколы PPP и SLIP рассматриваются в разделе,
   посвящённом <xref linkend="networking" remap="работе в сети">.</para>

<qandaset><qandaentry><question>
<para>Как узнать, какие последовательные порты были обнаружены FreeBSD?
     </para></question><answer>

<para>При загрузке ядра FreeBSD оно будет пытаться найти последовательные
     порты, с поддержкой которых было откомпилировано.  Вы можете
     повнимательней присмотреться к выдаваемым сообщениям либо выполнить
     команду</para>
  
<para>     
<literallayout>        dmesg | grep sio
      </literallayout>
</para>
  

  
<para>после загрузки и запуска системы.</para>
  

  
<para>Вот пример вывода указанной команды:</para>
  
<para>     
<literallayout>        sio0 at 0x3f8-0x3ff irq 4 on isa
        sio0: type 16550A
        sio1 at 0x2f8-0x2ff irq 3 on isa
        sio1: type 16550A
      </literallayout>
</para>
  

  
<para>Здесь присутствуют два последовательных порта.  Первый использует
     irq 4, порт ввода/вывода <literal>0x3f8</literal> и построен на микросхеме UART типа
     16550A.  Второй использует тот же тип микросхемы, но использует irq 3 и
     адрес порта ввода/вывода <literal>0x2f8</literal>.  Внутренние модемы выглядят точно
     также, как последовательные порты, за исключением того, что к ним
     всегда ``подключен'' модем.</para>
 
<para>В ядро <acronym>GENERIC</acronym> встроена поддержка двух
     последовательных портов, с irq и адресами портов ввода/вывода, как в
     примере выше.  Если эти настройки не соответствуют вашим, или если вы
     добавили внутренние модемы, или у вас больше последовательных портов, чем
     описано в ядре, просто переконфигурируйте ядро.  За дополнительной
     информацией обратитесь к разделу <link linkend="make-kernel">о построении
     ядра</link>.</para>

</answer></qandaentry>

<qandaentry><question>
<para>        Как узнать, какие внутренние модемы были обнаружены FreeBSD?
      </para></question><answer>

<para>Посмотрите ответ на предыдущий вопрос.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Я только что поставил 2.0.5 и не нашёл устройств <emphasis remap=tt>tty0X</emphasis>!
      </para></question><answer>

<para>Не волнуйтесь, они были объединены с устройствами <emphasis remap=tt>ttydX</emphasis>.
     Вам придётся подправить конфигурационные файлы, которые вы раньше
     использовали.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Как осуществляется доступ к последовательным портам во FreeBSD?
      </para></question><answer>

<para>Третий последовательный порт, <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sio">sio2</ulink> (который в
     DOS называется COM3), называется <filename>/dev/cuaa2</filename> для устройств,
     выполняющих исходящие звонки, и <filename>/dev/ttyd2</filename> для устройств,
     принимающих входящие звонки.  Какая разница между этими двумя классами
     устройств?</para>
  

  
<para>Вы должны использовать <emphasis remap=tt>ttydX</emphasis> для входящих соединений.  При
     открытии <filename>/dev/ttydX</filename> в блокирующем режиме, процесс будет 
     ожидать неактивности соответствующего устройства <emphasis remap=tt>cuaaX</emphasis>, а затем
     появления сигнала о наличии несущей.  При открытии устройства 
     <emphasis remap=tt>cuaaX</emphasis>, он проверяет, что последовательный порт не используется
     уже устройством <emphasis remap=tt>ttydX</emphasis>.  Если порт доступен, он ``похищает'' его
     у устройства <emphasis remap=tt>ttydX</emphasis>.  Также устройство <emphasis remap=tt>cuaXX</emphasis> не следит за
     наличием несущей.  С такой схемой работы и модемом, находящимся в
     режиме автоответа, вы можете позволить пользователям входить в
     систему и в то же время можете осуществлять исходящие звонки, а
     система позаботится о возможных конфликтах.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Как включить поддержку многопортовых последовательных адаптеров?
      </para></question><answer>

<para>Повторим ещё раз: информация о конфигурировании ядра содержится в 
     разделе, посвящённом этому вопросу.  Для многопортовых последовательных
     адаптеров в файле конфигурации ядра поместите ключевое слово
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?sio">sio</ulink>
     для каждого порта на адаптере.  Но irq и вектор должен быть указан
     только у одного порта.  Все порты на адаптере должны использовать одно
     и то же irq.  Используйте последний последовательный порт для указания
     irq. Также включите опцию <symbol>COM_MULTIPORT</symbol>.</para>
  

  
<para>В следующем примере дано описание 4-портового адаптер AST на irq 7:</para>
  
<para>     
<literallayout>        options "COM_MULTIPORT"
        device sio4 at isa? port 0x2a0 tty flags 0x781
        device sio5 at isa? port 0x2a8 tty flags 0x781
        device sio6 at isa? port 0x2b0 tty flags 0x781
        device sio7 at isa? port 0x2b8 tty flags 0x781 irq 7 vector siointr
      </literallayout>
</para>
  

  
<para>Флаги указывают, что управляющий порт имеет младший номер
     устройства 7 (<literal>0x700</literal>), включена диагностика на время обнаружения
     (<literal>0x080</literal>), и все порты используют одно и то же irq (<literal>0x001</literal>).</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Может ли FreeBSD использовать несколько многопортовых адаптеров
        с одинаковым irq?
      </para></question><answer>

<para>Пока нет.  Вы должны назначить уникальный irq для каждого адаптера.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Можно ли установить режим работы по умолчанию для порта?
      </para></question><answer>

<para>Вашему приложению может понадобиться открыть устройства
     <emphasis remap=tt>ttydX</emphasis> (или <emphasis remap=tt>cuaaX</emphasis>).  Когда процесс открывает устройство,
     оно имеет набор параметров ввода/вывода.  Вы можете посмотреть их
     значения командой</para>
  
<para>     
<literallayout>        stty -a -f /dev/ttyd1
      </literallayout>
</para>
  

  
<para>Когда вы меняете настройки этого устройства, они действуют
     вплоть до закрытия устройства.  При повторном открытии оно будут
     иметь режимы работы по умолчанию.  Чтобы изменить значения режимов
     работы по умолчанию, вы можете открыть и изменить настройки в
     устройстве ``начального состояния''.  Например, чтобы сделать режимом
     по умолчанию режим <acronym>CLOCAL</acronym>, 8 бит, и управление потоком
     <filename>XON/XOFF</filename> для устройства ttyd5, сделайте следующее:</para>
  
<para>     
<literallayout>        stty -f /dev/ttyid5 clocal cs8 ixon ixoff
      </literallayout>
</para>
  

  
<para>Для выполнения таких действий предназначен скрипт
     <filename>/etc/rc.serial</filename>.  Теперь при открытии устройства <emphasis remap=tt>ttyd5</emphasis>
     приложение будет иметь именно такой режим работы с портом.  Оно,
     однако. может изменить эти режимы по своему усмотрению.</para>
  

  
<para>Вы можете запретить изменение приложением некоторых режимов работы,
     выполнив настройки устройства ``постоянного состояния''.  Например,
     чтобы сделать скорость работы <emphasis remap=tt>ttyd5</emphasis> постоянно равной 57600 bps,
     выполните</para>
  
<para>     
<literallayout>        stty -f /dev/ttyld5 57600
      </literallayout>
</para>
  

  
<para>Теперь, если приложение откроет <emphasis remap=tt>ttyd5</emphasis> и попытается изменить
     скорость работы порта, она всё равно останется равной 57600 bps.</para>
  

  
<para>Естественно, вы должны сделать устройства начального и
     постоянного состояний доступными на запись только пользователю
     <emphasis remap=tt>root</emphasis>.  Скрипт <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?MAKEDEV">MAKEDEV</ulink>
     при создании файлов устройств этого <emphasis remap=bf>НЕ</emphasis> делает.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Как сделать вход через модем?</para></question><answer>

<para>Похоже, что вы хотите стать Internet-провайдером, да?  Сначала
     вам необходимо подключить к системе один или несколько модемов,
     которые могут работать в режиме автоответа.  Модем должен держать
     сигнал наличия несущей, только когда она присутствует.  Он должен
     вешать трубку и переинициализировать, когда сигнал готовности 
     устройства DTE (<acronym>DTR</acronym>) меняет состояние из включенного на
     выключенный.  Должно использоваться аппаратное (<filename>RTS/CTS</filename>)
     управление потоком или вовсе отсутствовать.  Ещё он должен работать
     на постоянной скорости с портом компьютера, но (что удобно для
     звонящих) с согласованием скорости передачи с другим модемом.</para>
  

  
<para>Для большинства модемов, поддерживающих набор команд Hayes,
     следующая последовательность команд выполнит эти настройки и
     сохранит их в энергонезависимой памяти:</para>
  
<para>     
<literallayout>        AT &amp;C1 &amp;D3 &amp;K3 &amp;Q6 S0=1 &amp;W
      </literallayout>
</para>
 
<para>Информация о том, как сделать эти настройки без обращения к терминальным
     программам MS-DOS, содержится в разделе о <link
     linkend="direct-at">посылке AT-команд</link>.</para>
 
<para>Затем опишите модем в файле <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ttys">/etc/ttys</ulink>.
     В нём перечислены все порты, с которых операционная система ожидает
     входа пользователей.  Добавьте строку, которая выглядит как эта:</para>
  
<para>     
<literallayout>        ttyd1 "/usr/libexec/getty std.57600" dialup on insecure
      </literallayout>
</para>
  

  
<para>В этой строке указано, что ко второму последовательному порту
     (<filename>/dev/ttyd1</filename>) подключен модем на скорости 57600 bps без
     контроля по чётности (<emphasis remap=tt>std.57600</emphasis>, что берётся из файла
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?gettytab">/etc/gettytab</ulink>).  Тип терминала для этого порта определён
     как ``dialup''.  Порт включен (``on'') и небезопасен (``insecure''),
     что означает, что попытки войти в систему пользователем root с этого
     порта будут отвергнуты.  Для портов, обслуживающих входящие звонки,
     как этот, используйте устройства <emphasis remap=tt>ttydX</emphasis>.</para>
  

  
<para>Использование слова ``dialup'' в качестве имени терминала является
     обычной практикой.  Многие пользователи включают в свои файлы
     .profile или .login скрипты для задания реального типа терминала, если
     начальным является тип dialup.  В примере порт описан небезопасным.
     Чтобы войти администратором на этом порту, вам нужно войти обычным
     пользователем, а затем командой ``<ulink URL="http://www.FreeBSD.org/cgi/man.cgi?su">su</ulink>'' стать
     пользователем <emphasis remap=tt>root</emphasis>.  Если порт имеет атрибут ``secure'', то
     пользователь <emphasis remap=tt>root</emphasis> может входить с этого порта непосредственно.</para>
  

  
<para>После модифицирования <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ttys">/etc/ttys</ulink>, вам
     нужно послать сигнал потери связи или <acronym>HUP</acronym> процессу <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?init">init</ulink>:</para>
  
<para>     
<literallayout>        kill -HUP 1
      </literallayout>
</para>
  

  
<para>Это заставит процесс init снова прочитать файл <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ttys">/etc/ttys</ulink>.
     Процесс init запустит процессы getty для всех включенных портов.
     Вы можете проверить, доступны ли входы с конкретного порта, выполнив
     команду</para>
  
<para>     
<literallayout>        ps -ax | grep '[t]tyd1'
      </literallayout>
</para>
  

  
<para>Вы должны увидеть нечто вроде следующего:</para>
  
<para>     
<literallayout>        747 ??  I      0:00.04 /usr/libexec/getty std.57600 ttyd1
      </literallayout>
</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Как подключить терминал к FreeBSD?</para></question><answer>

<para>Если вы собираетесь использовать другой компьютер в качестве
     терминала для FreeBSD, соедините их послежовательные порты 
     нуль-модемным кабелем.  Если у вас есть терминал, обратитесь к его
     документации.</para>
  

  
<para>Затем модифицируйте файл <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ttys">/etc/ttys</ulink>
     описанным выше способом.  Например, если вы подключаете терминал
     WYSE-50 к пятому последовательному порту, используйте такую строчку:</para>
  
<para>     
<literallayout>        ttyd4 "/usr/libexec/getty std.38400" wyse50 on secure
      </literallayout>
</para>
  

  
<para>В этом примере описан порт на <filename>/dev/ttyd4</filename>, имеющий
     терминал wyse50, подключенный на скорости 34800 bps без контроля по
     четности (<emphasis remap=tt>std.38400</emphasis> из <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?gettytab">/etc/gettytab</ulink>) и разрешён непосредственный вход пользователя
     <emphasis remap=tt>root</emphasis> (secure).</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Почему не удаётся запустить <emphasis remap=tt>tip</emphasis> или <emphasis remap=tt>cu</emphasis>?</para></question><answer>

<para>Скорее всего, в вашей системе запуск программ <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">tip</ulink> и <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?cu">cu</ulink> разрешён только
     пользователю <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?uucp">uucp</ulink> и членам группы <emphasis remap=tt>dialer</emphasis>.  Вы можете использовать
     группу <emphasis remap=tt>dialer</emphasis> для управления доступом к вашему модему или
     удалённым системам.  Достаточно добавить пользоватея в группу dialer.</para>
  

  
<para>Вы можете разрешить всем пользователям вашей системы запускать
     <emphasis remap=tt>tip</emphasis> и <emphasis remap=tt>cu</emphasis>, выполнив команды:</para>
  
<para>     
<literallayout>        # chmod 4511 /usr/bin/cu
        # chmod 4511 /usr/bin/tip
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Мой модем Hayes не поддерживается---что можно сделать?
      </para></question><answer>

<para>На самом деле страница справочника о программе <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">tip</ulink> устарела.
     Модемы Hayes поддерживаются системой.  Просто добавьте
     ``<literal>at=hayes</literal>'' в ваш файл <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?remote">/etc/remote</ulink>.</para>
  

  
<para>Драйвер модемов Hayes не достаточно умён, чтобы поддерживать
     некоторые из новых возможностей современных модемов---сообщения
     типа <acronym>BUSY</acronym>, <emphasis remap=tt>NO DIALTONE</emphasis>, или <emphasis remap=tt>CONNECT 115200</emphasis> будут
     приводить его в замешательство.  Вы должны выключить вывод таких
     сообщений при использовании программы <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">tip</ulink> (командой
     <emphasis remap=tt>ATX0&amp;W</emphasis>).</para>
  

  
<para>Таймаут по умолчанию для программы <emphasis remap=tt>tip</emphasis> равен 60 секундам.
     Ваш модем должен использовать меньшее значение, иначе tip будет
     думать, что у вас проблемы со связью.  Попробуйте <literal>ATS7=45&amp;W</literal>.</para>
  

  
<para>На самом деле <emphasis remap=tt>tip</emphasis> в том виде, каком поставляется, не 
     поддержимает можемы Hayes полностью.  Решением является редактирование
     файла <filename>tipconf.h</filename> в каталоге <filename>/usr/src/usr.bin/tip/tip</filename>.
     Чтобы это сделать, вам нужен дистрибутив исходных текстов системы.</para>
  

  
<para>Замените строку ``<emphasis remap=tt>#define HAYES 0</emphasis>'' на ``<emphasis remap=tt>#define HAYES
     1</emphasis>''.  Затем выполните ``<emphasis remap=tt>make</emphasis>'' и ``<emphasis remap=tt>make install</emphasis>''.  После
     этих действий всё работает замечательно.</para>
  

  
</answer></qandaentry>

<qandaentry><question
id="direct-at">
<para>        Как я должен ввести эти AT-команды?
      </para></question><answer>

<para>Создайте так называемое ``<emphasis remap=tt>прямое</emphasis>'' описание в вашем файле
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?remote">/etc/remote</ulink>.  Например, если ваш модем подключен к первому
     последовательному порту, <filename>/dev/cuaa0</filename>, сделайте такую строку:</para>
  
<para>     
<literallayout>        cuaa0:dv=/dev/cuaa0:br#19200:pa=none
      </literallayout>
</para>
  

  
<para>Укажите максимальную скорость обмена с портом, поддерживаемую
     модемом в параметре br.  Затем выполните команду <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">tip cuaa0</ulink> и
     вы подключитесь к модему.</para>
  

  
<para>Если в вашей системе нет устройства <filename>/dev/cuaa0</filename>, сделайте
     следующее:</para>
  
<para>     
<literallayout>        # cd /dev
        # ./MAKEDEV cuaa0
      </literallayout>
</para>
  

  
<para>Или используйте cu, войдя администратором, с такими параметрами:</para>
  
<para>     
<literallayout>        # cu -l``line'' -s``speed''
      </literallayout>
</para>
  

  
<para>где line - это имя последовательного порта (например,
     <filename>/dev/cuaa0</filename>), а speed - скорость работы модема с портом
     (например, <emphasis remap=tt>57600</emphasis>).  После ввода AT-команд, наберите
     <emphasis remap=tt>~.</emphasis> для завершения работы.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Знак <emphasis remap=tt><@></emphasis> для описания характеристики pn
     не работает!</para></question><answer>

<para>Знак <emphasis remap=tt><@></emphasis> в характеристике, описывающей
     номер телефона, указывает программе tip обратиться к файлу <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?phones(5)">/etc/phones</ulink>
     для поиска телефонного номера.  Однако знак <emphasis
     remap=tt><@></emphasis> является также и специальным символом в файлах
     описания характеристик типа <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?remote">/etc/remote</ulink>.
     Экранируйте его символом обратного слэша:</para>
 
<para>     
<literallayout>        pn=\@
      </literallayout>
</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как набрать телефонный номер из командной строки?</para></question><answer>

<para>Поместите так называемое ``<emphasis remap=tt>общее</emphasis>'' описание в ваш файл
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?remote">/etc/remote</ulink>.  Например:</para>
  
<para>     
<literallayout>        tip115200|Dial any phone number at 115200 bps:\
        :dv=/dev/cuaa0:br#115200:at=hayes:pa=none:du:
        tip57600|Dial any phone number at 57600 bps:\
        :dv=/dev/cuaa0:br#57600:at=hayes:pa=none:du:
      </literallayout>
</para>
  

  
<para>Тогда вы сможете выполнять команды вроде ``<command>tip -115200
     5551234</command>''.  Если предпочитаете программу <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?cu">cu</ulink>, а не <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">tip</ulink>, используйте общее описание для cu:</para>
  
<para>     
<literallayout>        cu115200|Use cu to dial any number at 115200bps:\
        :dv=/dev/cuaa1:br#57600:at=hayes:pa=none:du:
      </literallayout>
</para>
  

  
<para>и выполняйте команду ``<command>cu 5551234 -s 115200</command>''.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Нужно ли при этом каждый раз задавать скорость работы с портом?
      </para></question><answer>

<para>Создайте описание для <emphasis remap=tt>tip1200</emphasis> или <emphasis remap=tt>cu1200</emphasis>, но не
     останавливайтесь на этом и используйте подходящую скорость
     при задании характеристики br. <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">Tip</ulink> полагает,
     что хорошим значением по умолчанию является 1200 bps, поэтому он
     использует описание для ``<emphasis remap=tt>tip1200</emphasis>''.  Однако вас никто не
     заставляет использовать именно эту скорость.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Мне нужно иметь доступ к нескольких хостам через терминальный сервер.
      </para></question><answer>

<para>Вместо того, чтобы каждый раз ожидать подключения к терминальному
     серверу, а затем набирать команду ``<emphasis remap=tt>CONNECT &lt;host&gt;</emphasis>'',
     используйте характеристику <emphasis remap=tt>cm</emphasis> программы tip.  Например, вот такое
     описание в файле <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?remote">/etc/remote</ulink>:</para>
  
<para>     
<literallayout>        pain|pain.deep13.com|Forrester's machine:\
        :cm=CONNECT pain\n:tc=deep13:
        muffin|muffin.deep13.com|Frank's machine:\
        :cm=CONNECT muffin\n:tc=deep13:
        deep13:Gizmonics Institute terminal server:\
        :dv=/dev/cua02:br#38400:at=hayes:du:pa=none:pn=5551234:
      </literallayout>
</para>
  

  
<para>позволит вам просто набрать ``<emphasis remap=tt>tip pain</emphasis>'' или 
     ``<emphasis remap=tt>tip muffin</emphasis>'' для подключения к хостам pain или muffin и
     ``<emphasis remap=tt>tip deep13</emphasis>'' для доступа к терминальному серверу.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Может ли tip использовать несколько телефонов для одного сайта?
      </para></question><answer>

<para>Эта проблема возникает, когда в университете есть пара
     модемных входов и несколько тысяч студентов, пытающихся ими
     воспользоваться...</para>
 
<para>Создайте описание для вашего университета в файле <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?remote">/etc/remote</ulink> и
     используйте символ <emphasis remap=tt><\@></emphasis> при задании
     характеристики <emphasis remap=tt>pn</emphasis>:</para>
  
<para>     
<literallayout>        big-university:\
        :pn=\@:tc=dialout
        dialout:\
        :dv=/dev/cuaa3:br#9600:at=courier:du:pa=none:
      </literallayout>
</para>
  

  
<para>После этого пропишите номера телефонов университета в файле
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?phones">/etc/phones</ulink>:</para>
  
<para>     
<literallayout>        big-university 5551111
        big-university 5551112
        big-university 5551113
        big-university 5551114
      </literallayout>
</para>
  

  
<para><ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">Tip</ulink> будет пытаться воспользоваться всеми телефонными номерами
     в указанном порядке, прежде чем завершить работу.  Если вы хотите,
     чтобы попытки были продолжены, запустите <emphasis remap=tt>tip</emphasis> в цикле while.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Почему нужно нажимать CTRL+P дважды для посылки одного этого         символа?
      </para></question><answer>

<para>По умолчанию CTRL+P является специальным символом ``принудительного
     ввода'', используемым для указания программе <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">tip</ulink>, что
     следующий символ является байтом данных.  Вы можете назначить
     функцию символа принудительного ввода любому другому символу с помощью
     команды <emphasis remap=tt>~s</emphasis>, которая предназначена для ``установки значений
     переменных''.</para>
  

  
<para>Наберите ``<literal>~sforce=&lt;single-char&gt;</literal>'' с начала новой
     строки.  Здесь <emphasis remap=tt>&lt;single-char&gt;</emphasis> - любой одиночный символ.  
     Если вы не зададите <emphasis remap=tt>&lt;single-char&gt;</emphasis>, то символом
     принудительного ввода будет нулевой символ, который можно получить,
     набрав CTRL+2 или CTRL+SPACE.  Подходящим значением для
     <emphasis remap=tt>&lt;single-char&gt;</emphasis> может быть SHIFT+CTRL+6, который используется
     только некоторыми терминальными серверами.</para>
  

  
<para>Вы можете задать любое значение для символа принудительного ввода,
     указав его в вашем файле <filename>&#36;HOME/.tiprc</filename>:</para>
  
<para>     
<literallayout>        force=&lt;single-char&gt;
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Неожиданно всё стало набираться ЗАГЛАВНЫМИ БУКВАМИ?</para></question><answer>

<para>Должно быть, вы нажали CTRL+A, символ перехода в верхний регистр
     программы <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?tip">tip</ulink>, специально предназначенный для тех, у кого не работает
     клавиша caps-lock.  Используйте команду <emphasis remap=tt>~s</emphasis>, как это было сделано
     выше, и установите значение переменной ``raisechar'' во что-нибудь
     подходящее.  В действительности вы можете установить его равным
     символу принудительного ввода, если не собираетесь пользоваться этими
     особенностями.</para>
  

  
<para>Следующий пример файла .tiprc должен понравиться пользователям
     редактора Emacs, которым часто приходится нажимать CTRL+2 и CTRL+A:</para>
  
<para>     
<literallayout>        force=^^
        raisechar=^^
      </literallayout>
</para>
  

  
<para>Здесь ^^ это SHIFT+CTRL+6.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Как можно передавать файлы с помощью программы <emphasis remap=tt>tip</emphasis>?
      </para></question><answer>

<para>Если вы соединились с другой UNIX-системой, вы можете посылать и 
     принимать файлы командами <emphasis remap=tt>~p</emphasis> (передача) и <emphasis remap=tt>~t</emphasis> (приём).  Эти
     команды запускают программы <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?cat">cat</ulink> и <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?echo">echo</ulink> на
     удалённой системе, чтобы принять и послать файлы.  Синтаксис вызова
     имеет такой вид:</para>
  
<para>     
<literallayout>        ~p &lt;local-file&gt; [&lt;remote-file&gt;]
        ~t &lt;remote-file&gt; [&lt;local-file&gt;]
      </literallayout>
</para>
  

  
<para>Контроль ошибок передачи при этом не осуществляется, так что вам
     может понадобиться другой протокол передачи, например, zmodem.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Как использовать zmodem вместе с <emphasis remap=tt>tip</emphasis>?</para></question><answer>

<para>Первым делом установите одну из программ, реализующих протокол
     zmodem из коллекции портов (там есть парочка в категории comms,
     <ulink URL="http://www.FreeBSD.org/cgi/ports.cgi?^lrzsz">lrzsz</ulink>
     и <ulink URL="http://www.FreeBSD.org/cgi/ports.cgi?^rzsz">rzsz</ulink>).</para>
  

  
<para>Для приёма файлов запустите программу передачи на противоположной
     стороне.  Затем нажмите enter и наберите ``<emphasis remap=tt>~C rz</emphasis>'' (или
     ``<emphasis remap=tt>~C lrz</emphasis>'', если у вас установлеи lrzsz) для начала приёма их на
     локальную машину.</para>
  

  
<para>Для посылки файлов, запустите программу приёма на противоположной
     стороне.  Затем нажмите enter и наберите ``<emphasis remap=tt>~C sz &lt;files&gt;</emphasis>''
     (или ``<emphasis remap=tt>~C lsz &lt;files&gt;</emphasis>'') для посылки их на удалённую
     систему.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>       FreeBSD не распознаёт последовательные порты на моей машине, хотя
       все настройки верны.
     </para></question><answer>

<para>Микросхемы UART производства Acer на материнских платах и адаптерах
    распознаются некорректно.  Для решения этой проблемы попробуйте 
    воспользоваться патчем с сервера <ulink URL="http://www.lemis.com/serial-port-patch.html">www.lemis.com</ulink>.</para>
  

  
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="misc">
<title>Разное</title>

<qandaset><qandaentry><question>
<para>Почему FreeBSD использует гораздо больше места в разделе подкачки, чем
     Linux?</para></question><answer>

<para>Это только кажется, что для FreeBSD требуется больше места на разделе
     подкачки, чем для Linux.  На самом деле это не так.  Главное отличие
     FreeBSD от Linux в этом плане заключается в том, что FreeBSD активно
     перемещает неиспользуемые страницы памяти, к которым не было обращений,
     в раздел подкачки, чтобы увеличить объём доступной физической памяти
     для активного использования.  Linux же перемещает страницы памяти в
     раздел подкачки только в крайнем случае.  Получаемое во FreeBSD
     увеличение нагрузки на раздел подкачки компенсируется более эффективным
     использованием оперативной памяти.</para>
  
<para>Заметьте, что, хотя FreeBSD предпочитает использовать раздел подкачки,
     она не может сбросить все неактивные страницы в своп при полностью
     неактивной системе.  Так что вряд ли может возникнуть ситуация, когда,
     проснувшись рано утром, вы обнаружите, что вся ваша система находится в
     разделе подкачки, хотя она простаивала всю ночь.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>        Почему используются (и что из себя представляют) форматы выполнимых
        файлов a.aut и ELF?
      </para></question><answer>

<para>Для понимания того, почему FreeBSD использует формат <filename>a.out</filename>,
     вы должны сначала получить представление о трёх "основных" форматах
     выполнимых файлов для UNIX:</para>
  
<para>     
<itemizedlist>

<listitem>
<para><ulink URL="http://www.FreeBSD.org/cgi/man.cgi?a.out(5)">a.out</ulink>
     </para>

<para>Это самый старый, `классический' формат объектных файлов для UNIX.  В
     нём используется короткий и компактный заголовок с магическим числом в
     начале, которое часто используется для определения формата (за подробным
     описанием обратитесь к странице Справочника о <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?a.out(5)">a.out(5)</ulink>).
     Он содержит три загружаемых сегмента: .text, .data и .bss плюс таблицу
     символов и таблицу строк.</para>

</listitem>

<listitem>
<para><acronym>COFF</acronym>
       </para>

<para>Это формат объектных файлов SVR3.  Дополнительно в заголовок
       включена таблица секций, так что вы можете иметь их больше, чем только
       .text, .data и .bss.</para>
</listitem>

<listitem>
<para><acronym>ELF</acronym>
       </para>

<para>Преемник <acronym>COFF</acronym>, в который добавлены возможности иметь много
       секций и 32- или 64-разрядные значения.  Один большой минус:
       <acronym>ELF</acronym> был спроектирован также в предположении, что для каждой
       аппаратной платформы будет существовать только один ABI.  Это
       предположение достаточно некорректно, и даже в мире коммерческих
       реализаций SYSV (в котором имеется по крайней мере три ABI: SVR4,
       Solaris и SCO) это не так.</para>

<para>       </para>

<para>FreeBSD каким-то образом пытается решить эту проблему, предоставляя
     утилиту для <emphasis>пометки</emphasis> конкретного выполнимого файла
     <acronym>ELF</acronym> с информацией о ABI, с которым он совместим.
     Обратитесь к странице Справочника об утилите
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?brandelf">brandelf</ulink>
     за подробной информацией.</para>
</listitem>

</itemizedlist>
</para>
  
<para>FreeBSD выросла на "классических" традициях и традиционно использовала
     формат
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?a.out(5)">a.out</ulink>,
     технологию, опробованную и проверенную во многих
     вариациях BSD.  Хотя давно уже можно было компилировать и выполнять
     родные выполнимые файлы (и ядро) в формате <acronym>ELF</acronym>, FreeBSD с самого
     начала сопротивлялась переходу на <acronym>ELF</acronym> как на формат, используемый
     по умолчанию.  Почему?  Когда мир Linux делал болезненный переход к
     <acronym>ELF</acronym>, причин отвергнуть формат <filename>a.out</filename> было не так уж и много,
     разве что их негибкий механизм работы с совместно используемыми
     библиотеками, который был основан на таблице переходов, что делало
     построение таких библиотек очень затруднительным для разработчиков.
     Так как средства работы с <acronym>ELF</acronym> предоставляли решение этой проблемы
     и это было в общем-то "шагом вперёд" в любом случае, цена перехода была
     признана стоящей того и переход был сделан.</para>
  

  
<para>В случае FreeBSD, наш механизм работы с совместно используемыми
     библиотеками очень похож на механизм, применяемый в <emphasis remap=tt>SunOS</emphasis>,
     поэтому его очень легко использовать.  Однако, начиная с 3.0, FreeBSD
     официально поддерживает <acronym>ELF</acronym> как формат, используемый по умолчанию.
     И, хотя формат <filename>a.out</filename> поддерживается в полной мере, разработчики
     из проекта GNU, являющиеся авторами компилятора, который мы используем,
     больше не поддерживают формат <filename>a.out</filename>.  Это заставило нас поддерживать
     различные версии компилятора и компоновщика, и не позволило
     воспользоваться всеми возможностями последних разработок GNU.  
     Потребность в наличии реализации ISO-C++, в основном конструкторов и
     деструкторов, также привела к поддержке <acronym>ELF</acronym> в будущих релизах
     FreeBSD.</para>
  
</answer></qandaentry>

<qandaentry><question>
<para>Да, но почему так много разных форматов?</para></question><answer>

<para>Если вернуться в далёкое тёмное прошлое, то тогда компьютеры были
     очень просто устроены.  На них могла работать простая, маленькая
     система.  Формат a.out полностью решал задачу представления программ
     на простых системах (PDP-11).  Когда же люди перенесли unix с простых
     систем, они оставили a.out, так как его было достаточно для ранних
     реализаций unix для таких архитектур, как Motorola 68k, VAX, итд.</para>
  

  
<para>Затем какой-то умный инженер решил, что если он может заставить
     программное обеспечение делать некоторые тонкие манипуляции, то это
     позволит преодолеть некоторые ограничения при проектировании и позволит
     ядру процессора работать быстрее.  Когда это было сделано с новым типом
     аппаратуры (в наши дни известном как RISC), оказалось, что <filename>a.out</filename>
     плохо подходит для этой аппаратуры, поэтому было разработано много новых
     форматов для достижения большей производительности от такого аппаратного
     обеспечения, чем может дать простой, имеющий ограничения формат
     <filename>a.out</filename>.  Были разработаны такие форматы, как <acronym>COFF</acronym>, <acronym>ECOFF</acronym> и
     ещё несколько безвестных других со своими ограничениями, пока наконец
     все не остановились на формате <acronym>ELF</acronym>.</para>
  

  
<para>Вдобавок к этому, так как размеры программ стали достигать огромных
     размеров, а дисковая (и физическая) память оставалась сравнительно
     небольшой, то возникла концепция совместно используемых библиотек.
     Система VM также стала более мощной.  Хотя каждое из этих нововведений
     продолжало использовать формат <filename>a.out</filename>, его бесполезность становилась
     видна всё больше и больше с добавлением каждой новой возможности.  К тому
     же люди захотели динамически загружать код во время выполнения программ
     или сбрасывать части программ после выполнения кода инициализации для
     экономии основной памяти и/или размера свопа.  Языки программирования
     становились всё более умными и люди захотели автоматического запуска
     некоторого кода перед главной процедурой программы.  С форматом
     <filename>a.out</filename> была сделана масса ухищрений для реализации всех этих
     требований, и они в общем-то работали.  В конце концов наступил момент,
     когда формат <filename>a.out</filename> перестал бы справляться со всеми этими
     проблемами без ещё больших потерь в коде и гибкости в работе.  Тогда
     как <acronym>ELF</acronym> решал многие из этих проблем, переход на него был бы
     болезненным на рабочей системе.  Так что <acronym>ELF</acronym> ждал момента, когда
     был бы более болезненным оставаться с форматом <filename>a.out</filename>, чем перейти
     к формату <acronym>ELF</acronym>.</para>
  

  
<para>Однако с течением времени инструменты разработки, на которых
     основаны инструменты разработки FreeBSD (особенно ассемблер и 
     загрузчик), разделились на две параллельные ветви.  В дерево FreeBSD
     была добавлена поддержка совместно используемых библиотеки и были 
     исправлены некоторые ошибки.  Разработчики из GNU, которые изначально
     писали эти программы, полностью их переделали, добавив более простую
     поддержку построения кросс-компиляторов, в котором можно использовать
     различные форматы, итд.  Когда многие захотели строить кросс-компилятор
     с выходнвм кодом для FreeBSD, то им не повезло, так как старые исходные
     тексты, которые FreeBSD использовала для as и ld, не подошли.  Новый
     набор утилит от GNU (binutils) поддерживает кросс-компиляцию, <acronym>ELF</acronym>,
     совместно используемые библиотеки, расширения C++, итд.  Вдобавок,
     многие разработчики выпускают программы в бинарном формате <acronym>ELF</acronym>, и
     для FreeBSD было бы полезно иметь возможность их запускать.  И если
     такая возможность будет реализована, зачем тогда вообще продолжать
     опираться на <filename>a.out</filename>?  Это измученная старая лошадь, которая была
     полезна долгое время, но сейчас самое время от неё отказаться, оставив
     в прошлом долгие годы преданной службы.</para>
  

  
<para><acronym>ELF</acronym> более выразителен, чем a.out, и позволяет реализовать
     большую расширяемость основной системы.  Инструменты для работы с
     <acronym>ELF</acronym> лучше поддерживаются разработчиками, и предоставляют поддержку
     кросс-компиляции, что для многих важно.  <acronym>ELF</acronym> может работать немного
     медленнее, чем a.out, но это трудно измерить.  Также между ними есть
     некоторые отличия по распределению страниц памяти, обработке кода
     инициализации, итд.  Никакие из этих отличий особо не важны, но эти
     отличия всё же есть.  Со временем поддержка <filename>a.out</filename> будет убрана из
     ядра GENERIC, и постепенно убрана из системы совсем, как только отпадёт
     нужда в запуске старых программ в формате <filename>a.out</filename>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Почему невозможно изменить права на символические ссылки?
     </para></question><answer>

<para>Чтобы это работало, используйте опции ``<option>-H</option>'' или
     ``<option>-L</option>'' вместе с опцией ``<option>-R</option>''.
     Обратитесь к страницам Справочника по команде <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?chmod">chmod</ulink> и по <ulink
     URL="http://www.FreeBSD.org/cgi/man.cgi?symlink">symlink</ulink>.</para>
 
<para><emphasis remap=bf>ПРЕДУПРЕЖДЕНИЕ</emphasis> опция ``<option>-R</option>'' выполняет команду <emphasis remap=tt>chmod</emphasis>
     <emphasis remap=bf>РЕКУРСИВНО</emphasis>.  Будьте осторожны, задавая каталоги или символические
     ссылки на каталоги в параметрах <emphasis remap=tt>chmod</emphasis>.  Если вы хотите изменить
     права на каталог, на который указывает символическая ссылка, используйте
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?chmod">chmod</ulink>
     без опций и следуйте символической ссылке с помощью лидирующего слэша
     (``<filename>/</filename>'').  Например, если ``<emphasis remap=tt>foo</emphasis>'' является символической
     ссылкой на каталог ``<emphasis remap=tt>bar</emphasis>'', а вы хотите изменить права на
     ``<emphasis remap=tt>foo</emphasis>'' (на самом деле ``<emphasis remap=tt>bar</emphasis>''), вы должны выполнить команду
     типа следующей:</para>
  
<para>     
<literallayout>        chmod 555 foo/
      </literallayout>
</para>
  

  
<para>Если задан лидирующий слэш,
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?chmod">chmod</ulink> будет
     следовать символической ссылке, ``<emphasis remap=tt>foo</emphasis>'',
     меняя права на каталог ``<emphasis remap=tt>bar</emphasis>''.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        Почему длина регистрационного имени <emphasis remap=bf>всё ещё</emphasis> ограничена
        8 символами?
      </para></question><answer>

<para>Наверное, вы думаете, что достаточно будет изменить значение 
     константы <symbol>UT_NAMESIZE</symbol>, перекомпилировать полностью систему
     и всё будет работать.  К несчастью, часть приложений и утилит (включая
     системные) имеют жёстко заданные малые значения (не всегда "8" или
     "9", но и такие странные, как "15" или "20") в структурах и буферах. 
     Это приведёт не только к порче файлов журналов (из-за записи полей
     переменного размера там, где ожидается поле фиксированного размера), но
     может повлиять на работу клиентов системы Sun NIS и может в принципе
     вызвать другие проблемы при взаимодействии с другими системами UNIX.</para>
  

  
<para>Во FreeBSD 3.0 и старше, максимальная длина имени была увеличена
     до 16 символов и все утилиты с предопределённым размером имени были
     найдены и исправлены.  Так как это касается столь многих областей в
     системе, то такие изменения не делались вплоть до 3.0. </para>
  
<para>Если вы абсолютно уверены, что сможете найти и исправить проблемы
     такого рода самостоятельно, когда они возникнут, то можете увеличить
     длину регистрационного имени в ранних релизах, отредактировав файл
     /usr/include/utmp.h и изменив соответствующим образом константу
     UT_NAMESIZE.  Вы должны будете также изменить значение MAXLOGNAME в
     файле /usr/include/sys/param.h, чтобы оно соответствовало UT_NAMESIZE.
     И наконец, если вы компилируете из исходных текстов, не забудьте, что 
     /usr/include обновляется каждый раз!  Делайте изменения в
     соответствующих файлах каталога /usr/src/.. </para>
  
</answer></qandaentry>


<qandaentry><question>
<para>Можно ли запускать программы для DOS во FreeBSD?</para>
  </question><answer>

<para>Да, начиная с версии 3.0, вы можете использовать эмулятор DOS
  <emphasis remap=tt>doscmd</emphasis> от BSDI, который был интегрирован
  в систему и усовершенствован.  Пошлите письмо в <ulink
  URL="mailto:freebsd-emulation@FreeBSD.org">список рассылки</ulink>,
  посвящённый эмуляции во FreeBSD, если вы заинтересованы в участии в
  этом проекте.</para>
 
<para>Для систем, предшествующих 3.0, в коллекции портов есть замечательная
  утилита <ulink 
  URL="http://www.FreeBSD.org/cgi/ports.cgi?^pcemu">pcemu</ulink>,
  эмулирующая процессор 8088 и функции BIOS, чего достаточно для запуска
  приложений DOS, работающих в текстовом режиме.  Она требует X Window
  System (которая поставляется как XFree86).</para>
 
</answer></qandaentry>


<qandaentry><question>
<para>        Что такое ``<emphasis remap=tt>sup</emphasis>'' и как это можно использовать?
      </para></question><answer>

<para>Сокращение <ulink URL="http://www.FreeBSD.org/cgi/ports.cgi?^sup">SUP</ulink> означает Software Update Protocol, который был разработан в
     CMU для синхронизации исходных текстов.  Мы используем его для
     синхронизации исходных текстов на удалённых сайтах с основным сервером
     разработчиков.</para>
 
<para>Протокол SUP использует пропускную способность канала неэффективно,
     и был отвергнут.  В настоящее время рекомендуемым методом для
     синхронизации исходных текстов является протокол <ulink URL="../../handbook/synching.html#CVSUP">CVSup</ulink>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Насколько греется процессор при работе FreeBSD?</para></question><answer>

<para>В. Кто-нибудь делал замеры температуры при работе FreeBSD?  Я
     знаю, что Linux греется меньше, чем DOS, но никогда не видел упоминания
     FreeBSD.  Наверное, он сильно греется.</para>
  

  
<para>О. Нет, но мы сделали различные вкусовые тесты у добровольцев с
     завязанными глазами, которые до этого приняли по 250 микрограмм
     LSD-25.  35% добровольцев заявило, что FreeBSD имеет вкус апельсина,
     тогда как вкус Linux расценивался как фиолетовый туман.  Насколько
     я помню, ни одна из групп не отметила значительной разницы в
     температуре.  Вы хотели опубликовать полные результаты этого опроса,
     когда обнаружиди, что слишком много добровольцев покинули помещение
     во время тестов, что несколько смазало результаты.  Я думаю, что
     большинство из них работают сейчас в Apple над их новым GUI 
     ``чеши и нюхай''.  Это старый добрый бизнес!      </para>
  

  
<para>Серьёзно, и FreeBSD, и Linux используют инструкцию ``<acronym>HLT</acronym>''
     (halt), когда система простаивает, что уменьшает потребление энергии
     и в свою очередь, выделение тепла.  Вдобавок, если у вас настроен
     APM (автоматическое управление энергопотреблением), то FreeBSD 
     может переводить процессор в режим пониженного энергопотребления.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Кто там скребётся в микросхемах памяти??</para></question><answer>

<para>В. Делает ли FreeBSD что-нибудь эдакое при компиляции ядра, что
     вызывает поскрипывание микросхем памяти?  При компиляции (и в короткий
     промежуток времени после обнаружения дисковода при старте системы)
     от микросхем памяти исходит странный царапающий звук.</para>
  

  
<para>О. Да!  Вы, наверное, видели частое упоминание ``даемонов'' в
     документации по BSD, но не многие знают, что это настоящие нематериальные
     существа, которые теперь завладели вашим компьютером.  Царапающий звук,
     издаваемый микросхемами памяти - это на самом деле высокочастотное
     перешёптывание между даемонами, когда они решают, как лучше справиться
     с различными задачами по администрированию системы.</para>
  

  
<para>Если шум достиг ваших ушей. команда DOS ``<command>fdisk /mbr</command>''
     их спугнёт, но не удивляйтесь, если они отреагируют соответствующим
     образом и попытаются вас остановить.  Фактически, если во время
     выполнения этой команды вы услышите сатанинский голос Билла Гейтса из
     встроенного динамика, бегите и даже не оглядывайтесь!  Избавленные
     от противостояния с даемонами BSD, близнецы-демоны DOS и Windows часто
     могут захватить полный контроль не только над вашей машиной и
     навлечь вечное проклятие на вашу душу.  Если бы у меня был выбор, я
     думаю, что предпочту царапающий звук.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Что такое 'MFC'?</para></question><answer>

<para>MFC это сокращение от 'Merged From -CURRENT.'  Оно используется в
     протоколах изменений CVS для отметки того, что изменение было
     перенесено в ветвь STABLE из CURRENT.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Что означает сокращение 'BSD'?</para></question><answer>

<para>Это сокращение значит что-то на секретном языке, который могут знать
     только посвящённые.  Это нельзя перевести один к одному, однако
     достаточно сказать, что перевод с BSD - это что-то между 'Команда
     Formula-1", 'Пингвины - это вкусные плюшки' и 'Мы прикольнее, чем
     Linux.' :-)</para>
 
<para>Если серьёзно, то BSD является сокращением от 'Berkeley Software
     Distribution', названия, которое было выбрано Berkeley CSRG (Computer
     Systems Research Group) для их дистрибутива Unix.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Сколько требуется разработчиков FreeBSD, чтобы сменить лампочку?
      </para></question><answer>

<para>Необходимо иметь ровно одну тысячу сто семьдесят два разработчика:</para>
 
<para>Двадцать три сообщат в -CURRENT о том, что не горит свет;</para>
 
<para>Четыре начнут утверждать, что это проблема конфигурации и такие
     сообщения нужно посылать в -questions;</para>
 
<para>Трое оформят PR по этому поводу, причём одно их них будет направлено
     в doc и будет содержать только строчку "здесь темно";</para>
 
<para>Один закоммитит неоттестированную лампочку, что сломает построение
     системы, а затем через пять минут вернёт все назад;</para>
 
<para>Восемь поругаются с авторами PR по поводу включения патчей в PR;</para>
 
<para>Пять сообщат о том, что не проходит компиляция системы;</para>
 
<para>Тридцать один человек ответит, что у них всё работает и наверное, те
     выполняли cvsup в неподходящее время;</para>
 
<para>Один пошлёт патч для новой лампочки в -hackers;</para>
 
<para>Один пожалуется, что у него имелись патчики ещё три года назад,
     но когда он послал их в -CURRENT, они были проигнорированы и он имел
     неудачный опыт работы с системой PR; кроме того предлагаемая лампочка
     не имеет отражателя.</para>
 
<para>Тридцать семь начнут кричать, что лампочки не относятся к базовой
     системе, что коммиттеры не имеют права делать такие вещи без опроса
     обшественности и ЧТО ВООБЩЕ -CORE ДЕЛАЕТ ПО ЭТОМУ ПОВОДУ?</para>
 
<para>Две сотни напишут о цвете велосипедных фар;</para>
 
<para>Трое скажут, что этот патч не соответствует style(9);</para>
 
<para>Семнадцать возразят, что предлагаемая новая лампа подпадает под
     лицензию GPL;</para>
 
<para>Пятьсот восемьдесят шесть раздуют флэйм по поводу сравнения
     лицензий GPL, BSD, MIT, NPL и личных мнений о неизвестных основателей
     FSF;</para>
 
<para>Семеро пошлют различные части этих обсуждений в -chat и
     -advocacy;</para>
 
<para>Один закоммитит предлагаемую лампу, хотя она светит хуже, чем
     старая;</para>
 
<para>Двое откатят эти изменения с ужасной руганью в журнале коммита
     о том, что лучше FreeBSD будет сидеть в темноте, чем с тусклой лампой.</para>
 
<para>Сорок шесть громко воспротивятся этому изменению и потрубуют
     объяснений от -core;</para>
 
<para>Одиннадцать попросят уменьшить размер лампочки, чтобы она подошла
     к их Тамагочи на случай, если мы когда-нибудь соберёмся переносить
     FreeBSD на эту платформу;</para>
 
<para>Семьдесят три заявят о SNR в -hackers и -chat и в знак протеста
     отпишутся;</para>
 
<para>Тринадцать пошлют письма "unsubscribe", "How do I unsubscribe?",
     и "Please remove me from the list" с обычной подписью;</para>
 
<para>Один закоммитит работающую лампочку в то время, как все будут 
     слишком заняты руганью, чтобы это заметить;</para>
 
<para>Тридцать один человек напишет, что новая лампочка будет светить на
     0.364% ярче, если её откомпилировать с помощью TenDRA (хотя при этом
     она приобретёт форму куба) и что FreeBSD должна перейти на компилятор
     TenDRA, а не на EGCS;</para>
 
<para>Один заметит, что у лампочки отсутствует цоколь;</para>
 
<para>Девять (включая авторов PR) спросят "что такое MFC?";</para>
 
<para>Спустя две недели после смены лампочки пятьдесят семь человек сообщат
     о том, что света всё равно нет.</para>
 
<para><emphasis><ulink URL="mailto:nik@FreeBSD.org">Ник Клэйтон</ulink> (Nik
     Clayton) добавил:</emphasis></para>
 
<para><emphasis>Я сильно смеялся над всем этим.</emphasis></para>
 
<para><emphasis>И тогда я подумал, "Постойте-ка, найдётся ли кто-нибудь,
     чтобы задокументировать это где-нибудь?"</emphasis></para>
 
<para><emphasis>И на меня снизошло озарение :-)</emphasis></para>

<para><emphasis>Авторские права на этот параграф: Copyright &copy; 1999 <ulink
  URL="mailto:des@FreeBSD.org">Dag-Erling Coidan Smorgrav</ulink>.
  Пожалуйста, не воспроизводите этот материал без указания авторских
  прав.</emphasis></para>

</answer></qandaentry></qandaset>
</chapter>


<chapter
id="hackers">
<title>Только для серьёзных хэкеров FreeBSD</title>

<qandaset><qandaentry><question>
<para>Что такое SNAP и RELEASE?</para></question><answer>

<para>В <ulink URL="http://www.FreeBSD.org/cgi/cvsweb.cgi">дереве CVS</ulink>
     сейчас находятся три активно/полуактивно развивающихся ветки
     FreeBSD:</para>
  
<para>     
<itemizedlist>

<listitem>
<para><symbol>RELENG_2_2</symbol>   AKA <emphasis remap=bf>2.2-STABLE</emphasis> AKA <emphasis remap=bf>"ветвь 2.2"</emphasis>
       </para>
</listitem>

<listitem>
<para><symbol>RELENG_3</symbol>     AKA <emphasis remap=bf>3.X-stable</emphasis> AKA <emphasis remap=bf>"ветвь 3.0"</emphasis>
       </para>
</listitem>

<listitem>
<para><acronym>HEAD</acronym>         AKA <option>-current</option> AKA <emphasis remap=bf>4.0-CURRENT</emphasis>
     </para>
</listitem>

</itemizedlist>
</para>
 
<para><acronym>HEAD</acronym> - это не реальный тэг ветки, как другие два, а
  просто символьная константа для обозначения <emphasis>"текущего, не
  ветвящегося, находящегося в разработке дерева"</emphasis>, то есть
  <option>-CURRENT</option>.</para>
 
<para>На данный момент <option>-CURRENT</option> является находящимся в
  разработке деревом 4.0, ветка <emphasis remap=bf>3.0-STABLE</emphasis>,
  <symbol>RELENG_3</symbol>, отделилась от <option>-CURRENT</option> в январе
  1999.</para>
 
<para>Ветвь <emphasis remap=bf>2.2-STABLE</emphasis>,
  <symbol>RELENG_2_2</symbol>, отделилась от -CURRENT в ноябре 1996.</para>
 
<para>Ветвь <emphasis remap=bf>2.1-STABLE</emphasis>,
  <symbol>RELENG_2_1_0</symbol>, отделилась от -CURRENT в сентябре 1994.
  Развитие этой ветви полностью прекращено.</para>

</answer></qandaentry>


<qandaentry><question
id="custrel">
<para>Как самим сделать релиз?</para></question><answer>

<para>Чтобы сделать релиз, вам нужно иметь три вещи: Во-первых, вам нужно
     работать с ядром, включающим драйвер
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?vn">vn</ulink>.  Добавьте
     его в файл конфигурации ядра и откомпилируйте новое ядро:</para>
  
<para>     
<literallayout>        pseudo-device vn         #Vnode driver (turns a file into a device)
      </literallayout>
</para>
 
<para>Во-вторых, вам нужно иметь на диске полное дерево CVS.  Чтобы добиться
    этого, вы можете использовать <ulink
    URL="../../handbook/synching.html#CVSUP">CVSUP</ulink>, указав в файле
    supfile в качестве имени релиза cvs и удалив все поля с тегами и
    датами:</para>
  
<para>     
    <literallayout>
      *default prefix=/home/ncvs
      *default base=/a
      *default host=cvsup.FreeBSD.org
      *default release=cvs
      *default delete compress use-rel-suffix

      ## Main Source Tree
      src-all
      src-eBones
      src-secure

      # Other stuff
      ports-all
      www
      doc-all
    </literallayout>
</para>
 
<para>После этого запустите <command>cvsup -g supfile</command> для выкачки всех
     нужных исходных текстов на ваш компьютер...</para>
 
<para>Наконец, вам нужно свободное место для построения системы.  Допустим, что
     свободное место есть в каталоге <filename>/some/big/filesystem</filename>
     и, как в примере выше, вы поместили дерево CVS в каталог
     <filename>/home/ncvs</filename>:</para>
 
<para>     
<literallayout>        setenv CVSROOT /home/ncvs        # or export CVSROOT=/home/ncvs
        cd /usr/src/release
        make release BUILDNAME=3.0-MY-SNAP CHROOTDIR=/some/big/filesystem/release
      </literallayout>
</para>
  

  
<para>Полный релиз будет строиться в каталоге
  <filename>/some/big/filesystem/release</filename> и по окончании этого
  процесса дистрибутив, готовый к помещению на FTP-сервер, будет находиться в
  каталоге <filename>/some/big/filesystem/release/R/ftp</filename>.  Если вы
  захотите построить SNAP другой ветки, не -CURRENT, то можете указать
  <literal>RELEASETAG=SOMETAG</literal> в командной строке make release выше,
  например, при указании <literal>RELEASETAG=RELENG_2_2</literal>, будет
  строиться самый свежий снэпшот ветки 2.2-STABLE.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Как создать инсталляционные диски?</para></question><answer>

<para>Весь процесс создания инсталляционных дисков и дистрибутивов исходных
     текстов и бинарников автоматизирован в файле
     <filename>/usr/src/release/Makefile</filename>.  Информации, в нём
     содержащейся, должно быть достаточно, чтобы начать.  Однако, должны вас
     предупредить, что этот процесс включает в себя выполнение ``make world''
     и поэтому занимает много времени и дискового пространства.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>        По команде ``make world'' были переустановлены все программы.
      </para></question><answer>

<para>Да, так и должно быть; как говорит название этой команды, ``make
     world'' выполняет построение всех системных файлов с нуля, так
     что в итоге можете быть уверены, что получите чистую рабочую
     систему (вот почему это занимает столько времени).</para>
  

  
<para>Если в момент запуска команд ``<emphasis remap=tt>make world</emphasis>'' или ``<emphasis remap=tt>make
     install</emphasis>'' определена переменная окружения <acronym>DESTDIR</acronym>, то вновь
     создаваемые файлы будут помещены в дерево каталогов.  идентичное
     существующему, с корнем, располагающимся в
     <emphasis remap=tt>&#36;{DESTDIR}</emphasis>.  Однако некоторые случайные
     комбинации модификаций совместно используемых библиотек и версий
     компилируемых программ при исполнении команды ``<emphasis remap=tt>make world</emphasis>'',
     может этому помешать.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        При загрузке системы выдаётся сообщение ``(bus speed defaulted)''.
      </para></question><answer>

<para>Адаптеры SCSI Adaptec 1542 позволяют программно изменять скорость
     доступа к шине.  Предыдущие версии драйвера 1542 пытались определить
     максимально возможную скорость работы и установить это значение.  Мы
     обнаружили, что у некоторых пользователей это приводило к нарушению
     работоспособности системы, поэтому эта возможность сейчас вынесена
     в параметр конфигурации ядра ``<symbol>TUNE_1542</symbol>''.  Использование
     этой опции на тех системах, где она работает, может привести к
     ускорению доступа к дискам, а там, где это не работает, может привести
     к потере данных.</para>
  

  
</answer></qandaentry>

<qandaentry><question
id="ctm">
<para>        Можно ли работать с current при ограниченном доступе в Internet?
        
      </para></question><answer>

<para>Да, это можно делать <emphasis remap=tt>без</emphasis> скачивания полного дерева исходных
     текстов с помощью <ulink URL="../../handbook/synching.html#CTM">системы CTM</ulink>.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Как вы разделяете дистрибутив на файлы по 240К?</para></question><answer>

<para>Команда split в современных BSD-системах имеет опцию ``<option>-b</option>'',
     позволяющую разрезать файлы на части с точностью до байта.</para>
  

  
<para>Вот пример из файла <filename>/usr/src/Makefile</filename>.</para>
  
<para>     
<literallayout>        bin-tarball:
        (cd ${DISTDIR}; \
        tar cf - . \
        gzip --no-name -9 -c | \
        split -b 240640 - \
        ${RELEASEDIR}/tarballs/bindist/bin_tgz.)
      </literallayout>
</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Я написал некоторое добавление к ядру, кому его послать?
      </para></question><answer>

<para>Обратитесь к соответствующему <ulink URL="../../handbook/contrib.html">разделу</ulink> Руководства, в котором описано, как это сделать.</para>
  

  
<para>И спасибо вам за ваши усилия!</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>        Как распознаются и инициализируются адаптеры ISA Plug N Play?
      </para></question><answer>

<para>От: <ulink URL="mailto:uhclem@nemesis.lonestar.org">Фрэнка Дурды IV</ulink> (Frank Durda IV)</para>
  

  
<para>Если рассматривать на самом низком уровне, то существует несколько
     портов ввода/вывода, в которые должны выводить информацию все адаптеры
     PnP, когда компьютер пытается выполнить запрос о наличии установленных
     адаптеров.  Так что, когда запускается процедура определения адаптеров
     PnP, она выполняет запрос о наличии каких-либо адаптеров PnP, а все
     такие адаптеры выдают свой номер модели при чтении того же порта 
     ввода/вывода, поэтому процедура определения получит ответ на свой
     запрос, состоящий из логически наложенных номеров моделей, 
     интерпретируемый как ``да''.  В этом ответе по крайней мере один бит
     будет установлен в единицу.  Затем код определения адаптеров может
     ``выключать'' адаптеры с ID (назначаемыми Microsoft/Intel), меньшими,
      чем X.  Потом следует попытка определить, остались ли ещё адаптеры,
     отвечающие на запрос.  Если ответ ``<emphasis remap=tt>0</emphasis>'', то адаптеров с
     ID, большими чем X, нет.  После этого делается попытка определить
     наличие адаптеров с номерами, меньшими чем ``X''.  Если они есть,
     то становится известно, что есть адаптеры с номерами, меньшими чем X.
     Тогда происходит запрос адаптерам, большим чем X-(limit-4), на
     выключение.  Запрос повторяется. Применив этот метод полудвоичного
     поиска границ расположения ID достаточное количество раз, код 
     идентификации найдёт все адаптеры PnP, установленные в данной машине
     за число итераций, гораздо меньшее, чем может занять перебор 2^64
     возможных вариантов ID.</para>
  

  
<para>ID представляет собой два 32-разрядные числа (всего их 2^64)
     + 8 бит контрольной суммы.  Первые 32 бита являются идентификатором
     производителя.  Они никогда не сообщаются, однако часто бывает, что
     различные типы адаптеров от одного и того же производителя имеют
     различные 32-битные значения идентификатора производителя.  
     Необходимость в 32 разрядах только для задания производителя адаптера
     выглядит несколько излишним.</para>
  

  
<para>Оставшиеся 32 бита являются серийным номером, ethernet-адресом,
     чем-либо, делающим этот адаптер уникальным.  Производитель не должен
     выпускать других адаптеров, имеющих то же самое значение этих битов,
     если, конечно, у них не разные идентификаторы производителя.  Таким
     образом, вы можете иметь несколько адаптеров одинакового типа, но с
     различными 64-разрядными номерами.</para>
  

  
<para>Группы по 32 бита не богут быть нулевыми.  Это позволяет при
     логическом объединении OR их номеров получать ненулевое значение во
     время начального поиска адаптеров.</para>
  

  
<para>Как только система определила ID всех адаптеров, она активизирует
     каждый адаптер, по одному за раз (через те же порты ввода/вывода), и
     определяет, какие ресурсы требуются данному адаптеру, какие возможные
     прерывания доступны итд.  Сканирование и сбор информации происходит
     по всем адаптерам.</para>
  

  
<para>Эта информация соотносится с содержащейся в файлах ECU на диске
     или в MLB BIOS.  Поддержка PnP из ECU и BIOS для аппаратуры на
     MLB обычно имеет синтетический характер, и периферия не выполняет
     полностью поцедуру настоящего PnP.  Однако, используя BIOS и
     информацию из ECU, процедура инициализации может обнаружить устройства
     PnP, которые не могут быть найдены другим способом.</para>
  

  
<para>Затем устройства PnP опрашиваются ещё раз для назначения им портов
     ввода/вывода, DMA, IRQ и адресов отображаемой памяти.  Теперь 
     устройства должны иметь именно такие настройки и они должны оставаться
     такими до следующей перезагрузки, хотя нигде не сказано, что вы не
     можете их менять, когда захотите.</para>
  

  
<para>Здесь сделано много упрощений, однако общую идею вы должны уловить.</para>
  

  
<para>Microsoft использовала для PnP некоторые порты статуса первого
     принтера, по их логике, не существует адаптеров, использующих эти
     адреса для ввода/вывода.  Я обнаружил один такой адаптер принтера от
     IBM, который декодирует запись в порт статуса в момент начального
     опроса устройств PnP, на что MS ответил ``хулиган''. Так что они 
     выполняют запись в порт статуса принтера для установки адресов,
     плюс используют этот адрес + <literal>0x800</literal>, и ещё один порт ввода/вывода,
     который может располагаться где угодно в диапазоне между <literal>0x200</literal> и
     <literal>0x3ff</literal>, для чтения.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Поддерживает ли FreeBSD платформы, отличные от x86?</para></question><answer>

<para>Интерес к работе над многоплатформенной поддержкой во FreeBSD
     проявили несколько групп разработчиков, и одна из попыток переноса,
     FreeBSD/AXP (ALPHA), оказавшейся достаточно удачной, в настоящее
     время доступна в виде релиза 3.0 SNAP по адресу <ulink
     URL="ftp://ftp.FreeBSD.org/pub/FreeBSD/alpha/">ftp://ftp.FreeBSD.org/pub/FreeBSD/alpha</ulink>.
     Эта реализация для ALPHA сейчас поддерживаёт всё увеличивающееся число
     машин ALPHA, в частности, модели AlphaStation, AXPpci, PC164, Miata и
     Multia.  Нельзя сказать, что это настоящий релиз, он и не будет полным,
     пока в него не будут включены все утилиты для инсталляции и не
     будет сделан дистрибутивный CDROM, включающий достаточное количество
     рабочих портов и пакаджей.  FreeBSD/AXP сейчас находится в стадии
     BETA.  Чтобы быть в курсе событий, происходящих с этим портом,
     подпишитесь на соответствующий
     <email>freebsd-alpha@FreeBSD.org</email><link linkend="mailing">список
     рассылки</link>.</para>
 
<para>Также был проявлен интерес к переносу FreeBSD на платформу SPARC.  Если
     вы хотите подключиться к этому проекту, подпишитесь на соответствующий
     <email>freebsd-sparc@FreeBSD.org</email> <link linkend="mailing">список
     рассылки</link>.  Для обсуждение общих вопросов, касающихся новых
     аппаратных платформ, предназначен <link linkend="mailing">список
     рассылки</link> <email>freebsd-platforms@FreeBSD.org</email>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>         Мне нужно старшее число для написанного мною драйвера устройства.
      </para></question><answer>

<para>Всё зависит от того, планируете вы сделать этот драйвер
     общедоступным или нет.  Если это так, то, пожалуйста, пошлите нам
     копию исходных текстов драйвера вместе с соответствующими
     модификациями в файле <emphasis remap=tt>files.i386</emphasis>, пример описания устройства
     в файле конфигурации ядра и соответствующий код
     <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?MAKEDEV">MAKEDEV</ulink> для создания специальных файлов устройств, которые
     использует ваше устройство.  Если это не так. или это невозможно
     из-за лицензионных ограничений, то для старшего числа символьного
     устройства и старшего числа блочного устройства для этих целей были
     зарезервированы значения 32 и 8 соответственно; используйте их.  В
     любом случае.  мы будем рады услышать о вашем драйвере в списке
     рассылки <email>freebsd-hackers@FreeBSD.org</email>.</para>
  

  
</answer></qandaentry>

<qandaentry><question>
<para>Альтернативный метод размещения каталогов</para></question><answer>

<para>В ответ на вопрос о других методах размещения каталогов могу
     сказать, что используемая в настоящее схема не претерпела изменений
     с 1983 года.  Эти соглашения были предназначены для оригинальной
     файловой системы FFS, я никогда их не пересматривал.  Эта схема
     прекрасно работает, позволяя избежать переполнения групп дорожек.
     Как некоторые из вас замечали, она работает плохо при поиске.  
     Большинство файловых систем создаются из архивов, которые были
     созданы с глубиной первого поиска (aka ftw). Это приводит к тому, что
     их каталоги размещаются на нескольких группах дорожек, создавая
     наихудший случай для последующего поиска глубиной один.  Если бы
     было известно общее количество каталогов, которые должны быть созданы,
     быходом было бы создание (общее количество / количество групп дорожек)
     на дорожку группу перед переходом.  Обычно это число определяется чисто
     эвристически.  Даже при использовании маленького фиксированное числа,
     скажем 10, значительно улучшает ситуацию.  Чтобы различать операции
     восстановления от обычных операций (где текущий алгоритм подходит),
     вы можете использовать объединение в кластеры объёмом до 10, если они
     делаются в окне, равным 10 секундам.  Во всяком случае, я думаю, что
     это требует некоторых экспериментов.</para>
  
<para>Кирк МакКузик (Kirk McKusick), Сентябрь 1998</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Что делать при аварийном остановах системы</para></question><answer>

<para><emphasis>[Этот раздел был вырезан из письма, написанного <ulink
     URL="mailto:wpaul@FreeBSD.org">Биллом Полом</ulink> (Bill Paul)
     в <link linkend="mailing">список рассылки</link> freebsd-current <ulink
     URL="mailto:des@FreeBSD.org">Дэгом-Элингом Коиданом Смёгравом</ulink>
     (Dag-Erling Coidan Smorgrav), который исправил несколько
     опечаток и добавил комментарии в квадратных скобках]</emphasis></para>
 
<para>     
<literallayout>From: Bill Paul &lt;wpaul@skynet.ctr.columbia.edu&gt;
Subject: Re: the fs fun never stops
To: ben@rosengart.com
Date: Sun, 20 Sep 1998 15:22:50 -0400 (EDT)
Cc: current@FreeBSD.org
      </literallayout>
</para>
 
<para>     <emphasis>[&lt;ben@rosengart.com&gt; отправил письмо, содержащее следующее
     аварийное сообщение системы]</emphasis>
     
<literallayout>&gt; Fatal trap 12: page fault while in kernel mode
&gt; fault virtual address   = 0x40
&gt; fault code              = supervisor read, page not present
&gt; instruction pointer     = 0x8:0xf014a7e5
                                ^^^^^^^^^^
&gt; stack pointer           = 0x10:0xf4ed6f24
&gt; frame pointer           = 0x10:0xf4ed6f28
&gt; code segment            = base 0x0, limit 0xfffff, type 0x1b
&gt;                         = DPL 0, pres 1, def32 1, gran 1
&gt; processor eflags        = interrupt enabled, resume, IOPL = 0
&gt; current process         = 80 (mount)
&gt; interrupt mask          =
&gt; trap number             = 12
&gt; panic: page fault
      </literallayout>
</para>
  

  
<para>[Если] вы увидите такое сообщение, просто его воспроизвести и
     послать нам не достаточно.  Указатель инструкций, выделенный мною,
     важен, к сожалению, его значение зависит от конфигурации ядра.
     Другими словами, его значение меняется в зависимости от конкретного
     ядра, которое вы используете.  Если вы используете ядро GENERIC
     одного из снэпшотов, то кто-то ещё может отследить функцию, вызвавшую
     ошибку, но если вы работаете со специально отконфигурированным ядром,
     то только <emphasis>вы</emphasis> можете сказать нам, где случилась ошибка.</para>
  

  
<para>Вот что вы должны сделать:</para>
  
<para>     
<itemizedlist>

<listitem>
<para>Запишите значение указателя инструкций.  Заметьте, что
       часть <literal>0x8:</literal> в этом случае не важна: нам нужна часть
       <literal>0xf0xxxxxx</literal>.
</para>
</listitem>

<listitem>
<para>Когда система перезагрузится, сделайте следующее:
  
<literallayout>% nm /kernel.that.caused.the.panic | grep f0xxxxxx
          </literallayout>
	  
       где  <literal>f0xxxxxx</literal> - это значение указателя инструкций.  Однако
       неприятность заключается в том, что вы не получите точного
       соответствия, так как в таблице имен ядра для точек входа в функции
       даны адреса на начало функций, а указатель инструкций будет указывать
       куда-то внутрь её тела.  Если вы не получили точного соответствия,
       опустите последнюю цифру в значении указателя инструкций и попробуйте
       снова, то есть:
  
<literallayout>% nm /kernel.that.caused.the.panic | grep f0xxxxx
	  </literallayout>

       Если и это не привело ни к каким результатам, отрежьте следующую
       цифру.  Повторяйте, пока не получите хоть что-то.  Результатом будет
       список функций, которые, возможно, привели к аварийному останову.
       Этот механизм обнаружения ошибочного места довольно неточен, но это
       всё же лучше чем ничего. 
     </para>
</listitem>

</itemizedlist>
</para>
 
<para>Зачастую люди приводят подобные аварийные сообщения, на редко кто
  утруждается привести соотвествие указателя инструкций с функцией в
  таблице символов ядра.</para>
 
<para>Лучшим способом выяснить причину, вызвавшую аварийный останов, является
  создание аварийного дампа системы, а затем использование
  <command>gdb(1)</command> для трассировки вызовов.  Конечно, это зависит от
  корректности работы <command>gdb(1)</command> с -CURRENT, что я гарантировать
  не могу (помнится, кто-то говорил, что новый ELF <command>gdb(1)</command>
  некорректно работает с аварийными дампами ядра: необходимо проверить это до
  выхода 3.0, иначе не избежать краски стыда на наших лицах после выпуска
  CD).</para>
 
<para>Во всяком случае, обычно я использую такой способ:</para>
  
<para>     
  <itemizedlist>
    <listitem>
      <para>Отредактируйте конфигурационный файл ядра, добавив строку
        'options DDB', если вам зачем-то понадобился встроенный отладчик.
        (Я использую его в основном для указания точек останова, если
        подозреваю возникновение бесконечных циклов.)</para>
    </listitem>

    <listitem>
      <para>Выполните <command>config -g KERNELCONFIG</command> для создания
        каталога построения ядра.</para>
    </listitem>

    <listitem>
      <para><command>cd /sys/compile/KERNELCONFIG; make</command></para>
    </listitem>

    <listitem>
      <para>Дождитесь окончания компиляции ядра.</para>
    </listitem>

    <listitem>
      <para><command>make install</command></para>
    </listitem>

    <listitem>
      <para>reboot</para>
    </listitem>
  </itemizedlist>
</para>
 
<para>В процессе выполнения команды &man.make.1; будут построены два ядра,
  <filename>kernel</filename> и <filename>kernel.debug</filename>.
  <filename>kernel</filename> будет установлен как
  <filename>/kernel</filename>, тогда как <filename>kernel.debug</filename>
  может быть использован в качестве источника отладочной информации для
  gdb(1).</para>
 
<para>Чтобы включить сброс аварийного дампа, вам нужно отредактировать файл
  <filename>/etc/rc.conf</filename> так, чтобы устройство
  <emphasis remap=tt>dumpdev</emphasis> указывало на раздел подкачки.  В этом
  случае скрипты <command>rc(8)</command> будут вызывать команду
  <command>dumpon(8)</command> для включения создания аварийных дампов.  Вы
  можете запустить команду <command>dumpon(8)</command> вручную.  После
  аварийной остановки аварийный дамп может быть получен с помощью программы
  <command>savecore(8)</command>; если значение переменной
  <emphasis remap=tt>dumpdev</emphasis> было установлено в
  <filename>/etc/rc.conf</filename>, скрипты <command>rc(8)</command> запустят
  <command>savecore(8)</command> автоматически и поместят аварийный дамп в
  каталог <filename>/var/crash</filename>.</para>
 
<para>ЗАМЕЧАНИЕ: аварийные дампы FreeBSD обычно имеют размер, равный
  физическому объёму оперативной памяти вашей машины.  Так что если у вас 64МБ
  ОЗУ, вы получите дамп размером 64МБ.  Поэтому вы должны удостовериться, что
  в каталоге <filename>/var/crash</filename> достаточно места для хранения
  дампа.  Либо вы можете вручную запустить <command>savecore(8)</command>
  и создать аварийный дамп в другом каталоге, где достаточно места.  Размер
  аварийного дампа можно уменьшить, указав в конфигурации ядра
  <literal>options MAXMEM=(размер)</literal> подходящее значение для объёма
  памяти, которое будет использоваться ядром.  Например, если у вас
  128 МБ ОЗУ, вы можете ограничить использование памяти ядром 16 мегабайтами,
  так что размер аварийного дампа будет равен 16МБ, а не 128.</para>
 
<para>Как только вы получили аварийный дамп, вы можете выполнить трассировку
  вызовов с помощью <command>gdb(1)</command> таким образом:</para>
 
<para>     
<literallayout>% gdb -k /sys/compile/KERNELCONFIG/kernel.debug /var/crash/vmcore.0
(gdb) where
      </literallayout>
</para>
  

  
<para>Заметьте, что при этом может быть выведено несколько экранов
     информации; в идеале вы должны использовать <command>script(1)</command> для их
     перехвата.  При использовании необработанного образа ядра со всей
     отладочной информацией может быть найдена конкретная строка исходного
     текста ядра, при достижении которой случилась аварийная остановка.
     Для выяснения последовательности событий, приведших к аварийному
     останову, обычно читается трассировка стека снизу вверх.  Вы можете
     также использовать <command>gdb(1)</command> для вывода значений различных переменных
     или структур, чтобы выяснить состояние системы во время аварии. </para>
  

  
<para>Теперь, если вы в самом деле душевнобольной и у вас есть второй
     компьютер, то можете настроить <command>gdb(1)</command> для удалённой отладки, так,
     что сможете использовать <command>gdb(1)</command> на одном компьютере, чтобы
     отладить ядро на другом, включая использование точек останова,
     пошагового прохода по коду ядра, всё как с обычной прикладной
     программой.  Я пока с этим не игрался, так как не часто имею
     возможность поставить две машины одну напротив другой для отладки.</para>
 
<para><emphasis>[Билл (Bill) добавил: "Я забыл обратить ваше внимание
     на одну вещь: если у вас включена поддержка DDB и ядро переходит
     в режим отладки, вы можете намеренно вызвать аварийный останов 
     (и создание аварийного дампа), набрав 'panic' в командной строке
     ddb.  Этот процесс может снова вызвать отладчик.  В этом случае
     наберите 'continue' и процесс будет завершён созданием аварийного
     дампа." -ed]</emphasis></para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Перестала работать функция dlsym() для ELF!</para></question><answer>

<para>По умолчанию при работе с форматом ELF символы, определённые в
     выполнимом файле, не доступны динамическому загрузчику.  Поэтому
     при вызове функции <function>dlsym()</function>, которая осуществляет поиск по
     дескриптору, полученному после вызова <emphasis remap=tt>dlopen(NULL, flags)</emphasis>,
     желаемый результат достигнут не будет.</para>
 
<para>Если вы хотите осуществить поиск в выполнимом файле процесса с
     помощью функции <function>dlsym()</function>, вам нужно компоновать выполнимый
     файл с опцией <option>-export-dynamic</option> <ulink URL="http://www.FreeBSD.org/cgi/man.cgi?ld">компоновщика ELF</ulink>.</para>
 
</answer></qandaentry>

<qandaentry><question>
<para>Увеличение и уменьшение адресного пространства ядра</para></question><answer>

<para>По умолчанию размер адресного пространства ядра равен 256 МБ во
     FreeBSD 3.x и 1 ГБ во FreeBSD 4.x.  Если вы используете FreeBSD
     в качестве сервера с интенсивной сетевой нагрузкой (скажем,
     большой FTP или HTTP сервер), вы можете обнаружить, что 256 МБ
     недостаточно.</para>
  

  
<para>Каким же образом можно увеличить адресное пространство? Здесь
     есть два момента.  Во-первых, вам нужно указать ядру выделить
     большее количество адресного пространства для самого ядра.  Во-вторых,
     так как ядро загружается в верхнюю часть адресного пространства, вам
     нужно уменьшить адрес загрузки так, чтобы он не вышел за верхнюю
     границу. </para>
  

  
<para>Первая проблема решается увеличением значения константы
     <acronym>NKPDE</acronym> в файле <filename>src/sys/i386/include/pmap.h</filename>.  В случае 1
     ГБ адресного пространства он должен выглядеть примерно так:</para>
  
<para>     
<literallayout>#ifndef NKPDE
#ifdef SMP
#define NKPDE                   254     /* addressable number of page tables/pde's */
#else
#define NKPDE                   255     /* addressable number of page tables/pde's */
#endif  /* SMP */
#endif
      </literallayout>
</para>
  

  
<para>Для вычисления значения <acronym>NKPDE</acronym> разделите желаемый объём
     адресного пространства (в мегабайтах) на четыре и вычтите из 
     получившегося числа единичку в случае однопроцессорной машины и
     двоечку в случае многопроцессорного ядра.</para>
  

  
<para>Для достижения второй цели вам нужно правильный адрес для загрузки
     ядра: просто отнимите размер адресного пространства (в байтах) от
     0x100100000; результат будет равным 0xc0100000 для адресного пространства
     в 1 ГБ.  Установите значение константы <symbol>LOAD_ADDRESS</symbol>
     в файле <filename>src/sys/i386/conf/Makefile.i386</filename> в это
     значение; затем установите значение счётчика в начале списка секций в
     файле <filename>src/sys/i386/conf/kernel.script</filename> в то же самое
     значение, как это сделано здесь:</para>
  
<para>     
<literallayout>OUTPUT_FORMAT("elf32-i386", "elf32-i386", "elf32-i386")
OUTPUT_ARCH(i386)
ENTRY(btext)
SEARCH_DIR(/usr/lib); SEARCH_DIR(/usr/obj/elf/home/src/tmp/usr/i386-unknown-freebsdelf/lib);
SECTIONS
{
  /* Read-only sections, merged into text segment: */
  . = 0xc0100000 + SIZEOF_HEADERS;
  .interp     : { *(.interp)    }
      </literallayout>
</para>
  

  
<para>После этого переконфигурируйте и перестройте ядро.  Вы можете
     столкнуться с проблемами при работе утилит <command>ps(1)</command>, <command>top(1)</command>
     и подобных им; решить их может <emphasis remap=tt>make world</emphasis> (или ручная
     перекомпиляция <emphasis remap=tt>libkvm</emphasis>, <emphasis remap=tt>ps</emphasis> и <emphasis remap=tt>top</emphasis> после копирования
     исправленного <filename>pmap.h</filename> в <filename>/usr/include/vm/)</filename>.</para>
 
<para>ЗАМЕЧАНИЕ: Размер адресного пространства ядра должен быть
     кратен четырём мегабайтам.</para>
 
<para>[<ulink URL="mailto:dg@FreeBSD.org">Дэвид Гринмэн</ulink>
     (David Greenman) добавил: <emphasis> Я думаю, что размер адресного
     пространства ядра должен быть степенью двойки, но я в этом не уверен.
     Для работы с верхними адресами памяти использовался код старого
     загрузчика, и я ожидаю по крайней мере точность в 256 МБ.]</emphasis></para>
  

  
</answer></qandaentry></qandaset>
</chapter>


<chapter
id="acknowledgments">
<title>Наши благодарности</title>

<para>   
<literallayout>      Если вы обнаружили неточности в этом FAQ или хотите что-то в него
      добавить, пожалуйста, напишите нам по адресу &lt;FAQ@FreeBSD.org&gt;.
      Мы ждём ваши отзывы и пожелания, чтобы с вашей помощью сделать этот
      документ ещё лучше!


                                          FreeBSD Core Team
    </literallayout>
</para>
  
<para>   
<variablelist>
<varlistentry><term>Jordan Hubbard</term>
<listitem>
<para>Различные упорядочения и добавления в FAQ.</para>
  

  
</listitem>
</varlistentry>

<varlistentry><term>Doug White</term>

<listitem>
<para>Работа со списком рассылки freebsd-questions</para>
  

  
</listitem>
</varlistentry>

<varlistentry><term>Joerg Wunsch</term>

<listitem>
<para>Работа с телеконференциями Usenet</para>
  

  
</listitem>
</varlistentry>

<varlistentry><term>Garrett Wollman</term>

<listitem>
<para>Раздел о сети и форматирование</para>
  

  
</listitem>
</varlistentry>

<varlistentry><term>Jim Lowe</term>

<listitem>
<para>Информация о протоколе многоадресной передачи</para>
  

  
</listitem>
</varlistentry>

<varlistentry><term>Peter da Silva</term>

<listitem>
<para>Раб-наборщик</para>
  
</listitem>
</varlistentry>

<varlistentry><term>Andrey Zakhvatov</term>

<listitem>
<para>Перевод на русский язык</para>
  
</listitem>
</varlistentry>

<varlistentry><term>The FreeBSD Team</term>

<listitem>
<para>Охи, вздохи, стоны, добавления
   </para>
  
</listitem>
</varlistentry>
</variablelist>
</para>
  
<para>И всем остальным, оставшимся неизвестными, наши глубочайшие
   извинения и сердечные благодарности!
 </para>
  
</chapter>
</book>
