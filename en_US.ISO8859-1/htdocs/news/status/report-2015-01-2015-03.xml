<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE report PUBLIC "-//FreeBSD//DTD FreeBSD XML Database for
  Status Report//EN"
  "http://www.FreeBSD.org/XML/share/xml/statusreport.dtd" >

<!-- $FreeBSD$ -->

<report>
  <date>
    <month>January-March</month>

    <year>2015</year>
  </date>

  <section>
    <title>Introduction</title>

<!--     <?ignore -->
    <p><strong>This is a draft of the January&ndash;March 2015
      status report.  Please check back after it is finalized, and
      an announcement email is sent to the &os;-Announce mailing
      list.</strong></p>
<!--     ?> -->

    <p>This report covers &os;-related projects between January and
      March 2015.  This is the first of four reports planned for
      2015.</p>

    <p>The first quarter of 2015... was a very busy and productive
      time.</p>

    <p>Thanks to all the reporters for the excellent work!</p>

    <p>The deadline for submissions covering the period from April
      to June 2015 is July 7th, 2015.</p>
  </section>

  <category>
    <name>team</name>

    <description>&os; Team Reports</description>
  </category>

  <category>
    <name>proj</name>

    <description>Projects</description>
  </category>

  <category>
    <name>kern</name>

    <description>Kernel</description>
  </category>

  <category>
    <name>arch</name>

    <description>Architectures</description>
  </category>

  <category>
    <name>bin</name>

    <description>Userland Programs</description>
  </category>

  <category>
    <name>ports</name>

    <description>Ports</description>
  </category>

  <category>
    <name>doc</name>

    <description>Documentation</description>
  </category>

  <category>
    <name>misc</name>

    <description>Miscellaneous</description>
  </category>

  <project cat='kern'>
    <title>Address Space Layout Randomization (ASLR)</title>

    <contact>
      <person>
	<name>
	  <given>Shawn</given>
	  <common>Webb</common>
	</name>
	<email>shawn.webb@hardenedbsd.org</email>
      </person>
      <person>
	<name>
	  <given>Oliver</given>
	  <common>Pinter</common>
	</name>
	<email>oliver.pinter@hardenedbsd.org</email>
      </person>
    </contact>

    <links>
      <url href="https://hardenedbsd.org/">HardenedBSD</url>
      <url href="https://lists.freebsd.org/pipermail/freebsd-current/2015-February/054669.html">ASLR Call For Testing</url>
      <url href="https://reviews.freebsd.org/D473">FreeBSD Code Review of ASLR</url>
    </links>

    <body>
      <p>Address Space Layout Randomization (ASLR) is a
	computer security technique that aids in mitigating
	low-level vulnerabilities such as buffer overflows.
	ASLR randomizes the memory layout of running
	applications to prevent an attacker from knowing where
	a given exploitable vulnerability lies in memory.</p>

      <p>We have been working hard the last few months to ensure
	the robustness of our ASLR implementation. We have
	written a helpful manpage. We have updated the patch on
	FreeBSD's code review system (Phabricator).  Our ASLR
	implementation is in heavy use by the HardenedBSD team
	in production environments and is performing
	robustly.</p>

      <p>The next task is to compile the base system applications as
	Position-Independent Executables (PIEs). In order for
	ASLR to be effective, applications must be compiled as
	PIEs. It is likely that this part will take a long time
	to accomplish, given the complexity surrounding
	building the libraries in the base system. Even if applications
	are not compiled as PIEs, having ASLR available still
	helps those applications (like HardenedBSD's secadm)
	which force compilation as PIE for themselves.</p>
    </body>

    <sponsor>SoldierX</sponsor>

    <help>
      <task>
	<p>Test our patch against 11-CURRENT.</p>
      </task>

      <task>
	<p>For &os; committers: work with us to get this merged
	  into &os;.</p>
      </task>
    </help>
  </project>

  <project cat='ports'>
    <title>Xfce on &os;</title>

    <contact>
      <person>
	<name>&os; Xfce Team</name>
	<email>xfce@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.freebsd.org/Xfce" />
    </links>

    <body>
      <p>Xfce is a free software desktop environment for Unix and
	Unix-like platforms, such as &os;. It aims to be fast and
	lightweight, while still being visually appealing and easy to
	use.</p>

      <p>This quarter was an exciting time for the Xfce Team. We
	imported the Xfce desktop environment 4.12 into the ports
	tree, after more than two years of development.</p>

      <p>Overall, we have updated the following ports:</p>

      <ul>
	<li>Xfce core (4.12)</li>
	<li>audio/xfce4-mpc-plugin (0.4.5)</li>
	<li>deskutils/xfce4-tumbler (0.1.31</li>
	<li>deskutils/xfce4-xkb-plugin (0.7.1)</li>
	<li>editors/mousepad (0.4.0)</li>
	<li>graphics/ristretto (0.8.0)</li>
	<li>multimedia/xfce4-parole (0.8.0)</li>
	<li>sysutils/garcon (0.4.0)</li>
	<li>sysutils/xfce4-diskperf-plugin (2.5.5)</li>
	<li>sysutils/xfce4-fsguard-plugin (1.0.2)</li>
	<li>sysutils/xfce4-power-manager (1.4.4)</li>
	<li>sysutils/xfce4-wavelan-plugin (0.5.12)</li>
	<li>textproc/xfce4-dict-plugin (0.7.1)</li>
	<li>www/xfce4-smartbookmark-plugin (0.4.6)</li>
	<li>x11/libexo (0.10.4)</li>
	<li>x11-clocks/xfce4-timer-out-plugin (1.0.2)</li>
	<li>x11-fm/thunar (1.6.6)</li>
	<li>x11-themes/gtk-xfce-engine (3.2.0)</li>
      </ul>

      <p>At the same time we switched to the USES framework, and a new
	plugin has been added, called
	<tt>audio/xfce4-pulseaudio-plugin</tt>.</p>

      <p>We also follow the unstable releases (available in our
	experimental repository) of:</p>

      <ul>
	<li>x11/xfce4-dashboard (0.3.91)</li>
	<li>x11/xfce4-notes-plugin (1.8.0 beta)</li>
      </ul>

      <p>The following documentation patches are ready:</p>
      <ul>
	<li><a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=197878">PR197878</a>,
	  Update Xfce section in Porter's Handbook</li>
	<li><a href="https://reviews.freebsd.org/D1305">D1305</a>, FAQ</li>
      </ul>
    </body>

    <help>
      <task>
	<p>Work on support for Compact Disc Digital Audio (CD-DA) in
	  <tt>multimedia/xfce4-parole</tt>.</p>
      </task>

      <task>
	<p>Add a new property (through xfconf-query) in order to
	  allow users to change the greyscale value of quicklaunch
	  icons in x11/xfce4-dashboard (this feature is only available
	  in the unstable release).</p>
      </task>
    </help>
  </project>

  <project cat='proj'>
    <title>Lua boot loader</title>

    <contact>
      <person>
	<name>
	  <given>Rui</given>
	  <common>Paulo</common>
	</name>
	<email>rpaulo@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Pedro</given>
	  <common>Souza</common>
	</name>
	<email>pedrosouza@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Wojciech</given>
	  <common>Koszek</common>
	</name>
	<email>wkoszek@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://svnweb.freebsd.org/base/projects/lua-bootloader/" />
    </links>

    <body>
      <p>The Lua boot loader project is in its final stage and
	it can be used on x86 already.  The aim of this project is to
	replace the Forth boot loader with a Lua boot loader.  All the
	scripts were re-written in Lua and are available in
	sys/boot/lua.  Once all the Forth features have been tested
	and once the boot menus look exactly like in Forth, we will
	start merging this project to &os; HEAD.  Both loaders can
	co-exist in the source tree with no problems because a
	pluggable loader functionality was introduced for this
	purpose.</p>

      <p>The project was initially started by Wojciech
	Koszek, and Pedro Souza wrote most of the Lua code last year in
	his Google Summer of Code project.</p>

      <p>To build a Lua boot loader just use:</p>
<pre>WITH_LUA=y
WITHOUT_FORTH=y</pre>
    </body>

    <help>
      <task>
	<p>Feature/appearance parity with Forth.</p>
      </task>

      <task>
	<p>Investigate use of floating point by Lua.</p>
      </task>

      <task>
	<p>Test the EFI Lua loader.</p>
      </task>

      <task>
	<p>Test the U-Boot Lua loader.</p>
      </task>

      <task>
	<p>Test the serial console.</p>
      </task>
    </help>
  </project>

  <project cat='doc'>
    <title>More Michael Lucas &os; books</title>

    <contact>
      <person>
	<name>
	  <given>Michael</given>
	  <common>Lucas</common>
	</name>
	<email>mwlucas@michaelwlucas.com</email>
      </person>
    </contact>

    <links>
      <url href="http://blather.michaelwlucas.com/archives/2352" />
    </links>

    <body>
      <p>The &os; storage books are proceeding slower than expected.
	This is a complex project.</p>

      <p>It appears that ZFS will be a two-book topic. The
	first book will cover basic ZFS, while the second will cover
	advanced cases like live and cold replication, sharing,
	performance, and using ZFS on top of less common GEOM
	providers.  More details can be found in the links section.</p>

      <p>Allan Jude (allanjude@) is co-authoring the ZFS
	books.  Little did he know of the magnitude of the task
	ahead of him when he signed up....</p>
    </body>
  </project>

  <project cat='proj'>
    <title>Opaque ifnet</title>

    <contact>
      <person>
	<name>
	  <given>Gleb</given>
	  <common>Smirnoff</common>
	</name>
	<email>glebius@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.freebsd.org/projects/ifnet">Project wiki page</url>
    </links>

    <body>
      <p>The project is to design a new KPI for network drivers
	that would allow for the network stack to evolve, without
	breaking compatibility with older drivers.  The core idea is to
	hide <tt>struct ifnet</tt> from drivers, thus the
	project has the name "opaque ifnet".  However, the
	project will include more changes than just hiding the
	struct's definition.</p>

      <p>At present, the new KPI has been prototyped, most
	important parts of network stack have been modified
	appropriately, and several drivers have been converted to new
	KPI.</p>

      <p>The project needs more manpower, since there are many
	network drivers in the tree, with a total of 245 sites where a
	struct ifnet is allocated.</p>
    </body>

    <sponsor>Netflix</sponsor>

    <help>
      <task>
	<p>Convert more drivers.</p>
      </task>
    </help>
  </project>

  <project cat='team'>
    <title>Ports Collection</title>

    <contact>
      <person>
	<name>
	  <given>Frederic</given>

	  <common>Culot</common>
	</name>
	<email>portmgr-secretary@FreeBSD.org</email>
      </person>

      <person>
	<name>Port Management Team</name>
	<email>portmgr@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="http://www.FreeBSD.org/ports/" />
      <url href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/contributing-ports/" />
      <url href="http://portsmon.freebsd.org/index.html" />
      <url href="http://portscout.freebsd.org/" />
      <url href="http://www.freebsd.org/portmgr/index.html" />
      <url href="http://blogs.freebsdish.org/portmgr/" />
      <url href="http://www.twitter.com/freebsd_portmgr/" />
      <url href="http://www.facebook.com/portmgr" />
      <url href="http://plus.google.com/communities/108335846196454338383" />
    </links>

    <body>
      <p>As of the end of Q1 the ports tree holds almost 25,000
	ports, and the PR count is just over 1,500.  The tree saw
	more activity than during the previous quarter, with
	almost 7,000 commits performed by 163 active committers.
	The number of problem reports closed also increased by
	about 20%, with nearly 2,000 PRs closed!</p>

      <p>In Q1 two new developers were granted a ports commit bit
	(jbeich@ and brd@) and one was taken in for safekeeping
	(rafan@, on his request).</p>

      <p>On the management side, decke@ decided to step down from
	his portmgr duties in February.  No other changes were made
	to the team during Q1.</p>

      <p>This quarter also saw the release of the first quarterly
	branch of the year, 2015Q1.  On this branch, 140 changes were
	applied by 35 committers.</p>

      <p>On the QA side, 29 exp-runs were performed to validate sensitive
	updates or cleanups.</p>
    </body>

    <help>
      <task>
	<p>As during the previous quarter a tremendous amount
	  of work was done on the tree to update major ports and to
	  close even more PRs than in 2014 Q4.  However, we sometimes
	  lag behind with regards to documentation, so volunteers
	  are welcome to help on this important task.</p>
      </task>
    </help>

  </project>

  <project cat='proj'>
    <title>bhyve</title>

    <contact>
      <person>
	<name>
	  <given>Peter</given>
	  <common>Grehan</common>
	</name>
	<email>grehan@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Neel</given>
	  <common>Natu</common>
	</name>
	<email>neel@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>John</given>
	  <common>Baldwin</common>
	</name>
	<email>jhb@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Tycho</given>
	  <common>Nightingale</common>
	</name>
	<email>tychon@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Allan</given>
	  <common>Jude</common>
	</name>
	<email>freebsd@allanjude.com</email>
      </person>

      <person>
	<name>
	  <given>Alexander</given>
	  <common>Motin</common>
	</name>
	<email>mav@freebsd.org</email>
      </person>
    </contact>

    <links>
      <url href="http://www.bhyve.org">bhyve FAQ and talks</url>
    </links>

    <body>
      <p>bhyve is a hypervisor that runs on the FreeBSD/amd64
	platform.  At present, it runs FreeBSD (8.x or later), Linux
	i386/x64, OpenBSD i386/amd64, and NetBSD/amd64 guests.  Current
	development is focused on enabling additional guest operating
	systems and implementing features found in other hypervisors.</p>

      <p>Peter Grehan did a status update at bhyvecon 2015 in
	Tokyo.  The slides are available at <a
	href="http://bhyvecon.org/bhyvecon2015-Peter.pdf">
	http://bhyvecon.org/bhyvecon2015-Peter.pdf</a></p>

      <p>Mihai Carabas presented the results of his GSoC project
	on implementing instruction caching in bhyve at AsiaBSDCon
	2015 in Tokyo.  The slides are available at <a
	href="http://people.freebsd.org/~neel/bhyve/bhyve-cache-emul-slides.pdf">
	http://people.freebsd.org/~neel/bhyve/bhyve-cache-emul-slides.pdf</a></p>

      <p>A number of improvements were made to bhyve this quarter:</p>

      <ul>
	<li>The RTC device model can now be instructed to keep UTC time
	  instead of localtime.  This is useful for guests like OpenBSD
	  that expect the RTC to keep UTC time.</li>
	<li>The virtio-blk device now does I/O asynchronously without
	  blocking the vcpu thread that initiated the I/O.</li>
	<li>The virtio-blk and ahci-hd devices are now able to execute
	  multiple I/O requests in parallel.  This can significantly
	  boost virtual disk throughput.</li>
	<li>The ahci-hd device emulation advertises TRIM to the guest
	  if the backend device supports it (e.g., ZVOL).</li>
	<li>The virtio-blk and ahci-hd devices now advertise the proper
	  logical and physical block size of the backend device or file.</li>
      </ul>

    </body>

    <help>
      <task>
	<p>Improve documentation.</p>
      </task>

      <task>
	<p>bhyveucl is a script for starting bhyve instances based on a
	  libUCL config file.  More information is at
	  <a
	    href="https://github.com/allanjude/bhyveucl">https://github.com/allanjude/bhyveucl</a></p>
      </task>

      <task>
	<p>Add support for virtio-scsi.</p>
      </task>

      <task>
	<p>Flexible networking backends: wanproxy, vhost-net.</p>
      </task>

      <task>
	<p>Move to a single process model, instead of bhyveload
	  and bhyve.</p>
      </task>

      <task>
	<p>Support running bhyve as non-root.</p>
      </task>

      <task>
	<p>Add filters for popular VM file formats (VMDK, VHD,
	  QCOW2).</p>
      </task>

      <task>
	<p>Implement an abstraction layer for video (no X11 or SDL in
	  the base system).</p>
      </task>

      <task>
	<p>Suspend/resume support.</p>
      </task>

      <task>
	<p>Live Migration.</p>
      </task>

      <task>
	<p>Nested VT-x support (bhyve in bhyve).</p>
      </task>

      <task>
	<p>Support for other architectures (ARM, MIPS, PPC).</p>
      </task>
    </help>
  </project>

</report>
