<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE report PUBLIC "-//FreeBSD//DTD FreeBSD XML Database for
  Status Report//EN"
  "http://www.FreeBSD.org/XML/share/xml/statusreport.dtd" >

<!-- $FreeBSD$ -->

<report>
  <date>
    <month>July-September</month>

    <year>2016</year>
  </date>

  <section>
    <title>Introduction</title>

    <p><strong>This is a draft of the July&ndash;September 2016
      status report.  Please check back after it is finalized, and
      an announcement email is sent to the &os;-Announce mailing
      list.</strong></p>

    <?ignore
    <p>This report covers &os;-related projects between July and
      September 2016.  This is the third of four reports planned for
      2016.</p>

    <p>The third quarter of 2016 was another productive quarter for
      the &os; project and community. [...]</p>

    <p>Thanks to all the reporters for the excellent work!</p>

    <p>The deadline for submissions covering the period from October
      to December 2016 is January 7, 2016.</p>
     ?>
  </section>

  <category>
    <name>team</name>

    <description>&os; Team Reports</description>
  </category>

  <category>
    <name>proj</name>

    <description>Projects</description>
  </category>

  <category>
    <name>kern</name>

    <description>Kernel</description>
  </category>

  <category>
    <name>gsoc</name>

    <description>Google Summer of Code</description>
  </category>

  <category>
    <name>arch</name>

    <description>Architectures</description>
  </category>

  <category>
    <name>bin</name>

    <description>Userland Programs</description>
  </category>

  <category>
    <name>ports</name>

    <description>Ports</description>
  </category>

  <category>
    <name>doc</name>

    <description>Documentation</description>
  </category>

  <category>
    <name>misc</name>

    <description>Miscellaneous</description>
  </category>

  <project cat='proj'>
    <title>ClonOS: New &os;-Based Free/Open Hosting Platform</title>

    <contact>
      <person>
	<name>
	  <given>Oleg</given>
	  <common>Ginzburg</common>
	</name>
	<email>olevole@olevole.ru</email>
      </person>
    </contact>

    <links>
      <url href="http://clonos.tekroutine.com">ClonOS Homepage</url>
    </links>

    <body>
      <p>Currently, &os; is well proven as a base for routers
	(<strong>pfSense</strong>, <strong>OPNSense</strong>,
	<strong>BSDRP</strong>) and NAS (<strong>FreeNAS</strong>,
	<strong>zfsGuru</strong>, <strong>Nas4Free</strong>).  However,
	&os;-based solutions are almost completely absent in the
	virtualization area, and <strong>ClonOS</strong> is one of the
	attempts to change it.
      </p>

      <p>ClonOS is a new free open-source &os;-based platform for virtual
	environment creation and management.  In the core platform are:
      </p>

      <ul>
	<li>&os; as the host OS</li>
	
	<li><a href="http://man.FreeBSD.org/bhyve/8">bhyve</a></li>

	<li><a href="https://www.xenproject.org/">xen</a></li>

	<li><a href="http://man.freebsd.org/vale/4">vale</a></li>

	<li><a href="http://man.freebsd.org/jail/8">jail</a></li>

	<li><a href="https://www.bsdstore.ru/">CBSD</a> (as a management
	  tool)</li>

	<li><a href="https://puppet.com/">puppet</a> (for configuration
	  management)</li>

	<li>additional features such as go-micro services (obtaining
	  VMs, resizing disks and so on)</li>
      </ul>
    </body>

    <help>
      <task>We would like to see ClonOS in real-world use.  In this
	regard we are interested in finding more people and companies who
	used &os; in hosting tasks.  In addition, it could be great to
	work with the developers of existing NAS solutions (zfsGuru,
	Nas4Free)
      </task>
    </help>
  </project>

  <project cat='soc'>
    <title>Google Summer of Code 2016</title>

    <contact>
      <person>
	<name>
	  <given>Gavin</given>
	  <common>Atkinson</common>
	</name>
	<email>gavin@FreeBSD.org</email>
      </person>

      <person>
	<name>
	  <given>Pedro</given>
	  <common>Giffuni</common>
	</name>
	<email>pfg@FreeBSD.org</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.FreeBSD.org/SummerOfCode2016Projects">GSoC 2016 Projects</url>
      <url href="https://wiki.FreeBSD.org/SummerOfCodeIdeas">GSoC Ideas page</url>
    </links>

    <body>
      <p>As in all previous editions of the Google Summer of Code, &os;
	was an accepted organization, and we had the chance to mentor 15
	projects.  Huge thanks to all our mentors for keeping the high
	quality standards that make our community shine.</p>

      <p>This year was rather unique in that we accepted for the first
	time well-known members of the community that are not src
	committers to co-mentor.  We also accepted projects that have
	a different upstream than &os;.  Both are clear signs that &os; is
	growing and adapting to the wider community.</p>

      <p>This year we are also had administrative issues with Perforce
	and have accepted officially the use of external repositories, in
	particular github, as requested by students.</p>

      <p>12 of 15 projects were successful, which we think is an
	excellent result for a Google Summer of Code.</p>
    </body>

    <sponsor>
      Google Inc.
    </sponsor>

    <sponsor>
      The FreeBSD Foundation
    </sponsor>

    <help>
      <task>The world is changing and we need fresh project ideas.  We
	need to start looking for those ideas <strong>now</strong>.</task>
      
      <task>The project ideas wiki page has been reset and we need to
	get it populated before applying for the next Google Summer of
	Code.  Please help unleash the next stream of projects you want to
	see in &os;.</task>
    </help>
  </project>

  <project cat='proj'>
    <title>CloudABI: Running Untrusted Programs Directly on top of &os;</title>

    <contact>
      <person>
	<name>
	  <given>Ed</given>
	  <common>Schouten</common>
	</name>
	<email>ed@FreeBSD.org</email>
      </person>

      <person>
	<name>The CloudABI mailing list</name>
	<email>cloudabi-devel@googlegroups.com</email>
      </person>
    </contact>

    <links>
      <url href="https://nuxi.nl/">Official CloudABI Website.</url>
      <url href="https://nuxi.nl/cloudabi/FreeBSD/">Using CloudABI on &os;.</url>
      <url href="https://nuxi.nl/blog/2016/08/01/cloudabi-python.html">Python for CloudABI.</url>
      <url href="https://github.com/NuxiNL">CloudABI on GitHub.</url>
    </links>

    <body>
      <p>CloudABI is a compact UNIX-like runtime environment inspired by
	&os;'s Capsicum security framework.  It allows you to safely
	run potentially untrusted programs directly on top of &os;,
	Linux and macOS, without requiring the use of virtualisation,
	jails, etc.  This makes it a useful building block for
	cluster/cloud computing.</p>

      <p>Over the last couple of months, several new libraries and
	applications have been ported over to CloudABI, the most
	important addition being Python 3.6.  This means that you can now
	write strongly sandboxed apps in Python!</p>

      <p>Support for different hardware platforms has also improved.  In
	addition to amd64 and arm64, we now support i686 and armv6.
	The release of LLVM 3.9 was important to us, as it has
	integrated all the necessary changes to support the first three
	platforms.  Full armv6 support is still blocked on some issues
	with LLVM's linker, LLD.</p>
    </body>

    <sponsor>
      Nuxi, the Netherlands
    </sponsor>

    <help>
      <task>Play around with CloudABI and let us know what you think of
	it!  Full support for amd64 and arm64 is part of &os; 11.0.
	i686 and armv6 support is only available on HEAD, but will be
	merged to the stable/11 branch in the future.</task>

      <task>Interested in Python programming? Give our copy of Python a
	try and share your experiences!</task>

      <task>Do you maintain pieces of software that could benefit from
	strong sandboxing?  Try building them using the CloudABI cross
	compiler!</task>
    </help>
  </project>

  <project cat='kern'>
    <title>&os; on Hyper-V and Azure</title>

    <contact>
      <person>
	<name>
	  <given>Sepherosa</given>
	  <common>Ziehau</common>
	</name>
	<email>sepherosa@gmail.com</email>
      </person>

      <person>
	<name>
	  <given>Hongjiang</given>
	  <common>Zhang</common>
	</name>
	<email>honzhan@microsoft.com</email>
      </person>

      <person>
	<name>
	  <given>Dexuan</given>
	  <common>Cui</common>
	</name>
	<email>decui@microsoft.com</email>
      </person>

      <person>
	<name>
	  <given>Kylie</given>
	  <common>Liang</common>
	</name>
	<email>kyliel@microsoft.com</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.FreeBSD.org/HyperV">&os; Virtual Machines on Microsoft Hyper-V</url>
      <url href="https://technet.microsoft.com/en-us/library/dn531030.aspx">Supported Linux and &os; virtual machines for Hyper-V on Windows</url>
    </links>

    <body>
      <p>This quarter, the Hyper-V storage driver was greatly improved:
	its performance was increased by a factor of 1.2-2 by applying
	BUS_DMA and UNMAP_IO, enlarging the request queue, and selecting the
	outgoing channel with the LUN considered;  TRIM/UNMAP was enabled;
	and some critical bugs (PRs 209443, 211000, 212998) were fixed so
	that disk hot add/remove and VHDX online resizing should work
	now.</p>

      <p>The VMBus driver also received attention, with enhancements made for
	the handling of device hot add/remove.</p>

      <p> In the Hyper-V network driver, configurable RSS key and dynamic
	MTU change are now supported.</p>

      <p>&os; images on Azure continue to be updated &mdash; after
	publishing the &os; 10.3 VM image on the global Microsoft Azure in
	June, Microsoft also published the VM image on the Microsoft Azure
	operated by 21Vianet in China in September.</p>

      <p>Patches have been developed to support PCIe pass-through (also
	known as Discrete Device Assignment); this feature allows physical
	PCIe devices to be passed through to &os; VMs running on Hyper-V
	(Windows Server 2016), giving them near-native performance with low
	CPU utilization.  The patch to enable the feature will be posted for
	review soon.</p>
    </body>

    <sponsor>
      Microsoft
    </sponsor>
  </project>

  <project cat='gsoc'>
    <title>ptnet Driver and bhyve Device Model</title>

    <contact>
      <person>
	<name>
	  <given>Vincenzo</given>
	  <common>Maffione</common>
	</name>
	<email>v.maffione@gmail.com</email>
      </person>
    </contact>

    <links>
      <url href="https://wiki.FreeBSD.org/SummerOfCode2016/PtnetDriverAndDeviceModel">&os; Wiki Page for Project Overview</url>
      <url href="http://info.iet.unipi.it/~luigi/papers/20160613-ptnet.pdf">Conference Paper</url>
      <url href="https://svnweb.FreeBSD.org/socsvn/soc2016/vincenzo/head/">Subversion Repository</url>
    </links>

    <body>
      <p>This project provides:</p>

      <ul>
	<li>A new driver (<tt>if_ptnet</tt>) for a paravirtualized network
	  device, modeled after the netmap API.  The driver supports
	  multi-queue netmap ports, and it is able to work both in netmap
	  mode and in normal mode.</li>

	<li>The emulation of the <tt>ptnet</tt> device model as a module
	  of the <tt>bhyve</tt> hypervisor.</li>
      </ul>

      <p>The <tt>ptnet</tt> device and driver has been introduced to
	overcome the performance limitations of TCP/IP networking between
	bhyve VMs.  Prior to this work, the most performant solution for
	VM-to-VM intra-host TCP communication provided less than 2 Gbps TCP
	throughput.  With <tt>ptnet</tt>, in the same VM-to-VM TCP
	communication scenario, it is possible to obtain up to 20 Gbps.</p>
    </body>

    <sponsor>
      FreeBSD Foundation
    </sponsor>

    <help>
      <task>Share <tt>virtio-net</tt> header management code with the
	<tt>if_vtnet</tt> driver.  In the current code, about 100 lines of
	code have been copied and pasted from <tt>if_vtnet.c</tt>.</task>
    </help>
  </project>
</report>
