<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % man PUBLIC "-//FreeBSD//ENTITIES DocBook Manual Page Entities//EN">
%man;
<!ENTITY % authors PUBLIC "-//FreeBSD//ENTITIES DocBook Author Entities//EN">
%authors;
<!ENTITY % not.published "IGNORE">
]>

<article>
  <articleinfo>
    <title>Mirroring FreeBSD</title>
    <pubdate>$FreeBSD$</pubdate>
    <authorgroup>
      <author>
        <firstname>Jun</firstname>
        <surname>Kuriyama</surname>
        <affiliation>
          <address><email>kuriyama@FreeBSD.org</email></address>
        </affiliation>
      </author>
      <author>
        <firstname>Valentino</firstname>  
        <surname>Vaschetto</surname>
        <affiliation>
          <address><email>logo@FreeBSD.org</email></address>                             
        </affiliation>
      </author>
    </authorgroup>
    <abstract>
      <para>An in-progress article on how to mirror FreeBSD, aimed at
        hub administrators</para>
    </abstract>
  </articleinfo>

  <sect1 id="mirror-howtomirror">
    <title>How to mirror FreeBSD</title>
    <sect2 id="mirror-ftp">
      <title>FTP</title>
      <para>At this time (just before 4.5-RELEASE), full mirror
        requires 65GB disk space. For safety, 70-80GB will be
        required</para>
      <para>An anonymous ftp mirror requires network bandwidth.
        It is not encouraged if your site does not have enough
        spare bandwidth</para>
      <itemizedlist>
        <listitem>
          <para>Choose favorite ftp mirror tool (such as
          <port>ftp/mirror</port>, <port>ftp/ftpmirror</port>
          , <port>ftp/spegla</port> and so on.)</para>
        </listitem>
        <listitem>
          <para>Select upstream. First candidate is your
          local mirror (ftpX.XX.FreeBSD.org). If there is no
          official mirror in your country, use ftpX.FreeBSD.org
          instead. (X stands for a number, and XX stands for
          your local country code)</para>
        </listitem>
        <listitem>
          <para>Setting up your mirror configuration.</para>
        </listitem>
      </itemizedlist>
    </sect2>
    <sect2 id="mirror-cvsup">
      <title>CVSup</title>
      <para>At this time (01/29/2002), full CVSup mirror requires
        3GB disk space. For safety, 4-5GB will be required.</para>
      <para>Public CVSup mirror requires high disk activity. It
        is encouraged to use RAID-0 or RAID-5.</para>
      <para>You can setting up CVSup mirror configuration by
        <port>net/cvsup-mirror</port> port.</para>
      <para>Upstream selection is same as ftp. First candidate is
        your local CVSup mirror (ftp?.??.FreeBSD.org). Next is
        ftp?.FreeBSD.org.</para>
    </sect2>
    <sect2 id="mirror-www">
      <title>WWW</title>
      <para>At this time (01/29/2002), full www mirror requires
        150MB disk space. For safety, 200MB will be required</para>
    </sect2>
  </sect1>

  <sect1 id="mirror-becomingofficial">
    <title>How to become an official FreeBSD mirror site</title>
    <para>Check your country subdomain is exist or not. If not,
      configure nameserver appropriately and then send your
      details to <email>hostmaster@FreeBSD.org</email>. If exists,
      contact hostmaster of your country subdomain. Hostmaster of
      subdomain is listed in the
      <ulink url="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/mirrors-ftp.html">
      Handbook</ulink>.</para>
    <para>Official mirrors may get access to <emphasis>master
      </emphasis>sites:</para>
    <itemizedlist>
      <listitem>
        <para>ftp-master.FreeBSD.org: <email>peter@FreeBSD.org</email></para>
      </listitem>
      <listitem>
        <para>cvsup-master.FreeBSD.org: <email>jdp@FreeBSD.org</email></para>
      </listitem>
    </itemizedlist>
    <sect2 id="mirror-ftpmaster">
      <title>About ftp-master.FreeBSD.org</title>
      <para>ftp-master.FreeBSD.org provides rsync and CVSup
        access rather in addition to ftp protocol.</para>
      <para>Mirrors should be encouraged to also allow rsync
        access for the FTP contents, especially Tier-1 mirrors.</para>
    </sect2>
    <sect2 id="mirror-cvsupmaster">
      <title>About cvsup-master.FreeBSD.org</title>
      <para>Sample supfile for cvsup-master:</para>
      <programlisting>*default host=ftp-master.FreeBSD.org
*default base=/ftp-master
*default prefix=/ftp-master/pub
*default delete use-rel-suffix

FreeBSD-archive         release=all preserve</programlisting>
    </sect2>
  </sect1>
  <sect1 id="mirror-statpages">
    <title>Stat links</title>
    <para>Here are links to the stat pages of your favorite mirrors
      (a.k.a. the only ones who feel like providing stats).</para>
    <sect2 id="mirror-statpagesftp">
      <title>FTP site stats</title>
      <itemizedlist>
        <listitem>
          <para>ftp.is.FreeBSD.org - <email>oli@isnic.is</email> - 
            <ulink url="http://www.rhnet.is/status/draupnir/draupnir.html">
            (Bandwidth)</ulink> <ulink url="http://www.rhnet.is/status/ftp/ftp-notendur.html">(FTP
            users)</ulink> <ulink url="http://www.rhnet.is/status/ftp/http-notendur.html">(HTTP users)
            </ulink></para>
        </listitem>
      </itemizedlist>
    </sect2>
    <sect2 id="mirror-statpagescvsup">
      <title>CVSup site stats</title>
      <itemizedlist>
        <listitem>
          <para>cvsup5.FreeBSD.org - <email>logo@FreeBSD.org</email> - <ulink
            url="http://blitzkrieg.blackened.com/~logo/cvsup5/cvsup5.html">(CVSup processes)</ulink></para>
        <listitem>
          <para>cvsup[23456].jp.FreeBSD.org - <email>kuriyama@FreeBSD.org</email> - <ulink
            url="http://home.jp.freebsd.org/stats/mrtg/cvsup/">(CVSup processes)</ulink></para>
        </listitem>
      </itemizedlist>
    </sect2>
  </sect1>
</article>

<!-- 
     Local Variables:
     mode: sgml
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     End:
-->
