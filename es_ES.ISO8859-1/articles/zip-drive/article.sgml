<?xml version="1.0" encoding="ISO8859-1" standalone="no"?>
<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook XML V4.2-Based Extension//EN"
	"../../../share/sgml/freebsd42.dtd" [
<!ENTITY % entities PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Entity Set//ES" "../../share/sgml/entities.ent">
%entities;
]>

<!-- $FreeBSD$ -->

<article lang="es">
  <articleinfo>
    <title>Unidades ZIP</title>

    <authorgroup>
      <author>
	<firstname>Jason</firstname>
	<surname>Bacon</surname>

	<affiliation>
	  <address><email>acadix@execpc.com</email></address>
	</affiliation>
      </author>
    </authorgroup>
   <abstract>
     &trans.es.bazcar;
   </abstract>

   <pubdate>$FreeBSD$</pubdate>

   <releaseinfo>$FreeBSD$</releaseinfo>
  </articleinfo>

  <sect1>
    <title>Introducción a las Unidades ZIP</title>

    <para>Los discos ZIP son dispositivos magnéticos,
      extraíbles y de alta capacidad que pueden leerse y
      escribirse mediante unidades ZIP de IOMEGA. Los discos ZIP son
      similares a los disquetes (floppy) pero son mucho más
      rápidos y ofrecen una capacidad de almacenamiento mucho
      mayor.  Así como los disquetes suelen ser de 1'44 MB los
      discos ZIP existen en dos tamaños, de 100 y 250 MB.  Los
      discos ZIP no deben ser confundidos con el formato super-floppy,
      un dispositivo que usa disquetes de 120 MB pero que admite los
      discos tradicionales de 1'44 MB.</para>

    <para>IOMEGA distribuye asímismo unidades de rendimiento
      más alto y mucha mayor capacidad llamadas JAZZ.  Las
      unidades JAZZ usan discos de 1 y 2 GB.</para>

    <para>Las unidades ZIP están disponibles como dispositivos
      internos y externos y emplean una de los siguientes
      interfaces:</para>

    <orderedlist>
      <listitem>
        <para>El interfaz SCSI es el más rápido, sofisticado,
          expandible y caro.  El interfaz SCSI se usa en todo tipo de
          plataformas, desde PC y estaciones RISC a miniordenadores para
          conectar todo tipo de periféricos como discos duros,
          unidades de cinta, scanners, etc.  Los dispositivos ZIP SCSI pueden
          ser internos o externos, que requieren que la controladora SCSI
          disponga de un conector externo.</para>

	<note>
          <para>Si usa una unidad SCSI externa es importante que nunca
            la conecte o desconecte del bus SCSI mientras el ordenador
            está funcionando.  Si lo hace puede causar daños
            en el sistema de ficheros del resto de los discos del
            sistema.</para>
	</note>

        <para>Si lo que busca es el máximo rendimiento y una
          sencilla configuración el interfaz SCSI es la mejor
          elección.  Probablemente tendrá que
          añadir una controladora SCSI dado que la mayoría
          de los PC (salvo los servidores de alto rendimiento) no
          ofrecen soporte SCSI integrado.  Cada controladora SCSI puede
          admitir entre 7 y 15 dispositivos SCSI dependiendo del
          modelo.</para>

        <para>Cada unidad SCSI tiene su propio controlador y
          esos controladores son razonablemente inteligentes y
          están bien estandarizados (la segunda S de SCSI
          viene de Standard), de manera que desde el punto de vista
          del sistema operativo, todos los dispositivos SCSI parecen
          ser el mismo, como sucede con las unidades de cinta
          SCSI, etc.  Para poder utilizar dispositivos SCSI el
          sistema operativo necesita únicamente un
          <quote>driver</quote> específico para la controladora
          que se desea usar y un <quote>driver</quote> genérico
          para cada tipo de dispositivo, ésto es, un disco SCSI,
          una unidad de cinta SCSI, etc.  Algunos dispositivos SCSI pueden
          ser mejor aprovechados mediante <quote>drivers</quote>
          especializados (v.g. unidades de cinta DAT) pero tienden a
          funcionar perfectamente con los <quote>drivers</quote>
          genéricos, que sencillamente puede que no incluyan alguna
          de las características especiales.</para>

        <para>El usar una unidad ZIP SCSI es algo tan simple como determinar
          cuál es el fichero de dispositivo en el directorio
	  <filename>/dev</filename> que representa la unidad
          ZIP.  Esto puede saberse examinando el mensaje de arranque
          de FreeBSD (o en <filename>/var/log/messages</filename> tras
          el arranque), donde debería encontrar algo parecido
          a:</para>

	<programlisting>da1: &lt;IOMEGA ZIP 100 D.13&gt; Removable Direct Access SCSI-2 Device</programlisting>

        <para>Esto significa que la unidad ZIP está representada por
           el fichero <filename>/dev/da1</filename>.</para>
      </listitem>

      <listitem>
        <para>El interfaz IDE es un interfaz de acceso a discos duros de
          bajo coste que se usa en la mayoría de los PC de
          escritorio.  La mayoría de los dispositivos IDE son
          exclusivamente internos.</para>

        <para>El rendimiento de los dispositivos ZIP IDE es comparable al
          de los ZIP SCSI.  (El interfaz IDE no es tan rápido como el
          SCSI pero el rendimiento de los dispositivos ZIP está
          condicionado principalmente por la parte mecánica del
          dispositivo, no por el interfaz del bus).</para>

        <para>El inconveniente del interfaz IDE son las limitaciones que
          conlleva.  La mayoría de adaptadores IDE sólo
          permiten utilizar dos dispositivos y generalmente los interfaces
          IDE no están diseñados para perpetuarse en el
          tiempo.  Por ejemplo, el interfaz IDE original no admite
          discos duros con más de 1.024 cilindros, lo que
          obligó a mucha gente a actualizar su hardware antes de lo
          esperado.  Si prevé añadir nuevo hardware a su PC
          (otro disco duro, una unidad de cinta, un scanner, etc.) no
          estaría de más que considerara la idea de adquirir
          una controladora y un ZIP SCSI para evitar problemas en el
          futuro.</para>

        <para>En FreeBSD los dispositivos IDE llevan el prefijo
          <literal>a</literal>.  Por ejemplo, un disco duro IDE
          podría ser
	  <filename>/dev/ad0</filename>, y un CDROM IDE (ATAPI)
          podría ser
	  <filename>/dev/acd1</filename>, y así sucesivamente.</para>
      </listitem>

      <listitem>
        <para>El interfaz de puerto paralelo es muy común en
          dispositivos externos portátiles como dispositivos
          ZIP externos y scanners debido a que virtualmente todos los
          ordenadores disponen de un puerto paralelo estándar
          (que generalmente se usa con impresoras).  De éste modo
          se le facilitan las cosas a mucha gente a la hora de transferir
          datos entre distintos equipos.</para>

        <para>Generalmente el rendimiento es menor que el de dispositivos
          ZIP IDE o SCSI dadas las limitaciones de velocidad del puerto
          paralelo.  Ésta puede variar según el caso concreto
          y con frecuencia puede configurarse en la BIOS del
          sistema.  En algunos casos es imprescindible configurar en la
          BIOS el puerto paralelo para que admita el modo bidireccional
          puesto que los puertos paralelos fueron originalmente concebidos
          para verter su salida hacia las impresoras.</para>
      </listitem>
    </orderedlist>
  </sect1>

  <sect1>
    <title>ZIP de Puerto Paralelo: El <quote>driver</quote> <devicename>vpo
      </devicename></title>

    <para>Para usar en FreeBSD un dispositivo ZIP de puerto paralelo debe
      incluírse en el kernel el <quote>driver</quote> <devicename>vpo
      </devicename>.  Los
      dispositivos ZIP de puerto paralelo disponen de un controlador SCSI
      integrado.  El <quote>driver</quote> vpo permite al kernel de FreeBSD
      comunicarse con el controlador SCSI del dispositivo ZIP a través
      del puerto paralelo.</para>

    <para>Dado que el <quote>driver</quote> vpo no forma parte del kernel
      GENERIC (el kernel que se instala con FreeBSD) a partir de FreeBSD 3.2
      necesita recompilar su kernel para activar éste
      dispositivo.  Una de las maneras de recompilar el kernel se detalla
      más adelante en éste mismo texto.  Los pasos a seguir
      para activar el <quote>driver</quote> vpo podrían ser los
      siguientes:</para>

    <orderedlist>
      <listitem>
        <para>Ejecute <command>/stand/sysinstall</command> e instale los
          fuentes del kernel en su sistema.</para>
      </listitem>

      <listitem>
        <para>Crearemos un fichero de configuración del kernel
          que incluya el <quote>driver</quote> vpo:</para>

	<screen>&prompt.root; <userinput>cd /sys/i386/conf</userinput>
&prompt.root; <userinput>cp GENERIC MIKERNEL</userinput></screen>

        <para>Editamos <filename>MIKERNEL</filename> para sustituír
          la entrada <literal>ident</literal> por <literal>MIKERNEL</literal>
          y descomentamos la línea en la que aparece el <quote>driver
          </quote>vpo.</para>

        <para>Si dispone de un segundo puerto paralelo deberá
          copiar la sección <literal>ppc0</literal> para crear
          el dispositivo <literal>ppc1</literal>.  El segundo puerto
          paralelo suele usar la IRQ 5 y la dirección
          378.  Solamente es imprescindible asignar la IRQ en
          el fichero de configuración.</para>

        <para>Si su disco duro principal es SCSI puede tener problemas
          durante la prueba de dispositivos SCSI que FreeBSD efectúa
          en el arranque, dado que el sistema puede intentar utilizar el
          dispositivo ZIP como disco de inicio.  Esto produciría un
          fallo en el arranque salvo, claro está, que disponga de
          un sistema de ficheros raíz en su disco ZIP.  Si ese es
          su caso debe forzar al kernel a enlazar un dispositivo concreto
          (en éste caso su disco duro raíz) con
          <filename>/dev/da0/</filename>. El kernel asignará al
          disco ZIP el siguiente nombre SCSI disponible, es decir,
          <literal>/dev/da1</literal>.  Para fijar su disco duro SCSI como
          <literal>da0</literal> cambie la línea

	  <programlisting>device  da0</programlisting>

	  a

	  <programlisting>disk da0 at scbus0 target 0 unit 0</programlisting></para>

        <para>Quizás necesite modificar la línea anterior para
          que concuerde con los datos de su dispositivo SCSI.  Del mismo modo
          tendría que asociar la entrada scbus0 con su controladora.
          Por ejemplo, si tiene una controladora Adaptec 15xx debería
          cambiar

	  <programlisting>controller scbus0</programlisting>

	  por

	  <programlisting>controller scbus0 at aha0</programlisting></para>

        <para>Para concluír, dado que está creando un kernel
          personalizado debería aprovechar la ocasión para
          eliminar todos los <quote>drivers</quote> que no necesita.  Esto
          debe hacerse con precaución y solamente cuando tenga
          la seguridad de que sabe lo que está haciendo con su fichero
          de configuración.  Si borra los <quote>drivers</quote> que
          no necesita reducirá el tamaño de su kernel y por
          lo tanto dispondrá de más memoria que ofrecer a sus
          aplicaciones.  Para saber qué <quote>drivers</quote> puede
          borrar vaya al final del fichero <filename>/var/log/messages
          </filename> y busque líneas que incluyan <literal>not
           found</literal> (no encontrado).  Comente las líneas de
          esos <quote>drivers</quote> en su fichero de
          configuración. Puede cambiar otras opciones más
          para reducir el tamaño e incrementar la velocidad de su
          kernel. Lea la sección del Handbook correspondiente a la
          recompilación del kernel para conocer todos los
          detalles.</para>
      </listitem>

      <listitem>
        <para>Ha llegado el momento de compilar nuestro kernel:</para>

	<screen>&prompt.root; <userinput>/usr/sbin/config MIKERNEL</userinput>
&prompt.root; <userinput>cd ../../compile/MIKERNEL</userinput>
&prompt.root; <userinput>make clean depend &amp;&amp; make all install</userinput></screen>
      </listitem>
    </orderedlist>

    <para>Una vez finalizado el proceso necesitará
      reiniciar.  Asegúrese de que la unidad ZIP esté conectada
      al puerto paralelo antes del arranque.  Verá aparecer el
      dispositivo ZIP en los mensajes del arranque como vpo0 o vpo1,
      dependiendo del puerto paralelo al que esté
      conectado.  Debería aparecer también a qué
      nombre de dispositivo ha sido enlazado.  Por ejemplo
      sería <filename>/dev/da0</filename> si no hay en el sistema
      discos SCSI o <filename>/dev/da1</filename> si tiene como dispositivo
      principal un disco SCSI.</para>
  </sect1>

  <sect1>
    <title>Cómo montar discos ZIP</title>

    <para>Para acceder a un disco ZIP simplemente hay que montarlo como
      cualquier otro dispositivo de disco.  El sistema de ficheros
      estará representado como <quote>slice</quote> 4 dentro del
      dispositivo, tanto para discos SCSI o paralelos. Por ejemplo:</para>

    <screen>&prompt.root; <userinput>mount_msdos /dev/da1s4 /mnt</userinput></screen>

    <para>Para unidades ZIP IDE, utilice:</para>

    <screen>&prompt.root; <userinput>mount_msdos /dev/ad1s4 /mnt</userinput></screen>

    <para>Puede serle útil modificar <filename>/etc/fstab</filename>
      para montar los discos más fácilmente.  Añada una
      línea como la siguiente (con las modificaciones necesarias para
      sus necesidades):

      <programlisting>/dev/da1s4  /zip msdos rw,noauto  0 0</programlisting>

      y crée el directorio <filename>/zip</filename>.</para>

    <para>Hecho esto, puede montar su disco ZIP escribiendo:

      <screen>&prompt.root; <userinput>mount /zip</userinput></screen>

      y para desmontarlo escriba

      <screen>&prompt.root; <userinput>umount /zip</userinput></screen></para>

    <para>Tiene todos los detalles del formato en el que incluír
       o modificar entradas en <filename>/etc/fstab</filename> en
      &man.fstab.5;.</para>

    <para>Si quiere puede crear un sistema de ficheros de FreeBSD en un
      disco ZIP empleando &man.newfs.8;.  Sin embargo eso convertiría
      a ese disco en legible solamente en un sistema FreeBSD y
      y quizás en unos pocos sistemas clónicos de &unix;
      que reconocen el sistema de ficheros de FreeBSD. En cualquier caso
      DOS y Windows <emphasis>no</emphasis> están entre ellos.</para>
  </sect1>
</article>
