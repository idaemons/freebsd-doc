<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook XML V4.2-Based Extension//EN"
	"../../../share/sgml/freebsd42.dtd" [
<!ENTITY % entities PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Entity Set//FR" "../../share/sgml/entities.ent">
%entities;
]>

<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     Original revision: n.nn
-->

<article lang="fr">
  <articleinfo>
    <title>Installer et utiliser FreeBSD en même temps que d'autres systèmes d'exploitation</title>
    <authorgroup>
      <author>
        <firstname>Jay</firstname>
        <surname>Richmond</surname>
      </author>
    </authorgroup>

    <pubdate>$FreeBSD$</pubdate>

    <releaseinfo>$FreeBSD$</releaseinfo>

    <abstract>
      <para><email>jayrich@sysc.com</email></para>
      <para>6 Aout 1996</para>
      <para>Ce document explique comment faire cohabiter proprement FreeBSD et
        d'autres systèmes d'exploitation courants tels que Linux, MS-DOS, OS/2
        et Windows 95. Remerciements particuliers &agrave; Annelise Anderson
        <email>andrsn@stanford.edu</email>, Randall Hopper
        <email>rhh@ct.picker.com</email> et Jordan K. Hubbard
        <email>jkh@time.cdrom.com</email>.</para>

        &trans.a.haby;
    </abstract>
  </articleinfo>
  <sect1>
    <title>Résumé</title>
    <para>La plupart des gens n'arrivent pas &agrave; faire cohabiter leurs divers
      systèmes d'exploitation sans des disques de grande capacité,
      des informations sur les gros disques EIDE sont donc incluses. Comme il
      y a de nombreuses combinaisons possibles de systèmes d'exploitation et
      de configurations de disques durs, la section
      <link linkend="examples">Exemples</link> sera peut-être celle
      qui vous sera la plus utile. Elle décrit plusieurs configurations
      d'ordinateurs utilisant plusieurs systèmes d'exploitation.</para>
    <para>Ce document suppose que vous avez déj&agrave; préparé de la place sur votre
      disque dur pour un système d'exploitation supplémentaire. Chaque fois que
      vous repartitionnez votre disque dur, vous prenez le risque de détruire
      les données qui se trouvent sur les partitions existantes. Toutefois, si
      votre disque est entièrement occupé par DOS, vous trouverez peut-être le
      programme FIPS (qui se trouve sur le CD-ROM FreeBSD dans le répertoire
      <filename>\TOOLS</filename> ou que vous pouvez télécharger par
      <ulink url="ftp://ftp.freebsd.org/pub/FreeBSD/tools">ftp</ulink>) utile.
      Il vous permet de repartitionner votre disque sans détruire les données
      qui s'y trouvent. Il existe aussi une programme commercial appelé
      Partition Magic, qui vous permet de dimensionner et de supprimer des
      partitions sans dégât.</para>
  </sect1>
  <sect1 id="boot-managers">
    <title>Revue des gestionnaires de démarrage</title>
    <para>Ce ne sont que de brèves descriptions des différents gestionnaires
      de démarrage que vous rencontrerez. Selon la configuration de votre
      ordinateur, vous pourrez trouver utile d'en employer plus d'un sur le
      même système.</para>
    <variablelist>
      <varlistentry>
        <term>Boot Easy</term>
        <listitem>
          <para>C'est le gestionnaire de démarrage par défaut de FreeBSD. Il
            peut démarrer &agrave; peu près n'importe quoi, y compris BSD, OS/2
            (HPFS), Windows 95 (FAT et FAT32) et Linux. Les partitions sont
            sélectionnées &agrave; l'aide des touches fonction.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><foreignphrase>OS/2 Boot Manager</foreignphrase></term>
        <listitem>
          <para>Il démarrera depuis la FAT, HPFS, FFS (FreeBSD) et EXT2
            (Linux). Il peut aussi démarrer depuis des partitions FAT32.
            Les partitions sont sélectionnées avec les touches Flèches.
            Le gestionnaire de démarrage
            <foreignphrase>OS/2 Boot Manager</foreignphrase> est le
            seul &agrave; utiliser sa propre partition distincte, &agrave; l'inverse des
            autres qui utilisent l'enregistrement principal de démarrage
            (<foreignphrase>Master Boot
            Record</foreignphrase>&nbsp;-&nbsp;MBR). Il doit donc être
            installé dans les 1024 premiers cylindres pour éviter des
            problèmes de démarrage. Il peut charger Linux en utilisant LILO
            lorsque ce dernier se trouve sur le secteur de démarrage et non sur
            le MBR. Allez sur les
            <ulink url="http://www.freenix.fr/linux/HOWTO">HOWTO Linux</ulink>
            sur le World Wide Web pour plus d'informations sur le démarrage
            de Linux avec le gestionnaire de démarrage d'OS/2.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>OS-BS</term>
        <listitem>
          <para>C'est une alternative &agrave; Boot Easy. Il vous donne plus de
            contrôle sur le processus de démarrage, avec la possibilité de
            sélectionner la partition &agrave; démarrer par défaut et le délai de
            démarrage. La version béta de ce programme vous permet de
            sélectionner le système d'exploitation &agrave; démarrer avec les
            touches Flèches. Il est inclus sur le CD-ROM FreeBSD dans le
            répertoire <filename>\TOOLS</filename> et vous pouvez le
            télécharger par
            <ulink url="ftp://ftp.freebsd.org/pub/FreeBSD/tools">ftp</ulink>.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>LILO, ou LInux LOader (&ldquo;chargeur Linux&rdquo;)</term>
        <listitem>
          <para>C'est un gestionnaire de démarrage limité. Il peut démarrer
            FreeBSD, mais il faut acommoder son fichier de configuration.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    <informaltable>
      <tgroup cols="1">
        <tbody>
          <row>
            <entry><emphasis>A propos de la FAT32:</emphasis> La FAT32
              remplace le système de fichiers FAT depuis la version Microsoft
              OEM SR2 Béta, qui sera utilisée sur les ordinateurs avec Windows
              95 pré-installé vers la fin de 1996. Elle convertit le système
              de fichiers FAT habituel et permet d'utiliser des tailles
              d'agrégat&nbsp;-&nbsp;&ldquo;<foreignphrase>cluster</foreignphrase>&rdquo;&nbsp;-&nbsp;plus
              petites sur de plus gros disques. La FAT32 modifie aussi le
              secteur de démarrage et la table d'allocation habituels de la FAT,
              ce qui la rend incompatible avec certains gestionnaires de
              démarrage.</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </sect1>
  <sect1 id="typical">
    <title>Une configuration typique</title>
    <para>Supposons que nous ayons deux gros disques EIDE, et que nous
      voulions y installer FreeBSD, Linux et Windows 95.</para>
    <para>Voici comment je procéderais avec ces disques durs:</para>
    <itemizedlist>
      <listitem>
        <para><filename>/dev/wd0</filename> (premier disque dur
          physique),</para>
      </listitem>
      <listitem>
        <para><filename>/dev/wd1</filename> (second disque dur).</para>
      </listitem>
    </itemizedlist>
    <para>Ils ont tous deux 1416 cylindres.</para>
    <orderedlist>
      <listitem>
        <para>Je démarre avec une disquette de démarrage MS-DOS ou
          Windows qui contient l'utilitaire <filename>FDISK.EXE</filename>
          et crée une petite partition primaire de 50 Mo (35-40 pour Windows
          95 et un peu d'espace libre) sur le premier disque. Je crée aussi
          une partition plus importante sur le second disque pour mes
          applications et mes données Windows.</para>
      </listitem>
      <listitem>
        <para>Je redémarre et installe Windows 95 (plus facile &agrave; dire qu'&agrave;
          faire) sur la partition <filename>C:</filename>.</para>
      </listitem>
      <listitem>
        <para>J'installe ensuite Linux. Je ne suis pas certain pour qui
          concerne toutes les distributions de Linux, mais la Slackware
          comprend LILO (voyez la section
          <link linkend="boot-managers">Revue des gestionnaires de
          démarrage</link>). Au moment de partitionner mon disque dur
          avec l'utilitaire <filename>fdisk</filename> de Linux,
          je mets tout Linux sur le premier disque (peut-être 300 Mo
          pour une partition racine confortable et de l'espace de
          pagination).</para>
      </listitem>
      <listitem>
        <para>Après avoir installé Linux, et quand on me demande si je veux
          installer LILO, je fais <emphasis>attention</emphasis> &agrave; l'installer
          sur le secteur de démarrage de ma partition racine Linux, et non
          sur le MBR (<foreignphrase>Master Boot
          Record</foreignphrase>&nbsp;-&nbsp;enregistrement principal de
          démarrage).</para>
      </listitem>
      <listitem>
        <para>L'espace restant disponible sur le disque peut servir &agrave;
          FreeBSD. Je vérifie aussi que la
          tranche&nbsp;-&nbsp;&ldquo;<foreignphrase>slice</foreignphrase>&rdquo;&nbsp;-&nbsp;racine
          de FreeBSD ne déborde pas de la limite des 1024 cylindres (1024
          cylindres correspond &agrave; 528 Mo &agrave; partir du début du disque sur nos
          hypothétiques disques de 720 Mo). J'utiliserai éventuellement le
          reste du disque dur (environ 270 Mo) pour les tranches
          <filename>/usr</filename> et <filename>/var</filename>. Le
          reste du second
          disque (l'espace disponible dépend de la taille de ma partition
          d'applications/données Windows que j'ai créée &agrave; l'étape 1) peut être
          utilisé pour la tranche <filename>/usr/src</filename> et l'espace
          de pagination.</para>
      </listitem>
      <listitem>
        <para>Vus de l'utilitaire <filename>fdisk</filename> de Windows 95, mes
          disques ressembleraient &agrave; ceci:</para>
        <programlisting>
---------------------------------------------------------------------

                  Display Partition Information

Current fixed disk drive: 1

Partition  Status  Type  Volume_Label  Mbytes  System  Usage
C: 1          A   PRI DOS                50    FAT**     7%
   2          A   Non-DOS (Linux)       300             43%

Total disk space is  696 Mbytes (1 Mbyte = 1048576 bytes)

Press Esc to continue

---------------------------------------------------------------------

                  Display Partition Information

Current fixed disk drive: 2

Partition  Status  Type  Volume_Label  Mbytes  System  Usage
D: 1          A   PRI DOS                420   FAT**    60%

Total disk space is  696 Mbytes (1 Mbyte = 1048576 bytes)

Press Esc to continue

---------------------------------------------------------------------
        </programlisting>
        <para>Disons FAT16, ou FAT32 si vous utilisez la mise &agrave; jour
          OEM SR2 (voyez la section
          <link linkend="boot-managers">Revue des gestionnaires de
          démarrage</link>).</para>
      </listitem>
      <listitem>
        <para>J'installe FreeBSD. Je veille &agrave; démarrer avec le premier
          disque dur défini comme &ldquo;NORMAL&rdquo; dans le paramétrage
          du BIOS. Sans cela, je devrais indiquer la géométrie réelle de mon
          disque au démarrage (pour la connaître, démarrez Windows 95 et
          consultez les diagnostics Microsoft (<filename>MSD.EXE</filename>)
          ou allez voir dans le BIOS) avec le paramètre
          <literal>hd0=1416,16,63</literal> où <replaceable>1416</replaceable>
          est le nombre de cylindres de mon disque dur,
          <replaceable>16</replaceable> est le nombre de têtes par piste et
          <replaceable>63</replaceable> est le nombre de secteurs par
          tête.</para>
      </listitem>
      <listitem>
        <para>Au moment de partitionner le disque dur, je fais attention &agrave;
          bien installer Boot Easy sur le premier disque. Je ne m'occupe pas
          du second disque, &agrave; partir duquel rien n'est démarré.</para>
      </listitem>
      <listitem>
        <para>Au redémarrage, Boot Easy devrait reconnaître mes trois
          partitions démarrables comme DOS (Windows 95), Linux et BSD
          (FreeBSD)</para>
      </listitem>
    </orderedlist>
  </sect1>
  <sect1 id="special">
    <title>Considérations particulières</title>
    <para>La plupart des systèmes d'exploitation sont très chatouilleux sur la
      façon et l'endroit où ils sont installés sur le disque dur. Windows 95 et
      DOS doivent être sur la première partition primaire du premier disque dur.
      OS/2 fait exception. Il peut être sur le premier ou le second disque et
      sur une partition primaire ou étendue. Si vous n'êtes pas sûr de vous,
      gardez le début des partitions démarrables avant le 1024ème
      cylindre.</para>
    <para>Si vous installez Windows 95 sur un système BSD existant, cela va
      &ldquo;écraser&rdquo; le MBR, et vous devrez réinstaller votre précédent
      gestionnaire de démarrage. Boot Easy peut être réinstallé avec
      l'utilitaire <filename>BOOTINST.EXE</filename> qui se trouve dans le
      répertoire <filename>\TOOLS</filename> du CD-ROM, ou peut être téléchargé
      par <ulink url="ftp://ftp.freebsd.org/pub/FreeBSD/tools">ftp</ulink>.
      Vous pouvez aussi relancer le processus d'installation et aller dans
      l'éditeur de partitions. De l&agrave;, indiquez que la partition FreeBSD est
      démarrable, choisissez l'option <option>Boot Manager</option>
      (gestionnaire de démarrage) et tapez
      <literal>W</literal> pour écrire les informations sur le MBR. Vous
      pouvez maintenant redémarrer, et Boot Easy reconnaîtra votre Windows 95
      en tant que DOS.</para>
    <para>N'oubliez pas s'il vous plaît qu'OS/2 peut lire les partitions FAT
      et HPFS, mais pas les partitions FFS (FreeBSD) ou EXT2 (Linux). De même,
      Windows 95 ne peut que lire et écrire sur les partitions FAT et FAT32
      (voyez la section <link linkend="boot-managers">Revue des gestionnaire
      de démarrage</link>). FreeBSD peut lire la plupart des systèmes de
      fichiers, mais ne sait pas actuellement lire les partitions HPFS. Linux
      peut lire les partitions HPFS, mais ne peut pas y écrire. Les versions
      récentes du noyau Linux (2.x) peuvent lire et écrire les partitions VFAT
      de Windows 95 (La VFAT est ce qui permet &agrave; Windows d'utiliser des noms
      de fichiers longs&nbsp;-&nbsp;c'est &agrave; peu près la même chose que la
      FAT). Linux peut lire et écrire sur la plupart des systèmes de fichiers.
      Pigé? Je l'espère.</para>
  </sect1>
  <sect1 id="examples">
    <title>Exemples</title>
    <para><emphasis>(Cette section a besoin d'être revue, envoyez s'il vous
      plaît vos exemples &agrave; <email>jayrich@sysc.com</email>.)</emphasis></para>
    <para>FreeBSD + Windows 95: Si vous avez installé FreeBSD après Windows 95,
      vous devriez voir la mention <literal>DOS</literal> sur le menu de Boot
      Easy. C'est Windows 95. Si vous avez installé Windows 95 après FreeBSD,
      lisez la section <link linkend="special">Considérations
      particulières</link> ci-dessus. Tant que votre disque n'a pas 1024
      cylindres, vous ne devriez pas avoir de problèmes pour démarrer. Si
      toutefois une de vos partitions va au-del&agrave; du 1024ème cylindre, et que
      vous avez des messages du type <literal>invalid system disk</literal>
      sous DOS (Windows 95) et que FreeBSD ne démarre pas, cherchez dans les
      paramètres de configuration de votre BIOS quelque chose appelé
      &ldquo;<literal>&gt; 1024 cylinder support</literal>&rdquo; ou
      mode &ldquo;<literal>NORMAL/LBA</literal>&rdquo;. DOS peut avoir besoin
      du LBA (<foreignphrase>Logical Block
      Adressing</foreignphrase>&nbsp;-&nbsp;Adressage de bloc logique) pour
      démarrer correctement. Si la perspective de modifier les paramètres du
      BIOS &agrave; chaque démarrage ne vous enchante pas, vous pouvez démarrer
      FreeBSD depuis DOS avec l'utilitaire <filename>FBSDBOOT.EXE</filename>
      du CD (il devrait reconnaître votre partition FreeBSD et la
      démarrer).</para>
    <para>FreeBSD + OS/2 + Windows: Rien de nouveau dans ce cas. Le gestionnaire
      de démarrage d'OS/2 peut démarrer tous ces systèmes d'exploitation, il ne
      devrait pas y avoir de problème.</para>
    <para>FreeBSD + Linux: Vous pouvez aussi utiliser Boot Easy pour démarrer
      les deux systèmes d'exploitation.</para>
    <para>FreeBSD + Linux + Windows 95: (voyez la section
      <link linkend="typical">Une installation typique</link>).</para>
  </sect1>
  <sect1 id="help">
    <title>Autres endroits où trouver de l'aide</title>
    <para>Il y a de nombreux
      <ulink url="http://www.freenix.fr/linux/HOWTO">HOWTO Linux</ulink>
      qui traitent des systèmes d'exploitation multiples sur un même
      disque.</para>
    <para>Le
      <ulink url="http://www.linuxresources.com/LDP/HOWTO/mini/Linux+DOS+Win95+OS2.html">mini-HOWTO
        Linux+DOS+Win95+OS2</ulink> donne des indications sur la configuration
        du gestionnaire de démarrage d'OS/2, et le
      <ulink url="http://www.freenix.fr/linux/HOWTO/mini/Linux+FreeBSD.html">mini-HOWTO
        Linux+FreeBSD</ulink> peut aussi vous intéresser.
      L'<ulink url="http://www.in.net/~jkatz/win95/Linux-HOWTO.html">HOWTO
        Linux</ulink> est aussi utile.</para>
    <para>Le
      <ulink url="http://www.dorsal.org/~dcl/publications/NTLDR_hacking">Guide
        de programmation du chargeur NT</ulink> fournit des informations
        intéressantes sur le démarrage de Windows NT, 95 et DOS avec d'autres
        systèmes d'exploitation.</para>
    <para>Le jeu de documents d'Hale Landis, &ldquo;Comment ça marche&rdquo;,
      contient de bonnes informations sur toutes sortes de géométries de disques
      et autres sujets liés au démarrage. Voici quelques liens qui peuvent vous
      aider &agrave; le trouver:</para>
    <itemizedlist>
      <listitem>
        <para><ulink url="ftp://fission.dt.wdc.com/pub/otherdocs/pc_systems/how_it_works/allhiw.zip">ftp://fission.dt.wdc.com/pub/otherdocs/pc_systems/how_it_works/allhiw.zip</ulink>,</para>
      </listitem>
      <listitem>
        <para><ulink url="http://www.cs.yorku.ca/People/frank/docs/">http://www.cs.yorku.ca/People/frank/docs/</ulink>.</para>
      </listitem>
    </itemizedlist>
    <para>Enfin, ne négligez pas la documentation du noyau de FreeBSD sur le
      processus de démarrage, disponible dans la distribution du source du
      noyau (elle est installée dans
      <ulink url="file://localhost/usr/src/sys/i386/boot/biosboot/README.386BSD">/usr/src/sys/i386/boot/biosboot/README.386BSD</ulink>).</para>
  </sect1>
  <sect1>
    <title>Détails Techniques</title>
    <para><emphasis>(Contribution de Randall Hopper
      <email>rhh@ct.picker.com</email>)</emphasis></para>
    <para>Cette section tente de vous donner assez d'informations de base
      sur vos disques durs et sur le processus de démarrage &agrave; partir d'un
      disque pour vous permettre de régler la plupart des problèmes que vous
      pourriez rencontrer lorsque vous configurerez le démarrage de plusieurs
      systèmes d'exploitation. Elle commence par des choses relativement
      élémentaires, vous préférerez donc peut-être la parcourir en diagonale
      jusqu'&agrave; ce que les points abordés vous paraissent moins familiers et
      commencer alors &agrave; la lire en détail.</para>
    <sect2>
      <title>Introduction aux disques</title>
      <para>Trois termes fondamentaux décrivent la localisation des données
        sur vos disques durs: Cylindres, Têtes et Secteurs. Il n'est pas très
        important de savoir &agrave; quoi ils se rapportent sinon qu'ensemble, ils
        définissent où sont physiquement les données sur le disque.</para>
      <para>Votre disque a un nombre donné de cylindres, de têtes, et de
        secteurs par tête-cylindre (un doublet tête-cylindre est aussi appelé
        une piste). Ensemble, ces informations définissent la &ldquo;géométrie
        physique&rdquo; de votre disque. Il y a typiquement 512 octets par
        secteur et 63 secteurs par pistes, le nombre de cylindres et de têtes
        variant très largement d'un disque &agrave; l'autre. Vous pouvez alors
        calculer la quantité d'informations que peut enregistrer votre disque
        par la formule:</para>
      <programlisting>
nombre de cylindres X nombre de têtes X 63 secteurs/piste X 512 octets/secteur
      </programlisting>
      <para>Par exemple, pour mon disque Western Digital AC31600 EIDE de 1,6 Go,
cela donne:</para>
      <programlisting>
3148 cylindres X 16 têtes X 63 secteurs/piste X 512 octets/secteur
      </programlisting>
      <para>c'est-&agrave;-dire 1.624.670.208 octets, ou environ 1,6 Go.</para>
      <para>Vous pouvez connaître la géométrie physique de votre disque dur
        (nombre de cylindres, de têtes et de secteurs par piste) avec ATAID
        ou d'autres programmes que vous trouverez sur l'Internet. Ces
        informations sont peut-être aussi fournies avec votre disque. Faites
        cependant attention: si vous utilisez le LBA du BIOS (voyez la section
        <link linkend="limits">Restrictions pour le démarrage et
        avertissements</link>), vous ne pouvez pas vous servir de n'importe
        quel programme pour connaître la géométrie physique. Cela parce que de
        nombreux programmes (e.g., <filename>MSD.EXE</filename> ou
        le <filename>fdisk</filename> de FreeBSD) ne reconnaissent pas la
        géométrie physique, ils listent &agrave; la place la <emphasis>géométrie
        redéfinie</emphasis> (des valeurs virtuelles dues &agrave; l'utilisation
        du LBA). Continuez &agrave; lire pour savoir ce que cela veut dire.</para>
      <para>Une autre chose &agrave; savoir &agrave; propos de ces termes. 3
        valeurs&nbsp;-&nbsp;un numéro de cylindre, un numéro de tête, et un
        numéro du secteur sur la piste&nbsp;-&nbsp;identifient l'adresse absolue
        d'un secteur sur votre disque. Les cylindres et les têtes sont
        numérotés &agrave; partir de 0, et les numéros de secteurs commencent &agrave;
        1.</para>
      <para>Ceux que des détails plus techniques intéressent peuvent
        trouver un peu partout sur l'Internet des informations sur la géométrie
        des disques, les secteurs de démarrage, les BIOS, etc. Faites une
        recherche sur Yahoo, Lycos, etc. pour <literal>boot sector</literal> ou
        <literal>master boot record</literal>. Parmi les choses utiles que vous
        trouverez, il y a le jeu de documents
        &ldquo;Comment ça marche&rdquo;&nbsp;-&nbsp;<foreignphrase>How It
        Works</foreignphrase> de Hale Landis. Voyez la section
        <link linkend="help">Autres endroits où trouver de l'aide</link> pour
        avoir quelques pointeurs vers ces documents.</para>
      <para>OK, assez de terminologie. Nous sommes censés parler de démarrage
        ici.</para>
    </sect2>
    <sect2 id="booting">
      <title>Le processus de démarrage</title>
      <para>Sur le premier secteur de votre disque (cylindre 0, tête 0,
        secteur 1) se trouve l'enregistrement principal de
        démarrage&nbsp;-&nbsp;<foreignphrase>Master Boot
        Record</foreignphrase> (MBR). Il contient une carte de votre disque.
        Il identifie jusqu'&agrave; <emphasis>4 partitions</emphasis>, chacune d'elle
        étant un espace contigu sur ce disque. FreeBSD appelle les partitions
        des tranches&nbsp;-&nbsp;<foreignphrase>slices</foreignphrase>&nbsp;-&nbsp;pour
        éviter la confusion avec ses propres partitions, mais nous
        n'utiliserons pas ici ce terme. Chaque partition peut contenir son
        propre système d'exploitation.</para>
      <para>Chaque entrée de partition dans le MBR comprend un
        <emphasis>IDentifiant de partition</emphasis>, un
        <emphasis>Cylindre/Tête/Secteur de Début</emphasis> et un
        <emphasis>Cylindre/Tête/Secteur de Fin</emphasis>. L'IDentifiant de
        partition dit de quel type de partition il s'agit (de quel OS) et le
        Début/Fin dit où elle se trouve. La table des
        <link linkend="partitions">IDs de partitions</link> liste un
        échantillon d'identifiants de partitions usuels.</para>
      <informaltable id="partitions">
        <tgroup cols="2">
          <thead>
            <row>
              <entry>ID (hex)</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>01</entry>
              <entry>DOS12 primaire (FAT 12-bit)</entry>
            </row>
            <row>
              <entry>04</entry>
              <entry>DOS16 primaire (FAT 16-bit)</entry>
            </row>
            <row>
              <entry>05</entry>
              <entry>DOS12 étendue</entry>
            </row>
            <row>
              <entry>06</entry>
              <entry>DOS primaire large (&gt; 32 Mo)</entry>
            </row>
            <row>
              <entry>0A</entry>
              <entry>OS/2</entry>
            </row>
            <row>
              <entry>83</entry>
              <entry>Linux (EXT2FS)</entry>
            </row>
            <row>
              <entry>A5</entry>
              <entry>FreeBSD, NetBSD, 386BSD (UFS)</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
      <note>
        <para>Toutes les partitions ne dont pas démarrables (e.g. DOS étendue).
          Certaines le sont&nbsp;-&nbsp;d'autres ne le sont pas. Ce qui rend
          une partition démarrable est la configuration du secteur de démarrage
          de la
          partition&nbsp;-&nbsp;<foreignphrase>Partition Boot Sector</foreignphrase>&nbsp;-&nbsp;qui
          est toujours présent au début de chaque partition.</para>
      </note>
      <para>Quand vous configurez votre gestionnaire de démarrage favori, il
        consulte les entrées dans les tables de partitions du MBR de tous vos
        disques et vous donne la possibilité de donner un nom &agrave; ces entrées.
        Quand vous démarrez ensuite, le gestionnaire de démarrage
        est appelé par du code prévu pour cela &agrave; partir secteur principal de
        démarrage&nbsp;-&nbsp;<foreignphrase>Master Boot Sector</foreignphrase>&nbsp;-&nbsp;du
        premier disque trouvé sur votre système. Le gestionnaire consulte
        l'entrée de la table de partitions du MBR correspondant &agrave; la partition
        que vous avez choisie, charge le secteur de démarrage de cette partition
        et lui passe le contrôle. Ce secteur de démarrage de la partition
        elle-même contient suffisamment d'informations pour commencer &agrave; charger
        le système d'exploitation qui se trouve sur cette partition.</para>
      <para>Il y a une chose importante &agrave; savoir dont nous n'avons pas encore
        parlé. Tous vos disques durs ont un MBR. Toutefois, celui qui est
        important est celui qui se trouve sur le premier disque reconnu par le
        BIOS. Si vous n'avez que des disques durs IDE, c'est le premier disque
        IDE (e.g. le disque maître sur le premier contrôleur). De même pour les
        systèmes entièrement SCSI. Si vous avez et des disques durs IDE et des
        disques durs SCSI, le disque IDE est habituellement le premier disque
        dont la présence est testée par le BIOS, le premier disque IDE est donc
        le premier disque reconnu. Le gestionnaire de démarrage que vous
        installerez sera implémenté sur le premier disque dur reconnu comme
        nous venons de l'expliquer.</para>
    </sect2>
    <sect2 id="limits">
      <title>Restrictions pour le démarrage et avertissements</title>
      <para>Voici maintenant les choses intéressantes auxquelles il faut
        faire attention.</para>
        <sect3>
          <title>La redoutable limitation &agrave; 1024 cylindres et en quoi le LBA du
            BIOS peut être utile</title>
          <para>La première partie du processus de démarrage est entièrement
            confiée au BIOS, (si ce terme est nouveau pour vous, le BIOS est
            un circuit électronique sur votre carte mère qui contient le
            code de démarrage de votre ordinateur). C'est pourquoi cette
            première partie du processus est soumise aux limitations du
            BIOS.</para>
          <para>L'interface BIOS utilisée pour lire le disque dur durant
            cette phase (INT 13H, Sous-fonction 2) alloue 10 bits pour le
            numéro de cylindre, 8 bits pour le numéro de tête, et 6 bits
            pour le numéro de secteur. Cela limite les utilisateurs de
            cette interface (i.e. les gestionnaires de démarrage implémentés
            sur le MBR du disque ainsi que les chargeurs de systèmes
            d'exploitation implémentés sur les secteurs de démarrage) &agrave;:</para>
          <itemizedlist>
            <listitem>
              <para>1024 cylindres au plus,</para>
            </listitem>
            <listitem>
              <para>256 têtes au plus,</para>
            </listitem>
            <listitem>
              <para>64 secteurs/piste au plus, (en fait 63, 0 n'est pas
                disponible).</para>
            </listitem>
          </itemizedlist>
          <para>Or les diques durs de grande capacité ont beaucoup de
            cylindres et peu de têtes, le nombre de cylindres de ces disques
            est donc invariablement supérieurs &agrave; 1024. De ce fait et &agrave; cause
            de l'interface BIOS telle qu'elle est, vous ne pouvez pas démarrer
            n'importe où sur votre disque dur. Le code de démarrage (le
            gestionnaire de démarrage et le chargeur du système d'exploitation
            implémenté sur les secteurs de démarrage de chaque partition
            démarrable) doivent se situer avant le 1024ème cylindre. Si votre
            disque dur est standard et a 16 têtes, cela équivaut &agrave;:</para>
          <programlisting>
1024 cylindres/disque X 16 têtes/disque X 63 secteurs/piste X 512 octets
          </programlisting>
          <para>c'est-&agrave;-dire la limite souvent citée de 528 Mo.</para>
          <para>C'est l&agrave; qu'intervient le LBA (<foreignphrase>Logical Block
             Adressing</foreignphrase>&nbsp;-&nbsp;&ldquo;adressage de bloc
             logique&rdquo;) du BIOS. Le LBA du BIOS donne &agrave; l'utilisateur
             des routines de l'API (<foreignphrase>Application Programming
             Interface</foreignphrase>&nbsp;-&nbsp;&ldquo;interface de
             programmation&rdquo;) du BIOS, la possibilité d'accéder aux
             cylindres au-del&agrave; de 1024 avec les interfaces du BIOS en
             redéfinissant le cylindre. Cela signifie qu'il construit une
             nouvelle géométrie de vos cylindres et têtes, faisant croire
             au BIOS que votre disque a moins de cylindres et plus de têtes
             qu'en réalité. En d'autres termes, il profite du fait que les
             disques ont relativement peu de têtes et beaucoup de cylindres,
             pour modifier le rapport entre nombre de cylindres et nombre de
             têtes de façon &agrave; ce que tous deux soient inférieurs aux limites
             mentionnées ci-dessus (1024 cylindres, 256 têtes).</para>
           <para>Pour prendre de nouveau l'exemple de mon Western Digital 1,6
             Go, il a pour géométrie physique:</para>
           <programlisting>
(3148 cylindres, 16 têtes, 63 secteurs/piste, 512 octets/secteur)
           </programlisting>
           <para>Alors que le LBA du BIOS la redéfinit comme suit:</para>
           <programlisting>
( 787 cylindres, 64 têtes, 63 secteurs/piste, 512 octets/secteur)
           </programlisting>
           <para>ce qui correspond &agrave; la même capacité physique, mais avec des
             nombres de cylindres et de têtes dans les limites acceptables par
             les API du BIOS. (Au passage, j'ai sur l'un de mes disques, et
             Linux et FreeBSD au-del&agrave; du 1024ème cylindre, et les deux démarrent
             sans problème, grâce au LBA du BIOS.)</para>
        </sect3>
        <sect3>
        <title>Gestionnaires de démarrage et allocation de l'espace
          disque</title>
        <para>Une autre chose &agrave; laquelle il faut faire attention lorsque vous
          installez un gestionnaire de démarrage est l'allocation d'espace
          disque pour ce gestionnaire. Il vaut mieux être informé de cette
          question avant de commencer pour vous éviter d'avoir &agrave; réinstaller un
          ou plusieurs de vos systèmes d'exploitation.</para>
        <para>Si vous avez suivi ce qui a été dit sur le
          <link linkend="booting">processus de démarrage</link>
          &agrave; propos du secteur principal de démarrage (où se trouve le MBR),
          des secteurs de démarrage des partitions et du processus de démarrage,
          vous vous êtes peut-être demandé où va se trouver ce foutu
          gestionnaire de démarrage. Bien, certains gestionnaires de démarrage
          sont suffisamment légers pour tenir entièrement dans le secteur
          principal de démarrage (cylindre 0, tête 0, secteur 1) avec la table
          de partitions. D'autres ont besoin d'un peu plus d'espace et débordent
          en fait de quelques secteurs après le secteur principal de démarrage
          sur la piste cylindre 0 tête 0, qui sont normalement libres...
          normalement.</para>
        <para>L&agrave; est le hic... Certains systèmes d'exploitation (y compris
          FreeBSD) vous permettent de faire débuter vos partitions juste après
          le secteur principal de démarrage au cylindre 0, tête 0, secteur 2,
          si vous le voulez. En fait, si vous donnez au programme
          <citerefentry><refentrytitle>sysinstall</refentrytitle></citerefentry>
          de FreeBSD, un disque dont le début est vierge ou un disque totalement
          vide, c'est l&agrave; qu'il fera commencer par défaut la partition FreeBSD
          (c'est tout du moins ce qu'il a fait quand je suis tombé dans ce
          piège). Quand vous installez ensuite le gestionnaire de démarrage, si
          c'est l'un de ceux qui occupent quelques secteurs supplémentaires
          après le MBR, il écrase les données qui se trouvent au début de la
          première partie. Dans le cas de FreeBSD, cela écrase le label du
          disque et empêche de démarrer votre partition FreeBSD.</para>
        <para>Le moyen facile d'éviter ce problème (et de vous garder le
          possibilité d'essayer différents gestionnaires de démarrage par la
          suite) est de ne pas allouer la première piste du disque quand vous le
          partitionnez. Cela réserve l'espace entre le cylindre 0, tête 0,
          secteur 2 et le cylindre 0, tête 0, secteur 63, et votre partition
          commence au cylindre 1, tête 1, secteur 1. Pour ce que cela vaut,
          quand vous créez une partition DOS au début de votre disque, DOS
          laisse par défaut cet espace inoccupé (c'est pourquoi certains
          gestionnaires de démarrage font l'hypothèse qu'il est disponible).
          Mettre une partition DOS au début de votre disque vous permet aussi
          d'éviter le problème. C'est ce que je préfère personnellement faire,
          mettre une partition DOS de 1 Mo au début, parce que cela évite
          aussi que la lettre désignant mon disque DOS primaire soit modifiée
          ensuite quand je repartitionne.</para>
        <para>Pour servir de référence, les gestionnaires de démarrage
          suivants n'utilisent que le secteur principal de démarrage pour
          mettre leur code et leurs données:</para>
        <itemizedlist>
          <listitem>
            <para>OS-BS 1.35,</para>
          </listitem>
          <listitem>
            <para>Boot Easy,</para>
          </listitem>
          <listitem>
            <para>LILO.</para>
          </listitem>
        </itemizedlist>
        <para>Ces gestionnaires de démarrage occupent quelques secteurs
          supplémentaires après le secteur principal de démarrage:</para>
        <itemizedlist>
          <listitem>
            <para>OS-BS 2.0 Béta 8 (secteurs 2-5),</para>
          </listitem>
          <listitem>
            <para>gestionnaire de démarrage d'OS/2.</para>
          </listitem>
        </itemizedlist>
      </sect3>
      <sect3>
        <title>Que faire si votre système ne démarre pas?</title>
        <para>Il se peut qu'&agrave; un moment donné
          de l'installation d'un gestionnaire
          de démarrage, vous laissiez le MBR dans un état tel que votre machine
          ne redémarre plus. C'est peu probable, mais possible lorsque vous
          refaites un FDISK alors qu'il y a déj&agrave; un gestionnaire de démarrage
          installé.</para>
        <para>Si vous avez une partition DOS démarrable, vous pouvez démarrer
          avec une disquette de démarrage DOS, et lancer:</para>
        <informalexample>
<screen><prompt>A:\></prompt> <userinput>FDISK /MBR</userinput></screen>
        </informalexample>
        <para>pour réinstaller le code d'origine de démarrage simple du DOS
          seul sur le système. Vous pouvez alors démarrer DOS (et DOS
          uniquement) depuis le disque dur. Une autre solution consiste &agrave;
          réexécuter le programme d'installation de votre gestionnaire de
          démarrage &agrave; partir d'une disquette démarrable.</para>
      </sect3>
    </sect2>
  </sect1>
</article>
