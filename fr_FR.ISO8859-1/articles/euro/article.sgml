<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook XML V4.2-Based Extension//EN"
	"../../../share/sgml/freebsd42.dtd" [
<!ENTITY % entities PUBLIC "-//FreeBSD//ENTITIES DocBook FreeBSD Entity Set//FR" "../../share/sgml/entities.ent">
%entities;
<!ENTITY % not.published "IGNORE">
]>

<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     $Id: article.sgml,v 1.5 2003-12-29 12:57:18 gioria Exp $
     Original revision: 1.8
-->

<article lang="fr">
  <articleinfo>
    <title>L'Euro et <systemitem class="osname">FreeBSD</systemitem></title>

    <authorgroup>
      <author>
	<firstname>Aaron</firstname>

	<surname>Kaplan</surname>

	<affiliation>
	  <address>
	    <email>aaron@lo-res.org</email>
	  </address>
	</affiliation>
      </author>
    </authorgroup>

    <copyright>
      <year>2002</year>
      <year>2003</year>
      <holder>Groupe de Documentation de FreeBSD</holder>
    </copyright>

    <pubdate>$FreeBSD$</pubdate>

    <releaseinfo>$FreeBSD$</releaseinfo>

	<legalnotice id="trademarks" role="trademarks">
	&tm-attrib.freebsd;
	&tm-attrib.general;
	</legalnotice>

    <abstract>
      <para>Ce document essaiera de vous aider &agrave; démarrer avec le
	symbole <keycap>Euro</keycap> présent sur le nouveau clavier
	que vous avez dû acheter au début 2002 en raison du passage &agrave; la
	monnaie unique. Nous nous focaliserons en premier lieu sur les
	parties les plus importantes comme être capable d'afficher
	correctement le symbole sur la console.
	Les sections suivantes traiterons de la configuration de
	programmes particuliers comme <application>X11</application>.
      </para>

      <para>De nombreuses remarques utiles sont venues d'Oliver Fromme,
	 Tom Rhodes et d'innombrables autres personnes. Merci! Sans vous
	 cet article n'aurait pas été possible!
      </para>
	&trans.a.fonvieille;
    </abstract>
  </articleinfo>

  <sect1>
    <title>L'Euro en bref</title>

    <para>Si vous vous sentez déj&agrave; &agrave; l'aise avec la
      <ulink url="../../books/handbook/l10n.html">localisation</ulink>
	 comme elle est décrite dans le manuel
	 <systemitem class="osname">FreeBSD</systemitem>
	vous pourriez être uniquement intéressé que par les faits
	 suivants qui vous permettront de démarrer rapidement:
    </para>

    <variablelist>
      <varlistentry>
	<term>ISO8859-15</term>

	<listitem>
	  <para>C'est une légère modification du jeu de caractères
	ISO8859-1 habituellement utilisé. Il inclut le symbole Euro.
	Il est utilisé par les variables d'environnement
	<envar>LANG</envar>, et <envar>LC_CTYPE</envar>.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><filename>iso15-8x16.fnt</filename></term>

	<listitem>
	  <para>La police de caractères de &man.vidcontrol.1; pour la
	 console</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><filename>/usr/share/syscons/keymaps/*.iso.kbd</filename></term>

	<listitem>
	  <para>Les tables de clavier appropriées en fonction de votre
		langue. Configurez votre table de clavier dans
		<filename>rc.conf</filename> avec une de ces dernières.
	  </para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><envar>LC_CTYPE</envar></term>

	<listitem>
	  <para>Utilisé pour spécifier le type correct de caractères
		locaux.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><literal>XkbLayout "<replaceable>lang</replaceable>(euro)"</literal></term>

	<listitem>
	  <para>Option de configuration d'<application>XFree86</application>.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term><filename>/usr/X11R6/lib/X11/fonts/*/fonts.alias</filename></term>
	<listitem>
	  <para>Soyez sûr d'ajuster vos polices de caractères pour X11 &agrave;
	    <literal>-*-..-*-iso8859-15</literal></para>
	</listitem>
      </varlistentry>
    </variablelist>
  </sect1>

  <sect1>
    <title>Remarque générale</title>

    <para>Dans les sections suivantes nous ferons souvent référence &agrave;
      <emphasis>ISO8859-15</emphasis>. C'est la notation standard
	introduite avec <systemitem class="osname">FreeBSD</systemitem> 4.5.
	Dans les anciennes versions, la notation standard était soit
      <emphasis>ISO_8859-15</emphasis> soit <emphasis>DIS_8859-15</emphasis>.
    </para>

    <para>Si vous utilisez une ancienne version de
      <systemitem class="osname">FreeBSD</systemitem>, soyez sûr de
	jeter un oeil &agrave; <filename>/usr/share/locale/</filename> afin de
	 déterminer quelle convention de notation est utilisée.</para>
  </sect1>

  <sect1>
    <title>La console</title>

    <sect2>
      <title>Configurer la police de caractères de la console</title>

      <para>En fonction de la taille et la résolution de votre console
	vous aurez besoin d'une des lignes suivantes dans
	<filename>rc.conf</filename>:</para>

      <programlisting>font8x16="iso15-8x16.fnt" # from /usr/share/syscons/fonts/*
font8x14="iso15-8x14.fnt"
font8x8="iso15-8x8.fnt"</programlisting>

      <para>Cela sélectionnera la police de caractère ISO8859-15 aussi
	connue sous le nom de Latin-9. L'ISO8859-15 est une variation de
	l'ISO8859-1. On peut voir la différence entre les deux en
	regardant le symbole Euro: ça valeur décimale est 164. En
	ISO8859-1 vous remarquerez un cercle avec quatre petits traits
	aux coins. Il est souvent dénommé le &ldquo;symbole monétaire
	international&rdquo;. En ISO8859-15, au lieu du cercle, vous avez le
	symbole Euro. En dehors de cela les polices sont plus ou moins
	identiques.</para>

      <warning>
	<para>Au moment de l'écriture de cet article, la seule police
	utilisable semble être l'<literal>iso15-8x16.fnt</literal>. Les
	autres semblent uniquement afficher de l'ISO8859-1 en dépit de
	ce que suggère leur nom.</para>
      </warning>

      <note>
        <para>En spécifiant cette police de caractères quelques
	applications pour la console s'afficheront altérées. Cela est dû
	au fait qu'elles supposent que vous êtes en train d'utiliser une
	police différente telle que l'ANSI 850. Un exemple précis est
	<application>sysinstall</application>. Cependant la
	plupart du temps cela ne devrait pas affecter les
	applications.</para>
      </note>

      <para>Comme étape suivante vous devrez soit redémarrer le système pour que
	 les changements prennent effet soit (manuellement) effectuer les commandes
	lancées au démarrage du système:</para>

      <screen>&prompt.user; <userinput>vidcontrol -f <replaceable>iso15-8x16.fnt</replaceable></userinput></screen>

      <para>Pour vérifier si la police a bien été sélectionnée, exécuter la courte
	 procédure <command><anchor id="awk-test"/>awk</command> suivante :</para>

      <programlisting>#!/usr/bin/awk -f
BEGIN {
        for(i=160;i&lt;180;i++)
                printf"%3d %c\n",i,i
}</programlisting>

      <para>Le résultat devrait faire apparaître le signe Euro &agrave; la
	position 164.</para>
    </sect2>

    <sect2>
      <title>Configurer votre clavier pour l'Euro</title>

      <para>La plupart des tables de clavier devraient déj&agrave; être
	correctement configurées. I.e: Si vous avez un clavier allemand et que
	vos touches Umlaut fonctionnent, vous pouvez sans risque passer
	cette section dès lors que le clavier fait correspondre quelque soit la
	combinaison de touches nécessaire (e.g.: <keycombo
	action="simul"><keycap>Alt Gr</keycap><keycap>e</keycap></keycombo>) la
	valeur décimale 164. Si des problèmes apparaissent, la meilleur
	façon de vérifier est de jeter un oeil &agrave;
	<filename>/usr/share/syscons/keymaps/*.kbd</filename>. Le format
	des tables de correspondance des touches est décrit dans
	&man.keyboard.4;. &man.kbdcontrol.1; peut être utilisé pour
	charger une table de clavier sur spécifique.</para>

      <para>Une fois que la table de clavier correcte est sélectionnée,
	elle devrait être ajoutée dans	<filename>/etc/rc.conf</filename> avec la
	ligne:</para>

      <programlisting>keymap="<replaceable>german.iso</replaceable>" # ou une autre table</programlisting>

      <para>Comme cela a été exposé au-dessus, cette étape a
	probablement déj&agrave; été effectuée par vous-même lors de
	l'installation (avec <application>sysinstall</application>).
	Sinon redémarrer ou charger la nouvelle table de clavier via
	&man.kbdcontrol.1;.</para>

      <para>Pour vérifier le clavier, basculer sur une nouvelle console
	et &agrave; l'invite de session, <emphasis>au lieu de s'attacher</emphasis>,
	essayez	de taper sur la touche <keycap>Euro</keycap>. Si cela ne
	fonctionne pas, remplissez un rapport de bogue via &man.send-pr.1; ou
	vérifiez que vous avez choisi effectivement la bonne table de clavier.</para>

      <note>
        <para>A ce stade la touche Euro ne fonctionnera pas encore avec
	  <application>bash</application> ou
	  <application>tcsh</application>.</para>
      </note>
    </sect2>

    <sect2>
      <title>Corriger les variables d'environnement</title>

      <para>Les interpréteurs de commandes (<application>bash</application>, <application>tcsh</application>) renvoient vers
	la bibliothèque &man.readline.3; qui alors respecte la
	variable d'environnement <envar>LC_CTYPE</envar>. <envar>LC_CTYPE</envar>
	doit être configurée avant que l'interpréteur de commandes ne soit
	complètement lancé. Heureusement il suffit d'ajouter la ligne:</para>

	<programlisting>export LC_CTYPE=<replaceable>de_DE</replaceable>.ISO8859-15</programlisting>

	<para>&agrave; votre <filename>.bash_profile</filename> (<application>bash</application>), ou:</para>

	<programlisting>setenv LC_CTYPE <replaceable>de_DE</replaceable>.ISO8859-15</programlisting>

      <para>&agrave; votre fichier <filename>.login</filename> (<application>tcsh</application>). Bien sûr,
	<replaceable>de_DE</replaceable> devra être remplacé par votre langue.
	Ensuite, fermez la session, ouvrez une nouvelle session et vérifiez
	que la touche Euro fonctionne. A partir de maintenant la plupart
	des applications pour la console devrait répondre &agrave; la touche
	Euro. Cependant des configurations supplémentaires pour des programmes
	spécifiques comme <application>pine</application> pourraient
	être encore nécessaires.</para>

      <note>
	<para>Une alternative &agrave; la modification des fichiers
	<filename>.login</filename> et <filename>.bash_profile</filename>
	est de définir les variables d'environnement par l'intermédiaire
	de &man.login.conf.5;. Cette approche a l'avantage d'assigner,
	<emphasis>en un seul endroit</emphasis>, des classes de session pour
	certains utilisateurs (e.g. utilisateurs français, italiens, etc...).</para>
      </note>
    </sect2>
  </sect1>

  <sect1>
    <title>Modifier X11</title>

    <para>Modifiez <filename>/etc/XF86Config</filename> de la manière
	suivante:</para>

    <programlisting>Option "XkbLayout"  "<replaceable>de</replaceable>(euro)"</programlisting>

    <para>Encore une fois, remplacez <replaceable>de</replaceable> avec
	votre langue. A partir de maintenant, le clavier devrait être
	correctement configuré. Comme dans la partie consacrée &agrave; la
	console la police de caractères correcte doit être choisie. Pour
	<application>KDE</application>, aller dans le
	<application>centre de contrôle de KDE</application> -&gt;
	Personnalisation -&gt; Pays &amp; Langue -&gt; Jeu de caractères
	et le changer pour <literal>ISO8859-15</literal>. Les mêmes
	étapes s'appliquent &agrave; <application>kmail</application> et
	autres applications.</para>

    <para>Une autre bonne idée est de modifier votre fichier
	<filename>fonts.alias</filename>. En particulier la police de
	caractères <literal>fixed</literal> devra être changée pour le
	bon jeu de caractère : le fichier
	<filename>/usr/X11R6/lib/X11/fonts/misc/fonts.alias</filename>
	de l'auteur ressemble &agrave; :</para>

     <programlisting>! $Xorg: fonts.alias,v 1.3 2000/08/21 16:42:31 coskrey Exp $
fixed   -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
(...)</programlisting>

    <para>Comme dans les parties au sujet de la console, des
	applications spécifiques ont encore les polices de caractères
	ISO8859-1 configurées dans leur base de données &man.xrdb.1;
	respectives. Un exemple notable est <application>xterm</application>.
	En général il suffit juste de modifier le fichier de
	configuration correspondant dans
	<filename>/usr/X11R6/lib/X11/app-defaults</filename> et ajouter
	la police de caractères correcte. Faisons la démonstration avec
	<application>xterm</application>.</para>

   <screen>&prompt.root; cd /usr/X11R6/lib/X11/app-defaults/
&prompt.root; vi XTerm</screen>

    <para>Ajoutez la ligne suivante au début du fichier :</para>

    <programlisting>*font:     -misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15</programlisting>

    <para>Finalement, redémarrer X et vérifier que les polices de
	caractères peuvent être affichées en exécutant la
	<link linkend="awk-test">procédure awk</link> précédente. Les
	principales applications devraient respecter la table de clavier
	et la configuration des polices de caractères.</para>
  </sect1>

  <sect1>
    <title>Problèmes en suspens</title>

    <para>Bien évidemment l'auteur souhaiterait avoir un retour. Et aussi, tout au moins,
	contactez-moi si vous avez des éléments pour l'un de ces problèmes en
	suspens:</para>

    <itemizedlist>
      <listitem>
        <para>Décrire une autre façon de configurer <application>XFree86</application>:
	  <filename role="package">x11/xkeycaps</filename></para>
      </listitem>

      <listitem>
        <para>Configuration sous <application>GNOME</application></para>
      </listitem>

      <listitem>
        <para>Configuration sous <application>XFCE</application></para>
      </listitem>

      <listitem>
        <para>Configuration d'<application>(X)Emacs</application></para>
      </listitem>

      <listitem>
        <para>Décrire UTF-8</para>
      </listitem>

      <listitem>
        <para>Décrire <application>libiconv</application> comme une
	méthode efficace de conversion entre ISO8859-15 et UTF-{8,16}
	directement &agrave; partir des applications.</para>

      </listitem>
    </itemizedlist>
  </sect1>
</article>
