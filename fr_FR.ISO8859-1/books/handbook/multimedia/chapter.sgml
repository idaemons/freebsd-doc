<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     $Id: chapter.sgml,v 1.5 2002-09-11 20:43:34 blackend Exp $
     Original revision: 1.42
-->

<chapter id="multimedia">
 <chapterinfo>
  <authorgroup>
   <author>
    <firstname>Ross</firstname>
    <surname>Lippert</surname>
    <contrib>R&eacute;daction de </contrib>
   </author>
  </authorgroup>
 </chapterinfo>

 <title>Multim&eacute;dia</title>
 &trans.a.fonvieille;
  <sect1 id="multimedia-synopsis">
  <title>Synopsis</title>

    <para>FreeBSD supporte une grande vari&eacute;t&eacute; de cartes son, vous
      permettant d'obtenir un son haute fid&eacute;lit&eacute; &agrave; partir
      de votre ordinateur.  Ceci inclut la possibilit&eacute; d'enregistrer et
      de jouer les formats &ldquo;MPEG Audio Layer 3&rdquo; (MP3), WAV et Ogg
      Vorbis aussi bien que de nombreux autres formats.  Le catalogue de
      logiciels port&eacute;s de FreeBSD contient &eacute;galement des
      applications vous permettant d'&eacute;diter vos enregistrements,
      rajouter des effets sonores, et contr&ocirc;ler des
      p&eacute;riph&eacute;riques MIDI.</para>

    <para>Avec un peu de volont&eacute; et d'exp&eacute;rimentation,
      FreeBSD peut lire des fichiers vid&eacute;o et des DVDs.  Le
      nombre d'applications pour encoder, convertir, et lire divers
      supports vid&eacute;o est plus limit&eacute; que le
      nombre d'applications &eacute;quivalentes dans le domaine
      du son.  Par exemple au
      moment de l'&eacute;criture de ces lignes, il n'existe pas de
      bonne application d'encodage dans le catalogue des logiciels
      port&eacute;s de FreeBSD, qui pourra &ecirc;tre utilis&eacute;e pour
      convertir d'un format &agrave; un autre, comme peut le faire pour
      le son le programme <filename
      role="package">audio/sox</filename>.  Cependant, le paysage
      logiciel dans ce domaine &eacute;volue rapidement.</para>

    <para>Ce chapitre d&eacute;crira les &eacute;tapes
      n&eacute;cessaires pour configurer votre carte son.  La configuration
      et l'installation d'<application>XFree86</application>
      (<xref linkend="x11">) ont
      d&eacute;j&agrave; pris soin des probl&egrave;mes mat&eacute;riel
      de votre carte vid&eacute;o, bien qu'il puisse y avoir quelques
      r&eacute;glages &agrave; ajuster pour obtenir une meilleure
      lecture des vid&eacute;os.</para>

    <para>Apr&egrave;s la lecture de ce chapitre, vous conna&icirc;trez:</para>

    <itemizedlist>
      <listitem>
        <para>Comment configurer votre syst&egrave;me afin que votre
	  carte son soit reconnue.</para>
      </listitem>

      <listitem>
        <para>Les m&eacute;thodes pour tester si votre carte fonctionne en
	  utilisant certaines applications.</para>
      </listitem>

      <listitem>
        <para>Comment faire face aux probl&egrave;mes de configuration
	  de votre carte son.</para>
      </listitem>

      <listitem>
        <para>Comment jouer et encoder des MP3s.</para>
      </listitem>

      <listitem>
        <para>Comment la vid&eacute;o est support&eacute;e par
	  <application>XFree86</application>.</para>
      </listitem>

      <listitem>
        <para>Quelques logiciels port&eacute;s qui donnent de bon
	  r&eacute;sultats pour lire/encoder de la vid&eacute;o.</para>
      </listitem>

      <listitem>
        <para>Comment lire des DVDs, des fichiers <filename>.mpg</filename> et
	  <filename>.avi</filename>.</para>
      </listitem>

      <listitem>
        <para>Comment copier l'information de CDs et DVDs dans des
	  fichiers.</para>
      </listitem>
    </itemizedlist>

    <para>Avant de lire ce chapitre, vous devrez:</para>

    <itemizedlist>
      <listitem><para>Savoir comment configurer et installer un
        nouveau noyau (<xref
        linkend="kernelconfig">).</para></listitem>
    </itemizedlist>

    <para>Pour les sections sur la vid&eacute;o, on supposera
      qu'<application>XFree86 4.X</application>
      (<filename role='package'>x11/XFree86-4</filename>)
      a &eacute;t&eacute; install&eacute;.
      <application>XFree86 3.X</application> peut
      fonctionner, mais n'a pas &eacute;t&eacute; test&eacute; avec
      ce qui est d&eacute;crit dans ce chapitre.  Si vous trouvez que
      certains &eacute;l&eacute;ments d&eacute;crits ici
      fonctionnent avec <application>XFree86 3.X</application> veuillez nous
      en informer.</para>

    <warning>
      <para>Essayer de monter un CD audio ou un DVD vid&eacute;o avec
	la commande &man.mount.8; aura pour r&eacute;sultat
	une erreur, au moins, et une <emphasis>panique du
	noyau</emphasis>, au pire.  Ces supports ont des codages
	sp&eacute;cifiques qui diff&egrave;rent du syst&egrave;me
	de fichiers ISO classique.</para>
    </warning>

  </sect1>

  <sect1 id="sound-setup">
    <sect1info>
      <authorgroup>
        <author>
	 <firstname>Moses</firstname>
	 <surname>Moore</surname>
	 <contrib>Contribution de </contrib>
	 <!-- 20 November 2000 -->
        </author>
      </authorgroup>
    </sect1info>

    <title>Configurer une carte son</title>

  <sect2 id="sound-device">
    <title>D&eacute;terminer le bon p&eacute;riph&eacute;rique</title>

    <indexterm><primary>PCI</primary></indexterm>
    <indexterm><primary>ISA</primary></indexterm>
    <indexterm><primary>cartes son</primary></indexterm>
    <para>Avant que vous commenciez, vous devriez conna&icirc;tre le
      mod&egrave;le de carte son que vous avez, la puce qu'elle utilise, et si
      c'est une carte PCI ou ISA.  FreeBSD supporte une grande
      vari&eacute;t&eacute; de cartes PCI et ISA.  Si vous ne voyez pas votre
      carte dans la liste suivante, consultez la page de manuel &man.pcm.4;.
      Ce n'est pas une liste compl&egrave;te, cependant elle
      &eacute;num&egrave;re  certaines des cartes les plus courantes.</para>

    <itemizedlist>
      <listitem>
	<para>Crystal 4237, 4236, 4232, 4231</para>
      </listitem>

      <listitem>
	<para>Yamaha OPL-SAx</para>
      </listitem>

      <listitem>
	<para>OPTi931</para>
      </listitem>

      <listitem>
	<para>Ensoniq AudioPCI 1370/1371</para>
      </listitem>

      <listitem>
	<para>ESS Solo-1/1E</para>
      </listitem>

      <listitem>
	<para>NeoMagic 256AV/ZX</para>
      </listitem>

      <listitem>
	<para>Sound Blaster Pro, 16, 32, AWE64, AWE128, Live</para>
      </listitem>

      <listitem>
	<para>Creative ViBRA16</para>
      </listitem>

      <listitem>
	<para>Advanced Asound 100, 110, et Logic ALS120</para>
      </listitem>

      <listitem>
	<para>ES 1868, 1869, 1879, 1888</para>
      </listitem>

      <listitem>
	<para>Gravis UltraSound</para>
      </listitem>

      <listitem>
	<para>Aureal Vortex 1 ou 2</para>
      </listitem>
    </itemizedlist>

    <indexterm>
      <primary>noyau</primary>
      <secondary>configuration</secondary>
    </indexterm>

    <para>Pour utiliser votre carte son, vous devrez charger le pilote
      de p&eacute;riph&eacute;rique appropri&eacute;.  Cela peut &ecirc;tre
      fait de deux fa&ccedil;ons.  La plus simple est de charger le module pour
      votre carte son avec &man.kldload.8;.  Sinon, vous pouvez compiler le
      support de votre carte son en statique dans votre noyau.  Les
      sections ci-dessous fournissent les informations n&eacute;cessaires pour
      ajouter le support de votre mat&eacute;riel de cette mani&egrave;re.
      Pour plus d'informations au sujet de la recompilation de votre noyau,
      veuillez consulter le <xref linkend="kernelconfig">.</para>

    <sect3>
      <title>Cartes son Creative, Advance, et ESS</title>

      <para>Si vous avez une de ces cartes, vous devrez
        rajouter:</para>

      <programlisting>device pcm</programlisting>

      <para>&agrave; votre fichier de configuration du noyau.  Si vous avez une
	carte ISA PnP, vous aurez &eacute;galement besoin d'ajouter:</para>

      <programlisting>device sbc</programlisting>

      <para>Pour une carte ISA non-PnP, ajouter:</para>

      <programlisting>device pcm
device sbc0 at isa? port 0x220 irq 5 drq 1 flags 0x15</programlisting>

      <para>&agrave; votre fichier de configuration du noyau.  Les valeurs
        donn&eacute;es ci-dessus sont celles par d&eacute;faut.  Vous aurez
	peut-&ecirc;tre &agrave; changer l'IRQ ou d'autres valeurs en fonction
	de votre carte.  Voir la page de manuel &man.sbc.4; pour plus
	d'informations.</para>

      <note>
	<para>La carte Sound Blaster Live n'est pas support&eacute;e sous
	  FreeBSD 4.0 sans un correctif, ce dont ne parlera pas cette
	  section.  Il est recommand&eacute; que vous mettiez &agrave; jour
	  votre syst&egrave;me jusqu'&agrave; la tout derni&egrave;re -STABLE
	  avant d'essayer d'utiliser cette carte.</para>
      </note>
    </sect3>

    <sect3>
      <title>Cartes Gravis UltraSound</title>

      <para>Pour une carte ISA non-PnP, vous devrez ajouter:</para>

      <programlisting>device pcm
device gusc</programlisting>

      <para>&agrave; votre fichier de configuration du noyau.  Si vous avez une
        carte ISA non-PnP, vous devrez rajouter:</para>

      <programlisting>device pcm
device gus0 at isa? port 0x220 irq 5 drq 1 flags 0x13</programlisting>

      <para>&agrave; votre fichier de configuration du noyau.  Vous aurez
	peut-&ecirc;tre &agrave; changer l'IRQ ou d'autres valeurs en fonction
	de votre carte.  Voir la page de manuel &man.gusc.4; pour plus
	d'informations.</para>
    </sect3>

    <sect3>
      <title>Cartes son Crystal</title>

      <para>Pour les cartes son Crystal, vous devrez ajouter:</para>

      <programlisting>device pcm
device csa</programlisting>

      <para>&agrave; votre fichier de configuration du noyau.</para>
    </sect3>

    <sect3>
      <title>Support g&eacute;n&eacute;rique</title>

      <para>Pour des cartes ISA PnP ou PCI, vous devrez ajouter:</para>

      <programlisting>device pcm</programlisting>

      <para>&agrave; votre fichier de configuration du noyau.  Si vous avez une
        carte son ISA non-PnP qui n'a pas de pilote de
	&ldquo;bridge&rdquo;, vous devrez ajouter:</para>

      <programlisting>device pcm0 at isa? irq 10 drq 1 flags 0x0</programlisting>

      <para>&agrave; votre fichier de configuration du noyau.  Vous aurez
	peut-&ecirc;tre &agrave; changer l'IRQ ou d'autres valeurs en fonction
	de votre carte.</para>

    </sect3>

    <sect3>
      <title>Carte son int&eacute;gr&eacute;e</title>

      <para>Certains syst&egrave;mes avec la carte son int&eacute;gr&eacute;e
	&agrave; la carte m&egrave;re auront peut-&ecirc;tre besoin de l'option
	suivante dans votre configuration de noyau:</para>

      <programlisting>options PNPBIOS</programlisting>
    </sect3>
  </sect2>

  <sect2 id="sound-devicenodes">
    <title>Cr&eacute;er et tester les fichiers sp&eacute;ciaux de
      p&eacute;riph&eacute;rique</title>

    <indexterm><primary>fichiers sp&eacute;ciaux de p&eacute;riph&eacute;rique</primary></indexterm>
    <para>Apr&egrave;s avoir red&eacute;marr&eacute;, ouvrez un session et
      lancer la commande <command>dmesg | grep pcm</command> comme
      montr&eacute; ci-dessous:</para>

    <screen>&prompt.root; <userinput>dmesg | grep pcm</userinput>
pcm0: &lt;SB16 DSP 4.11&gt; on sbc0</screen>

    <para>Le r&eacute;sultat pourra &ecirc;tre diff&eacute;rent sur votre
      syst&egrave;me.  Si aucun p&eacute;riph&eacute;rique
      <devicename>pcm</devicename> n'appara&icirc;t, quelque chose s'est mal
      pass&eacute;e plus t&ocirc;t.  Si cela se produit, retournez &agrave;
      votre fichier de configuration du noyau et v&eacute;rifiez que vous avez
      choisi le p&eacute;riph&eacute;rique correct.  Consultez la section
      &ldquo;Probl&egrave;mes courants&rdquo; pour compl&eacute;ments.</para>

    <para>Si la commande pr&eacute;c&eacute;dente a donn&eacute;
      <devicename>pcm0</devicename>, vous devrez faire en tant que
      <username>root</username> ce qui suit:</para>

    <screen>&prompt.root; <userinput>cd /dev</userinput>
&prompt.root; <userinput>sh MAKEDEV snd0</userinput></screen>

    <para>Si la commande a donn&eacute; <devicename>pcm1</devicename>,
      suivez les m&ecirc;mes &eacute;tapes qu'au-dessus, en rempla&ccedil;ant
      <devicename>snd0</devicename> par
      <devicename>snd1</devicename>.</para>

    <note>
      <para>Les commandes pr&eacute;c&eacute;dentes <emphasis>ne
        cr&eacute;eront pas</emphasis>
        un p&eacute;riph&eacute;rique <devicename>/dev/snd</devicename>!</para>
    </note>

    <para><command>MAKEDEV</command> cr&eacute;era un ensemble de fichiers de
      p&eacute;riph&eacute;rique, dont:</para>

    <informaltable frame="none">
      <tgroup cols="2">
	<thead>
	  <row>
	    <entry>P&eacute;riph&eacute;rique</entry>
	    <entry>Description</entry>
	  </row>
	</thead>

	<tbody>
	  <row>
	    <entry><devicename>/dev/audio</devicename></entry>
	    <entry>P&eacute;riph&eacute;rique audio SPARC-compatible</entry>
	  </row>

	  <row>
	    <entry><devicename>/dev/dsp</devicename></entry>
	    <entry>Processeur de signaux num&eacute;riques</entry>
	  </row>

	  <row>
	    <entry><devicename>/dev/dspW</devicename></entry>
	    <entry>Comme <devicename>/dev/dsp</devicename>, mais avec 16 bits
	      par &eacute;chantillons</entry>
	  </row>

	  <row>
	    <entry><devicename>/dev/midi</devicename></entry>
	    <entry>P&eacute;riph&eacute;rique d'acc&egrave;s MIDI</entry>
	  </row>

	  <row>
	    <entry><devicename>/dev/mixer</devicename></entry>
	    <entry>Port de contr&ocirc;le du m&eacute;langeur</entry>
	  </row>

	  <row>
	    <entry><devicename>/dev/music</devicename></entry>
	    <entry>Interface de niveau 2 du s&eacute;quenceur</entry>
	  </row>

	  <row>
	    <entry><devicename>/dev/sequencer</devicename></entry>
	    <entry>S&eacute;quenceur</entry>
	  </row>

	  <row>
	    <entry><devicename>/dev/pss</devicename></entry>
	    <entry>Interface programmable</entry>
	  </row>
	</tbody>
      </tgroup>
    </informaltable>

    <para>Si tout va bien, vous devriez avoir maintenant une carte son
      qui fonctionne.  Si votre lecteur de CD-ROM ou de DVD-ROM est
      correctement reli&eacute; &agrave; votre carte son, vous pouvez
      introduire un CD dans le lecteur et le jouer avec
      &man.cdcontrol.1;:</para>

      <screen>&prompt.user; <userinput>cdcontrol -f /dev/acd0c play 1</userinput></screen>

    <para>Diverses applications, comme <filename
      role="package">audio/workman</filename> offrent une meilleure
      interface.  Vous pouvez vouloir installer une application
      comme <filename role="package">audio/mpg123</filename> pour
      &eacute;couter des fichiers audio MP3.</para>

    <sect3>
      <title>Probl&egrave;mes courants</title>

      <informaltable>
        <tgroup cols="2">
  	  <thead>
	    <row>
	     <entry>Erreur</entry>
	      <entry>Solution</entry>
	    </row>
          </thead>
          <indexterm><primary>fichier sp&eacute;cial de p&eacute;riph&eacute;rique</primary></indexterm>

	  <tbody>
	    <row>
	      <entry><errorname>unsupported subdevice XX</errorname></entry>
	      <entry><para>Un ou plusieurs fichiers sp&eacute;ciaux de
		p&eacute;riph&eacute;rique n'ont pas &eacute;t&eacute;
		cr&eacute;&eacute;s correctement.  R&eacute;p&eacute;tez les
		&eacute;tapes pr&eacute;c&eacute;dentes.</para></entry>
            </row>

            <indexterm><primary>port d'E/S</primary></indexterm>
            <row>
              <entry><errorname>sb_dspwr(XX) timed out</errorname></entry>
              <entry><para>Le port d'E/S n'est pas configur&eacute;
	        correctement.</para></entry>
            </row>

            <indexterm><primary>IRQ</primary></indexterm>
            <row>
              <entry><errorname>bad irq XX</errorname></entry>
	      <entry><para>L'IRQ s&eacute;lectionn&eacute;e est incorrecte.
		V&eacute;rifiez que l'IRQ choisie et l'IRQ de la carte son sont
		les m&ecirc;mes.</para></entry>
            </row>

            <row>
              <entry><errorname>xxx: gus pcm not attached, out of
    	        memory</errorname></entry>
              <entry><para>Il n'y a pas suffisamment de m&eacute;moire
	        disponible pour utiliser ce p&eacute;riph&eacute;rique.</para></entry>
            </row>

	    <indexterm><primary>DSP</primary></indexterm>
            <row>
              <entry><errorname>xxx: can't open /dev/dsp!</errorname></entry>
              <entry><para>V&eacute;rifiez avec la commande
		<command>fstat | grep dsp</command> si une autre
		application maintient le p&eacute;riph&eacute;rique ouvert.
		Souvent &agrave; l'origine de ce type de probl&egrave;me on
		trouve <application>esound</application> et le support son de <application>KDE</application>.</para></entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </sect3>
  </sect2>

  <sect2>
    <sect2info>
     <authorgroup>
      <author>
       <firstname>Munish</firstname>
       <surname>Chopra</surname>
       <contrib>Contribution de </contrib>
      </author>
     </authorgroup>
    </sect2info>
    <title>Utiliser des sources sonores multiples</title>

    <para>Il est souvent int&eacute;ressant de pouvoir jouer
      simultan&eacute;ment du son &agrave; partir de multiples
      sources, comme lorsque <application>esound</application> ou
      <application>artsd</application> ne supportent pas le partage du
      p&eacute;riph&eacute;rique son avec certaines applications.</para>

    <para>FreeBSD vous permet de le faire par l'interm&eacute;diaire
      de <emphasis>Canaux Sonores Virtuels</emphasis>, qui peuvent
      &ecirc;tre configur&eacute;s avec la fonction &man.sysctl.8;.  Les canaux
      virtuels vous permettent de multiplexer les canaux de sortie de
      votre carte son en mixant le son au niveau du noyau.</para>

    <para>Pour configurer le nombre de canaux virtuels, il existe deux
      param&egrave;tres de sysctl qui, si vous avez les privil&egrave;ges
      de l'utilisateur <username>root</username>, peuvent
      &ecirc;tre configur&eacute;s comme ceci:</para>
    <screen>&prompt.root; <userinput>sysctl hw.snd.pcm0.vchans=4</userinput>
&prompt.root; <userinput>sysctl hw.snd.maxautovchans=4</userinput></screen>

    <para>L'exemple ci-dessus alloue quatre canaux virtuels, ce qui est
      un nombre suffisant pour une utilisation classique.
    <varname>hw.snd.pcm0.vchans</varname> est le nombre de canaux
      virtuels que poss&egrave;de <devicename>pcm0</devicename>,
      et est configurable une fois que le p&eacute;riph&eacute;rique
      a &eacute;t&eacute; attach&eacute; au syst&egrave;me.
      <literal>hw.snd.maxautovchans</literal> est le nombre de canaux
      virtuels allou&eacute;s &agrave; un nouveau
      p&eacute;riph&eacute;rique audio quand il est attach&eacute;
      &agrave; l'aide de &man.kldload.8;.  Comme le module
      <devicename>pcm</devicename> peut &ecirc;tre charg&eacute;
      ind&eacute;pendamment des pilotes de p&eacute;riph&eacute;riques,
      <literal>hw.snd.maxautovchans</literal> peut stocker combien de
      canaux virtuels seront allou&eacute;s &agrave; chaque
      p&eacute;riph&eacute;rique attach&eacute; par la suite.</para>

    <para>Si vous n'utilisez pas &man.devfs.5;, vous devrez faire
      pointer vos applications sur
      <devicename>/dev/dsp0</devicename>.<replaceable>x</replaceable>,
      o&ugrave; <replaceable>x</replaceable> est 0 &agrave; 3 si
      <varname>hw.snd.pcm.0.vchans</varname> est fix&eacute; &agrave; 4.
      Sur un syst&egrave;me utilisant &man.devfs.5;, ce qui
      pr&eacute;c&egrave;de sera automatiquement effectu&eacute;
      de fa&ccedil;on transparente pour l'utilisateur.</para>
   </sect2>
  </sect1>

  <sect1 id="sound-mp3">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>Contribution de </contrib>
	</author>
      </authorgroup>
      <!-- 11 Sept 2001 -->
    </sect1info>

    <title>Fichiers MP3</title>

    <para>Les fichiers MP3 (MPEG Layer 3 Audio) donnent un son proche de
      la qualit&eacute; d'un CD audio, il n'y a aucune raison pour que votre
      station de travail FreeBSD ne puisse pas en profiter.</para>

    <sect2 id="mp3-players">
      <title>Lecteurs de MP3s</title>

      <para>De loin, le plus populaire des lecteurs MP3 pour
	<application>XFree86</application> est
        <application>XMMS</application> (X Multimedia System). Les
	th&egrave;mes (skins) de <application>Winamp</application> peuvent
	&ecirc;tre utilis&eacute;s avec <application>XMMS</application>
	d&egrave;s lors que l'interface est quasiment identique &agrave; celle
	du <application>Winamp</application> de Nullsoft.
	<application>XMMS</application> dispose aussi d'un support natif
	pour modules externes (plug-in).

      <para><application>XMMS</application> peut &ecirc;tre install&eacute;
	&agrave; partir du catalogue de logiciels port&eacute;s
	<filename role="package">audio/xmms</filename> ou de la version
	pr&eacute;-compil&eacute;e.</para>

      <para>L'interface d'<application>XMMS</application> est intuitive,
        avec une liste de lecture, un &eacute;galiseur graphique, et plus.
	Ceux qui sont familiers avec <application>Winamp</application>
	trouveront <application>XMMS</application> simple
	d'utilisation.</para>

      <para>Le logiciel port&eacute; <filename
        role="package">audio/mpg123</filename> est une alternative, un
        lecteur de MP3 en ligne de commande.</para>

      <para><application>mpg123</application> peut &ecirc;tre utilis&eacute; en
	sp&eacute;cifiant le p&eacute;riph&eacute;rique sonore et le fichier
	MP3 sur la ligne de commande, comme montr&eacute; ci-dessous:</para>

      <screen>&prompt.root; <userinput>mpg123 -a <replaceable>/dev/dsp1.0</replaceable> Foobar-GreatestHits.mp3</userinput>
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2 and 3.
Version 0.59r (1999/Jun/15). Written and copyrights by Michael Hipp.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!





Playing MPEG stream from BT - Foobar-GreastHits.mp3 ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo
</screen>

      <para><literal>/dev/dsp1.0</literal> devrait &ecirc;tre remplac&eacute;
	par le p&eacute;riph&eacute;rique <devicename>dsp</devicename>
	correspondant sur votre syst&egrave;me.</para>

    </sect2>

    <sect2 id="rip-cd">
      <title>Extraire les pistes de CDs Audio</title>

      <para>Avant d'encoder la totalit&eacute; d'un CD ou une piste en MP3, les
	donn&eacute;es audio doivent &ecirc;tre extraites et
	transf&eacute;r&eacute;es sur le disque dur.  Cela se fait en copiant
	les donn&eacute;es brutes CDDA (CD Digital Audio) en fichiers WAV.</para>

      <para>L'utilitaire <command>cdda2wav</command>, qui fait partie de
	la suite <filename role="package">sysutils/cdrtools</filename>,
	est utilis&eacute; pour extraire les donn&eacute;es audio de CDs et les
	informations rattach&eacute;es.</para>

      <para>Avec le CD audio dans le lecteur, la commande suivante peut
	&ecirc;tre utilis&eacute;e (en tant que <username>root</username>) pour
	convertir l'int&eacute;gralit&eacute; d'un CD en fichiers WAV (un par
	piste):</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>0,1,0</replaceable> -B</userinput></screen>

      <para><application>cdda2wav</application> supportera &eacute;galement les
	lecteurs de CDROM ATAPI (IDE).  Pour faire l'extraction &agrave; partir
	d'un lecteur IDE, pr&eacute;cisez le nom du p&eacute;riph&eacute;rique
	&agrave; la place de l'unit&eacute; SCSI.  Par exemple, pour extraite
	la piste 7 &agrave; partir d'un lecteur IDE:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>/dev/acd0a</replaceable> -t 7</userinput></screen>

      <para>Le <option>-D <replaceable>0,1,0</replaceable></option>
	sp&eacute;cifie le p&eacute;riph&eacute;rique SCSI
	<devicename>0,1,0</devicename>, qui correspond &agrave; ce qui est
	donn&eacute; par la commande
	<command>cdrecord -scanbus</command>.</para>

      <para>Pour extraire des pistes individuelles, utilisez l'option
	<option>-t</option> comme ceci:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>0,1,0</replaceable> -t 7</userinput></screen>

      <para>Cet exemple extrait la septi&egrave;me piste du CD audio.  Pour
	extraire un ensemble de pistes, par exemple, de la piste 1 &agrave; 7,
	pr&eacute;cisez un intervalle:</para>

      <screen>&prompt.root; <userinput>cdda2wav -D <replaceable>0,1,0</replaceable> -t 1+7</userinput></screen>

      <para>L'utilitaire &man.dd.1; peut &eacute;galement &ecirc;tre
	utilis&eacute; pour extraire des pistes audios &agrave; partir de
	lecteurs ATAPI, consultez la <xref
	linkend="duplicating-audiocds"> pour plus d'informations sur
	cette possibilit&eacute;.</para>

    </sect2>

    <sect2 id="mp3-encoding">
      <title>Encoder des MP3s</title>

      <para>De nos jours, l'encodeur mp3 &agrave; utiliser est
	<application>lame</application>.
	<application>Lame</application> peut &ecirc;tre trouv&eacute; dans le
	catalogue de logiciels port&eacute;s:
	<filename role="package">audio/lame</filename>.</para>

      <para>En utilisant les fichiers WAV extraits, la commande suivante
	convertira le fichier <filename>audio01.wav</filename> en
	<filename>audio01.mp3</filename>:</para>

      <screen>&prompt.root; <userinput>lame -h -b <replaceable>128</replaceable> \
--tt "<replaceable>La chanson XY</replaceable>" \
--ta "<replaceable>Artiste XY</replaceable>" \
--tl "<replaceable>Album XY</replaceable>" \
--ty "<replaceable>2001</replaceable>" \
--tc "<replaceable>Extrait et encod&eacute; par XY</replaceable>" \
--tg "<replaceable>Genre</replaceable>" \
<replaceable>audio01.wav audio01.mp3</replaceable></userinput></screen>

      <para>128 kbits semble &ecirc;tre le taux standard actuel du d&eacute;bit
	audio utilis&eacute; pour les MP3s. Nombreux sont ceux qui
	pr&eacute;f&egrave;rent des taux de haute qualit&eacute;: 160 ou 192.
	Plus le d&eacute;bit audio est &eacute;lev&eacute; plus
	l'espace disque utilis&eacute; par le fichier MP3 sera grand mais la
	qualit&eacute; sera meilleure.  L'option <option>-h</option> active le
	mode &ldquo;haute qualit&eacute;, mais un peu plus lent&rdquo;.  Les
	options commen&ccedil;ant par <option>--t</option> indiquent des
	balises ID3, qui g&eacute;n&eacute;ralement contiennent les
	informations sur le morceau, devant &ecirc;tre
	int&eacute;gr&eacute;es au fichier MP3.
	D'autres informations sur l'encodage peuvent &ecirc;tre trouv&eacute;es
	en consultant la page de manuel de Lame.</para>
    </sect2>

    <sect2 id="mp3-decoding">
      <title>D&eacute;coder des MP3s</title>

      <para>Afin de pouvoir graver un CD audio &agrave; partir de fichiers MP3,
	ces derniers doivent &ecirc;tre convertis dans le format WAV non
	compress&eacute;.  <application>XMMS</application> et
	<application>mpg123</application> supportent tous les deux la
	sortie de fichiers MP3 en format de fichier non
	compress&eacute;.</para>

      <para>Ecriture sur le disque avec <application>XMMS</application>:</para>

      <procedure>
	<step>
	  <para>Lancez <application>XMMS</application>.</para>
	</step>

	<step>
	  <para>Clic-droit sur la fen&ecirc;tre pour faire appara&icirc;tre le
	    menu d'<application>XMMS</application>.</para>
	</step>

	<step>
	  <para>S&eacute;lectionner <literal>Preference</literal> sous
	    <literal>Options</literal>.</para>
	</step>

	<step>
	  <para>Changez l'option &ldquo;Output Plugin&rdquo; pour
	    &ldquo;Disk Writer Plugin&rdquo;.</para>
	</step>

	<step>
	  <para>Appuyez sur <literal>Configure</literal>.</para>
	</step>

	<step>
	  <para>Entrez (ou choisissez browse) un r&eacute;pertoire o&ugrave; va
	    &ecirc;tre &eacute;crit le fichier d&eacute;compress&eacute;.</para>
	</step>

	<step>
	  <para>Chargez le fichier MP3 dans <application>XMMS</application>
	    comme &agrave; l'accoutum&eacute;, avec le volume &agrave; 100% et
	    l'&eacute;galiseur (EQ settings) d&eacute;sactiv&eacute;.</para>
	</step>

	<step>
	  <para>Appuyez sur <literal>Play</literal> &mdash;
	    <application>XMMS</application> devrait se comporter comme
	    s'il jouait le MP3, mais aucun son ne sera audible.  Il est
	    en fait en train de &ldquo;jouer&rdquo; le MP3 dans un
	    fichier.</para>
	</step>

	<step>
	  <para>V&eacute;rifiez que vous avez r&eacute;tabli l'option
	    &ldquo;Output Plugin&rdquo; &agrave; sa valeur de d&eacute;part
	    afin de pouvoir &eacute;couter &agrave; nouveau des MP3s.</para>
	</step>
      </procedure>

      <para>Ecriture sur le disque avec <application>mpg123</application>:</para>

      <procedure>
	<step>
	  <para>Lancez mpg123 -s <replaceable>audio01.mp3</replaceable>
	    &gt; audio01.pcm</para>
	</step>
      </procedure>

      <para><application>XMMS</application> cr&eacute;e un fichier au format
	WAV, tandis que <application>mpg123</application> convertit le
	fichier MP3 en donn&eacute;es audio PCM brutes.  Ces deux formats
	peuvent &ecirc;tre utilis&eacute;s avec
	<application>cdrecord</application> pour cr&eacute;er des CDs audio.
	Vous devez utiliser des fichiers PCM bruts avec
	&man.burncd.8;.  Si vous utilisez des fichiers WAV, vous
	noterez un petit parasite au d&eacute;but de chaque piste, ce son est
	l'ent&ecirc;te du fichier WAV.  Vous pouvez simplement retirer
	l'ent&ecirc;te d'un fichier WAV avec l'utilitaire
	<application>SoX</application> (il peut &ecirc;tre install&eacute;
	&agrave; partir du logiciel port&eacute; <filename
	role="package">audio/sox</filename> ou de la version
	pr&eacute;-compil&eacute;e):</para>

      <screen>&prompt.user; <userinput>sox -t wav -r 44100 -s -w -c 2 <replaceable>track.wav track.raw</replaceable></userinput></screen>

      <para>Lisez la <xref linkend="creating-cds"> pour plus d'informations
	sur l'utilisation d'un graveur de CD sous FreeBSD.</para>
    </sect2>
  </sect1>

 <sect1 id="video-playback">
  <sect1info>
    <authorgroup>
      <author>
        <firstname>Ross</firstname>
	<surname>Lippert</surname>
	<contrib>Contribution de </contrib>
      </author>
    </authorgroup>
    <!-- 5 June 2002 -->
  </sect1info>

  <title>Lecture des Vid&eacute;os</title>

    <para>Les applications pour lire des vid&eacute;os
      sont assez r&eacute;centes et se d&eacute;veloppent
      tr&egrave;s rapidement.  Soyez patient.  Tout ne va pas
      fonctionner aussi bien que cela pu &ecirc;tre le cas avec
      le son.</para>

    <para>Avant que vous ne commenciez, vous devrez conna&icirc;tre
      le mod&egrave;le de carte vid&eacute;o dont vous disposez ainsi
      que le circuit int&eacute;gr&eacute; qu'elle utilise.  Alors
      qu'<application>XFree86</application> supporte une large
      vari&eacute;t&eacute; de cartes
      vid&eacute;o, seul un petit nombre d'entre elles donne de bonnes
      performances en lecture de vid&eacute;os.  Pour obtenir la liste
      des extensions support&eacute;es par le serveur X utilisant votre
      carte employez la commande &man.xdpyinfo.1; durant le
      fonctionnement d'X11.</para>

    <para>C'est une bonne id&eacute;e d'avoir un court fichier MPEG
      qui pourra &ecirc;tre utilis&eacute; comme fichier test pour
      &eacute;valuer divers lecteurs et leurs options.  Comme certains
      programmes de lecture de DVD chercheront un support DVD sur
      <filename>/dev/dvd</filename> par d&eacute;faut, ou ont ce
      p&eacute;riph&eacute;rique fix&eacute; d&eacute;finitivement dans
      leur code, vous pourrez trouver utile de cr&eacute;er des liens
      symboliques vers les p&eacute;riph&eacute;riques corrects:</para>

      <screen>&prompt.root; <userinput>ln -sf /dev/acd0c /dev/dvd</userinput>
&prompt.root; <userinput>ln -sf /dev/racd0c /dev/rdvd</userinput></screen>

    <para>Sous FreeBSD 5.X, qui utilise &man.devfs.5; il y
      a un ensemble de liens recommand&eacute;s
      l&eacute;g&egrave;rement diff&eacute;rent:</para>

      <screen>&prompt.root; <userinput>ln -sf /dev/acd0c /dev/dvd</userinput>
&prompt.root; <userinput>ln -sf /dev/acd0c /dev/rdvd</userinput></screen>

    <para>De plus, le d&eacute;codage de DVD, qui n&eacute;cessite
      de faire appel &agrave; des fonctions sp&eacute;ciales du
      lecteur de DVD, demande d'avoir la permission d'&eacute;crire sur les
      p&eacute;riph&eacute;riques DVD.</para>

    <para>Certains des logiciels port&eacute;s d&eacute;pendent des
      options du noyau suivantes pour pouvoir &ecirc;tre compil&eacute;s
      correctement.  Avant d'essayer de les compiler, ajouter les
      options suivantes dans le noyau, recompilez-le et
      red&eacute;marrez:</para>

      <programlisting>option CPU_ENABLE_SSE
option USER_LDT</programlisting>

    <para>Pour augmenter la m&eacute;moire partag&eacute;e
      pour l'interface X11, il est recommand&eacute; que les valeurs de
      certaines variables &man.sysctl.8; soient augment&eacute;es:</para>

      <programlisting>kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</programlisting>

  <sect2 id="video-interface">
    <title>D&eacute;terminer les capacit&eacute;s vid&eacute;o</title>

    <indexterm><primary>XVideo</primary></indexterm>
    <indexterm><primary>SDL</primary></indexterm>
    <indexterm><primary>DGA</primary></indexterm>
      <indexterm>
        <primary>configuration du noyau</primary>
        <secondary>options CPU_ENABLE_SSE</secondary>
      </indexterm>
      <indexterm>
         <primary>configuration du noyau</primary>
         <secondary>options USER_LDT</secondary>
      </indexterm>

    <para>Il y a plusieurs mani&egrave;res possibles pour
      afficher de la vid&eacute;o sous X11.  Ce qui fonctionnera vraiment est
      &eacute;norm&eacute;ment d&eacute;pendant du mat&eacute;riel.
      Chaque m&eacute;thode d&eacute;crite ci-dessous donnera
      diff&eacute;rents r&eacute;sultats en fonction du mat&eacute;riel.
      De plus, le rendu de la vid&eacute;o sous X11 est un sujet recevant
      beaucoup d'attention derni&egrave;rement, et avec chaque nouvelle
      version d'<application>XFree86</application> il pourra y avoir des
      am&eacute;liorations significatives.</para>

    <para>Une liste des interfaces vid&eacute;o communes:</para>

    <orderedlist>
    <listitem>
      <para>X11: sortie X11 classique utilisant de la m&eacute;moire
	partag&eacute;e.</para>
    </listitem>
    <listitem>
      <para>XVideo: une extension de l'interface X11 qui supporte
	la vid&eacute;o sur n'importe quelle partie de l'&eacute;cran
	contr&ocirc;l&eacute; par X11.</para>
    </listitem>
    <listitem>
      <para>SDL: &ldquo;Simple Directmedia Layer&rdquo; - couche simple
	d'acc&egrave;s directe au m&eacute;dia.</para>
    </listitem>
    <listitem>
      <para>DGA: &ldquo;Direct Graphics Access&rdquo; - acc&egrave;s direct au
	graphique.</para>
    </listitem>
    <listitem>
      <para>SVGAlib: couche graphique bas niveau pour la console.</para>
    </listitem>
    </orderedlist>

    <sect3 id="video-interface-xvideo">
    <title>XVideo</title>

      <para><application>XFree86 4.X</application> dispose d'une extension
	appel&eacute;e
        <emphasis>XVideo</emphasis> (&eacute;galement connue sous les termes
	Xvideo, Xv, ou xv) qui permet d'afficher directement de la
	vid&eacute;o &agrave; travers une acc&eacute;l&eacute;ration
	sp&eacute;cifique.  Cette extension fournit une tr&egrave;s bonne
	qualit&eacute; de rendu m&ecirc;me sur les machines bas de gamme
	(par exemple
	mon portable utilisant un PIII 400Mhz).  Malheureusement la
	liste des cartes pour lesquelles cette caract&eacute;ristique est
	support&eacute;e directement est actuellement:</para>

        <orderedlist>
	<listitem>
	   <para>3DFX Voodoo 3</para>
        </listitem>
        <listitem>
           <para>Intel i810 et i815</para>
        </listitem>
        <listitem>
          <para>Certains circuits S3 (comme le Savage/IX et le
	    Savage/MX)</para>
        </listitem>
        </orderedlist>

      <para>Si votre carte n'est pas une des pr&eacute;c&eacute;dentes
	ne soyez pas d&eacute;j&agrave; d&eacute;&ccedil;u.
	<application>XFree86 4.X</application> ajoute de nouveaux supports xv
	avec chaque version
      <footnote>
        <para>Des cartes graphiques populaires avec
	  g&eacute;n&eacute;ralement de tr&egrave;s bonnes performances
	  sous XFree86, en provenance de nVidia, qui n'a pas encore rendu
	  public les sp&eacute;cifications de leur support XVideo &agrave;
	  l'&eacute;quipe d'XFree86.
	  Il se peut qu'il se passe un certain temps avant qu'XFree86
	  ne supporte compl&egrave;tement XVideo pour ces cartes.</para>
      </footnote>.
	Pour v&eacute;rifier si l'extension fonctionne utilisez
	<command>xvinfo</command>:</para>

        <screen>&prompt.user; <userinput>xvinfo</userinput></screen>

      <para>XVideo est support&eacute; pour votre carte si le
	r&eacute;sultat de la commande ressemble &agrave;:</para>
<screen>X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</screen>

    <para>Notez &eacute;galement que les formats list&eacute;s
      (YUV2, YUV12, etc...) ne sont pas pr&eacute;sents dans chaque
      impl&eacute;mentation d'XVideo et leur absence pourra g&ecirc;ner
      certains programmes.</para>

    <para>Si le r&eacute;sultat ressemble &agrave;:</para>
<screen>X-Video Extension version 2.2
screen #0
no adaptors present</screen>

    <para>Alors XVideo n'est probablement pas support&eacute; pour votre
      carte.</para>

    <para>Si XVideo n'est pas support&eacute; pour votre carte,
      cela signifie seulement qu'il sera plus difficile pour votre
      syst&egrave;me d'affichage de r&eacute;pondre aux demandes
      du rendu vid&eacute;o en termes de puissance de calcul.  En fonction
      de votre carte vid&eacute;o et de votre processeur, vous pourriez
      encore obtenir de bons r&eacute;sultats.  Vous devriez
      probablement vous documenter sur les m&eacute;thodes pour
      am&eacute;liorer les performances en lisant la <xref
      linkend="video-further-reading">.</para>

    </sect3>

    <sect3 id="video-interface-SDL">
    <title>&ldquo;Simple Directmedia Layer&rdquo; - couche simple
      d'acc&egrave;s directe au m&eacute;dia</title>

    <para>La couche simple d'acc&egrave;s directe au m&eacute;dia, SDL,
      a &eacute;t&eacute; pr&eacute;vue pour &ecirc;tre
      une couche de portage entre Microsoft Windows, BeOS, et Unix,
      permettant &agrave; des applications &ldquo;cross-platform&rdquo;
      qui font un usage efficace du son et du graphique d'&ecirc;tre
      d&eacute;velopp&eacute;es.  La couche SDL fournit une abstraction
      de bas niveau
      vers le mat&eacute;riel qui peut parfois &ecirc;tre plus
      efficace que l'interface X11.</para>

    <para>La biblioth&egrave;que SDL peut &ecirc;tre trouv&eacute;e
      dans <filename role="package">devel/sdl12</filename></para>

    </sect3>

    <sect3 id="video-interface-DGA">
    <title>&ldquo;Direct Graphics Access&rdquo; - acc&egrave;s direct au
      graphique</title>

    <para>L'acc&egrave;s direct au graphique est une extension d'XFree86
      qui permet &agrave; un programme de bypasser le serveur X et
      d'acc&eacute;der directement au mat&eacute;riel.  Comme il
      repose sur une copie bas niveau de la m&eacute;moire, les
      programmes l'utilisant doivent &ecirc;tre
      ex&eacute;cut&eacute;s avec les privil&egrave;ges de l'utilisateur
      <username>root</username>.</para>

    <para>L'extension DGA et ses performances peuvent &ecirc;tre
      test&eacute;es avec &man.dga.1;.  Quand <command>dga</command> est
      ex&eacute;cut&eacute;, il changera les couleurs de l'affichage
      &agrave; chaque appui sur une touche.  Pour quitter, utilisez la touche
      <keycap>q</keycap>.</para>

    </sect3>

  </sect2>

  <sect2 id="video-ports">
    <title>Logiciels port&eacute;s et pr&eacute;-compil&eacute;s
      relatifs &agrave; la vid&eacute;o</title>

    <indexterm><primary>logiciels port&eacute;s
      vid&eacute;o</primary></indexterm>
    <indexterm><primary>logiciels pr&eacute;-compil&eacute;s
      vid&eacute;o</primary></indexterm>

    <para>Cette section traite des logiciels disponibles dans le
      catalogue des logiciels port&eacute;s de FreeBSD qui peuvent &ecirc;tre
      utilis&eacute;s pour lire de la vid&eacute;o.  Les applications
      vid&eacute;os sont un domaine de d&eacute;veloppement tr&egrave;s
      actif, et les capacit&eacute;s de diverses applications seront
      sujettes &agrave; des divergences avec la description
      donn&eacute;e ici.</para>

    <para>Premi&egrave;rement, il est important de savoir que la plupart des
      applications vid&eacute;os qui fonctionnent sous FreeBSD ont
      &eacute;t&eacute; d&eacute;velopp&eacute;es comme des applications pour
      Linux.  Pour cette raison, elles sont relativement exp&eacute;rimentales
      et poss&egrave;dent un certain nombre de &ldquo;Linuxismes&rdquo; qui
      pourraient emp&ecirc;cher un fonctionnement complet sous FreeBSD.</para>

    <para>Par &ldquo;exp&eacute;rimentales&rdquo;, je veux dire que vous
      devez vous attendre &agrave; ce que les r&eacute;-encodeurs,
      les lecteurs, et d&eacute;codeurs de DVD aient des bogues
      importants ou des probl&egrave;mes de coop&eacute;ration avec
      d'autres programmes.  Voici une courte liste du type de choses dont
      je veux parler:</para>

      <orderedlist>

      <listitem>
        <para>Une application ne peut pas lire un fichier produit par
	  une autre application.</para>
      </listitem>

      <listitem>
        <para>Une application ne peut pas lire un fichier quelle a
	  produit.</para>
      </listitem>

      <listitem>
        <para>La m&ecirc;me application sur deux machines
	  diff&eacute;rentes, recompil&eacute;e sur chaque machine pour
	  la machine elle-m&ecirc;me, jouera le fichier
	  diff&eacute;remment.</para>
      </listitem>

      <listitem>
        <para>Un filtre apparemment insignifiant comme un changement
	  d'&eacute;chelle de l'image donne de tr&egrave;s mauvais
	  r&eacute;sultats en raison d'une routine de changement
	  d'&eacute;chelle bogu&eacute;e.</para>
      </listitem>

      <listitem>
        <para>Une application qui plante constamment.</para>
      </listitem>

      <listitem>
        <para>La documentation n'est pas install&eacute;e avec le logiciel
	  port&eacute; et peut &ecirc;tre trouv&eacute;e sur Internet ou
	  dans le r&eacute;pertoire
          <filename><replaceable>CHEMIN_DU_LOGICIEL_PORTE</replaceable>/work/
          </filename>.</para>
      </listitem>

      </orderedlist>

    <para>Par &ldquo;Linuxismes&rdquo;, j'entends les probl&egrave;mes
      r&eacute;sultants de la fa&ccedil;on dont certaines
      biblioth&egrave;ques standards sont impl&eacute;ment&eacute;es
      dans les distributions Linux, ou certaines caract&eacute;ristiques
      du noyau Linux qui ont &eacute;t&eacute; employ&eacute;es
      par les auteurs des applications, parce que c'est le syst&egrave;me
      sous lequel ils d&eacute;veloppent principalement.  Ces
      probl&egrave;mes peuvent ne pas &ecirc;tre remarqu&eacute;s ou
      contourn&eacute;s par les
      responsables du portage du logiciel ce qui peut mener vers
      quelques ennuis comme ceux-ci:</para>

      <orderedlist>

      <listitem>
        <para>L'utilisation de <filename>/proc/cpuinfo</filename> pour
	  d&eacute;tecter les caract&eacute;ristiques du processeur.</para>
      </listitem>

      <listitem>
        <para>Une mauvaise utilisation des &ldquo;threads&rdquo; qui
	  provoque le blocage de programme au lieu de se terminer
	  compl&egrave;tement.</para>
      </listitem>

      <listitem>
        <para>Des logiciels habituellement utilis&eacute;s en conjonction
	  avec l'application ne sont pas encore dans le catalogue des
	  logiciels port&eacute;s.</para>
      </listitem>

      </orderedlist>

      <para>Jusqu'ici, les d&eacute;veloppeurs de ces applications ont
	&eacute;t&eacute; coop&eacute;ratifs avec les responsables
	des logiciels port&eacute;s pour minimiser les modifications
	n&eacute;cessaires au portage.</para>

    <sect3 id="video-mplayer">
      <title>MPlayer</title>

      <para><application>MPlayer</application> est une application pour lire des
	vid&eacute;os r&eacute;cemment et rapidement
	d&eacute;velopp&eacute;e.  Les objectifs de l'&eacute;quipe
	de <application>MPlayer</application> sont la rapidit&eacute; et la
	flexibilit&eacute; sur
	Linux et autre Unix.  Le projet fut d&eacute;marr&eacute; quand
	le fondateur de l'&eacute;quipe en
	eu assez des mauvaises performances en lecture des autres
	lecteurs disponibles.  Certains diront que l'interface a
	&eacute;t&eacute; sacrifi&eacute;e pour une conception
	rationalis&eacute;e, mais une fois que vous avez les options en ligne de
	commande et les combinaisons de touches en main, cela fonctionne
	tr&egrave;s bien.</para>

      <sect4 id="video-mplayer-building">
        <title>Compiler MPlayer</title>
        <indexterm><primary>mplayer</primary>
	           <secondary>compilation</secondary></indexterm>

        <para><application>MPlayer</application> r&eacute;side dans <filename
          role="package">graphics/mplayer</filename>.
	  <application>MPlayer</application>
	  effectue un certain nombre de contr&ocirc;le du
	  mat&eacute;riel durant le processus de compilation, il en
	  r&eacute;sulte un
	  binaire qui ne sera pas portable d'un syst&egrave;me &agrave; l'autre.
	  Ainsi il est important d'utiliser le logiciel port&eacute; et de ne
	  pas utiliser un logiciel pr&eacute;-compil&eacute;.
	  En plus, un certain nombre d'options peuvent &ecirc;tre
	  sp&eacute;cifi&eacute;es &agrave; <command>make</command>
	  qui d'ailleurs les affiche au d&eacute;part de la
	  compilation.</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/graphics/mplayer</userinput>
&prompt.root; <userinput>make</userinput>
You can enable additional compilation optimizations
by defining WITH_OPTIMIZED_CFLAGS
You can enable GTK GUI by defining WITH_GUI.
You can enable DVD support by defining WITH_DVD.
You can enable SVGALIB support by defining WITH_SVGALIB.
You can enable VORBIS sound support by defining WITH_VORBIS.
You can enable XAnim DLL support by defining WITH_XANIM.
</screen>

        <para>Si vous avez <filename
          role="package">x11-toolkits/gtk12</filename> install&eacute;,
	  alors vous pourrez activer l'interface graphique &eacute;galement.
	  Sinon, cela n'en vaut pas la peine.  Si vous avez l'intention
	  de lire des DVDs (&eacute;ventuellement encod&eacute;s par CSS) avec
	  <application>MPlayer</application> vous devez activer le support DVD
	  ici
	  <footnote><para>La lecture de DVD non autoris&eacute;e est une
	    infraction s&eacute;rieuse dans certains pays.  V&eacute;rifiez
	    les lois locales avant d'activer cette option.</para></footnote>.
	  Certaines options int&eacute;ressantes sont:</para>

        <screen>&prompt.root; <userinput>make WITH_DVD=yes WITH_SVGALIB=yes</userinput></screen>

        <para>Au moment de l'&eacute;criture de ces lignes, le logiciel
	  port&eacute; de <application>MPlayer</application> compilera sa
	  documentation HTML et un
	  ex&eacute;cutable <command>mplayer</command>.  On peut
	  &eacute;galement faire compiler un encodeur,
	  <command>mencoder</command>, qui est un outil pour r&eacute;-encoder
	  la vid&eacute;o.  Une modification du fichier
	  <filename>Makefile</filename> pourra l'activer.  Il se peut
	  que cela soit activ&eacute; par d&eacute;faut dans les versions
	  suivantes du logiciel port&eacute;.</para>

        <para>La documentation HTML de <application>MPlayer</application> est
	  tr&egrave;s
	  compl&egrave;te.  Si le lecteur trouve l'information sur le
	  mat&eacute;riel vid&eacute;o et les interfaces manquante dans ce
	  chapitre, la documentation de <application>MPlayer</application> est
	  une alternative tr&egrave;s
	  compl&egrave;te.  Vous devriez certainement prendre le temps de
	  lire la documentation de <application>MPlayer</application>,
	  si vous &ecirc;tes &agrave; la recherche d'informations sur le support
	  vid&eacute;o sous Unix.</para>

      </sect4>

      <sect4 id="video-mplayer-using">
        <title>Utiliser MPlayer</title>
        <indexterm><primary>MPlayer</primary>
	           <secondary>utiliser</secondary></indexterm>

        <para>Chaque utilisateur de <application>MPlayer</application> doit
	  cr&eacute;er un
	  sous-r&eacute;pertoire <filename>.mplayer</filename> dans son
	  r&eacute;pertoire d'utilisateur.  Pour cr&eacute;er ce
	  sous-r&eacute;pertoire n&eacute;cessaire, vous pouvez faire ce qui
	  suit:</para>

<screen>&prompt.user; <userinput>cd /usr/ports/graphics/mplayer</userinput>
&prompt.user; <userinput>make install-user</userinput></screen>

	<para>Les options de commande de <command>mplayer</command> sont
	  donn&eacute;es dans la page de manuel.  Pour plus de d&eacute;tails
	  il y a la documentation HTML.  Dans cette section, nous
	  donnerons quelques uns des cas les plus courants.</para>

	<para>Pour lire &agrave; partir d'un fichier, comme
	  <filename>testfile.avi</filename> en utilisant une des
	  diverses interfaces vid&eacute;o utilisez l'option
	  <option>-vo</option>:

	  <screen>&prompt.user; <userinput>mplayer -vo xv testfile.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo sdl testfile.avi</userinput></screen>
	  <screen>&prompt.user; <userinput>mplayer -vo x11 testfile.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo dga testfile.avi</userinput></screen>
	  <screen>&prompt.root; <userinput>mplayer -vo 'sdl:dga' testfile.avi</userinput></screen>

	<para>Cela vaut la peine d'essayer toutes ces options, comme
	  leur performance relative d&eacute;pend de nombreux facteurs
	  et variera de fa&ccedil;on significative avec le
	  mat&eacute;riel.</para>

	<para>Pour lire &agrave; partir d'un DVD, remplacez
	 <filename>testfile.avi</filename> par <option>-dvd &lt;N&gt;
	 <replaceable>DEVICE</replaceable></option> o&ugrave; &lt;N&gt; est
	 le num&eacute;ro du titre &agrave; jouer et
	 <filename><replaceable>DEVICE</replaceable></filename> est
	 le fichier sp&eacute;cial de p&eacute;riph&eacute;rique correspondant
	 au lecteur de DVD.  Par exemple, pour jouer le titre 3 depuis
	 <filename>/dev/dvd</filename>:</para>

	  <screen>&prompt.root; <userinput>mplayer -vo dga -dvd 2 /dev/dvd</userinput></screen>

	<para>Pour arr&ecirc;ter, avancer, etc..., consultez
	  les combinaisons de touches, qui sont donn&eacute;es en
	  ex&eacute;cutant <command>mplayer -h</command> ou lisez
	  la page de manuel.</para>

        <para>D'autres options importantes pour la lecture sont:
          <option>-fs -zoom</option> qui active le mode plein &eacute;cran
          et <option>-framedrop</option> qui aide au niveau des
	  performances.</para>

	<para>Pour que la ligne de commande &agrave; taper ne devienne pas trop
	  longue, l'utilisateur peut cr&eacute;er un fichier
	  <filename>.mplayer/config</filename> et y fixer les options
	  par d&eacute;faut:</para>
<programlisting>vo=xv
fs=yes
zoom=yes</programlisting>

	<para>Enfin, <command>mplayer</command> peut &ecirc;tre
	  utilis&eacute; pour extraire une piste du DVD dans un fichier
	  <filename>.vob</filename>.
	  Pour r&eacute;cup&eacute;rer la piste vid&eacute;o num&eacute;ro
	  2 d'un DVD:</para>

	  <screen>&prompt.root; <userinput>mplayer -dumpstream -dumpfile out.vob -dvd 2 /dev/dvd</userinput></screen>

        <para>Le fichier de sortie, <filename>out.vob</filename>, sera du
	  MPEG et peut &ecirc;tre manipul&eacute; par les autres
	  logiciels d&eacute;crits dans cette section.</para>

      </sect4>
      <sect4 id="video-mencoder">
        <title>mencoder</title>
        <indexterm>
	  <primary>mencoder</primary>
	</indexterm>

	<para>Si vous optez pour installer <command>mencoder</command>
	  quand vous lancez la compilation, soyez averti qu'il est encore
	  tr&egrave;s exp&eacute;rimental.</para>

	<para>Pour utiliser <command>mencoder</command> c'est une bonne
	  id&eacute;e de vous familiariser avec les options donn&eacute;es
	  par la documentation HTML.  Il existe une page de manuel, mais
	  elle n'est pas tr&egrave;s utile sans la documentation en HTML.
	  Il y a d'innombrables fa&ccedil;ons d'am&eacute;liorer la
	  qualit&eacute;, diminuer le d&eacute;bit binaire, et
	  modifier les formats, et certaines de ces options peuvent faire
	  la diff&eacute;rence entre de bonnes et mauvaises performances.
	  Voici quelques exemples pour y arriver.  Tout d'abord une
	  simple copie:</para>

	 <screen>&prompt.user; <userinput>mencoder input.avi -oac copy -ovc copy -o output.avi</userinput></screen>

         <para>Il est facile de trouver des exemples o&ugrave; la sortie n'est
	   pas lisible m&ecirc;me par <command>mplayer</command>.  Aussi, si
	   vous voulez juste extraire un fichier, restez sur l'option
	   <option>-dumpfile</option> de <command>mplayer</command>.</para>

	 <para>Pour convertir <filename>input.avi</filename> au format MPEG4
	   avec un codage audio MPEG3 (<filename
	   role="package">audio/lame</filename> est n&eacute;cessaire):</para>

	 <screen>&prompt.user; <userinput>mencoder input.avi -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o output.avi</userinput></screen>

	 <para>Ceci a produit un fichier lisible par <command>mplayer</command>
	   et <command>xine</command>.</para>

	 <para><filename>input.avi</filename> peut &ecirc;tre remplac&eacute;
	   par <option>-dvd 1 /dev/dvd</option> et ex&eacute;cut&eacute; en tant
	   que <username>root</username> pour r&eacute;-encoder directement un
	   titre DVD.  Puisque vous &ecirc;tes susceptible de ne pas
	   &ecirc;tre satisfait du r&eacute;sultat la premi&egrave;re fois, il
	   est recommand&eacute; d'extraire le titre vers un fichier et de
	   travailler sur le fichier.</para>

    </sect3>

    <sect3 id="video-xine">
    <title>Le lecteur xine</title>

    <para>Le lecteur <application>xine</application> est un projet de grande
      envergure visant non seulement
      &agrave; &ecirc;tre une solution vid&eacute;o tout-en-un, mais
      &eacute;galement de produire une biblioth&egrave;que de base
      r&eacute;utilisable et un ex&eacute;cutable modulaire qui peut
      &ecirc;tre &eacute;tendu gr&acirc;ce &agrave; des greffons.
      Il est fourni sous forme
      pr&eacute;-compil&eacute;e et de logiciel port&eacute;, <filename
      role="package">graphics/xine</filename>.</para>

    <para>La bonne nouvelle est que ce qui pr&eacute;c&egrave;de est proche
      de la r&eacute;alit&eacute;.  Le lecteur <application>xine</application>
      est encore un peu brut, mais c'est
      clairement un bon d&eacute;but.  Dans la pratique,
      <application>xine</application> demande soit un
      processeur rapide avec une carte vid&eacute;o rapide, soit
      l'extension XVideo.  L'interface graphique est utilisable, mais
      peu pratique.</para>

    <para>Au moment de l'&eacute;criture de ces lignes, il n'y a pas
      de module d'entr&eacute;e fourni avec <application>xine</application>
      qui lira les DVDs cod&eacute;s
      en CSS.  Il existe des versions tiers qui ont des modules
      &agrave; cet effet int&eacute;gr&eacute;s, mais aucune de ces
      derni&egrave;res ne se trouve dans le catalogue des logiciels
      port&eacute;s de FreeBSD.</para>

    <para>Compar&eacute; &agrave; <application>MPlayer</application>,
      <application>xine</application> fait plus pour l'utilisateur,
      mais au m&ecirc;me moment, rend inaccessible &agrave; l'utilisateur
      certains contr&ocirc;les bien pr&eacute;cis.  Le lecteur
      <application>xine</application> se comporte plus mal
      sur les interfaces non XVideo et a tr&egrave;s peu d'alternatives
      &agrave; cette derni&egrave;re.  La FAQ de
      <application>xine</application> recommande fortement l'utilisation
      d'une carte qui la supporte.</para>

    <para>Le lecteur <application>xine</application> peut &ecirc;tre
      lanc&eacute; tout simplement avec la ligne:</para>

      <screen>&prompt.user; <userinput>xine</userinput></screen>

    <para>Les menus peuvent &ecirc;tre utilis&eacute;s pour ouvrir un
      fichier, ou on peut directement lire un fichier sans l'interface
      graphique avec la commande:</para>

      <screen>&prompt.user; <userinput>xine -g -p mymovie.avi</userinput></screen>

    </sect3>

    <sect3 id="video-ports-transcode">
    <title>Les utilitaires transcode</title>

    <para>Le logiciel <application>transcode</application> n'est pas un
      lecteur, mais une suite d'outils pour
      r&eacute;-encoder les fichiers <filename>.avi</filename> et
      <filename>.mpg</filename>.  Avec <application>transcode</application>,
      on a la capacit&eacute; de fusionner des fichiers vid&eacute;os,
      r&eacute;parer les fichiers endommag&eacute;s, en utilisant les outils
      en ligne de commande avec des interfaces de flots
      <filename>stdin/stdout</filename>.</para>

    <para>Comme pour <application>MPlayer</application>,
      <application>transcode</application> est un logiciel tr&egrave;s
      exp&eacute;rimental qui doit &ecirc;tre compil&eacute; &agrave;
      partir du logiciel port&eacute; <filename
      role="package">graphics/transcode</filename>.  Il utilise un grand
      nombre d'options avec la commande <command>make</command>.  Je
      recommande:</para>

      <screen>&prompt.root; <userinput>make WITH_LIBMPEG2=yes</userinput></screen>

    <para>Si vous projetez d'installer <filename
      role="package">graphics/avifile</filename>, alors ajoutez l'option
      <literal>WITH_AVIFILE</literal> &agrave; votre ligne de commande
      <command>make</command>, comme montr&eacute; ici:</para>

      <screen>&prompt.root; make <userinput>WITH_AVIFILE=yes WITH_LIBMPEG2=yes</userinput></screen>

    <para>Voici deux exemples d'utilisation de <command>transcode</command>
      pour la conversion vid&eacute;o qui produira une version
      redimensionn&eacute;e.  La premi&egrave;re encode la sortie en un fichier
      openDIVX, alors que la seconde encode vers un format MPEG plus
      portable.</para>

      <screen>&prompt.user; <userinput>transcode -i input.vob -x vob -V -Z 320x240 \
-y opendivx -N 0x55 -o output.avi</userinput></screen>

      <screen>&prompt.user; <userinput>transcode -i input.vob -x vob -V -Z 320x240 \
-y mpeg -N 0x55 -o output.tmp</userinput>
&prompt.user; <userinput>tcmplex -o output.mpg -i output.tmp.m1v -p output.tmp.mpa -m 1</userinput></screen>

    <para>Il existe une page de manuel pour <command>transcode</command>,
      mais pour les divers utilitaires <command>tc*</command> (comme
      <command>tcmplex</command>) qui sont &eacute;galement install&eacute;s,
      il n'existe qu'une courte information obtenue &agrave; l'aide de
      l'option <option>-h</option>.</para>

    <para>En comparaison, <command>transcode</command> s'ex&eacute;cute bien
      plus lentement que <command>mencoder</command>, mais il a plus de
      chance de produire un fichier plus largement lisible.  Je peux
      lire des MPEGs produits par <command>transcode</command> sur de
      vieilles versions du <application>Windows Media Player</application> et du <application>Quicktime</application> d'Apple,
      par exemple.</para>

    </sect3>

  </sect2>

  <sect2 id="video-further-reading">
    <title>Lectures suppl&eacute;mentaires</title>

    <para>Je n'ai aucun doute sur le fait que dans un an, beaucoup de ce
      qui est dans ce chapitre sera d&eacute;pass&eacute;.  La vid&eacute;o
      sera probablement moins probl&eacute;matique &agrave; faire
      fonctionner et le catalogue des logiciels port&eacute;s contiendra une
      application qui transformera un syst&egrave;me FreeBSD en un lecteur de
      DVD, un syst&egrave;me personnel d'enregistrement vid&eacute;o,
      et un studio audio/vid&eacute;o virtuel.  Jusqu'&agrave; ce que
      ce jour arrive, ceux qui veulent tirer partie des possibilit&eacute;s
      audio/vid&eacute;o de FreeBSD devront se d&eacute;brouiller avec des
      connaissances extraites de plusieurs FAQs et guides et utiliser
      diff&eacute;rentes applications.</para>

    <para>Cette section existe pour fournir au lecteur quelques liens
      pour en apprendre plus dans le cas o&ugrave; les informations
      contenues dans ce chapitre furent trop justes.</para>

    <para>La
      <ulink url="http://www.mplayerhq.hu/DOCS/">documentation de
      MPlayer</ulink> est techniquement tr&egrave;s instructive.
      Ces documents devraient probablement &ecirc;tre consult&eacute;s
      par quiconque d&eacute;sirant obtenir un niveau &eacute;lev&eacute;
      d'expertise sur la vid&eacute;o et Unix.
      La liste de diffusion de <application>MPlayer</application> est hostile &agrave;
      toute personne qui n'a pas pris la peine de lire la documentation,
      aussi si vous projetez de leur envoyer des rapports de bogue,
      lisez la documentation!</para>

    <para>Le
      <ulink url="http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html">       HOWTO de xine</ulink>
      contient un chapitre sur l'am&eacute;lioration des performances qui est
      g&eacute;n&eacute;ral &agrave; tous les lecteurs
      de vid&eacute;o.</para>

    <para>Et enfin, il y a quelques autres applications prometteuses que
      le lecteur devrait essayer:</para>

    <itemizedlist>

       <listitem>
         <para><ulink
	   url="http://avifile.sourceforge.net/">Avifile</ulink> qui est
	   &eacute;galement un logiciel port&eacute; <filename
	   role='package'>graphics/avifile</filename>.</para>
       </listitem>

       <listitem>
         <para><ulink
	   url="http://www.dtek.chalmers.se/groups/dvd/">Ogle</ulink>
	   qui est &eacute;galement un logiciel port&eacute; <filename
	   role='package'>graphics/ogle</filename>.</para>
       </listitem>

       <listitem>
         <para><ulink url="http://xtheater.sourceforge.net/">Xtheater</ulink></para>
       </listitem>

    </itemizedlist>

  </sect2>
 </sect1>
</chapter>
