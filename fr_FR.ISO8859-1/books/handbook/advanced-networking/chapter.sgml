<!--
     The FreeBSD Documentation Project
     The FreeBSD French Documentation Project

     $FreeBSD$
     Original revision: 1.250
-->

<chapter id="advanced-networking">
  <title>Advanced Networking ** Traduction en Cours **</title>
  &trans.a.fonvieille;

  <sect1 id="advanced-networking-synopsis">
    <title>Synopsis</title>

    <para>Ce chapitre abordera certains des services r&eacute;seaux
      les plus fr&eacute;quemment utilis&eacute;s sur les
      syst&egrave;mes &unix;.  Nous verrons comment d&eacute;finir,
      mettre en place, tester et maintenir tous les services
      r&eacute;seaux qu'utilise &os;.  De plus, des exemples de
      fichier de configuration ont &eacute;t&eacute; inclus tout au
      long de ce chapitre pour que vous puissiez en
      b&eacute;n&eacute;ficier.</para>

    <para>Apr&egrave;s la lecture de ce chapitre, vous
      conna&icirc;trez:</para>

    <itemizedlist>
      <listitem>
	<para>Les bases sur les passerelles et les routes.</para>
      </listitem>

      <listitem>
	<para>Comment utiliser &os; en tant que pont
	  (&ldquo;bridge&rdquo;).</para>
      </listitem>

      <listitem>
	<para>Comment configurer le syst&egrave;me de fichiers
	  r&eacute;seau.</para>
      </listitem>

      <listitem>
	<para>Comment configurer le d&eacute;marrage via le
	  r&eacute;seau pour une machine sans disque dur.</para>
      </listitem>

      <listitem>
	<para>Comment mettre en place un serveur d'information sur le
	  r&eacute;seau pour partager les comptes utilisateurs.</para>
      </listitem>

      <listitem>
	<para>Comment configurer le param&eacute;trage r&eacute;seau
	  automatique en utilisant DHCP.</para>
      </listitem>

      <listitem>
	<para>Comment configurer un serveur de noms de domaine.</para>
      </listitem>

      <listitem>
	<para>Comment synchroniser l'heure et la date, et mettre en
	  place en serveur de temps, avec le protocole NTP.</para>
      </listitem>

      <listitem>
	<para>Comment configurer la translation d'adresse
	  r&eacute;seau.</para>
      </listitem>

      <listitem>
	<para>Comment g&eacute;rer le &ldquo;daemon&rdquo;
	  <application>inetd</application>.</para>
      </listitem>

      <listitem>
	<para>Comment connecter deux ordinateurs via PLIP.</para>
      </listitem>

      <listitem>
	<para>Comment configurer l'IPv6 sur une machine &os;.</para>
      </listitem>
    </itemizedlist>

    <para>Avant de lire ce chapitre, vous devrez:</para>

    <itemizedlist>
      <listitem>
	<para>Comprendre les bases des proc&eacute;dures
	  <filename>/etc/rc</filename>.</para>
      </listitem>

      <listitem>
	<para>Etre familier avec la terminologie r&eacute;seau de
	  base.</para>
      </listitem>
    </itemizedlist>
  </sect1>

  <sect1 id="network-routing">
    <title>Gateways and Routes ** Traduction en Cours **</title>
    <para></para>
  </sect1>

  <sect1 id="network-wireless">
    <title>Wireless Networking ** Traduction en Cours **</title>
    <para></para>
  </sect1>

  <sect1 id="network-bluetooth">
    <title>Bluetooth ** Traduction en Cours **</title>
    <para></para>
  </sect1>

  <sect1 id="network-bridging">
    <title>Bridging ** Traduction en Cours **</title>
    <para></para>
  </sect1>
 
  <sect1 id="network-nfs">
    <title>NFS ** Traduction en Cours **</title>
    <para></para>
  </sect1>

  <sect1 id="network-diskless">
    <title>Diskless Operation ** Traduction en Cours **</title>
    <para></para>
  </sect1>
 
  <sect1 id="network-isdn">
    <title>ISDN</title>

    <indexterm>
      <primary>ISDN&mdash;(RNIS)</primary>
    </indexterm>

    <para>Une bonne source d'information sur la technologie et le
      mat&eacute;riel ISDN (RNIS) est <ulink
      url="http://www.alumni.caltech.edu/~dank/isdn/">la page ISDN de
      Dan Kegel</ulink>.</para>

    <para>Voici un rapide aper&ccedil;u &agrave; propos de
      l'ISDN:</para>

    <itemizedlist>
      <listitem>
	<para>Si vous r&eacute;sidez en Europe, vous devriez
	  &eacute;tudier la section sur les cartes ISDN.</para>
      </listitem>

      <listitem>
	<para>Si vous envisagez d'utiliser l'ISDN avant tout pour vous
	  connecter &agrave; l'Internet par l'interm&eacute;diaire d'un
	  fournisseur d'acc&egrave;s Internet et d'une ligne
	  t&eacute;l&eacute;phoniaue non d&eacute;di&eacute;e, vous
	  devriez vous int&eacute;resser aux Adaptateurs Terminaux.
	  C'est la solution la plus souple, qui vous posera le moins de
	  probl&egrave;mes si vous changez de fournisseur
	  d'acc&egrave;s.</para>
      </listitem>

      <listitem>
	<para>Si vous interconnectez deux r&eacute;seaux locaux, ou si
	  vous vous connectez &agrave; l'Internet avec une liaison ISDN
	  d&eacute;die&eacute;, vous devriez envisager un pont/routeur
	  autonome.</para>
      </listitem>
    </itemizedlist>

    <para>Le co&ucirc;t est un facteur d&eacute;terminant de la
      solution que vous choisirez.  Les options suivantes sont
      list&eacute;es de la moins ch&egrave;re &agrave; la plus
      ch&egrave;re.</para>

    <sect2 id="network-isdn-cards">
      <sect2info>
	<authorgroup>
	  <author>
	    <firstname>Hellmuth</firstname>
	    <surname>Michaelis</surname>
	    <contrib>Contribution de </contrib>
	  </author>
	</authorgroup>
      </sect2info>
      <title>Cartes ISDN</title>

      <indexterm>
        <primary>ISDN</primary>
        <secondary>cartes</secondary>
      </indexterm>

      <para>L'impl&eacute;mentation ISDN de &os; ne supporte que la
	norme DSS1/Q.931 (ou Euro-ISDN) utilisant des cartes passives.
	Depuis &os;&nbsp;4.4, quelques cartes actives sont
	support&eacute;es o&ugrave; le firmware supporte
	&eacute;galement d'autres protocoles au niveau des signaux,
	cela inclut les premi&egrave;res cartes support&eacute;es du
	type &ldquo;Primary Rate ISDN&rdquo; (PRI).</para>

      <para>Le logiciel <application>isdn4bsd</application> vous
	permet de vous connecter &agrave; d'autres routeurs ISDN soit
	en utilisant l'IP sur de l'HDLC de base, soit en utilisant PPP
	synchrone: en employant PPP int&eacute;gr&eacute; au noyau
	avec <literal>isppp</literal>, une version modifi&eacute;e du
	pilote de p&eacute;riph&eacute;rique &man.sppp.4;, ou en
	employant &man.ppp.8; en mode utilisateur.  L'utilisation de
	&man.ppp.8; en mode utilisateur rend possible
	l'agr&eacute;gation de deux ou plus canaux ISDN de type B.
	Une application capable de r&eacute;pondre aux appels
	t&eacute;l&eacute;phoniques est &eacute;galement disponible,
	tout comme de nombreux utilitaires comme un modem logiciel 300
	bauds.</para>

      <para>Un nombre croissant de cartes ISDN pour PC sont
	support&eacute;es sous &os; et les retours montrent qu'elles
	sont utilis&eacute;es avec succ&egrave;s dans toute l'Europe
	et dans de nombreuses autres parties du monde.</para>

      <para>Les cartes ISDN passives support&eacute;es sont
	principalement celles avec le circuit ISDN ISAC/HSCX/IPAC
	d'Infineon (pr&eacute;c&eacute;demment Siemens), mais
	&eacute;galement les cartes avec des circuits en provenance de
	Cologne Chip (cartes ISA uniquement), les cartes PCI avec les
	circuits Winbond W6692, quelques cartes avec les circuits
	Tiger300/320/ISAC et quelques cartes avec des circuits
	sp&eacute;cifiques comme l'AVM Fritz!Card PCI V.1.0 de l'AVM
	Fritz!Card PnP.</para>

      <para>Actuellement les cartes ISDN actives support&eacute;es
	sont les cartes AVM B1 (ISA et PCI) BRI et les cartes PCI AVM
	T1 PRI.</para>

      <para>Pour de la documentation sur
	<application>isdn4bsd</application>, consultez le
	r&eacute;pertoire <filename
	role="directory">/usr/share/examples/isdn/</filename> sur
	votre syst&egrave;me &os; ou sur la <ulink
	url="http://www.freebsd-support.de/i4b/">page web
	d'isdn4bsd</ulink> qui propose &eacute;galement des astuces,
	des erratas et bien plus de documentation que le <ulink
	url="http://people.FreeBSD.org/~hm/">manuel
	d'isdn4bsd</ulink>.</para>

      <para>Au cas o&ugrave; vous seriez int&eacute;ress&eacute; par
	l'ajout du support pour un protocole ISDN diff&eacute;rent,
	d'une carte ISDN pour PC non encore support&eacute;e ou par
	l'am&eacute;lioration d'<application>isdn4bsd</application>,
	veuillez contacter &a.hm;.</para>

      <para>Pour les questions concernant l'installation, la
	configuration et le d&eacute;pannage
	d'<application>isdn4bsd</application>, une liste de diffusion
	&a.isdn.name; est disponible.</para>
    </sect2>

    <sect2>
      <title>Adaptateurs terminaux ISDN</title>

      <para>Les adaptateurs terminaux&mdash;&ldquo;Terminal adapters
	(TA)&rdquo;; sont l'&eacute;quivalent ISDN des modems pour les
	lignes t&eacute;l&eacute;phoniques ordinaires.</para>

      <indexterm><primary>modem</primary></indexterm>

      <para>La plupart des TA utilisent le jeu de commandes standard
	des modems Hayes, et peuvent &ecirc;tre utilis&eacute;s en
	remplacement d'un modem.</para>

      <para>Un TA fonctionne essentiellement de la m&ecirc;me
	mani&egrave;re qu'un modem &agrave; la diff&eacute;rence que
	la vitesse de la connexion sera plus &eacute;lev&eacute;e
	qu'avec votre vieux modem.  Vous devrez configurer <link
	linkend="ppp">PPP</link> de fa&ccedil;on exactement identique
	que pour un modem classique.  Assurez-vous de fixer la vitesse
	de votre port s&eacute;rie la plus haute possible.</para>

      <indexterm><primary>PPP</primary></indexterm>

      <para>Le principal avantage d'utiliser un TA pour vous connecter
	&agrave; votre fournisseur d'acc&egrave;s Internet est de
	pouvoir utiliser PPP en mode dynamic.  Comme l'espace
	d'adressage IP disponible devient de plus en plus restreint,
	la plupart des fournisseurs d'acc&egrave;s ne d&eacute;sirent
	plus vous fournir d'adresse IP statique.  La plupart des
	routeurs autonomes ne peuvent pas fonctionner avec une
	allocation dynamique d'adresse IP.</para>

      <para>Les fonctionnalit&eacute;s et la stabilit&eacute; de la
	connexion des adaptateurs terminaux reposent
	compl&egrave;tement sur le &ldquo;daemon&rdquo; PPP.  Cela
	vous permet de passer facilement d'un modem classique &agrave;
	l'ISDN sur une machine &os;, si vous avez d&eacute;j&agrave;
	configur&eacute; PPP.  Cependant, les probl&egrave;mes que
	vous avez &eacute;ventuellement rencontr&eacute;s avec PPP
	persisteront.</para>

      <para>Si vous d&eacute;sirez un maximum de stabilit&eacute;,
	utilisez <link linkend="ppp">PPP int&eacute;gr&eacute; au
	noyau</link>, &agrave; la place du <link linkend="userppp">PPP
	en mode utilisateur</link>.</para>

      <para>Les adaptateurs suivants sont connus pour fonctionner avec
	&os;:</para>

      <itemizedlist>
	<listitem>
	  <para>Motorola BitSurfer et Bitsurfer Pro</para>
	</listitem>

	<listitem>
	  <para>Adtran</para>
	</listitem>
      </itemizedlist>

      <para>La plupart des adaptateurs terminaux fonctionneront
	probablement &eacute;galement, les fabricants de TA font en
	sorte que leurs produits acceptent la plupart du jeu de
	commandes AT des modems.</para>

      <para>Le vrai probl&egrave;me avec les adaptateurs terminaux est
	que comme pour les modems, il vous faudra une bonne interface
	s&eacute;rie dans votre ordinateur.</para>

      <para>Vous devriez lire le document sur <ulink
	url="../../articles/serial-uart/index.html">les ports
	s&eacute;rie sous &os;</ulink> pour comprendre en
	d&eacute;tail le fonctionnement des
	p&eacute;riph&eacute;riques s&eacute;rie et les
	diff&eacute;rences entre les ports s&eacute;ries asynchrones
	et synchrones.</para>

      <para>Un adaptateur terminal sur un port s&eacute;rie PC
	standard (asynchrone) vous limite &agrave; 115.2&nbsp;Kbs,
	m&ecirc;me si vous disposez d'une connexion &agrave;
	128&nbsp;Kbs.  Pour utiliser compl&egrave;tement les
	128&nbsp;Kbs offert par l'ISDN, vous devez brancher
	l'adaptateur sur une carte s&eacute;rie synchrone.</para>

      <para>Ne vous imaginez pas qu'il suffit d'acheter un adaptateur
	terminal interne pour s'affranchir du probl&egrave;me
	synchrone/asynchrone.  Les adaptateurs internes disposent
	simplement d'un port s&eacute;rie PC standard.  Tout ce que
	vous y gagnerez sera d'&eacute;conomiser un c&acirc;ble
	s&eacute;rie et de lib&eacute;rer une prise
	&eacute;lectrique.</para>

      <para>Une carte synchrone avec un adaptateur terminal est au
	moins aussi rapide qu'un routeur autonome, pilot&eacute; par
	une simple machine &os;, et probablement plus souple.</para>

      <para>Le choix entre carte synchrone/adaptateur ou routeur
	autonome est une question de go&ucirc;t.  Ce sujet a
	&eacute;t&eacute; aborb&eacute; dans les listes de diffusion.
	Nous vous suggerons de chercher dans les <ulink
	url="../../../../search/index.html">archives</ulink> pour
	obtenir l'int&eacute;gralit&eacute; de la discussion.</para>
    </sect2>

    <sect2>
      <title>Ponts/Routeurs ISDN autonomes</title>
      <indexterm>
	<primary>ISDN</primary>
	<secondary>ponts/routeurs autonomes</secondary>
      </indexterm>

      <para>Les ponts ou routeurs ISDN ne sont pas sp&eacute;cifiques
	&agrave; &os; ou &agrave; tout autre syst&egrave;me
	d'exploitation.  Pour une description compl&egrave;te de la
	technologie du routage et des ponts, veuillez vous reportez
	&agrave; un ouvrage de r&eacute;f&eacute;rence sur les
	r&eacute;seaux.</para>

      <para>Dans le contexte de cette section, les termes de routeur
	et de pont seront utilis&eacute;s
	indiff&eacute;remment.</para>

      <para>Comme le prix des routeurs/ponts ISDN d'entr&eacute;e de
	gamme baissent, il est probable qu'ils deviennent un choix de
	plus en plus populaire.  Un routeur ISDN est une petite
	bo&icirc;te qui se branche directement sur votre r&eacute;seau
	Ethernet, et g&egrave;re sa propre connexion aux autres
	ponts/routeurs.  Il int&egrave;gre le logiciel
	n&eacute;cessaire au support du protocole PPP et d'autres
	protocoles.</para>

      <para>Un routeur vous offrira un d&eacute;bit plus
	&eacute;lev&eacute; qu'un adaptateur terminal standard,
	puisqu'il utilisera une connexion ISDN synchrone.</para>

      <para>Le principal probl&egrave;me avec les routeurs et ponts
	ISDN est que l'int&eacute;rop&eacute;rabilit&eacute; entre les
	mat&eacute;riels des diff&eacute;rents contructeurs n'est pas
	toujours garantie.  Si vous projetez de vous connecter
	&agrave; un fournisseur d'acc&egrave;s Internet, vous devriez
	discuter de vos besoins avec ce dernier.</para>

      <para>Si vous envisagez de connecter ensemble deux
	r&eacute;seaux locaux, comme le r&eacute;seau de votre
	domicile et celui de votre bureau, c'est la solution la plus
	simple et celle qui demande le moins de maintenance.  Etant
	donn&eacute; que vous &ecirc;tes la personne qui ach&egrave;te
	les &eacute;quipements pour les deux extr&eacute;mit&eacute;s,
	vous &ecirc;tes s&ucirc;r que cela fonctionnera.</para>

      <para>Par exemple pour connecter un ordinateur personnel
	situ&eacute; &agrave; son domicile ou le r&eacute;seau d'une
	agence &agrave; celui du si&egrave;ge social, la configuration
	suivante pourra &ecirc;tre utilis&eacute;e:</para>

      <example>
	<title>R&eacute;seau d'agence ou &agrave; domicile</title>

	<indexterm><primary>10 base 2</primary></indexterm>
	<para>Le r&eacute;seau utilise une topologie en bus avec une
	  connectique Ethernet 10 base 2 (&ldquo;thinnet&rdquo;).
	  Connectez le routeur au r&eacute;seau &agrave; l'aide d'un
	  &eacute;metteur/r&eacute;cepteur AUI/10BT si
	  n&eacute;cessaire.</para>

        <mediaobject>
	  <imageobject>
	    <imagedata fileref="advanced-networking/isdn-bus">
	  </imageobject>

	  <textobject>
	    <literallayout class="monospaced">---Station de travail Sun
|
---Machine FreeBSD
|
---Windows 95
|
Routeur autonome
   |
Liaison ISDN BRI</literallayout>
	  </textobject>

	  <textobject>
	    <phrase>Ethernet 10 Base 2</phrase>
	  </textobject>
	</mediaobject>

	<para>Si votre r&eacute;seau de domicile/d'agence n'est
	  constitu&eacute; que d'un seul ordinateur, vous pouvez
	  utiliser une paire torsad&eacute;e crois&eacute;e pour le
	  connecter directement au routeur autonome.</para>
      </example>

      <example>
	<title>Si&egrave;ge social ou autre r&eacute;seau</title>

	<indexterm><primary>10 base T</primary></indexterm>
	<para>Le r&eacute;seau utilise une topologie en &eacute;toile
	  avec une connectique Ethernet 10 base T (&ldquo;paire
	  torsad&eacute;e&rdquo;).</para>

	<mediaobject>
	  <imageobject>
	    <imagedata fileref="advanced-networking/isdn-twisted-pair">
	  </imageobject>

	  <textobject>
	    <literallayout class="monospaced">    -------Serveur Novell
    | H |
    |   ---Sun
    |   |
    | U ---FreeBSD
    |   |
    |   ---Windows 95
    | B |
    |___---Routeur autonome
                |
        Liaison ISDN BRI</literallayout>
	  </textobject>

	  <textobject>
	    <phrase>Architecture du R&eacute;seau ISDN</phrase>
	  </textobject>
	</mediaobject>
      </example>

      <para>Un des principaux avantages de la plupart des
	routeurs/ponts est le fait qu'ils permettent d'avoir deux
	connexions PPP <emphasis>s&eacute;par&eacute;es et
	ind&eacute;pendantes</emphasis> vers deux sites
	diff&eacute;rents et cela en <emphasis>m&ecirc;me</emphasis>
	temps.  Ceci n'est pas support&eacute; par la plupart des
	adaptateurs terminaux, en dehors de mod&egrave;les
	sp&eacute;cifiques (en g&eacute;n&eacute;ral co&ucirc;teux)
	qui disposent de deux ports s&eacute;rie.  Ne confondez pas
	cette possibilit&eacute; avec l'agr&eacute;gation de canaux,
	MPP, etc.</para>

      <para>Ceci peut &ecirc;tre une fonctionnalit&eacute; tr&egrave;s
	utile si, par exemple, vous disposez d'une connexion ISDN
	d&eacute;di&eacute;e au bureau et vous voudriez en profiter
	mais vous ne voulez pas acqu&eacute;rir une nouvelle ligne
	ISDN.  Un routeur au bureau peut g&eacute;rer un canal B
	d&eacute;di&eacute; (64&nbsp;Kbps) vers l'Internet et utiliser
	l'autre canal B pour une autre connexion.  Le deuxi&egrave;me
	canal B peut &ecirc;tre utilis&eacute; pour les connexions
	entrantes, sortantes ou pour l'agr&eacute;gation de canaux
	(MPP, etc.) avec le premier canal B pour augmenter la bande
	passante.</para>

      <indexterm><primary>IPX/SPX</primary></indexterm>
      <para>Un pont Ethernet vous permettra de transmettre autre chose
	que juste du trafic IP.  Vous pouvez &eacute;galement faire
	passer de l'IPX/SPX ou tout autre protocole que vous
	utilisez.</para>
    </sect2>
  </sect1>

  <sect1 id="network-nis">
    <title>NIS/YP ** Traduction en Cours **</title>
    <para></para>
  </sect1>

  <sect1 id="network-dhcp">
    <title>DHCP ** Traduction en Cours **</title>
    <para></para>
  </sect1>

  <sect1 id="network-dns">
    <title>DNS ** Traduction en Cours **</title>
    <para></para>
  </sect1>

  <sect1 id="network-ntp">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Tom</firstname>
	  <surname>Hukins</surname>
	  <contrib>Contribution de </contrib>
	</author>
      </authorgroup>
    </sect1info>
    <title>NTP</title>

    <indexterm><primary>NTP</primary></indexterm>

    <sect2>
      <title>G&eacute;n&eacute;ralit&eacute;s</title>

      <para>Avec le temps, l'horloge d'un ordinateur tend &agrave;
	d&eacute;river.  Comme le temps passe, l'horloge de
	l'ordinateur devient moins pr&eacute;cise.  Le protocole NTP
	(&ldquo;Network Time Protocol&rdquo;) est une des
	mani&egrave;res pour s'assurer que votre horloge est
	correcte.</para>

      <para>De nombreux services Internet ont besoin, ou tirent
	partie, de la pr&eacute;cision des horloges des ordinateurs.
	Par exemple, un serveur Web, peut recevoir des requ&ecirc;tes
	pour n'envoyer un fichier que s'il a &eacute;t&eacute;
	modifi&eacute; depuis un certain temps.  Des services comme
	&man.cron.8; ex&eacute;cutent des commandes &agrave; des
	moments pr&eacute;cis.  Si l'horloge n'est pas pr&eacute;cise,
	ces commandes peuvent de pas fonctionner au moment
	d&eacute;sir&eacute;.</para>

      <indexterm>
	<primary>NTP</primary>
	<secondary>ntpd</secondary>
      </indexterm>
      <para>&os; est fourni avec le serveur NTP &man.ntpd.8; qui peut
	&ecirc;tre utilis&eacute; pour contacter d'autres serveurs NTP
	pour r&eacute;gler l'horloge de votre machine ou pour jouer le
	r&ocirc;le de serveur de temps pour d'autres.</para>
    </sect2>

    <sect2>
      <title>Choisir les serveurs NTP appropri&eacute;s</title>

      <indexterm>
	<primary>NTP</primary>
	<secondary>choisir les serveurs</secondary>
      </indexterm>

      <para>Afin de synchroniser votre horloge, vous devrez trouver un
	ou plusieurs serveurs NTP.  Votre administrateur r&eacute;seau
	ou votre FAI peuvent avoir mis en place un serveur NTP dans
	cet objectif&mdash;consultez leur documentation pour voir si
	c'est le cas.  Il existe une <ulink
	url="http://www.eecis.udel.edu/~mills/ntp/servers.html">liste
	de serveurs NTP accessibles par le publique</ulink> que vous
	pouvez utiliser pour trouver un serveur NTP proche de vous.
	Assurez-vous d'avoir pris connaissance de la politique
	d'utilisation des serveurs que vous choisissez, et demandez la
	permission si n&eacute;cessaire.</para>

      <para>Choisir plusieurs serveurs NTP non-connect&eacute;s entre
	eux est une bonne id&eacute;e au cas o&ugrave; un des serveurs
	que vous utilisez devient inaccessible ou que son horloge
	n'est plus fiable.  &man.ntpd.8; utilise intelligemment les
	r&eacute;ponses qu'il re&ccedil;oit d'autres serveurs&mdash;il
	favorisera les plus fiables par rapport aux moins
	fiables.</para>
    </sect2>

    <sect2>
      <title>Configuration de votre machine</title>

      <indexterm>
	<primary>NTP</primary>
	<secondary>configuration</secondary>
      </indexterm>

      <sect3>
	<title>Configuration de base</title>
	<indexterm><primary>ntpdate</primary></indexterm>

	<para>Si vous d&eacute;sirez synchroniser votre horloge
	  uniquement lors du d&eacute;marrage de la machine, vous
	  pouvez alors employer &man.ntpdate.8;.  Cela peut &ecirc;tre
	  appropri&eacute; pour certaines machines de bureau qui sont
	  fr&eacute;quemment r&eacute;d&eacute;marr&eacute;es et qui
	  ne n&eacute;cessites qu'une synchronisation
	  &eacute;pisodique, cependant la plupart des machines
	  devraient utiliser &man.ntpd.8;.</para>

	<para>Utiliser &man.ntpdate.8; au moment du d&eacute;marrage
	  est &eacute;galement une bonne id&eacute;e pour les machines
	  qui ex&eacute;cutent &man.ntpd.8;.  Le programme
	  &man.ntpd.8; modifie l'horloge graduellement, alors que
	  &man.ntpdate.8; change directement l'horloge, peu importe la
	  diff&eacute;rence entre l'heure actuelle de la machine et
	  l'heure correcte.</para>

	<para>Pour activer &man.ntpdate.8; au d&eacute;marrage,
	  ajoutez la ligne <literal>ntpdate_enable="YES"</literal> au
	  fichier <filename>/etc/rc.conf</filename>.  Vous devrez
	  &eacute;galement pr&eacute;ciser tous les serveurs avec
	  lesquels vous d&eacute;sirez vous synchroniser et tous les
	  indicateurs devant &ecirc;tre pass&eacute;s &agrave;
	  &man.ntpdate.8; avec
	  <literal>ntpdate_flags</literal>.</para>
      </sect3>

      <sect3>
	<indexterm>
	  <primary>NTP</primary>
	  <secondary>ntp.conf</secondary>
	</indexterm>

	<title>Configuration g&eacute;n&eacute;rale</title>

	<para>NTP est configur&eacute; par l'interm&eacute;diaire du
	  fichier <filename>/etc/ntp.conf</filename> suivant le format
	  d&eacute;crit dans la page de manuel &man.ntp.conf.5;.
	  Voici un exemple simple:</para>

	<programlisting>server ntplocal.example.com prefer
server timeserver.example.org
server ntp2a.example.net

driftfile /var/db/ntp.drift</programlisting>

	<para>L'option <literal>server</literal> pr&eacute;cise quels
	  serveurs doivent &ecirc;tre utilis&eacute;s, avec un serveur
	  list&eacute; par ligne.  Si un serveur est
	  sp&eacute;cifi&eacute; avec l'argument
	  <literal>prefer</literal>, comme c'est le cas pour <hostid
	  role="fqdn">ntplocal.example.com</hostid>, ce serveur est
	  pr&eacute;f&eacute;r&eacute; par rapport aux autres
	  serveurs.  Une r&eacute;ponse en provenance d'un serveur
	  <emphasis>pr&eacute;f&eacute;r&eacute;</emphasis> sera
	  ignor&eacute;e si elle diff&egrave;re de fa&ccedil;on
	  significative des r&eacute;ponses des autres serveurs, sinon
	  elle sera utilis&eacute;e sans consid&eacute;rer les autres
	  r&eacute;ponses.  L'argument <literal>prefer</literal> est
	  normalement employ&eacute; pour les serveurs NTP qui sont
	  connus pour leur grande pr&eacute;cision, comme ceux avec
	  des syst&egrave;mes sp&eacute;ciaux de contr&ocirc;le du
	  mat&eacute;riel.</para>

	<para>L'option <literal>driftfile</literal> pr&eacute;cise
	  quel fichier est utilis&eacute; pour stocker le
	  d&eacute;calage de fr&eacute;quence de l'horloge.  Le
	  programmme &man.ntpd.8; l'utilise pour compenser
	  automatiquement la d&eacute;rive naturelle de l'horloge,
	  permettant de maintenir un r&eacute;glage raisonnablement
	  correct m&ecirc;me s'il est coup&eacute; d'autres sources
	  ext&eacute;rieures de temps pendant une certaine
	  p&eacute;riode.</para>

	<para>L'option <literal>driftfile</literal> pr&eacute;cise
	  &eacute;galement quel fichier est utilis&eacute; pour
	  stocker l'information concernant les r&eacute;ponses
	  pr&eacute;c&eacute;dentes des serveurs NTP que vous
	  utilisez.  Il ne devrait pas &ecirc;tre modifi&eacute; par
	  un autre processus.</para>
      </sect3>

      <sect3>
	<title>Contr&ocirc;ler l'acc&egrave;s &agrave; votre
	  serveur</title>

	<para>Par d&eacute;faut, votre serveur NTP sera accessible par
	  toutes les machines sur l'Internet.  L'option
	  <literal>restrict</literal> du fichier
	  <filename>/etc/ntp.conf</filename> vous permet de
	  contr&ocirc;ler quelles machines peuvent acc&eacute;der
	  &agrave; votre serveur.</para>

	<para>Si vous voulez refuser &agrave; tout le monde
	  l'acc&egrave;s &agrave; votre serveur NTP, ajoutez la ligne
	  suivante au fichier
	  <filename>/etc/ntp.conf</filename>:</para>

        <programlisting>restrict default ignore</programlisting>

	<para>Si vous d&eacute;sirez autoriser uniquement
	  l'acc&egrave;s aux machines de votre r&eacute;seau pour
	  qu'elles puissent synchroniser leur horloge, tout en vous
	  assurant qu'elles ne peuvent configurer le serveur ou
	  &ecirc;tre utilis&eacute;es comme point de de
	  synchronisation, ajoutez:</para>

        <programlisting>restrict 192.168.1.0 mask 255.255.255.0 notrust nomodify notrap</programlisting>

	<para>&agrave; la place, o&ugrave; <hostid
	  role="ipaddr">192.168.1.0</hostid> est une adresse IP de
	  votre r&eacute;seau et <hostid
	  role="netmask">255.255.255.0</hostid> est votre masque de
	  sous-r&eacute;seau.</para>

	<para>Le fichier <filename>/etc/ntp.conf</filename> peut
	  contenir plusieurs options <literal>restrict</literal>.
	  Pour plus de d&eacute;tails, lisez la section
	  <literal>Access Control Support</literal> de la page de
	  manuel &man.ntp.conf.5;.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>Ex&eacute;cuter le serveur NTP</title>

      <para>Pour s'assurer que le serveur NTP est lanc&eacute; au
	d&eacute;marrage, ajoutez la ligne
	<literal>xntpd_enable="YES"</literal> dans le fichier
	<filename>/etc/rc.conf</filename>.  Si vous d&eacute;sirez
	passer des indicateurs suppl&eacute;mentaires &agrave;
	&man.ntpd.8;, &eacute;ditez les param&egrave;tres de l'option
	<varname>xntpd_flags</varname> dans
	<filename>/etc/rc.conf</filename>.</para>

      <para>Pour lancer le serveur sans red&eacute;marrer votre
	machine, ex&eacute;cutez <command>ntpd</command> en
	&eacute;tant s&ucirc;r de pr&eacute;ciser tout
	param&egrave;tre suppl&eacute;mentaire de
	<varname>xntpd_flags</varname> dans
	<filename>/etc/rc.conf</filename>.  Par exemple:</para>

      <screen>&prompt.root; <userinput>ntpd -p /var/run/ntpd.pid</userinput></screen>

      <note>
	<para>Sous &os;&nbsp;5.X, diverses options du fichier
	  <filename>/etc/rc.conf</filename> ont &eacute;t&eacute;
	  renomm&eacute;es.  Ainsi, vous devez remplacer chaque
	  <literal>xntpd</literal> par <literal>ntpd</literal> dans les
	  options ci-dessus.</para></note>
    </sect2>

    <sect2>
      <title>Utiliser ntpd avec une connexion Internet
	temporaire</title>

      <para>Le programme &man.ntpd.8; n'a pas besoin d'une connexion
	permanente &agrave; l'Internet pour fonctionner correctement.
	Cependant, si vous disposez d'une connextion temporaire qui
	est configur&eacute;e de telle sorte qu'il y ait
	&eacute;tablissement de la connexion &agrave; la demande,
	c'est une bonne id&eacute;e d'emp&ecirc;cher le trafic NTP de
	d&eacute;clencher la num&eacute;rotation ou de maintenir
	constamment &eacute;tablie la connexion.  Si vous utilisez PPP
	en mode utilisateur, vous pouvez employer les directives
	<literal>filter</literal> dans le fichier
	<filename>/etc/ppp/ppp.conf</filename>.  Par exemple:</para>

      <programlisting> set filter dial 0 deny udp src eq 123
 # Emp&ecirc;che le trafic NTP de lancer une connexion
 set filter dial 1 permit 0 0
 set filter alive 0 deny udp src eq 123
 # Emp&ecirc;che le trafic NTP entrant de garder la connexion &eacute;tablie
 set filter alive 1 deny udp dst eq 123
 # Emp&ecirc;che le trafic NTP sortant de garder la connexion &eacute;tablie
 set filter alive 2 permit 0/0 0/0</programlisting>

      <para>Pour plus de d&eacute;tails lisez la section
	<literal>PACKET FILTERING</literal> de la page de manuel
	&man.ppp.8; et les exemples du r&eacute;pertoire <filename
	role="directory">/usr/share/examples/ppp/</filename>.</para>

      <note>
	<para>Certains fournisseurs d'acc&egrave;s Internet bloquent
	  les ports dont le num&eacute;ro est faible, emp&ecirc;chant
	  NTP de fonctionner puisque les r&eacute;ponses n'atteingnent
	  jamais votre machine.</para>
      </note>
    </sect2>

    <sect2>
      <title>Information suppl&eacute;mentaire</title>

      <para>La documentation pour le serveur NTP peut &ecirc;tre
	trouv&eacute; dans le r&eacute;pertoire <filename
	role="directory">/usr/share/doc/ntp/</filename> sous le format
	HTML.</para>
    </sect2>
  </sect1>

  <sect1 id="network-natd">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Chern</firstname>
	  <surname>Lee</surname>
	  <contrib>Contribution de </contrib>
	</author>
      </authorgroup>
    </sect1info>
    <title>Translation d'adresses</title>

    <sect2 id="network-natoverview">
      <title>G&eacute;n&eacute;ralit&eacute;s</title>
      <indexterm>
	<primary><application>natd</application></primary>
      </indexterm>
      <para>Le &ldquo;daemon&rdquo; de translation d'adresses
	(&ldquo;Network Address Translation&rdquo;&mdash;NAT) de &os;,
	g&eacute;n&eacute;ralement connu sous le nom de &man.natd.8; est
	un &ldquo;daemon&rdquo; qui accepte les paquets IP entrants,
	change l'adresse de la source par celle de la machine locale et
	r&eacute;-injecte les paquets dans le flux sortant des paquets
	IP.  Le programme &man.natd.8; effectue cela en changeant
	l'adresse IP et le port source de sorte quand les donn&eacute;es
	r&eacute;ponse arrivent il soit en mesure de d&eacute;terminer
	la provenance des donn&eacute;es d'origine et les
	transf&eacute;rer &agrave; l'&eacute;metteur original.</para>

      <indexterm><primary>Partage de connexion Internet</primary></indexterm>
      <indexterm><primary>IP masquerading</primary></indexterm>

      <para>L'utilisation classique de NAT est le partage de connexion
	Internet.</para>
    </sect2>

    <sect2 id="network-natsetup">
      <title>Architecture du r&eacute;seau</title>

      <para>En raison de la diminution du nombre d'adresses IP libres
	sous IPv4, et de l'augmentation du nombre d'utilisateurs de
	lignes haut-d&eacute;bit comme le c&acirc;ble ou l'ADSL, le
	besoin d'utiliser une solution de partage de connexion est
	donc en constante augmentation.  La possibilit&eacute; de
	connecter plusieurs ordinateurs par l'interm&eacute;diaire
	d'une connexion et d'une adresse IP fait de &man.natd.8; une
	solution de choix.</para>

      <para>Plus g&eacute;n&eacute;ralement, un utilisateur dispose
	d'une machine connect&eacute; sur la c&acirc;ble ou une ligne
	ADSL avec une adresse IP et d&eacute;sire utiliser cet
	ordinateur connect&eacute; pour fournir un acc&egrave;s
	Internet &agrave; d'autres machines du r&eacute;seau
	local.</para>

      <para>Pour cela, la machine &os; sur Internet doit jouer le
	r&ocirc;le de passerelle.  Cette machine passerelle doit avoir
	deux cartes r&eacute;seaux&mdash;l'une pour se connecter au
	routeur Internet, l'autre est connect&eacute;e au
	r&eacute;seau local.  Toutes les machines du r&eacute;seau
	local sont connect&eacute;es par l'interm&eacute;diaire d'un
	hub ou d'un switch.</para>

      <mediaobject>
	<imageobject>
	  <imagedata fileref="advanced-networking/natd">
	</imageobject>

	<textobject>
	  <literallayout class="monospaced">  _______       __________       _________
 |       |     |          |     |         |
 |  Hub  |-----| Client B |-----| Routeur |----- Internet
 |_______|     |__________|     |_________|
     |
 ____|_____
|          |
| Client A |
|__________|</literallayout>
	</textobject>

	<textobject>
	  <phrase>Organisation du r&eacute;seau</phrase>
	</textobject>
      </mediaobject>

      <para>Une telle configuration est commun&eacute;ment
	utilis&eacute;e pour partager une connexion Internet.  Une des
	machines du r&eacute;seau local est connect&eacute;e &agrave;
	Internet.  Le reste des machines acc&egrave;de &agrave;
	Internet par l'interm&eacute;diaire de cette machine
	&ldquo;passerelle&rdquo;.</para>
    </sect2>

    <sect2 id="network-natdkernconfiguration">
      <indexterm>
	<primary>noyau</primary>
	<secondary>configuration</secondary>
      </indexterm>
      <title>Configuration</title>

      <para>Les options suivantes doivent &ecirc;tre pr&eacute;sentes
	dans le fichier de configuration du noyau:</para>

      <programlisting>options IPFIREWALL
options IPDIVERT</programlisting>

      <para>De plus, les options suivantes peuvent &eacute;galement
	&ecirc;tre utiles:</para>

      <programlisting>options IPFIREWALL_DEFAULT_TO_ACCEPT
options IPFIREWALL_VERBOSE</programlisting>

      <para>Ce qui suit doit figurer dans le fichier
	<filename>/etc/rc.conf</filename>:</para>

      <programlisting>gateway_enable="YES"
firewall_enable="YES"
firewall_type="OPEN"
natd_enable="YES"
natd_interface="<replaceable>fxp0</replaceable>"
natd_flags=""</programlisting>

      <informaltable frame="none">
        <tgroup cols="2">
	  <tbody>
	    <row>
	      <entry>gateway_enable="YES"</entry>
	      <entry>Configure la machine comme passerelle.
		Ex&eacute;cuter
		<command>sysctl net.inet.ip.forwarding=1</command>
		aurait le m&ecirc;me effet.</entry>
	    </row>
	    <row><entry>firewall_enable="YES"</entry>
	      <entry>Active les r&egrave;gles du coupe-feu se
		trouvant dans le fichier
		<filename>/etc/rc.firewall</filename> au
		d&eacute;marrage.</entry>
	    </row>
	    <row><entry>firewall_type="OPEN"</entry>
	      <entry>Cela sp&eacute;cifie un ensemble de r&egrave;gles
		pr&eacute;d&eacute;finies pour le coupe-feu qui autorise
		tous les paquets entrant.  Consultez le fichier
		<filename>/etc/rc.firewall</filename> pour d'autres
		ensembles de r&eacute;gles.</entry>
	    </row>
	    <row>
	      <entry>natd_interface="fxp0"</entry>
	      <entry>Indique &agrave; travers quelle interface
		transf&eacute;rer les paquets (l'interface
		connect&eacute;e &agrave; l'Internet).</entry>
	    </row>
	    <row>
	      <entry>natd_flags=""</entry>
	      <entry>Toutes options de configuration
		suppl&eacute;mentaires pass&eacute;es &agrave;
		&man.natd.8; au d&eacute;marrage.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Le fait d'avoir les options pr&eacute;c&eacute;dentes
	d&eacute;finies dans le fichier
	<filename>/etc/rc.conf</filename> lancera la commande
	<filename>/etc/rc.conf</filename> au d&eacute;marrage.  Cette
	commande peut &ecirc;tre &eacute;galement
	ex&eacute;cut&eacute;e &agrave; la main.</para>

      <para>A chaque machine et interface derri&egrave;re le
	r&eacute;seau local doit &ecirc;tre assign&eacute; une adresse
	IP de l'espace d'adresses priv&eacute;es comme d&eacute;fini
	par la <ulink url="ftp://ftp.isi.edu/in-notes/rfc1918.txt">RFC
	1918</ulink> et doit disposer d'une passerelle par
	d&eacute;faut qui est l'adresse IP interne de la machine
	&man.natd.8;.</para>

      <para>Par exemple, les clients <hostid>A</hostid> et
	<hostid>B</hostid> du r&eacute;seau local ont les adresses IP
	<hostid role="ipaddr">192.168.0.2</hostid> et <hostid
	role="ipaddr">192.168.0.3</hostid>, tandis que l'interface sur
	le r&eacute;seau local de la machine
	<application>natd</application> a pour adresse IP <hostid
	role="ipaddr">192.168.0.1</hostid>.  La passerelle par
	d&eacute;faut des clients <hostid>A</hostid> et
	<hostid>B</hostid> doit &ecirc;tre l'adresse <hostid
	role="ipaddr">192.168.0.1</hostid> de la machine
	<application>natd</application>.  L'interface externe ou
	Internet de cette derni&egrave;re ne demande aucune
	modification sp&eacute;cifique pour que &man.natd.8; puisse
	fonctionner.</para>
    </sect2>

    <sect2 id="network-natdport-redirection">
      <title>Redirection de ports</title>

      <para>L'inconv&eacute;nient avec &man.natd.8; est que les
	clients du r&eacute;seau local ne sont pas accessibles depuis
	l'Internet.  Les clients sur le r&eacute;seau local peuvent
	&eacute;tablir des connexions sortantes vers le monde
	ext&eacute;rieur mais ne peuvent recevoir de connexions
	entrantes.  Cela pr&eacute;sente un probl&egrave;me si l'on
	tente de faire tourner des services Internet sur une des
	machines du r&eacute;seau local.  Une solution simple &agrave;
	ce probl&egrave;me est de rediriger les ports Internet
	s&eacute;lectionn&eacute;s de la machine
	<application>natd</application> vers le client sur le
	r&eacute;seau local.</para>

      <para>Par exemple, un serveur IRC tourne sur le client
	<hostid>A</hostid>, et un serveur web sur le client
	<hostid>B</hostid>.  Pour que cela fonctionne correctement,
	les connections re&ccedil;ues sur les ports 6667 (IRC) et 80
	(web) doivent &ecirc;tre redirig&eacute;es vers les machines
	correspondantes.</para>

      <para>L'option <option>-redirect_port</option> doit &ecirc;tre
	pass&eacute;e &agrave; &man.natd.8; avec les autres options
	ad&eacute;quates.  La syntaxe est la suivante:</para>

      <programlisting>-redirect_port proto targetIP:targetPORT[-targetPORT]
                 [aliasIP:]aliasPORT[-aliasPORT]
                 [remoteIP[:remotePORT[-remotePORT]]]</programlisting>

      <para>Dans l'exemple pr&eacute;c&eacute;dent, l'argument
	pass&eacute; &agrave; la commande devrait &ecirc;tre:</para>

      <programlisting>-redirect_port tcp 192.168.0.2:6667 6667
-redirect_port tcp 192.168.0.3:80 80</programlisting>

      <para>Cela va rediriger les ports <emphasis>tcp</emphasis>
	voulus vers les machines du r&eacute;seau local.</para>

      <para>L'option <option>-redirect_port</option> peut &ecirc;tre
	utilis&eacute;e pour indiquer une plage de ports plut&ocirc;t
	que des ports individuels.  Par exemple <replaceable>tcp
	192.168.0.2:2000-3000 2000-3000</replaceable> redirigerait
	toutes les connexions re&ccedil;ues sur les ports 2000
	&agrave; 3000 vers les ports 2000 &agrave; 3000 du client
	<hostid>A</hostid>.</para>

      <para>Ces options peuvent &ecirc;tre utilis&eacute;es quand on
	ex&eacute;cute directement &man.natd.8;  ou plac&eacute;es dans
	l'option <literal>natd_flags=""</literal> du fichier
	<filename>/etc/rc.conf</filename>.</para>

      <para>Pour plus d'&eacute;l&eacute;ments et d'options de
	configuration consultez la page de manuel &man.natd.8;</para>
    </sect2>

    <sect2 id="network-natdaddress-redirection">
      <title>Redirection d'adresses</title>
      <indexterm><primary>redirection d'adresses</primary></indexterm>

      <para>La redirection d'adresses est utile si plusieurs adresses
	IP sont disponibles mais doivent se trouver sur une seule
	machine.  Avec cela, &man.natd.8; peut assigner &agrave;
	chaque client du r&eacute;seau local sa propre adresse IP
	externe.  Le programme &man.natd.8; r&eacute;crit alors les
	paquets sortant des clients du r&eacute;seau local avec
	l'adresse IP externe correcte et redirige tout le trafic
	entrant sur une adresse IP particuli&egrave;re vers la machine
	du r&eacute;seau local correspondante.  Ce principe est
	&eacute;galement connu sous le nom de translation d'adresses
	statique.  Par exemple, les adresses IP <hostid
	role="ipaddr">128.1.1.1</hostid>, <hostid
	role="ipaddr">128.1.1.2</hostid>, et <hostid
	role="ipaddr">128.1.1.3</hostid> appartiennent &agrave; la
	passerelle <application>natd</application>.  L'adresse <hostid
	role="ipaddr">128.1.1.1</hostid> peut &ecirc;tre
	utilis&eacute;e comme adresse IP externe de la passerelle
	<application>natd</application>, tandis que <hostid
	role="ipaddr">128.1.1.2</hostid> et <hostid
	role="ipaddr">128.1.1.3</hostid> sont redirig&eacute;es vers
	les machines <hostid>A</hostid> et <hostid>B</hostid> du
	r&eacute;seau local.</para>

      <para>La syntaxe de l'option <option>-redirect_address</option>
	est la suivante:</para>

      <programlisting>-redirect_address localIP publicIP</programlisting>

      <informaltable frame="none">
	<tgroup cols="2">
	  <tbody>
	    <row>
	      <entry>localIP</entry>
	      <entry>L'adresse IP interne du client sur le
		r&eacute;seau local.</entry>
	    </row>
	    <row>
	      <entry>publicIP</entry>
	      <entry>L'adresse IP externe correspondant au client sur
		le r&eacute;seau local.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Dans l'exemple, les arguments pass&eacute;s &agrave; la
	commande seraient:</para>

      <programlisting>-redirect_address 192.168.0.2 128.1.1.2
-redirect_address 192.168.0.3 128.1.1.3</programlisting>

      <para>Comme pour l'option <option>-redirect_port</option>, ces
	options peuvent &ecirc;tre plac&eacute;es dans l'option
	<literal>natd_flags=""</literal> du fichier
	<filename>/etc/rc.conf</filename>.  Avec la redirection
	d'adresse, il n'y a pas besoin de redirection de ports puisque
	toutes les donn&eacute;es re&ccedil;ues sur une IP
	particuli&egrave;re sont redirig&eacute;es.</para>

      <para>Les adresses IP sur la machine
	<application>natd</application> doivent &ecirc;tre active et
	pointer sur l'interface externe.  Consultez la page de manuel
	&man.rc.conf.5; pour cela.</para>
    </sect2>
  </sect1>

  <sect1 id="network-inetd">
    <title>inetd <quote>Super-Server</quote> ** Traduction en Cours **</title>

    <sect2 id="network-inetd-overview">
      <title>Overview</title>
      <para></para>
    </sect2>

    <sect2 id="inetd-settings">
      <title>Settings</title>
      <para></para>
    </sect2>

    <sect2 id="inetd-cmdline">
      <title>Command-Line Options</title>
      <para></para>
    </sect2>

    <sect2 id="inetd-conf">
      <title><filename>inetd.conf</filename></title>
      <para></para>
    </sect2>

    <sect2 id="inetd-security">
      <title>Security</title>
      <para></para>
    </sect2>

    <sect2 id="inetd-misc">
      <title>Miscellaneous</title>
      <para></para>
    </sect2>
  </sect1>

  <sect1 id="network-plip">
    <title>IP sur liaison parall&egrave;le (PLIP)</title>

    <indexterm><primary>PLIP</primary></indexterm>
    <indexterm><primary>IP sur liaison parall&egrave;le</primary></indexterm>

    <para>PLIP nous permet d'utiliser le protocole TCP/IP entre ports
      parall&egrave;les.  C'est utile sur des machines sans cartes
      r&eacute;seaux, ou pour effectuer une installation sur
      ordinateur portable.  Dans cette section nous aborderons:</para>

    <itemizedlist>
      <listitem>
	<para>La fabrication d'un c&acirc;ble parall&egrave;le
	  (&ldquo;laplink&rdquo;).</para>
      </listitem>

      <listitem>
	<para>La connexion de deux ordinateurs via PLIP.</para>
      </listitem>
    </itemizedlist>

    <sect2 id="network-create-parallel-cable">
      <title>Fabriquer un c&acirc;ble parall&egrave;le</title>

      <para>Vous pouvez acheter un c&acirc;ble parall&egrave;le
	aupr&egrave;s de la plupart des vendeurs de mat&eacute;riel
	informatique.  Si ce n'est pas le cas, ou d&eacute;sirez
	savoir comment est fait un tel c&acirc;ble, le tableau suivant
	montre comment en faire un &agrave; partir d'un c&acirc;ble
	parall&egrave;le d'imprimante.</para>

      <table>
	<title>C&acirc;blage d'un c&acirc;ble parall&egrave;le pour
	  r&eacute;seau</title>

	<tgroup cols="5">
	  <thead>
	    <row>
	      <entry>A-name</entry>

	      <entry>A-End</entry>

	      <entry>B-End</entry>

	      <entry>Descr.</entry>

	      <entry>Post/Bit</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><literallayout>DATA0
-ERROR</literallayout></entry>

	      <entry><literallayout>2
15</literallayout></entry>

	      <entry><literallayout>15
2</literallayout></entry>

	      <entry>Data</entry>

	      <entry><literallayout>0/0x01
1/0x08</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA1
+SLCT</literallayout></entry>

	      <entry><literallayout>3
13</literallayout></entry>

	      <entry><literallayout>13
3</literallayout></entry>

	      <entry>Data</entry>

	      <entry><literallayout>0/0x02
1/0x10</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA2
+PE</literallayout></entry>

	      <entry><literallayout>4
12</literallayout></entry>

	      <entry><literallayout>12
4</literallayout></entry>

	      <entry>Data</entry>

	      <entry><literallayout>0/0x04
1/0x20</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA3
-ACK</literallayout></entry>

	      <entry><literallayout>5
10</literallayout></entry>

	      <entry><literallayout>10
5</literallayout></entry>

	      <entry>Strobe</entry>

	      <entry><literallayout>0/0x08
1/0x40</literallayout></entry>
	    </row>

	    <row>
	      <entry><literallayout>DATA4
BUSY</literallayout></entry>

	      <entry><literallayout>6
11</literallayout></entry>

	      <entry><literallayout>11
6</literallayout></entry>

	      <entry>Data</entry>

	      <entry><literallayout>0/0x10
1/0x80</literallayout></entry>
	    </row>

	    <row>
	      <entry>GND</entry>

	      <entry>18-25</entry>

	      <entry>18-25</entry>

	      <entry>GND</entry>

	      <entry>-</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect2>

    <sect2 id="network-plip-setup">
      <title>Configurer PLIP</title>

      <para>Tout d'abord procurez-vous un c&acirc;ble
	&ldquo;laplink&rdquo;.  V&eacute;rifiez ensuite que les deux
	ordinateurs disposent d'un noyau avec le support pour le
	pilote de p&eacute;riph&eacute;rique &man.lpt.4;.</para>

      <screen>&prompt.root; <userinput>grep lp /var/run/dmesg.boot</userinput>
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port</screen>

      <para>Le port parall&egrave;le doit fonctionner sous interruption,
	sous &os;&nbsp;4.X vous devriez avoir une ligne semblable
	&agrave; la ligne suivante dans le fichier de configuration du
	noyau:</para>

      <programlisting>device ppc0 at isa? irq 7</programlisting>

      <para>Sous &os;&nbsp;5.X, le fichier
	<filename>/boot/device.hints</filename> devrait contenir les
	lignes suivantes:</para>

      <programlisting>hint.ppc.0.at="isa"
hint.ppc.0.irq="7"</programlisting>

      <para>Ensuite v&eacute;rifiez si le fichier de configuration du
	noyau contient une ligne <literal>device plip</literal>
	ou si le module <filename>plip.ko</filename> est charg&eacute;.
	Dans les deux cas l'interface r&eacute;seau parall&egrave;le
	devrait appara&icirc;tre quand vous utilisez directement la
	commande &man.ifconfig.8;.  Sous &os;&nbsp;4.X de cette
	mani&egrave;re:</para>

      <screen>&prompt.root; <userinput>ifconfig lp0</userinput>
lp0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</screen>

      <para>et sous &os;&nbsp;5.X:</para>

      <screen>&prompt.root; <userinput>ifconfig plip0</userinput>
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</screen>

      <note><para>Le nom de p&eacute;riph&eacute;rique utilis&eacute;
	pour l'interface parall&egrave;le est diff&eacute;rent entre
	&os;&nbsp;4.X
	(<devicename>lp<replaceable>X</replaceable></devicename>)
	et &os;&nbsp;5.X
	(<devicename>plip<replaceable>X</replaceable></devicename>).</para></note>

      <para>Branchez le c&acirc;ble &ldquo;laplink&rdquo; sur les
	interfaces parall&egrave;les des deux ordinateurs.</para>

      <para>Configurez les param&egrave;tres de l'interface
	r&eacute;seau des deux c&ocirc;t&eacute;s en tant que
	<username>root</username>.  Par exemple, si vous voulez
	connecter la machine <hostid>host1</hostid> fonctionnant sous
	&os;&nbsp;4.X avec la machine <hostid>host2</hostid> tournant
	sous &os;&nbsp;5.X:</para>

      <programlisting>                 host1 &lt;-----&gt; host2
IP Address    10.0.0.1      10.0.0.2</programlisting>

      <para>Configurez l'interface sur <hostid>host1</hostid> en tapant:</para>

      <screen>&prompt.root; <userinput>ifconfig lp0 10.0.0.1 10.0.0.2</userinput></screen>

      <para>Configurez l'interface sur <hostid>host2</hostid> en tapant:</para>

      <screen>&prompt.root; <userinput>ifconfig plip0 10.0.0.2 10.0.0.1</userinput></screen>

      <para>Vous devriez avoir maintenant une connexion qui
	fonctionne.  Veuillez consulter les pages de manuel &man.lp.4;
	et &man.lpt.4; pour plus de d&eacute;tails.</para>

      <para>Vous devriez &eacute;galement ajouter les deux noms de
	machines dans le fichier
	<filename>/etc/hosts</filename>:</para>

      <programlisting>127.0.0.1               localhost.my.domain localhost
10.0.0.1                host1.my.domain host1
10.0.0.2                host2.my.domain</programlisting>

      <para>Pour v&eacute;rifier le bon fonctionnement de la connexion,
	aller sur les deux machines et effectuez un &ldquo;ping&rdquo;
	vers l'autre machine.  Par exemple, sur
	<hostid>host1</hostid>:</para>

      <screen>&prompt.root; <userinput>ifconfig lp0</userinput>
lp0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000
&prompt.root; <userinput>netstat -r</userinput>
Routing tables

Internet:
Destination        Gateway          Flags     Refs     Use      Netif Expire
host2              host1              UH          0       0       lp0
&prompt.root; <userinput>ping -c 4 host2</userinput>
PING host2 (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- host2 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</screen>
    </sect2>
  </sect1>

  <sect1 id="network-ipv6">
    <title>IPv6 ** Traduction en Cours **</title>
    <para></para>
  </sect1>
</chapter>

<!--
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->
<!--  LocalWords:  config mnt www -->
